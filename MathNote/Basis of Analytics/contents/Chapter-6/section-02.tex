\documentclass[../../main.tex]{subfiles}
\graphicspath{{\subfix{../../image/}}} % 指定图片目录,后续可以直接使用图片文件名。

% 例如:
% \begin{figure}[H]
% \centering
% \includegraphics[scale=0.4]{图.png}
% \caption{}
% \label{figure:图}
% \end{figure}
% 注意:上述\label{}一定要放在\caption{}之后,否则引用图片序号会只会显示??.

\begin{document}

\section{函数方程}

\begin{definition}
我们称\(f:\mathbb{R}\to\mathbb{R}\)满足的方程
\[
f(x + y)=f(x)+f(y).
\]
为\textbf{Cauchy方程}.
\end{definition}
\begin{note}
显然\(f(x)=cx,c\in\mathbb{R}\)为Cauchy方程的解,一个自然的问题是,满足Cauchy方程的函数\(f\)是否一定是\(cx\)?
\end{note}

\begin{proposition}[Cauchy方程基本性质]\label{proposition:Cauchy方程基本性质}
设\(f:\mathbb{R}\to\mathbb{R}\)是Cauchy方程:$f(x + y)=f(x)+f(y)$的解,则
\[
f(rx)=rf(x),\forall r\in\mathbb{Q}.
\]
\end{proposition}
\begin{proof}
\(\forall x\in \mathbb{R}\)，由条件可知 \(f(2x)=f(x)+f(x)=2f(x)\)，然后就有
\[
f(3x)=f(2x)+f(x)=2f(x)+f(x)=3f(x).
\]
依次下去可得
\begin{align}
f(nx)=nf(x),\forall n\in \mathbb{N}_+. \label{proposition6.10-1.1}
\end{align}
现在对 \(\forall r = \frac{q}{p}\in \mathbb{Q},p\neq 0,q,p\in \mathbb{Z}\)。我们由条件可得
\begin{align}
rf(x)=f(rx)\Leftrightarrow qf(x)=pf\left(\frac{q}{p}x\right).\label{proposition6.10-1.2}
\end{align}
利用 \eqref{proposition6.10-1.1}式可得
\[
pf\left(\frac{q}{p}x\right)=f(qx)=qf(x).
\]
故由 \eqref{proposition6.10-1.2}式可知，对 \(\forall x\in \mathbb{R}\)，有 \(rf(x)=f(rx),\forall r\in \mathbb{Q}\) 成立。
\end{proof}

\begin{theorem}\label{theorem:Cauchy方程加上连续性就能得到解是线性函数}
设\(f:\mathbb{R}\to\mathbb{R}\)满足Cauchy方程:$f(x + y)=f(x)+f(y)$且$f$在$\mathbb{R}$上连续,则
\[
f(x)=f(1)x,\forall x\in\mathbb{R}.
\]
\end{theorem}
\begin{proof}
由\hyperref[proposition:Cauchy方程基本性质]{命题\ref{proposition:Cauchy方程基本性质}}可知，对 \(\forall x\in \mathbb{R}\)，有
\begin{align}
rf(x)=f(rx),\forall r\in \mathbb{Q}. \label{theorem6.4-2.1}  
\end{align}
成立。现在对每个无理数 \(a\)，由有理数的稠密性可知，存在有理数列 \(\{r_n\}_{n = 1}^{\infty}\)，使得 \(\lim_{n\rightarrow \infty}r_n=a\)。于是由 \(f\) 的连续性及 \eqref{theorem6.4-2.1} 式可得
\[
f(ax)=\lim_{n\rightarrow \infty}f(r_nx)=\lim_{n\rightarrow \infty}r_nf(x)=af(x),\forall x\in \mathbb{R}.
\]
故$f(ax)=af(x),\forall a,x\in\mathbb{R}$.取$x=1$,则$f(a)=f(1)a,\forall a\in\mathbb{R}.$
\end{proof}

\begin{theorem}[Cauchy方程基本定理]\label{theorem:Cauchy方程基本定理}
设\(f:\mathbb{R}\to\mathbb{R}\)是Cauchy方程:$f(x + y)=f(x)+f(y)$的解，则满足下述条件之一:
\begin{enumerate}
\item \(f\)在某点连续.

\item  \(f\)在某个区间有上界或者下界.

\item  \(f\)在某个区间上单调.

\item  \(f\)在一个正测集上有界.

\item   \(f\)可测.

\item \(\{(x,f(x)):x\in\mathbb{R}\}\)在\(\mathbb{R}^2\)不稠密.
\end{enumerate}
我们就有\(f(x)=f(1)x,\forall x\in\mathbb{R}\)。
\end{theorem}
\begin{remark}
\hypertarget{不妨设的原因112}{不妨设\(f\)在包含原点的对称区间\(I\)上有上界原因:}假设已证 \(f\) 在 \((-a,a)\) 上有上界时，结论成立。

如果 \(f\) 在 \((c,d)\) 上有上界，那么记 \(x_0 = \frac{c + d}{2},a = \frac{d - c}{2}\)($x_0$可根据我们的期望,待定系数得到,具体见豌豆讲义)，则 \((c,d)=(x_0 - a,x_0 + a)\)，即
\(f\) 在 \((x_0 - a,x_0 + a)\) 上有上界。从而令 \(g(x)=f(x + x_0)-f(x_0)\)，则由条件可得
\begin{align*}
g(x + y)&=f(x + y + x_0)-f(x_0)
=f(x + y + 2x_0 - x_0)-f(x_0)\\
&=f(x + x_0)+f(y + x_0 - x_0)-f(x_0)
=f(x + x_0)+f(y + x_0)-2f(x_0)\\
&=g(x)+g(y).
\end{align*}
故 \(g(x)\) 满足 Cauchy 方程且在 \((-a,a)\) 上有上界，于是由假设可知，\(g(x)=g(1)x,\forall x\in \mathbb{R}\)。又注意到
\begin{align*}
g(x)=f(x+x_0)-f(x_0)=f(x+x_0)+f(-x_0)=f(x).
\end{align*}
故$f(x)=g(x)=g(1)x=f(1)x,\forall x\in\mathbb{R}.$
因此不妨设合理。
\end{remark}
\begin{proof}
\begin{enumerate}
\item 如果\(f\)在\(x_0\)连续，则对任何\(x'\in\mathbb{R}\)，有
\[
\lim_{x\rightarrow x'} f(x)=\lim_{x\rightarrow x'} f(x - x'+x_0)+\lim_{x\rightarrow x'} f(x' - x_0)=f(x_0)+f(x' - x_0)=f(x').
\]
于是我们证明了\(f\)在\(x'\)连续.于是由\hyperref[theorem:Cauchy方程加上连续性就能得到解是线性函数]{定理\ref{theorem:Cauchy方程加上连续性就能得到解是线性函数}}我们知道\(f(x)=f(1)x,\forall x\in\mathbb{R}\).

\item \hyperlink{不妨设的原因112}{不妨设\(f\)在包含原点的对称区间\(I\)上有上界}. 下证\(f\)在原点连续. 注意到由\hyperref[proposition:Cauchy方程基本性质]{命题\ref{proposition:Cauchy方程基本性质}}我们知道
\begin{align}
f(x)=\frac{f(rx)}{r},\forall r\in\mathbb{Q}\setminus\{0\},x\in\mathbb{R}.\label{equation212-12.11}
\end{align}
现在对任何\(\lim_{n\rightarrow\infty}x_n = 0\)，取\(r_n\in\mathbb{Q}\setminus\{0\}\)使得
\begin{align}
\lim_{n\rightarrow\infty}r_n=+\infty,\lim_{n\rightarrow\infty}r_nx_n = 0.\label{equation212-12.12} 
\end{align}
注意到在\eqref{equation212-12.11}中令\(r = -1\)知\(f\)是奇函数，从而\(f\)在\(I\)上有下界. 现在由于有界和无穷小之积也为无穷小，我们由\eqref{equation212-12.11}和\eqref{equation212-12.12}得
\[
\lim_{n\rightarrow\infty} f(x_n)=\lim_{n\rightarrow\infty}\frac{f(r_nx_n)}{r_n}=0.
\]
由Heine归结原理即得\(f\)在\(x = 0\)连续. 故由第一点知\(f(x)=f(1)x,\forall x\in\mathbb{R}\).

\item 在区间单调自然在子区间上有界，用第二点即得\(f(x)=f(1)x,\forall x\in\mathbb{R}\).

\item 其依托于经典结论
\begin{conclusion}
设勒贝格可测集\(A,B\)的勒贝格测度都非\(0\)，则\(A + B\)包含一个区间.
\end{conclusion}
上述结论可以在任何一本实变函数习题集中找到，例如徐森林. 运用此结论假设\(f\)在\(E\)上有界，\(E\)的勒贝格测度非\(0\). 则\(E + E\)包含一个区间\(I\)，于是对\(z\in I\)，存在\(x,y\in E\)使得\(z = x + y\)，然后
\[
|f(z)|\leqslant slant|f(x)|+|f(y)|\leqslant slant 2\sup_E|f|.
\]
由第二点即得\(f(x)=f(1)x,\forall x\in\mathbb{R}\).

\item 由Lusin定理，存在有正测度的紧集\(K\)和\(\mathbb{R}\)上的连续函数\(g\)使得\(f(x)=g(x),\forall x\in K\)，故\(f\)在\(K\)上有界.
现在我们就可以运用上一条知\(f(x)=f(1)x,\forall x\in\mathbb{R}\).

\item 若存在\(x_0\in\mathbb{R}\)使得\(f(x_0)\neq f(1)x_0\)，显然\(x_0\neq0,1\). 于是
\begin{align*}
&(1,f(1)),(x_0,f(x_0))\text{ 线性无关}\\
\Rightarrow&\mathbb{R}^2=\{c_1(1,f(1))+c_2(x_0,f(x_0)):c_1,c_2\in\mathbb{R}\}\\
\Rightarrow&\mathbb{R}^2=\overline{\{c_1(1,f(1))+c_2(x_0,f(x_0)):c_1,c_2\in\mathbb{Q}\}}\\
\Rightarrow&\mathbb{R}^2=\overline{\{(c_1 + c_2x_0,f(c_1 + c_2x_0)):c_1,c_2\in\mathbb{Q}\}}\\
\Rightarrow&\mathbb{R}^2=\overline{\{(x,f(x)):x\in\mathbb{R}\}},
\end{align*}
这就证明了\(\{(x,f(x)):x\in\mathbb{R}\}\)在\(\mathbb{R}^2\)稠密. 这是一个矛盾！
\end{enumerate}
\end{proof}

\begin{example}
求函数方程 \(2f(2x)=f(x)+x\) 的所有\(\mathbb{R}\)上在 \(x = 0\) 的连续解。
\end{example}
\begin{note}
\hypertarget{注意到的原因见笔记部分123}{这里}也能利用强求通项和强行裂项的想法. 具体操作如下:

$\forall x\in \mathbb{R}$,固定$x$,则由条件可知
\[
f(x)=\frac{f\left(\frac{x}{2}\right)}{2}+\frac{x}{4}.
\]
从而由上式归纳可得
\[
f\left(\frac{x}{2^n}\right)=\frac{f\left(\frac{x}{2^{n + 1}}\right)}{2}+\frac{x}{2^{n + 2}},\forall n\in \mathbb{N}_+.
\]

于是令 \(x_n = f\left(\frac{x}{2^n}\right),n = 0,1,2,\cdots\)，则
\[
x_n=\frac{x_{n + 1}}{2}+\frac{x}{2^{n + 2}},\forall n\in \mathbb{N}_+.
\]
对上式进行强行裂项并强求通项得到
\[
\frac{x_n}{2^{n - 1}}=\frac{x_{n + 1}}{2^n}+\frac{x}{2^{2n + 1}},\forall n\in \mathbb{N}_+.
\]
即
\[
\frac{f\left(\frac{x}{2^n}\right)}{2^{n - 1}}=\frac{f\left(\frac{x}{2^{n + 1}}\right)}{2^n}+\frac{x}{2^{2n + 1}},\forall n\in \mathbb{N}_+.
\]
从而
\[
2x_0-\frac{x_{n + 1}}{2^n}=\sum_{k = 0}^n\left(\frac{x_k}{2^{k - 1}}-\frac{x_{k + 1}}{2^k}\right)=\sum_{k = 0}^n\frac{x}{2^{2k + 1}},\forall n\in \mathbb{N}_+.
\]
于是
\[
f(x)=x_0=\sum_{k = 0}^n\frac{x}{2^{2k + 2}}+\frac{x_{n + 1}}{2^{n + 1}}=\sum_{k = 0}^n\frac{x}{2^{2k + 2}}+\frac{f\left(\frac{x}{2^{n + 1}}\right)}{2^{n + 1}},\forall n\in \mathbb{N}_+.
\]
这就完成了对 \(x_n\) 的强行裂项并强求通项。
\end{note}
\begin{remark}
只有除以2的迭代才能与$f$在$x=0$处连续联系起来,如果是乘2的迭代则不行.
\end{remark}
\begin{proof}
设 \(f\) 在 \(x = 0\) 处连续,$\forall x\in \mathbb{R}$,固定$x$,则由条件可知
\begin{align}
f(x)=\frac{f\left(\frac{x}{2}\right)}{2}+\frac{x}{4}, \label{afgjkldshgiohj}
\end{align}
\[
2f(0)=f(0)\Rightarrow f(0)=0.
\]
从而由 \(f\) 在 \(x = 0\) 处连续可知，\(f(0)=\lim_{x\rightarrow 0}f(x)\)。由 \eqref{afgjkldshgiohj}式归纳可得
\[
f\left(\frac{x}{2^n}\right)=\frac{f\left(\frac{x}{2^{n + 1}}\right)}{2}+\frac{x}{2^{n + 2}},\forall n\in \mathbb{N}_+.
\]
\hyperlink{注意到的原因见笔记部分123}{注意到}
\begin{align*}
\frac{f\left( \frac{x}{2^n} \right)}{2^{n-1}}=\frac{f\left( \frac{x}{2^{n+1}} \right)}{2^n}+\frac{x}{2^{2n+1}},\forall n\in \mathbb{N} _+.
\end{align*}
于是
\begin{align*}
f\left( x \right) =x_0=\sum_{k=0}^n{\frac{x}{2^{2k+2}}}+\frac{x_{n+1}}{2^{n+1}}=\sum_{k=0}^n{\frac{x}{2^{2k+2}}}+\frac{f\left( \frac{x}{2^{n+1}} \right)}{2^{n+1}},\forall n\in \mathbb{N} _+.
\end{align*}
令$n\rightarrow \infty$,则
\begin{align*}
f\left( x \right) =\sum_{k=0}^{\infty}{\frac{x}{2^{2k+2}}}+\underset{n\rightarrow \infty}{\lim}\frac{f\left( \frac{x}{2^{n+1}} \right)}{2^{n+1}}=\frac{\frac{1}{4}x}{1-\frac{1}{4}}=\frac{x}{3}.
\end{align*}
根据$x$的任意性,可知$f(x)=\frac{x}{3},\forall x\in \mathbb{R}$就是原方程符合条件的一个解.

再将$f(x)=\frac{x}{3}$代入原方程,仍然成立.故$f(x)=\frac{x}{3},\forall x\in \mathbb{R}$就是原方程符合条件的所有解.
\end{proof}

\begin{example}[$\,\,$\(\mathbb{R}\)上的既凸又凹的连续函数是直线]\label{example:R上的既凸又凹的连续函数是直线}
\(\mathbb{R}\)上的既凸又凹的连续函数是直线.
\end{example}
\begin{note}
容易由证明知道任何开区间\((a,b)\)上的既凸又凹的连续函数也是直线.
\end{note}
\begin{proof}
设函数$f$在$\mathbb{R}$上既凸又凹,则
\[
f\left(\frac{x + y}{2}\right)=\frac{1}{2}f(x)+\frac{1}{2}f(y).
\]
考虑\(g(x)=f(x)-f(0)\)，则运用\(f(x + y)+f(0)=2f\left(\frac{x + y}{2}\right)\)知\(g\)满足Cauchy方程,于是由\hyperref[theorem:Cauchy方程加上连续性就能得到解是线性函数]{定理\ref{theorem:Cauchy方程加上连续性就能得到解是线性函数}}可得
\[
f(x)=f(0)+[f(1)-f(0)]x.
\]
\end{proof}

\begin{example}
求方程 \(f(xy)=xf(y)+yf(x)\) 的全部连续解.
\end{example}
\begin{proof}
设 \(f\in C(\mathbb{R})\)，则由条件可得
\[
f(0)=xf(0),\forall x\in \mathbb{R}\Rightarrow f(0)=0.
\]
\[
f(x)=xf(1)+f(x),\forall x\in \mathbb{R}\Rightarrow xf(1)=0,\forall x\in \mathbb{R}\Rightarrow f(1)=0.
\]
\[
f(1)=-f(-1)-f(-1)\Rightarrow f(-1)=0.
\]
\[
f(-x)=xf(-1)-f(x),\forall x\in \mathbb{R}\Rightarrow f(x)+f(-x)=xf(-1)=0,\forall x\in \mathbb{R}
\Rightarrow f\text{是}\mathbb{R}\text{上的奇函数}.
\]
于是对 \(\forall x,y > 0\)，我们取 \(x = e^s,y = e^t,\forall s,t\in \mathbb{R}\)。则由条件可得
\[
\frac{f(e^{s + t})}{e^{s + t}}=\frac{f(e^s)}{e^s}+\frac{f(e^t)}{e^t}.
\]
从而 \(\frac{f(e^x)}{e^x}\) 满足 Cauchy 方程，且 \(f\in C(\mathbb{R})\)，因此由\hyperref[theorem:Cauchy方程加上连续性就能得到解是线性函数]{定理\ref{theorem:Cauchy方程加上连续性就能得到解是线性函数}}可得
\[
\frac{f(e^x)}{e^x}=\frac{f(e)}{e}x,\forall x\in \mathbb{R}\Rightarrow f(x)=\frac{f(e)}{e}x\ln x,\forall x > 0.
\]
又因为 \(f\) 是奇函数，所以
\[
f(x)=\begin{cases}
\frac{f(e)}{e}x\ln x, & x > 0\\
0, & x = 0\\
\frac{f(e)}{e}x\ln(-x), & x < 0
\end{cases}.
\]
最后，将上述 \(f(x)\) 代入原方程，等式仍成立。故上述 \(f(x)\) 就是原方程的全部连续解。
\end{proof}


\end{document}