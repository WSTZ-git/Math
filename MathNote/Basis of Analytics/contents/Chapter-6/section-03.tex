\documentclass[../../main.tex]{subfiles}
\graphicspath{{\subfix{../../image/}}} % 指定图片目录,后续可以直接使用图片文件名。

% 例如:
% \begin{figure}[H]
% \centering
% \includegraphics[scale=0.4]{图.png}
% \caption{}
% \label{figure:图}
% \end{figure}
% 注意:上述\label{}一定要放在\caption{}之后,否则引用图片序号会只会显示??.

\begin{document}

\section{凸函数与上半连续函数}

\subsection{凸函数}

\begin{definition}[下凸函数的定义]\label{definition:下凸函数的定义}
对集\(S\subset\mathbb{R}^n\)，我们称
\begin{enumerate}
\item \(f:S\to\mathbb{R}\)是一个Jensen下凸函数，如果对任何\(x,y\in S\)，只要
\[\{\lambda x+(1 - \lambda)y:\lambda\in[0,1]\}\subset S,\]
就有
\[f\left(\frac{x + y}{2}\right)\leqslant\frac{f(x)+f(y)}{2},\]

\item \(f:S\to\mathbb{R}\)是一个严格Jensen下凸函数，如果对任何\(x\neq y\in S\)，只要
\[\{\lambda x+(1 - \lambda)y:\lambda\in[0,1]\}\subset S,\]
就有
\[f\left(\frac{x + y}{2}\right)<\frac{f(x)+f(y)}{2},\]

\item 称\(f:S\to\mathbb{R}\)是一个下凸函数，如果对任何\(x,y\in S\)，只要
\[\{\lambda x+(1 - \lambda)y:\lambda\in[0,1]\}\subset S,\]
就有
\[f(\lambda x+(1 - \lambda)y)\leqslant\lambda f(x)+(1 - \lambda)f(y),\forall\lambda\in[0,1].\]

\item 称\(f:S\to\mathbb{R}\)是一个严格下凸函数，如果对任何\(x\neq y\in S\)，只要
\[\{\lambda x+(1 - \lambda)y:\lambda\in[0,1]\}\subset S,\]
就有
\[f(\lambda x+(1 - \lambda)y)<\lambda f(x)+(1 - \lambda)f(y),\forall\lambda\in(0,1).\]
\end{enumerate}
\end{definition}
\begin{remark}
同理可以定义上凸函数.
\end{remark}
\begin{note}
\begin{enumerate}
\item 我们常用\(\{\lambda x+(1 - \lambda)y:\lambda\in[0,1]\}\)来表示连接\(x,y\)的线段.

\item 显然\(f\)在\(S\)上各种凸的充要条件都是对任何含于\(S\)的线段\(\ell\)，都有\(f|_{\ell}\)上是对应的那种一元凸函数.

\item 开集上的二阶可微函数为下凸函数等价于Hess矩阵半正定可以在任何一般数学分析教材上找到. 

\item 显然下凸蕴含Jensen下凸,实际运用中我们更偏爱下凸而不是Jensen下凸,推导二者的联系是重要的命题. 
\end{enumerate}
\end{note}

\begin{proposition}\label{proposition:开区间下凸闭区间连续的函数在闭区间上仍然下凸}
闭区间上的连续函数如果在开区间内是下凸函数,则必然在闭区间上也是下凸函数.
\end{proposition}
\begin{proof}

\end{proof}

\begin{proposition}[下凸函数的基本性质]\label{proposition:下凸函数的基本性质}
\begin{enumerate}
\item\label{下凸函数恒在割线下方} \textbf{下凸函数恒在割线下方}
\begin{enumerate}[(1)]
\item 设\(I\)为一区间，\(f:I\to\mathbb{R}\),则\(f\)在\(I\)上下凸的充要条件是对任何\([s,t]\subset I\)成立
\[
f(x)\leqslant\frac{f(s)-f(t)}{s - t}(x - s)+f(s),\forall x\in[s,t].
\]

\item 设\(I\)为一区间，\(f:I\to\mathbb{R}\),则\(f\)在\(I\)上下凸的充要条件是对任何\([s,t]\subset I\)成立
\[
f(x)<\frac{f(s)-f(t)}{s - t}(x - s)+f(s),\forall x\in(s,t),
\]
\end{enumerate}

\item\label{下凸函数割线斜率递增} \textbf{下凸函数割线斜率递增}
\begin{enumerate}[(1)]
\item 设\(I\)为一区间，\(f:I\to\mathbb{R}\),则\(f\)在\(I\)上下凸的充要条件是对\(x_1 < x_2 < x_3\)，\(x_1,x_2,x_3\in I\)，有
\[
\frac{f(x_2)-f(x_1)}{x_2 - x_1}\leqslant\frac{f(x_3)-f(x_2)}{x_3 - x_2}.
\]

\item 设\(I\)为一区间，\(f:I\to\mathbb{R}\),则\(f\)在\(I\)上严格下凸的充要条件是对\(x_1 < x_2 < x_3\)，\(x_1,x_2,x_3\in I\)，有
\[
\frac{f(x_2)-f(x_1)}{x_2 - x_1}<\frac{f(x_3)-f(x_2)}{x_3 - x_2}.
\]
\end{enumerate}

\item\label{可微的下凸函数恒在切线上方} \textbf{可微的下凸函数恒在切线上方}
\begin{enumerate}[(1)]
\item 设\(f:(a,b)\to\mathbb{R}\)是可微函数,则 \(f\) 在 \((a,b)\) 下凸的充要条件是对任何 \(x_{0}\in(a,b)\)，我们都有
\[
f(x)\geqslant f(x_{0})+f^{\prime}(x_{0})(x - x_{0}),\forall x\in(a,b).
\]

\item 设\(f:(a,b)\to\mathbb{R}\)是可微函数,则\(f\) 在 \((a,b)\) 严格下凸的充要条件是对任何 \(x_{0}\in(a,b)\)，我们都有
\[
f(x)> f(x_{0})+f^{\prime}(x_{0})(x - x_{0}),\forall x\in(a,b)\setminus\{x_{0}\}.
\]
\end{enumerate}
\end{enumerate}
\end{proposition}
\begin{remark}
上述下凸函数的性质都可以通过几何作图直观地得到.
\end{remark}
\begin{note}
\textbf{下凸函数割线斜率递增}也表明:下凸函数对$\forall x_0\in I$,都有$\frac{f(x)-f(x_0)}{x-x_0}$单调递增.(但是不能由这个结论推出$f$下凸)
\end{note}
\begin{proof}
\begin{enumerate}
\item {\heiti 函数恒在割线下方}\begin{enumerate}[(1)]
\item 首先证明充分性$(\Rightarrow)$：对 $\forall [s,t] \subset I$，$\forall x\in [s,t]$，可设 $x = \lambda s+(1 - \lambda)t$，其中 $\lambda \in [0,1]$。由 $f$ 在 $I$ 上下凸可知，对 $\forall x\in [s,t]$，有
\begin{align*}
f(x) = f(\lambda s+(1 - \lambda)t) 
\leqslant \lambda f(s)+(1 - \lambda)f(t) 
= (\lambda - 1)[f(s) - f(t)]+f(s).
\end{align*}
再结合 $\lambda=\frac{x - t}{s - t}$ 可得
\begin{align*}
f(x) \leqslant \left(\frac{x - t}{s - t}-1\right)[f(s) - f(t)]+f(s)
= \frac{f(s) - f(t)}{s - t}(x - s)+f(s), \quad \forall x\in [s,t].
\end{align*}

接着证明必要性 $(\Leftarrow)$：对 $\forall s,t\in I$，不妨设 $s < t$，则 $[s,t] \subset I$。对 $\forall x\in [s,t]$，可设 $x = \lambda s+(1 - \lambda)t$，其中 $\lambda \in [0,1]$。则由条件可知，对 $\forall x\in [s,t]$，有
\begin{align*}
f(x) = f(\lambda s+(1 - \lambda)t) 
\leqslant \frac{f(s) - f(t)}{s - t}(\lambda s+(1 - \lambda)t - s)+f(s) 
= \lambda f(s)+(1 - \lambda)f(t).
\end{align*}
即 $\forall s,t\in I$，都有 $f(\lambda s+(1 - \lambda)t) \leqslant \lambda f(s)+(1 - \lambda)f(t)$。故 $f$ 在 $I$ 上下凸。      

\item 显然(1)证明中的不等号可以全部改为严格不等号.
\end{enumerate}

\item {\heiti 下凸函数割线斜率递增}\begin{enumerate}[(1)]
\item 首先证明充分性 $(\Rightarrow)$:
对于任意的 $x_1, x_2, x_3 \in I$ 且 $x_1 < x_2 < x_3$，取 $\lambda = \frac{x_2 - x_1}{x_3 - x_1} \in (0, 1)$。
因为函数 $f$ 在区间 $I$ 上下凸，所以有
\begin{align*}
f(x_2) = f(\lambda x_3 + (1 - \lambda) x_1) 
\leqslant \lambda f(x_3) + (1 - \lambda) f(x_1) 
= \frac{x_2 - x_1}{x_3 - x_1} f(x_3) + \frac{x_3 - x_2}{x_3 - x_1} f(x_1).
\end{align*}
即
\[
\frac{f(x_2) - f(x_1)}{x_2 - x_1} \leqslant \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\]

接下来证明必要性 $(\Leftarrow)$:
由已知条件可知，对于任意的 $x_1, x_2, x_3 \in I$ 且 $x_1 < x_2 < x_3$，都满足
\[
\frac{f(x_2) - f(x_1)}{x_2 - x_1} \leqslant \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\]
这等价于
\begin{align}
f(x_2) \leqslant \frac{x_2 - x_1}{x_3 - x_1} f(x_3) + \frac{x_3 - x_2}{x_3 - x_1} f(x_1). \label{157489418979}
\end{align}
进而，对于任意的 $x_1, x_3 \in I$ 且 $x_1 < x_3$，以及任意的 $\lambda \in [0, 1]$，令 $x_2 = \lambda x_1 + (1 - \lambda) x_3 \in (x_1, x_3)$，此时 $\lambda = \frac{x_3 - x_2}{x_3 - x_1}$。
于是，根据\eqref{157489418979}式可以得到
\begin{align*}
f(\lambda x_1 + (1 - \lambda) x_3) = f(x_2) 
\leqslant \frac{x_2 - x_1}{x_3 - x_1} f(x_3) + \frac{x_3 - x_2}{x_3 - x_1} f(x_1) 
= \lambda f(x_1) + (1 - \lambda) f(x_3).
\end{align*}
所以，函数 $f$ 在区间 $I$ 上下凸。

\item 显然(1)证明中的不等号可以全部改为严格不等号.
\end{enumerate}

\item {\heiti 可微的下凸函数恒在切线上方}\begin{enumerate}[(1)]
\item 首先证明充分性 $(\Rightarrow)$:由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知,对于任意的 $x_0\in (a,b)$，函数 $\frac{f(x) - f(x_0)}{x - x_0}$ 在 $(a,b)$ 上单调递增。

对于任意的 $x\in (x_0,b)$，取 $x'\in (x_0,x)$，根据 $\frac{f(x) - f(x_0)}{x - x_0}$ 的递增性，有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} \geqslant \frac{f(x') - f(x_0)}{x' - x_0}.
\end{align*}
令 $x'\to x_0^+$，则可得
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} \geqslant \lim_{x'\to x_0^+}\frac{f(x') - f(x_0)}{x' - x_0}=f'(x_0),\quad \forall x\in (x_0,b).
\end{align*}
同理，对于任意的 $x\in (a,x_0)$，取 $x''\in (x,x_0)$，由 $\frac{f(x) - f(x_0)}{x - x_0}$ 的递增性可知
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} \geqslant \frac{f(x'') - f(x_0)}{x'' - x_0}.
\end{align*}
令 $x''\to x_0^-$，则有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} \geqslant \lim_{x''\to x_0^-}\frac{f(x'') - f(x_0)}{x'' - x_0}=f'(x_0),\quad \forall x\in (a,x_0).
\end{align*}
因此，对于任意的 $x_0\in (a,b)$，都有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} \geqslant f'(x_0) \Leftrightarrow f(x)\geqslant f(x_0)+f'(x_0)(x - x_0).
\end{align*}

接下来证明必要性 $(\Leftarrow)$：由已知条件可知，对于任意的 $x_1,x_2,x_3\in I$ 且 $x_1 < x_2 < x_3$，都有
\begin{align*}
f(x_1) \geqslant f'(x_2)(x_1 - x_2) + f(x_2),\quad f(x_3) \geqslant f'(x_2)(x_3 - x_2) + f(x_2).
\end{align*}
由此可以推出
\begin{align*}
\frac{f(x_2) - f(x_1)}{x_2 - x_1} \leqslant f'(x_2) \leqslant \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\end{align*}
所以，由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知 $f$ 在 $I$ 上下凸.

\item 首先证明充分性 $(\Rightarrow)$：由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知,对于任意的 $x_0\in (a,b)$，函数 $\frac{f(x) - f(x_0)}{x - x_0}$ 在 $(a,b)$ 上单调递增。

对于任意的 $x\in (x_0,b)$，取 $x'\in \left(x_0,\frac{x + x_0}{2}\right)$，根据 $\frac{f(x) - f(x_0)}{x - x_0}$ 的递增性，有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &> \frac{f\left(\frac{x + x_0}{2}\right) - f(x_0)}{\frac{x + x_0}{2} - x_0} > \frac{f(x') - f(x_0)}{x' - x_0}.
\end{align*}
令 $x'\to x_0^+$，则可得
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &> \frac{f\left(\frac{x + x_0}{2}\right) - f(x_0)}{\frac{x + x_0}{2} - x_0} \geqslant \lim_{x'\to x_0^+}\frac{f(x') - f(x_0)}{x' - x_0}=f'(x_0),\quad \forall x\in (x_0,b).
\end{align*}

同理，对于任意的 $x\in (a,x_0)$，取 $x''\in \left(x_0,\frac{x + x_0}{2}\right)$，由 $\frac{f(x) - f(x_0)}{x - x_0}$ 的递增性可知
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &> \frac{f\left(\frac{x + x_0}{2}\right) - f(x_0)}{\frac{x + x_0}{2} - x_0} > \frac{f(x'') - f(x_0)}{x'' - x_0}.
\end{align*}
令 $x''\to x_0^-$，则有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &> \frac{f\left(\frac{x + x_0}{2}\right) - f(x_0)}{\frac{x + x_0}{2} - x_0} \geqslant \lim_{x''\to x_0^-}\frac{f(x'') - f(x_0)}{x'' - x_0}=f'(x_0),\quad \forall x\in (a,x_0).
\end{align*}

因此，对于任意的 $x_0\in (a,b)$，都有
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &> f'(x_0) \Leftrightarrow f(x)>f(x_0)+f'(x_0)(x - x_0).
\end{align*}

接下来证明必要性 $(\Leftarrow)$：由已知条件可知，对于任意的 $x_1,x_2,x_3\in I$ 且 $x_1 < x_2 < x_3$，都有
\begin{align*}
f(x_1) &> f'(x_2)(x_1 - x_2) + f(x_2),\quad f(x_3) > f'(x_2)(x_3 - x_2) + f(x_2).
\end{align*}
由此可以推出
\begin{align*}
\frac{f(x_2) - f(x_1)}{x_2 - x_1} &< f'(x_2) < \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\end{align*}
所以，由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知 $f$ 在 $I$ 上下凸。
\end{enumerate}
\end{enumerate}
\end{proof}

\begin{example}[$\,\,$导数递增则割线斜率也递增]\label{example:导数递增则割线斜率也递增}
函数\(f\)在\((a,b)\)可导，证明：
\begin{enumerate}
\item \(f'\)递增的充要条件是对\(a < x_1 < x_2 < x_3 < b\)，有
\[
\frac{f(x_2)-f(x_1)}{x_2 - x_1}\leqslant\frac{f(x_3)-f(x_2)}{x_3 - x_2}.
\]

\item \(f'\)严格递增的充要条件是对\(a < x_1 < x_2 < x_3 < b\)，有
\[
\frac{f(x_2)-f(x_1)}{x_2 - x_1}<\frac{f(x_3)-f(x_2)}{x_3 - x_2}.
\]
\end{enumerate}
\end{example}
\begin{proof}
\begin{enumerate}[(1)]
\item 首先证明必要性 $(\Rightarrow)$：对于满足 $a < x_1 < x_2 < x_3 < b$ 的情况，根据Lagrange中值定理以及 $f'$ 单调递增的性质可知，存在 $y_1 \in (x_1, x_2)$，$y_2 \in (x_2, x_3)$，使得
\begin{align*}
\frac{f(x_2) - f(x_1)}{x_2 - x_1} = f'(y_1) \leqslant f'(y_2) = \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\end{align*}
由此，必要性得证。

接着证明充分性 $(\Leftarrow)$：由已知条件可知，对于满足 $a < x_1 < x_2 < b$ 的情况，取 $c = \frac{x_1 + x_2}{2}$，则有
\begin{align*}
\frac{f(s) - f(x_1)}{s - x_1} &\leqslant \frac{f(c) - f(x_2)}{c - x_2}, \quad \forall s \in (a, x_1), \\
\frac{f(c) - f(x_2)}{c - x_2} &\leqslant \frac{f(t) - f(x_2)}{t - x_2}, \quad \forall t \in (x_2, b).
\end{align*}
令 $s \to x_1^-$，$t \to x_2^+$，可得
\begin{align*}
f'(x_1) = \lim_{s \to x_1^-} \frac{f(s) - f(x_1)}{s - x_1} \leqslant \frac{f(c) - f(x_2)}{c - x_2}, \quad
\frac{f(c) - f(x_2)}{c - x_2} \leqslant \lim_{t \to x_2^+} \frac{f(t) - f(x_2)}{t - x_2} = f'(x_2).
\end{align*}
所以有 $f'(x_1) \leqslant \frac{f(c) - f(x_2)}{c - x_2} \leqslant f'(x_2)$。再由 $x_1$，$x_2$ 的任意性可知，$f'$ 单调递增。


\item 首先证明必要性 $(\Rightarrow)$：对于满足 $a < x_1 < x_2 < x_3 < b$ 的情况，根据Lagrange中值定理以及 $f'$ 单调递增的性质可知，存在 $y_1 \in (x_1, x_2)$，$y_2 \in (x_2, x_3)$，使得
\begin{align*}
\frac{f(x_2) - f(x_1)}{x_2 - x_1} = f'(y_1)<f'(y_2) = \frac{f(x_3) - f(x_2)}{x_3 - x_2}.
\end{align*}
由此，必要性得证。

接着证明充分性 $(\Leftarrow)$:由条件可知，对于满足 \(a < x_1 < x_2 < b\) 的情况，取 \(c = \frac{x_1 + x_2}{2}\)，则有
\begin{align*}
\frac{f(s) - f(x_1)}{s - x_1} &< \frac{f(c) - f(x_2)}{c - x_2}, \quad \forall s \in (a, x_1), \\
\frac{f(c) - f(x_2)}{c - x_2} &< \frac{f(t) - f(x_2)}{t - x_2}, \quad \forall t \in (x_2, b).
\end{align*}
令 \(s \to x_1^-\)，\(t \to x_2^-\)，可得
\begin{align*}
f'(x_1) = \lim_{s \to x_1^-} \frac{f(s) - f(x_1)}{s - x_1} \leqslant \frac{f(c) - f(x_2)}{c - x_2}, \quad
\frac{f(c) - f(x_2)}{c - x_2} \leqslant \lim_{t \to x_2^-} \frac{f(t) - f(x_2)}{t - x_2} = f'(x_2).
\end{align*}
故 \(f'(x_1) \leqslant \frac{f(c) - f(x_2)}{c - x_2} \leqslant f'(x_2)\)。
若 \(f'(x_1) = f'(x_2)\)，则由\hyperref[proposition:导数为常数的函数必是线性函数]{命题\ref{proposition:导数为常数的函数必是线性函数}}可知，\(f\) 在 \([x_1, x_2]\) 上为线性函数。设 \(f(x) = cx + d\)，\(x \in [x_1, x_2]\)，其中 \(c, d \in \mathbb{R}\)。从而
\begin{align*}
\frac{f\left(\frac{x_1 + x_2}{2}\right) - f(x_1)}{\frac{x_1 + x_2}{2} - x_1} = c = \frac{f(x_2) - f\left(\frac{x_1 + x_2}{2}\right)}{x_2 - \frac{x_1 + x_2}{2}}.
\end{align*}
这与已知条件矛盾！故 \(f'(x_1) < f'(x_2)\)，\(\forall x_1, x_2 \in (a, b)\) 且 \(a < x_1 < x_2 < b\)，即 \(f'\) 递增。   
\end{enumerate}
\end{proof}


\begin{proposition}\label{proposition:开区间的下凸函数有上界的充要条件}
设\(f\)在\((a,b)\)上的下凸函数，则\(f\)在\((a,b)\)有上界的充要条件是
$\lim_{x\rightarrow a^{+}}f(x)$,$\lim_{x\rightarrow b^{-}}f(x)$存在.
\end{proposition}
\begin{note}
由这个命题及\hyperref[proposition:开区间下凸闭区间连续的函数在闭区间上仍然下凸]{命题\ref{proposition:开区间下凸闭区间连续的函数在闭区间上仍然下凸}}可知:如果下凸函数$f$在$(a,b)$上有上界,则$f$可连续延拓到$[a,b]$(补充定义端点的函数值等于端点的左右极限即可),使得$f$在$[a,b]$上仍是下凸函数.
\end{note}
\begin{proof}
$(\Leftarrow):$由\hyperref[theorem:开区间下凸函数左右导数处处存在]{开区间下凸函数左右导数处处存在}可知,$f$在$(a,b)$上连续.又因为$\lim_{x\rightarrow a^{+}}f(x)$,$\lim_{x\rightarrow b^{-}}f(x)$存在,所以由\hyperref[theorem:Cantor定理]{Cantor定理}可知,$f$可以连续延拓到$[a,b]$上,故$f$在$[a,b]$上有界,从而在$(a,b)$上有界.

$(\Rightarrow):$由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知,对$\forall x_0\in (a,b)$,有\(\frac{f(x) - f(x_0)}{x - x_0}\)在\((a, x_0)\cup(x_0, b)\)上递增. 由\(f\)在\((a, b)\)上有上界可知，存在\(M > 0\)，使得
\begin{align}
|f(x)|\leqslant M, \forall x\in(a, b). \label{proposition6.17-1.1}
\end{align}
由\(\frac{f(x) - f(x_0)}{x - x_0}\)的递增性及\eqref{proposition6.17-1.1}式可知
\begin{align}
\frac{f(x) - f(x_0)}{x - x_0}\leqslant\frac{M - f(x_0)}{x - x_0}, \forall x\in(x_0, b). \label{proposition6.17-1.2}
\end{align}
又因为\(\lim_{x\rightarrow b^-}\frac{M - f(x_0)}{x - x_0}=\frac{M - f(x_0)}{b - x_0}\)，所以\(\frac{M - f(x_0)}{x - x_0}\)在\((x_0, b)\)上有界. 从而存在\(K > 0\)，使得
\begin{align}
\frac{M - f(x_0)}{x - x_0}\leqslant K, \forall x\in(x_0, b).
\label{proposition6.17-1.3}  
\end{align}
于是结合\eqref{proposition6.17-1.2}\eqref{proposition6.17-1.3}式可知，\(\frac{f(x) - f(x_0)}{x - x_0}\leqslant K, \forall x\in(x_0, b)\). 进而由单调有界定理可知\(\lim_{x\rightarrow b^-}\frac{f(x) - f(x_0)}{x - x_0}\)存在. 于是
\[
\lim_{x\rightarrow b^-}f(x)=\lim_{x\rightarrow b^-}\left[\frac{f(x) - f(x_0)}{x - x_0}\cdot(x - x_0)+f(x_0)\right]=(b - x_0)\lim_{x\rightarrow b^-}\frac{f(x) - f(x_0)}{x - x_0}+f(x_0).
\]
故\(\lim_{x\rightarrow b^-}f(x)\)也存在. 同理可得\(\lim_{x\rightarrow a^+}f(x)\)也存在.

\end{proof}

\begin{proposition}[下凸函数的单调性刻画]\label{proposition:下凸函数的单调性刻画}
\begin{enumerate}
\item \textbf{闭区间凸函数的单调性刻画}

设\(f\)是\([a,b]\)上的下凸函数，则\(f\)只有下述三种情况:
\begin{enumerate}[(1)]
\item \(f\)在\([a,b)\)递减，

\item \(f\)在\((a,b]\)递增，

\item 存在\(c\in(a,b)\)，使得\(f\)在\([a,c]\)递减，在\([c,b]\)递增.
\end{enumerate}

\item \textbf{开区间凸函数的单调性刻画}

设\(f\)是\((a,b)\)上的下凸函数，\(a\)允许取\(-\infty\)，\(b\)允许取\(+\infty\)，则\(f\)只有下述三种情况：
\begin{enumerate}[(1)]
\item \(f\)在\((a,b)\)递减；
\item \(f\)在\((a,b)\)递增；
\item 存在\(c\in(a,b)\)，使得\(f\)在\((a,c]\)递减，在\([c,b)\)递增。
\end{enumerate}
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}
\item {\heiti 闭区间凸函数的单调性刻画}

由\hyperref[下凸函数恒在割线下方]{下凸函数恒在割线下方},我们有
\begin{align*}
f\left( x \right) \leqslant \frac{f\left( b \right) -f\left( a \right)}{b-a}\left( x-a \right) +f\left( a \right) \leqslant \frac{f\left( b \right) -f\left( a \right)}{b-a}\left( b-a \right) +f\left( a \right) ,\forall x\in \left[ a,b \right] .
\end{align*}
因此$f$在$[a,b]$上有上界.于是由\hyperref[proposition:开区间的下凸函数有上界的充要条件]{命题\ref{proposition:开区间的下凸函数有上界的充要条件}}可知,$f$可以连续延拓到$[a,b]$,并且仍然在$[a,b]$上下凸.记这个连续延拓函数为$\overline{f}$,则$\overline{f} \in C[a,b]$且$\overline{f}$在$[a,b]$上也下凸.

下证
\begin{align}
f(a)\geqslant\tilde{f}(a),f(b)\geqslant\tilde{f}(b).\label{proposition6.17-13.23}
\end{align}
事实上,由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知\(\frac{f(x)-f(x_0)}{x - x_0}\)在\((x_0,b]\)递增,从而
\begin{align*}
\tilde{f}(b)&=\lim_{x\rightarrow b^-}f(x)
=\lim_{x\rightarrow b^-}\left[(x - x_0)\frac{f(x)-f(x_0)}{x - x_0}+f(x_0)\right]\\
&\leqslant\lim_{x\rightarrow b^-}\left[(x - x_0)\frac{f(b)-f(x_0)}{b - x_0}+f(x_0)\right]
=f(b),
\end{align*}
类似可得\(f(a)\geqslant\tilde{f}(a)\)，这就证明了\eqref{proposition6.17-13.23}.
下面证明$\overline{f}$的单调性.

由上述证明可知\(\overline{f}\in C[a,b]\)且在$[a,b]$上下凸.不妨设\(\overline{f}\)最小值为\(0\). 现在设\(c\in[a,b]\)是\(f\)的最小值点. 若\(c\in(a,b)\)，则对\(b\geqslant x_2>x_1>c\)，我们有
\begin{align}
\frac{\overline{f}(x_2)-\overline{f}(c)}{x_2 - c}\geqslant\frac{\overline{f}(x_1)-\overline{f}(c)}{x_1 - c}\Rightarrow \overline{f}(x_2)\geqslant\frac{x_2 - c}{x_1 - c}\overline{f}(x_1)\geqslant \overline{f}(x_1).\label{proposition6.17-13.24} 
\end{align}
故\(\overline{f}\)在\([c,b]\)递增. 类似可知\(\overline{f}\)在\([a,c]\)递减. 这就证明了第三种情况. 若\(c = a\)，则不等式\eqref{proposition6.17-13.24}也成立，故\(\overline{f}\)在\([a,b]\)递增. 同样的若\(c = b\)则\(\overline{f}\)在\([a,b]\)递减.

于是再结合\eqref{proposition6.17-13.23}可知

(i)当\(\overline{f}\)的最小值\(c = b\)时，若\(f(b)>\overline{f}(b)\)，则\(f\)只在\([a,b)\)上单调递减；若\(f(b)=\overline{f}(b)\)，则\(f\)在\([a,b]\)上单调递减. 故此时无论如何，\(f\)一定在\([a,b)\)上单调递减.

(ii)当\(\overline{f}\)的最小值\(c = a\)时，若\(f(a)>\overline{f}(a)\)，则\(f\)只在\((a,b]\)上单调递增；若\(f(a)=\overline{f}(a)\)，则\(f\)在\([a,b]\)上单调递增. 故此时无论如何，\(f\)一定在\((a,b]\)上单调递增.

(iii)当\(\overline{f}\)的最小值\(c\in(a,b)\)时，\(f\)的单调性与\(\overline{f}\)相同,即\(f\)在\([c,b]\)递增,在\([a,c]\)递减.

因此结论得证.

\item {\heiti 开区间凸函数的单调性刻画}
由(1)的证明类似,只是不再额外需要考虑$f$的两个端点,同理证明即可.
\end{enumerate}
\end{proof}




\begin{theorem}[Jensen不等式]\label{theorem:Jensen不等式1111}
对集\(S\subset\mathbb{R}^n\)，设\(f:S\to\mathbb{R}\)是一个Jensen下凸函数，则对完全含于\(S\)内的一条线段上的点\(x_1,x_2,\cdots,x_m\)和
\[\sum_{k = 1}^{m}\lambda_k = 1,\lambda_k\in[0,1]\cap\mathbb{Q},\]
我们有
\begin{align}
f\left(\sum_{k = 1}^{m}\lambda_kx_k\right)\leqslant\sum_{k = 1}^{m}\lambda_kf(x_k).\label{equation-Jesen不等式} 
\end{align}
特别的，
\begin{align}
f\left(\frac{1}{m}\sum_{k = 1}^{m}x_k\right)\leqslant\sum_{k = 1}^{m}\frac{1}{m}f(x_k).\label{equation-Jesen不等式特例}
\end{align}
\end{theorem}
\begin{note}
初等的，如果\(S\)性质足够好且\(f\)二阶可微，读者可以通过把\(f\)在\(\sum_{k = 1}^{m}\lambda_kx_k\) Taylor展开,然后丢掉二阶微分那项来得到不等式$f\left(\sum_{k = 1}^{m}\lambda_kx_k\right)\leqslant\sum_{k = 1}^{m}\lambda_kf(x_k)$. 本部分的证明尽可能追求一般性。
\end{note}
\begin{proof}
首先不等式\eqref{equation-Jesen不等式特例}的建立是经典高中数学习题，一个参考可以见\href{https://zhuanlan.zhihu.com/p/403875464?utm_id=0}{Jensen不等式}.
我们归纳证明不等式\eqref{equation-Jesen不等式}，当\(m = 2\)，设有理数\(\frac{p}{q}\in[0,1],q>0\)，运用不等式\eqref{equation-Jesen不等式特例}，我们有
\[
f\left(\frac{p}{q}x+\left(1-\frac{p}{q}\right)y\right)=f\left(\underbrace{\frac{x}{q}+\frac{x}{q}+\cdots+\frac{x}{q}}_{p个}+\underbrace{\frac{y}{q}+\frac{y}{q}+\cdots+\frac{y}{q}}_{q - p个}\right)\leqslant\frac{p}{q}f(x)+\left(1-\frac{p}{q}\right)f(y).
\]
这就证明了\eqref{equation-Jesen不等式}的\(m = 2\)的情况。假定\(m\)时不等式\eqref{equation-Jesen不等式}成立，当\(m + 1\)时，我们不妨设\(\sum_{i = 1}^{m}\lambda_i\neq0\)，否则不等式\eqref{equation-Jesen不等式}是平凡的。现在
\begin{align*}
\sum_{j = 1}^{m + 1}\lambda_jf(x_j)&=\sum_{i = 1}^{m}\lambda_i\cdot\sum_{j = 1}^{m}\frac{\lambda_j}{\sum\limits_{i = 1}^{m}\lambda_i}f(x_j)+\lambda_{m+1}f(x_{m + 1})\\
&\geqslant\sum_{i = 1}^{m}\lambda_i\cdot f\left(\sum_{j = 1}^{m}\frac{\lambda_j}{\sum\limits_{i = 1}^{m}\lambda_i}x_j\right)+\lambda_{m+1}f(x_{m + 1})\\
&\geqslant f\left(\sum_{i = 1}^{m}\lambda_i\cdot\sum_{j = 1}^{m}\frac{\lambda_j}{\sum\limits_{i = 1}^{m}\lambda_i}x_j+\lambda_{m+1}x_{m + 1}\right)=f\left(\sum\limits_{j = 1}^{m + 1}\lambda_ix_j\right),
\end{align*}
这里最后一个不等号来自\(m = 2\)时的不等式。于是就对一般的\(m\in\mathbb{N}\)，我们证明了\eqref{equation-Jesen不等式}。
\end{proof}

\begin{lemma}\label{lemma:关于Jesen下凸与连续的引理}
设\(f\)在\(x_0\in\mathbb{R}^n\)的邻域内是Jensen下凸函数，若\(\varlimsup_{x\rightarrow x_0}f(x)<\infty\)，则\(f\)在\(x_0\)连续.
\end{lemma}
\begin{proof}
要证 \(f\) 在 \(x_0\) 连续，只须证 \(f(x_0) \leqslant \varliminf_{x \to x_0} f(x) \leqslant \varlimsup_{x \to x_0} f(x) \leqslant f(x_0)\)。

由条件可知
\[
-\infty < f(x_0) \leqslant \frac{f(x_0 - x) + f(x_0 + x)}{2}, \quad \forall x \in U(0).
\]
令 \(x \to 0\) 并取下极限，得到
\begin{align}
-\infty < f(x_0) \leqslant \varliminf_{x \to 0} \frac{f(x_0 - x) + f(x_0 + x)}{2} 
\leqslant \frac{1}{2} \varliminf_{x \to 0} f(x_0 - x) + \frac{1}{2} \varlimsup_{x \to 0} f(x_0 + x) 
= \frac{1}{2} \varliminf_{x \to x_0} f(x) + \frac{1}{2} \varlimsup_{x \to x_0} f(x). \label{lemma6.1-1.1}
\end{align}
根据条件可得
\[
f(x) \leqslant \frac{f(x_0) + f(2x - x_0)}{2}, \quad \forall x \in U(x_0).
\]
令 \(x \to x_0\) 并取上极限，则
\begin{align*}
\varlimsup_{x \to x_0} f(x)\leqslant \varlimsup_{x \to x_0} \frac{f(x_0) + f(2x - x_0)}{2} 
\leqslant \frac{f(x_0)}{2} + \frac{1}{2} \varlimsup_{x \to x_0} f(2x - x_0) 
= \frac{f(x_0)}{2} + \frac{1}{2} \varlimsup_{x \to x_0} f(x).
\end{align*}
于是 \(\varlimsup_{x \to x_0} f(x) \leqslant f(x_0)\)。将其代入 \eqref{lemma6.1-1.1} 式得到
\begin{align*}
-\infty < f(x_0) \leqslant \frac{1}{2} \varliminf_{x \to x_0} f(x) + \frac{1}{2} \varlimsup_{x \to x_0} f(x) 
\leqslant \frac{1}{2} \varliminf_{x \to x_0} f(x) + \frac{1}{2} f(x_0) 
\Rightarrow f(x_0) \leqslant \varliminf_{x \to x_0} f(x).
\end{align*}
因此 \(f(x_0) \leqslant \varliminf_{x \to x_0} f(x) \leqslant \varlimsup_{x \to x_0} f(x) \leqslant f(x_0)\)。即 \(f\) 在 \(x_0\) 处连续.
\end{proof}

\begin{theorem}[开区间下凸函数左右导数处处存在]\label{theorem:开区间下凸函数左右导数处处存在}
\((a,b)\)上的下凸函数\(f\)在每一点左右导数都存在，从而\(f\)在\((a,b)\)连续.
\end{theorem}
\begin{proof}
由\hyperref[下凸函数割线斜率递增]{下凸函数割线斜率递增}可知,对 $\forall x_0\in (a,b)$，有 $\frac{f(x) - f(x_0)}{x - x_0}$ 在 $(a,x_0) \cup (x_0,b)$ 上递增。从而
\begin{align*}
\frac{f(x) - f(x_0)}{x - x_0} &\leqslant \frac{f\left(\frac{x_0 + b}{2}\right) - f(x_0)}{\frac{x_0 + b}{2} - x_0}, \quad \forall x\in (a,x_0), \\
\frac{f(x) - f(x_0)}{x - x_0} &\geqslant \frac{f\left(\frac{x_0 + a}{2}\right) - f(x_0)}{\frac{x_0 + a}{2} - x_0}, \quad \forall x\in (x_0,b).
\end{align*}
于是 $\frac{f(x) - f(x_0)}{x - x_0}$ 在 $(a,x_0)$ 上有上界 $\frac{f\left(\frac{x_0 + b}{2}\right) - f(x_0)}{\frac{x_0 + b}{2} - x_0}$，$\frac{f(x) - f(x_0)}{x - x_0}$ 在 $(x_0,b)$ 上有下界 $\frac{f\left(\frac{x_0 + a}{2}\right) - f(x_0)}{\frac{x_0 + a}{2} - x_0}$。

故由单调有界定理可知 $\lim_{x \to x_0^+} \frac{f(x) - f(x_0)}{x - x_0}$ 和 $\lim_{x \to x_0^-} \frac{f(x) - f(x_0)}{x - x_0}$ 都存在，即 $f_{+}^{\prime}(x_0)$ 和 $f_{-}^{\prime}(x_0)$ 都存在.进而
\begin{align*}
\lim_{x \to x_0^+} [f(x) - f(x_0)] &=f_{+}^{\prime}(x_0) \lim_{x \to x_0^+} (x - x_0) = 0, \\
\lim_{x \to x_0^-} [f(x) - f(x_0)] &=f_{-}^{\prime}(x_0) \lim_{x \to x_0^-} (x - x_0) = 0.
\end{align*}
因此 $\lim_{x \to x_0^+} f(x) = \lim_{x \to x_0^-} f(x) = f(x_0)$,即$f$在$x=x_0$处连续,再根据$x_0$的任意性可知,$f$在$(a,b)$上连续.
\end{proof}


\begin{theorem}[开区间上的下凸函数内闭Lipschitz连续]\label{theorem:开区间上的下凸函数一定内闭Lipschitz连续}
\((a,b)\)上的下凸函数\(f\)一定内闭Lipschitz连续.
\end{theorem}
\begin{proof}
对 $\forall [A,B] \subset (a,b)$，任取 $s\in (a,A)$，$t\in (B,b)$，固定 $s,t$。则由下凸函数割线斜率递增可知
\begin{align*}
\frac{f(A) - f(s)}{A - s} &\leqslant \frac{f(x) - f(y)}{x - y} \leqslant \frac{f(t) - f(B)}{t - B}, \quad \forall x,y\in [A,B].
\end{align*}
记 $L = \max\left\{\left|\frac{f(A) - f(s)}{A - s}\right|, \left|\frac{f(t) - f(B)}{t - B}\right|\right\}$，则
\begin{align*}
\left|\frac{f(x) - f(y)}{x - y}\right| &\leqslant L \Rightarrow \left|f(x) - f(y)\right| \leqslant L\left|x - y\right|, \quad \forall x,y\in [A,B].
\end{align*}
故\(f\)在$(a,b)$上内闭Lipschitz连续.
\end{proof}

\begin{theorem}\label{theorem:邻域上下凸的函数一定在这点连续}
设\(f\)在\(\mathbf{x}_0\in\mathbb{R}^n\)的邻域内是下凸函数，则\(f\)在\(\mathbf{x}_0\)连续.
\end{theorem}
\begin{note}
下述证明表明:$n$元下凸函数一定也关于单变量下凸.
\end{note}
\begin{proof}
仅证明$n=2$的情形,一般情况是类似的.

由条件可知，当 \(n = 2\) 时，设 \(\delta>0\)，\(f\) 在 \((x_0 - \delta, y_0 - \delta)\times(x_0 + \delta, y_0 + \delta)\) 上下凸，则对 \(\forall (x_1,y_1),(x_2,y_2)\in [x_0 - \delta, y_0 - \delta]\times[x_0 + \delta, y_0 + \delta]\)，\(\forall \lambda\in[0,1]\)，有
\begin{align}
f(\lambda x_1 + (1 - \lambda)x_2,\lambda y_1 + (1 - \lambda)y_2) &\leqslant \lambda f(x_1,y_1)+(1 - \lambda)f(x_2,y_2). \label{theorem6.9-1.1}
\end{align}
\(\forall x'\in [x_0 - \delta, x_0 + \delta]\)，固定 \(x'\)，在 \eqref{theorem6.9-1.1}式中令 \(x_1 = x_2 = x'\)，则对 \(\forall y_1,y_2\in [y_0 - \delta, y_0 + \delta]\)，都有
\begin{align*}
f(x',\lambda y_1 + (1 - \lambda)y_2) = f(\lambda x' + (1 - \lambda)x',\lambda y_1 + (1 - \lambda)y_2) 
\leqslant \lambda f(x',y_1)+(1 - \lambda)f(x',y_2).
\end{align*}
故 \(f\) 关于单变量 \(y\) 在 \([y_0 - \delta, y_0 + \delta]\) 上下凸。同理可得 \(f\) 关于单变量 \(x\) 在 \([x_0 - \delta, x_0 + \delta]\) 上下凸。由\hyperref[theorem:开区间下凸函数左右导数处处存在]{开区间下凸函数左右导数处处存在}可知 \(f\) 关于单变量 \(x\) 在 \([x_0 - \delta, x_0 + \delta]\) 上连续，关于单变量 \(y\) 在 \([y_0 - \delta, y_0 + \delta]\) 上连续。因此对 \(\forall \varepsilon>0\)，存在 \(\delta_1\in(0,\delta)\)，使得当 \(|x - x_0|\leqslant\delta_1\) 时，有
\begin{align}
|f(x,y_0) - f(x_0,y_0)| &< \frac{\varepsilon}{2}. \label{theorem6.9-2.1}
\end{align}
任取 \(x\in [x_0 - \delta, x_0 + \delta]\)，固定 \(x\)，从而此时 \(f(x,y)\) 是在 \([y_0 - \delta, y_0 + \delta]\) 上关于 \(y\) 的一元连续下凸函数。于是由\hyperref[theorem:开区间上的下凸函数一定内闭Lipschitz连续]{开区间上的下凸函数一定内闭Lipschitz连续}可知，\(f(x,y)\) 在 \((y_0 - \delta, y_0 + \delta)\) 上内闭Lipschitz连续。进而存在 \(\delta_2\in(0,\delta)\)，使得对 \(\forall y\in [y_0 - \delta_2, y_0 + \delta_2]\)，有
\begin{align}
|f(x,y) - f(x,y_0)| &\leqslant \max\left\{\frac{f(x,y_0 - \delta_2) - f(x,y_0 - \delta_2)}{\delta_2},\frac{f(x,y_0 + \delta_2) - f(x,y_0 + \delta_2)}{\delta_2}\right\}\cdot|y - y_0|. \label{theorem6.9-2.2}
\end{align}
由 \(f\) 关于单变量 \(x\) 在 \([x_0 - \delta, x_0 + \delta]\) 上连续可知，\(f(x,y_0 - \delta_2)\)，\(f(x,y_0 - \delta_2)\)，\(f(x,y_0 + \delta_2)\)，\(f(x,y_0 + \delta_2)\) 在 \([x_0 - \delta, x_0 + \delta]\) 上都有界，从而我们记 \[L = \max\left\{\sup_{x\in [x_0 - \delta, x_0 + \delta]}\frac{f(x,y_0 - \delta_2) - f(x,y_0 - \delta_2)}{\delta_2},\sup_{x\in [x_0 - \delta, x_0 + \delta]}\frac{f(x,y_0 + \delta_2) - f(x,y_0 + \delta_2)}{\delta_2}\right\}.\]令 \(\delta' = \min\{\delta_1,\delta_2,\frac{\varepsilon}{2L}\}\)，于是由 \eqref{theorem6.9-2.2} 式可知，对 \(\forall (x,y)\in [x_0 - \delta', x_0 + \delta']\times[y_0 - \delta', y_0 + \delta']\)，都有
\begin{align}
|f(x,y) - f(x,y_0)| \leqslant L|y - y_0|. \label{theorem6.9-2.3}
\end{align}
利用 \eqref{theorem6.9-2.1} \eqref{theorem6.9-2.3} 式可得，对上述 \(\varepsilon\)，\(\delta'\)，当 \((x,y)\in [x_0 - \delta', x_0 + \delta']\times[y_0 - \delta', y_0 + \delta']\) 时，我们都有
\begin{align*}
|f(x,y) - f(x_0,y_0)| &\leqslant |f(x,y) - f(x,y_0)|+|f(x,y_0) - f(x_0,y_0)| \\
&< L|y - y_0|+\frac{\varepsilon}{2} 
\leqslant \frac{\varepsilon}{2}+\frac{\varepsilon}{2}=\varepsilon.
\end{align*}
故 \(f\) 在 \((x_0,y_0)\) 连续.
\end{proof}

\begin{corollary}[开集上的下凸函数必连续]\label{corollary:开集上的下凸函数必连续}
开集上的下凸函数是连续函数.
\end{corollary}


\subsection{上半连续函数}

\begin{definition}[半连续函数定义]\label{definition:半连续函数定义}
拓扑空间\(X\)上的一个函数\(f:X\to[-\infty,+\infty)\)被称为\textbf{上半连续的}，如果对每个\(c\in\mathbb{R}\)都有
\[\{x\in X:f(x)<c\}\]
是\(X\)的开集.
\end{definition}
\begin{remark}
下半连续函数同理定义.
\end{remark}
\begin{note}
\begin{enumerate}[(1)]
\item 显然$f$连续等价于$f$上半连续且下半连续.
\item 上半连续等价于对$\forall x_0\in X$,都有$\underset{x\rightarrow x_0}{\overline{\lim }}f\left( x \right) \leqslant f\left( x_0 \right) $.
\end{enumerate}
\end{note}

\begin{proposition}[上半连续函数基本性质]\label{proposition:半连续函数基本性质}
设 \(X\) 是拓扑空间，
\begin{enumerate}[(1)]
\item 若 \(f_{\alpha}\) 是一族 \(X\) 上的上半连续函数，则 \(f = \inf_{\alpha} f_{\alpha}\) 也是上半连续函数.
\item 若 \(f\) 是 \(X\) 上的上半连续函数，则对每一个紧集 \(K \subset X\) 有 \(a \in K\) 使得 \(f(x) \leq f(a),\forall x \in K\).
\item 设 \(I \subset [-\infty,+\infty)\) 是开区间，如果 \(f: X \to I\) 和 \(g: I \to [-\infty,+\infty)\) 是上半连续函数且 \(g\) 递增，则 \(g \circ f\) 是上半连续函数.
\end{enumerate}
\end{proposition}
\begin{remark}
下半连续函数同理也有相应的性质.
\end{remark}
\begin{note}
(2)是说紧集上的上半连续函数一定有上界且取得最大值. 一个经典的技巧是, 很多时候如果一个命题对所有紧集成立, 则等价于这个命题局部上成立, 即对每个点, 都存在一个邻域使得在这个邻域上成立. 现在我们注意到对每个点 \(x\), 如果其所有邻域上, 上半连续函数 \(f\) 无上界, 那么取 \(x_{n}\to x\) 使得 \(\lim_{n \to \infty}f(x_{n}) = +\infty\), 则 \(f\) 在紧集 \(\{x_{n}\}\cup\{x\}\) 上无上界, 这就是一个矛盾!
\end{note}
\begin{proof}
\begin{enumerate}
\item 对任何 \(x_{0}\in X,\beta\),由$f_{\alpha}$下半连续和下确界的定义,我们有
\[
\varlimsup_{x \to x_{0}}\inf_{\alpha}f_{\alpha}(x)\leq\varlimsup_{x \to x_{0}}f_{\beta}(x)\leq f_{\beta}(x_{0}).
\]
两边对 \(\beta\) 取下确界即得
\[
\varlimsup_{x \to x_{0}}\inf_{\alpha}f_{\alpha}(x)\leq\inf_{\beta}f_{\beta}(x_{0}).
\]
故 \(f = \inf_{\alpha}f_{\alpha}\) 也是上半连续函数.

\item 注意到开覆盖 \(K=\bigcup_{c}\{x\in K:f(x)<c\}\),由$K$是紧集可知,必有有限子覆盖
\[
K=\bigcup_{i = 1}^{n}\{x\in K:f(x)<c_{i}\}.
\]
不妨设 \(c_{1}\) 是 \(c_{i},i = 1,2,\cdots,n\) 的最大值, 则 \(f(x)<c_{1}\),\(\forall x\in K\).即上半连续函数$f$在$K$上有上界.  取 \(c=\sup_{K}f\), 如果 \(f\) 达不到最大值, 注意到
\begin{align*}
\underset{x\rightarrow x_0}{\overline{\lim }}\frac{1}{c-f(x)}\leqslant \frac{1}{c-\underset{x\rightarrow x_0}{\overline{\lim }}f(x)}\leqslant \frac{1}{c-f(x_0)}.
\end{align*}
故 $\frac{1}{c-f(x)}$ 在 $K$ 上上半连续。因此同理可得 $\frac{1}{c-f(x)}$ 在 $K$ 上也有上界。于是存在 $M>0$，使得
\begin{align*}
\frac{1}{c-f(x)}\leqslant M \Rightarrow f(x) \leqslant c-\frac{1}{M}<c.
\end{align*}
这与 $c=\underset{K}{\mathrm{sup}}\,f$ 矛盾!从而$f$能取到最大值,于是一定存在$a\in K$,使得$c=f(a)$,故$f(x)<c=f(a),\forall x\in K$.

\item 注意到 \(\{x\in X:g(x)<c\}=[-\infty,\alpha_{c})\), 因此
\[
\{x\in X:g\circ f(x)<c\}=\{x\in X:f(x)<\alpha_{c}\},
\]
这就证明了 \(g\circ f\) 是上半连续函数.
\end{enumerate}
\end{proof}

\begin{theorem}[半连续函数逼近定理]\label{theorem:半连续函数逼近定理}
设 \(X\) 是一个度量空间，\(f\) 是 \(X\) 上的上半连续函数，则存在递减函数列 \(f_{n} \subset C(X)\) 使得
\[
\lim_{n \to \infty} f_{n}(x)=f(x),\forall x \in X
\]
\end{theorem}
\begin{proof}
如果 \(f\equiv -\infty\)，取 \(f_{n}=-n,n = 1,2,\cdots\)。现在假定 \(f\not\equiv -\infty\)，然后考虑 \(g = e^{-f}:X\to(0,+\infty]\) 并定义
\[
g_{n}(x)=\inf_{z\in X}\{g(z)+nd(x,z)\},n = 1,2,\cdots.
\]
显然
\[
g_{n}(x)\leq g_{n + 1}(x)\leq g(x),\forall x\in X,n = 1,2,\cdots.
\]
因为 \(g\not\equiv+\infty\)，我们知道 \(g_{n},n\in\mathbb{N}\) 都是有限函数。若对某个 \(n\in\mathbb{N}\) 和 \(x\in X\)，有 \(g_{n}(x)=0\)。则存在 \(z_{m}\in X,m\in\mathbb{N}\) 使得
\[
\lim_{m\to\infty}[g(z_{m})+nd(z_{m},x)] = 0,
\]
即
\[
\lim_{m\to\infty}d(z_{m},x)=0,\lim_{m\to\infty}f(z_{m})=+\infty.
\]
又由\hyperref[proposition:半连续函数基本性质]{上半连续函数基本性质(2)和笔记}知 \(f\) 局部有上界，这就是矛盾！因此我们证明了
\[
g_{n}(x)>0,\forall x\in X,n\in\mathbb{N}.
\]
为了说明 \(f_{n}=-\ln g_{n},n\in\mathbb{N}\) 是我们需要的函数，我们只需证明
\[
g_{n}\in C(X),\lim_{n\to\infty}g_{n}=g.
\]
事实上，对任何 \(x,y,z\in X\)，我们有
\[
g_{n}(x)\leq g(z)+nd(z,x)\leq g(z)+nd(y,z)+nd(x,y).
\]
对 \(z\) 取下确界得
\[
g_{n}(x)\leq g_{n}(y)+nd(x,y),
\]
对称得
\[
g_{n}(y)\leq g_{n}(x)+nd(x,y),
\]
即
\[
|g_{n}(y)-g_{n}(x)|\leq nd(x,y).
\]
故 \(g_{n}\in C(X),\forall n\in\mathbb{N}\)。

给定 \(x\in X\) 和 \(\varepsilon>0\)，因为 \(g\) 下半连续，所以存在 \(x\) 的半径为 \(\delta>0\) 的开球邻域 \(U\)，使得
\[
g(z)>g(x)-\varepsilon,\forall z\in U.
\]
于是由 \(g_{n}\) 定义知
\[
g_{n}(x)\geq\min\{g(x)-\varepsilon,n\delta\}.
\]
当 \(n\) 充分大，我们知道 \(g(x)\geq g_{n}(x)\geq g(x)-\varepsilon\)，这就证明了 \(\lim_{n\to\infty}g_{n}=g\)。我们完成了证明.
\end{proof}


\begin{theorem}[下凸函数的局部定义]\label{theorem:下凸函数的局部定义}
设开集\(V\subset\mathbb{R}^n\)，\(f\)在\(V\)上半连续，如果对任何\(x\in V\)，\(y\in\mathbb{R}^n\)，\(\delta>0\)，都存在\(h\in(0,\delta)\)，使得
\begin{align}
f(x)\leqslant\frac{f(x + hy)+f(x - hy)}{2}.\label{equation:局部下凸不等式}
\end{align}
证明\(f\)是\(V\)上的下凸函数.
\end{theorem}
\begin{note}
本定理表明下凸函数是个局部的概念，只要局部是下凸函数，整体也是下凸函数. 从证明可以看到，若对\(y\neq0\)，不等式\eqref{equation:局部下凸不等式}改为严格不等号，则\(f\)也是严格下凸的.
\end{note}
\begin{proof}
对\(x\in V,y\in\mathbb{R}^n\)，满足\(x + wy\in V,\forall w\in[-1,1]\)，考虑上半连续函数
\[
g(w)=f(x + wy)-\frac{f(x + y)-f(x - y)}{2}w-\frac{f(x + y)+f(x - y)}{2},
\]
现在有
\[
g(1)=g(-1)=0.
\]
如果存在\(s\in(-1,1)\)，使得\(g(s)>0\)，那么记
\[
M\triangleq\sup_{[-1,1]}g>0,A\triangleq\{x\in[-1,1]:g(x)=M\}.
\]
显然\(A\)是\((-1,1)\)中的紧集，设\(A\)的最大值点\(w_0\)，则\(1 - w_0>0\)，现在运用条件不等式\eqref{equation:局部下凸不等式}，我们知道存在充分
小的\(h > 0\)，使得
\[
f(x + w_0y)\leqslant\frac{f(x + w_0y+hy)+f(x + w_0y - hy)}{2}.
\]
于是对这个\(h\)，我们有
\begin{align*}
g(w_0)&=f(x + w_0y)-\frac{f(x + y)-f(x - y)}{2}w_0-\frac{f(x + y)+f(x - y)}{2}\\
&\leqslant\frac{f(x + w_0y+hy)+f(x + w_0y - hy)}{2}-\frac{f(x + y)-f(x - y)}{2}w_0-\frac{f(x + y)+f(x - y)}{2}\\
&=\frac{g(w_0 + h)+g(w_0 - h)}{2}<M,
\end{align*}
这是一个矛盾！因此
\[
g(w)\leqslant0,\forall w\in[-1,1],
\]
因此
\[
g(0)\leqslant0\Rightarrow f(x)\leqslant\frac{f(x + y)+f(x - y)}{2},
\]
故\(f\)是Jensen下凸函数，因为\(f\)上半连续，所以\(f\)局部有上界，所以由\hyperref[lemma:关于Jesen下凸与连续的引理]{引理\ref{lemma:关于Jesen下凸与连续的引理}}知\(f\)在\(V\)上连续，因此我们证明了
\(f\)是下凸函数.
\end{proof}


\begin{example}
设有限函数
\begin{align*}
S(x) = \lim_{m \to \infty} \sum_{n=1}^{m} u_n(x),  u_n \in C[a,b],  n \in \mathbb{N}.
\end{align*}
若 $u_n, n \in \mathbb{N}$ 非负，证明 $S(x)$ 在 $[a,b]$ 达到最小值。
\end{example}
\begin{proof}
对 $\forall m\in \mathbb{N}$ ，由 $u_n\in C\left[ a,b \right]$ 且非负可得
\begin{align*}
\underset{x\rightarrow x_0}{\underline{\lim }}S\left( x \right) &= \underset{x\rightarrow x_0}{\underline{\lim }}\underset{m\rightarrow +\infty}{\lim}\sum_{n=1}^m{u_n\left( x \right)} \geqslant \underset{x\rightarrow x_0}{\underline{\lim }}\sum_{n=1}^m{u_n\left( x \right)} \\
&\geqslant \sum_{n=1}^m{\underset{x\rightarrow x_0}{\underline{\lim }}u_n\left( x \right)} = \sum_{n=1}^m{u_n\left( x_0 \right)}.
\end{align*}
令 $m\rightarrow +\infty$ ，则 $\underset{x\rightarrow x_0}{\underline{\lim }}S\left( x \right) \geqslant S\left( x_0 \right)$ ，故 $S\left( x \right)$ 在 $\left[ a,b \right]$ 上下半连续。
由\hyperref[proposition:半连续函数基本性质]{半连续函数的基本性质(2)}可知，$S\left( x \right)$ 在 $\left[ a,b \right]$ 上达到最小值。
\end{proof}

\begin{example}
设 $\{g_n\}_{n=1}^{\infty}, \{h_n\}_{n=1}^{\infty} \subset C[a,b]$，若
\begin{align*}
h_n \geq h_{n+1}, g_{n+1} \geq g_n, n = 1, 2, \cdots, \quad
\lim_{n \to \infty} h_n = \lim_{n \to \infty} g_n \text{存在}.
\end{align*}
证明：$\lim_{n \to \infty} h_n$ 是连续函数。
\end{example}
\begin{proof}
记 $h\left( x \right) =\underset{n\rightarrow +\infty}{\lim}h_n\left( x \right) =g\left( x \right) =\underset{n\rightarrow +\infty}{\lim}g_n\left( x \right)$ ，则一方面,对 $\forall N\in \mathbb{N}$ ，由条件可知
\begin{align*}
h_n\left( x \right) &\leqslant h_{n-1}\left( x \right) \leqslant \cdots \leqslant h_N\left( x \right) ,\forall n>N.
\end{align*}
令 $n\rightarrow \infty$ ，得到
\begin{align*}
h\left( x \right) &\leqslant h_N\left( x \right) ,\forall n>N.
\end{align*}
$\forall x_0\in \left[ a,b \right]$ ，令 $x\rightarrow x_0$ ，并取上极限，结合 $h_N\in C\left[ a,b \right]$ 可得
\begin{align*}
\underset{x\rightarrow x_0}{\overline{\lim }}h\left( x \right) &\leqslant \underset{x\rightarrow x_0}{\overline{\lim }}h_N\left( x \right) =h_N\left( x_0 \right) ,\forall n>N.
\end{align*}
令 $N\rightarrow \infty$ ，得到 $\underset{x\rightarrow x_0}{\overline{\lim }}h\left( x \right) \leqslant h\left( x_0 \right)$ 。故 $h$ 在 $\left[ a,b \right]$ 上上半连续。

另一方面,对 $\forall m\in \mathbb{N}$ ，由条件可知
\begin{align*}
g_n\left( x \right) &\geqslant g_{n-1}\left( x \right) \geqslant \cdots \geqslant g_m\left( x \right) ,\forall n>m.
\end{align*}
令 $n\rightarrow \infty$ ，得到
\begin{align*}
g\left( x \right) &\geqslant h_m\left( x \right) ,\forall n>m.
\end{align*}
$\forall x_0\in \left[ a,b \right]$ ，令 $x\rightarrow x_0$ ，并取上极限，结合 $g_m\in C\left[ a,b \right]$ 可得
\begin{align*}
\underset{x\rightarrow x_0}{\underline{\lim }}g\left( x \right) &\geqslant \underset{x\rightarrow x_0}{\underline{\lim }}g_m\left( x \right) =g_m\left( x_0 \right) ,\forall n>m.
\end{align*}
令 $m\rightarrow \infty$ ，得到 $\underset{x\rightarrow x_0}{\underline{\lim }}g\left( x \right) \geqslant g\left( x_0 \right)$ 。故 $g$ 在 $\left[ a,b \right]$ 上下半连续。
因此 $h=g$ 在 $\left[ a,b \right]$ 上既上半连续又下半连续，从而 $h=g$ 在 $\left[ a,b \right]$ 上连续.
\end{proof}


\end{document}