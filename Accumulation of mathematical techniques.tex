\documentclass[lang=cn,newtx,10pt,scheme=chinese]{elegantbook}

\title{分析学技巧积累}
\subtitle{\,\,}

\author{邹文杰}
\institute{无}
\date{2024/10/25}
\version{ElegantBook-4.5}
\bioinfo{自定义}{信息}

\extrainfo{宠辱不惊,闲看庭前花开花落;
\\
去留无意,漫随天外云卷云舒.}

\setcounter{tocdepth}{3}

\logo{logo-blue.png}
\cover{cover.png}

% 本文档额外使用的宏包和命令
\usepackage{mystyle-cn}

\begin{document}

\maketitle
\frontmatter

\tableofcontents

\mainmatter
\everymath{\displaystyle} % 让全文的行内公式都显示行间公式效果

\chapter{想法}

\section{分段估计}

\begin{conclusion}
   \textbf{分段估计和式}

   分段的方式:将和式分成两部分,一部分是和式的前充分多项(前有限项/前N项),另一部分是余项(从N+1项开始包括后面的所有项).(黎曼积分本质就是和式的极限,直接细分成每一小段,估计每一小段的被积函数值,进而区分积分(和式)的主体部分和余项部分)
\end{conclusion}
\begin{note}
   如果和式的极限存在,则由$Cauchy$收敛准则,可知和式的余项的极限一般会趋于0.
\end{note}

\section{分部积分}
\textbf{分部积分转换导数}

分部积分能够将两个被积函数的导数交换.



\chapter{求和与求积符号}

\section{求和符号}

\begin{definition}[空和(Empty sum)]\label{definition:空和(Empty sum)}
   \begin{align}
      \sum\limits_{i=b+1}^b{f(i)}\xlongequal{\bigtriangleup}0,b\in \mathbb{Z}.
   \end{align}
\end{definition}

\begin{theorem}[关于求和号下限大于上限的计算]\label{theorem:关于求和号下限大于上限的计算}
   \begin{align}
     \sum\limits_{i=a}^c{f(i)}\equiv -\sum\limits_{i=c+1}^{a-1}{f(i),a,c}\in \mathbb{Z}\text{且} a>c. 
   \end{align}
\end{theorem}
\begin{note}
   上述\hyperref[definition:空和(Empty sum)]{空和的定义}与\hyperref[theorem:关于求和号下限大于上限的计算]{关于求和号下限大于上限的计算定理}都来自论文:\href{https://vixra.org/pdf/1601.0207v1.pdf}{Interpreting the summation notation when
   the lower limit is greater than the upper limit(Kunle Adegoke)}.
\end{note}

\begin{theorem}[求和号基本性质]\label{theorem:求和号基本性质}
\begin{enumerate}
   \item\label{theorem:求和号基本性质1} (\textbf{倒序求和})当$n$为非负整数时,有
   \begin{align*}
      \sum\limits_{k=1}^n{a_k}=\sum\limits_{k=1}^n{a_{n-k+1}}.
   \end{align*}
\end{enumerate}
   
\end{theorem}

\subsection{求和号交换顺序}

\begin{theorem}[\hypertarget{关于求和号换序的基本结论}{基本结论}]\label{theorem:求和号换序基本结论}
\hypertarget{求和号换序结论1}{1.}当$n,m$均为非负整数时,有
\begin{align*}
   \sum\limits_{\substack{1\le i\le n\\1\le j\le m\\}}a_{ij}=\sum\limits_{i=1}^n{\sum\limits_{j=1}^m{a_{ij}}}=\sum\limits_{j=1}^m{\sum\limits_{i=1}^n{a_{ij}}}.
   \end{align*}
2.当$n,m$均为非负整数,$p\leq n,q\leq m\text{且}p,q\in \mathbb{N_+}$时,有
\begin{align*}
   \sum\limits_{\substack{
	p\le i\le n\\
	q\le j\le m\\
}}{a_{ij}}=\sum\limits_{i=p}^n{\sum\limits_{j=q}^m{a_{ij}}}=\sum\limits_{j=q}^m{\sum\limits_{i=p}^n{a_{ij}}.}
   \end{align*}
\hypertarget{求和号换序结论2}{3.}当$n$为非负整数时,有
\begin{align*}
\sum\limits_{1\le i\le j\le n}{a_{ij}}=\sum\limits_{i=1}^n{\sum\limits_{j=i}^n{a_{ij}}}=\sum\limits_{j=1}^n{\sum\limits_{i=1}^j{a_{ij}}}.
\end{align*}
4.当$n$为非负整数时,有
\begin{align*}
   \sum\limits_{1\le i<j\le n}{a_{ij}}=\sum\limits_{i=1}^{n-1}{\sum\limits_{j=i+1}^n{a_{ij}}}=\sum\limits_{j=2}^n{\sum\limits_{i=1}^{j-1}{a_{ij}}}.
\end{align*}
5.当$n$为非负整数时,有
\begin{align*}
   \sum\limits_{i=1}^n{a_i}\cdot \sum\limits_{j=1}^n{b_j}=\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{a_ib_j}}.
\end{align*}
6.当$n$为非负整数时,有
\begin{align*}
   \left( \sum\limits_{i=1}^n{a_i} \right) ^2=\sum\limits_{i=1}^n{a_i\cdot \sum\limits_{j=1}^n{a_j}}\geqslant 0,\forall a_1,a_2,\cdots ,a_n\in \mathbb{R}=\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{a_ia_j}} .
\end{align*}
\end{theorem}
\begin{note}
如果上述命题第1条中的$n$或$m$取到无穷,第2条中的$n$取到无穷,则求和号不能直接交换顺序.此时,往往要添加一个条件,相应的交换和号的结论才能成立.
比如,著名的$Fubini$定理(见\hyperlink{关于无限和的Fubinin定理}{关于无限和的Fubinin定理}).
\end{note}
\begin{proof}
   1.利用矩阵证明该结论.

   设一个$m$行$n$列的矩阵$A$为
   \begin{align*}
      A=\left[ \begin{matrix}
         a_{11}&		a_{12}&		\cdots&		a_{1m}\\
         a_{21}&		a_{22}&		\cdots&		a_{2m}\\
         \vdots&		\vdots&		\ddots&		\vdots\\
         a_{n1}&		a_{n2}&		\cdots&		a_{nm}\\
      \end{matrix} \right] .
      \nonumber
   \end{align*}
   则矩阵$A$的第$i$行的和记为
   \begin{align*}
      r_i=\sum\limits_{j=1}^m{a_{ij}}\left( i=1,2,\cdots ,n \right) .
      \nonumber
   \end{align*}
   矩阵$A$的第$j$列的和记为
   \begin{align*}
      c_j=\sum\limits_{i=1}^n{a_{ij}}\left( j=1,2,\cdots ,m \right) .
      \nonumber
   \end{align*}
   易知,矩阵所有元素的和等于所有行和$r_i,i=1,2,\cdots,n$求和也等于所有列和$c_j,j=1,2,\cdots,m$求和,即
   \begin{align*}
      \sum\limits_{\substack{1\le i\le n\\1\le j\le n\\}}a_{ij}=\sum\limits_{i=1}^n{r_i}=\sum\limits_{i=1}^n{\sum\limits_{j=1}^m{a_{ij}}},
\\
\sum\limits_{\substack{1\le i\le n\\1\le j\le n\\}}a_{ij}=\sum\limits_{j=1}^m{c_j}=\sum\limits_{j=1}^m{\sum\limits_{i=1}^n{a_{ij}}}.
      \nonumber
   \end{align*}
   故\begin{align*}
      \sum\limits_{i=1}^n{\sum\limits_{j=1}^m{a_{ij}}}=\sum\limits_{j=1}^m{\sum\limits_{i=1}^n{a_{ij}}}=\sum\limits_{\substack{1\le i\le n\\1\le j\le n\\}}a_{ij}.
     \nonumber
  \end{align*}
2.同理利用矩阵证明该结论.

设一个$m$行$n$列的矩阵$A$为
\begin{align*}
   A=\left[ \begin{matrix}
      a_{pq}&		a_{p,q+1}&		\cdots&		a_{pm}\\
      a_{p+1,q}&		a_{p+1,q+1}&		\cdots&		a_{p+1,m}\\
      \vdots&		\vdots&		\ddots&		\vdots\\
      a_{nq}&		a_{n,q+1}&		\cdots&		a_{nm}\\
   \end{matrix} \right] .
   \nonumber
\end{align*}
则矩阵$A$的第$i$行的和记为
\begin{align*}
   r_i=\sum\limits_{j=q}^m{a_{ij}}\left( i=p,p+1,\cdots ,n \right) .
   \nonumber
\end{align*}
矩阵$A$的第$j$列的和记为
\begin{align*}
   c_j=\sum\limits_{i=p}^n{a_{ij}}\left( j=q,q+1,\cdots ,m \right) .
\end{align*}
易知,矩阵所有元素的和等于所有行和$r_i,i=p,p+1,\cdots ,n$求和也等于所有列和$c_j,j=q,q+1,\cdots ,m$求和,即
\begin{align*}
   \sum\limits_{\substack{
      p\le i\le n\\
      q\le j\le n\\
   }}{a_{ij}}=\sum\limits_{i=p}^n{r_i}=\sum\limits_{i=p}^n{\sum\limits_{j=q}^m{a_{ij}},}
   \\
   \sum\limits_{\substack{
      p\le i\le n\\
      q\le j\le n\\
   }}{a_{ij}}=\sum\limits_{j=q}^m{c_j}=\sum\limits_{j=q}^m{\sum\limits_{i=p}^n{a_{ij}}.}
\end{align*}
故\begin{align*}
   \sum\limits_{i=p}^n{\sum\limits_{j=q}^m{a_{ij}}}=\sum\limits_{j=q}^m{\sum\limits_{i=p}^n{a_{ij}}}=\sum\limits_{\substack{p\le i\le n\\q\le j\le n\\}}a_{ij}.
\end{align*}

   3.根据(1)的结论可得
   \begin{align*}
      \sum\limits_{j=1}^n{\sum\limits_{i=1}^j{a_{ij}}}=\sum\limits_{j=1}^n{\sum\limits_{i=1}^n{a_{ij}\chi _{i\le j}}}\left( i \right) 
      \xlongequal{\hyperlink{求和号换序结论1}{1.\text{的结论}}}\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{a_{ij}\chi _{i\le j}\left( i \right)}}=\sum\limits_{i=1}^n{\sum\limits_{j=i}^n{a_{ij}}}.
   \end{align*}

   4.根据(1)的结论可得
   \begin{align*}
      \sum\limits_{j=2}^{n}{\sum\limits_{i=1}^{j-1}{a_{ij}}}=\sum\limits_{j=2}^{n}{\sum\limits_{i=1}^{n-1}{a_{ij}\chi _{i< j}}}\left( i \right) 
      \xlongequal{\hyperlink{求和号换序结论1}{1.\text{的结论}}}\sum\limits_{i=1}^{n-1}{\sum\limits_{j=2}^{n}{a_{ij}\chi _{i< j}\left( i \right)}}=\sum\limits_{i=1}^{n-1}{\sum\limits_{j=i+1}^{n}{a_{ij}}}.
   \end{align*}

   5.结论是显然的.
   
   6.结论是显然的.
\end{proof}
\begin{remark}
   设$X$是全集,对任意集合$A\subset X$,把函数
   \begin{align*}
      \chi _A\left( x \right) =\begin{cases}
         1,x\in A\\
         0,x\notin A\\
      \end{cases}.
      \nonumber
   \end{align*}
   称为集合$A$的\textbf{示性函数}.
\end{remark}

\begin{example}
   计算
   \begin{align*}
      \sum\limits_{j=1}^n{\sum\limits_{i=1}^n{\frac{i}{2^{i+j}\left( i+j \right)}}.}
   \end{align*}
\end{example}
\begin{solution}
   令$I=\sum\limits_{j=1}^n{\sum\limits_{i=1}^n{\frac{i}{2^{i+j}\left( i+j \right)}}}$,则
   \begin{align*}
      I&=\sum\limits_{j=1}^n{\sum\limits_{i=1}^n{\frac{i}{2^{i+j}\left( i+j \right)}}}\xlongequal[\left( \text{轮换换元} \right)]{\text{将}i\text{换成}j,\text{换成}i}\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{j}{2^{i+j}\left( i+j \right)}}}
\\
&=\frac{1}{2}\left( \sum\limits_{j=1}^n{\sum\limits_{i=1}^n{\frac{i}{2^{i+j}\left( i+j \right)}}}+\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{j}{2^{i+j}\left( i+j \right)}}} \right)
= \frac{1}{2}\left( \sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{i}{2^{i+j}\left( i+j \right)}}}+\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{j}{2^{i+j}\left( i+j \right)}}} \right) 
\\
&=\frac{1}{2}\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{i+j}{2^{i+j}\left( i+j \right)}}}
=\frac{1}{2}\sum\limits_{i=1}^n{\sum\limits_{j=1}^n{\frac{1}{2^{i+j}}}}=\frac{1}{2}\sum\limits_{i=1}^n{\frac{1}{2^i}\cdot \sum\limits_{j=1}^n{\frac{1}{2^j}}}=\frac{1}{2}\left( \sum\limits_{i=1}^n{\frac{1}{2^i}} \right) ^2
\\
&=\frac{1}{2}\left( \frac{\frac{1}{2}-\frac{1}{2^{n+1}}}{1-\frac{1}{2}} \right) ^2=\frac{1}{2}\left[ 1-\frac{1}{2^n} \right] ^2.
   \end{align*}
\end{solution}

\begin{example}
   记\begin{align*}
      T=\left\{ \left( a,b,c \right) \in \mathbb{N} ^3:a,b,c\text{可以构成某个三角形的三边长} \right\} .
   \end{align*}
证明:\begin{align*}
   \sum\limits_{\left( a,b,c \right) \in T}{A_{a,b,c}}=\sum\limits_{\left( x,y,z \right) \in \mathbb{N} ^3\text{且有相同的奇偶性}}{A_{\frac{x+y}{2},\frac{y+z}{2},\frac{z+x}{2}}}.
\end{align*}   
\end{example}
\begin{note}
   核心想法:两个集合间可以建立一一映射.
\end{note}
\begin{conclusion}
   若$x,y,z\in \mathbb{N} _+,x,y,z$具有相同奇偶性的充要条件为
   \begin{align*}
      x+y=2a,y+z=2b,x+z=2c,\text{其中}a,b,\in \mathbb{N} _+.
   \end{align*}
\begin{proof}
   必要性显然.下面证明充分性.
   假设$x,y,z$具有不同的奇偶性,则不妨设$x,z$为奇数,$y$为偶数.从而$x+y$一定为奇数,这与$x+y=2a$矛盾.故$x,y,z$具有相同奇偶性.
\end{proof}
\end{conclusion}
\begin{proof}
   设\(T = \{ (a,b,c) \in \mathbb{N}^3 : a,b,c\text{ 可以构成某个三角形的三边长}\}\).
\begin{align*}
   \sum\limits_{(a,b,c) \in T}A_{a,b,c} = \sum\limits_{(x,y,z) \in \mathbb{N}^3\text{ 且有相同的奇偶性}}A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}}.
\end{align*}
记\(S = \{ (x,y,z) \in \mathbb{N}^3 : x,y,z\text{ 有相同的奇偶性}\}\),则对\(\forall (x,y,z) \in S\),取\(a = \frac{x + y}{2}\),\(b = \frac{y + z}{2}\),\(c = \frac{z + x}{2}\).此时我们有
\begin{align*}
   a + b = \frac{x + 2y + z}{2} > \frac{z + x}{2} = c,
   \\
b + c = \frac{x + y + 2z}{2} > \frac{x + y}{2} = a,
   \\
   a + c = \frac{2x + y + z}{2} > \frac{y + z}{2} = b.
\end{align*}
从而\(a,b,c\)可以构成某个三角形的三边长,即此时\((a,b,c) = (\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}) \in T\).

于是我们可以构造映射
\begin{align*}
   \tau : S \to T,(x,y,z) \mapsto (a,b,c) = (\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}).
\end{align*}
反之,对\(\forall (a,b,c) \in T\),取\(x = a + c - b\),\(y = a + b - c\),\(z = b + c - a\).
此时我们有
\begin{align*}
   x + y = 2a,y + z = 2b,x + z = 2c.
\end{align*}
从而\(x,y,z\)具有相同的奇偶性,即此时\((x,y,z) = (a + c - b,a + b - c,b + c - a) \in S\).

于是我们可以构造映射
\begin{align*}
   \tau': T \to S,(a,b,c) \mapsto (x,y,z) = (a + c - b,a + b - c,b + c - a).
\end{align*}
因此对\(\forall (x,y,z) \in S\),都有
\(\tau\tau'(x,y,z) = \tau'\tau(x,y,z) = (x,y,z)\).
即\(\tau\tau' = I\).故映射\(\tau\)存在逆映射\(\tau'\).从而映射\(\tau\)是双射.

因此集合\(S\)中的每一个元素都能在集合\(T\)中找到与之一一对应的元素.于是两和式\(\sum\limits_{(x,y,z) \in S}A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}}\)和\(\sum\limits_{(a,b,c) \in T}A_{a,b,c}\)的项数一定相同.并且任取\(\sum\limits_{(x,y,z) \in S}A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}}\)中\((x,y,z)\)所对应的一项\(A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}}\),\(\sum\limits_{(a,b,c) \in T}A_{a,b,c}\)中一定存在与之一一对应的\(\tau(x,y,z)\)所对应的一项\(A_{\tau(x,y,z)}\).而\(\tau(x,y,z) = (\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2})\),因此\(A_{\tau(x,y,z)} = A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}}\).故\(\sum\limits_{(x,y,z) \in S}A_{\frac{x + y}{2},\frac{y + z}{2},\frac{z + x}{2}} = \sum\limits_{(a,b,c) \in T}A_{a,b,c}\). 
\end{proof}
\begin{remark}
   上述证明中逆映射的构造可以通过联立方程$a=\frac{x+y}{2},b=\frac{y+z}{2},c=\frac{z+x}{2}$解出$x=a+c-b,y=a+b-c,z=b+c-a$得到.
\end{remark}

\begin{theorem}[\hypertarget{关于无限和的Fubinin定理}{关于无限和的Fubinin定理}]\label{关于无限和的Fubinin定理}
设 \( f: \mathbb{N} \times \mathbb{N} \to \mathbb{R} \) 是一个使得 \(\sum\limits_{(n,m) \in \mathbb{N} \times \mathbb{N}} f(n,m)\) 绝对收敛的函数.那么

1.\begin{align*}
   \sum\limits_{n=0}^{\infty}{\sum\limits_{m=0}^{\infty}{f(n,m)}}=\sum\limits_{m=0}^{\infty}{\sum\limits_{n=0}^{\infty}{f(n,m)}.}
\nonumber
\end{align*}
2.\begin{align*}
   \sum\limits_{n=1}^{\infty}{\sum\limits_{m=1}^n{f(n,m)}}=\sum\limits_{m=1}^{\infty}{\sum\limits_{n=m}^{\infty}{f(n,m)}}.
   \nonumber
\end{align*}
\end{theorem}
\begin{note}
   这个命题是\hyperlink{关于求和号换序的基本结论}{关于求和号换序的基本结论}的推广.
\end{note}
\begin{proof}

\end{proof}

\begin{example}
   (PutnamA3)已知\(a_0, a_1, \ldots, a_n, x\)是实数,且\(0 < x < 1\),并且满足
   \begin{align*}
    \frac{a_0}{1 - x}+\frac{a_1}{1 - x^2}+\cdots+\frac{a_n}{1 - x^{n + 1}} = 0.
     \nonumber
   \end{align*}
   证明:存在一个\(0 < y < 1\),使得
 \begin{align*}
   a_0 + a_1y + \cdots + a_ny^n = 0.
   \nonumber
 \end{align*}
\end{example}

\begin{proof}
   由题意可知,将$\frac{1}{1-x^{k+1}}\left( k=0,1,\cdots ,n \right)$根据幂级数展开可得
   \begin{align*}
      \sum\limits_{k=0}^n{\frac{a_k}{1-x^{k+1}}}=\sum\limits_{k=0}^n{a_k\sum\limits_{i=0}^{+\infty}{x^{\left( k+1 \right) i}}}=\sum\limits_{k=0}^n{\sum\limits_{i=0}^{+\infty}{a_kx^{\left( k+1 \right) i}}}.
      \nonumber
   \end{align*}
   又因为$0<x<1$,所以几何级数$\sum\limits_{i=0}^{+\infty}{x^{\left( k+1 \right) i}}$是绝对收敛的.
   从而有限个绝对收敛的级数的线性组合$\sum\limits_{k=0}^n{a_k\sum\limits_{i=0}^{+\infty}{x^{\left( k+1 \right) i}}}$也是绝对收敛的.
   于是根据\hyperlink{关于无限和的Fubinin定理}{关于无限和的Fubinin定理}可得
   \begin{align*}
      \sum\limits_{k=0}^n{\frac{a_k}{1-x^{k+1}}}=\sum\limits_{k=0}^n{\sum\limits_{i=0}^{+\infty}{a_kx^{\left( k+1 \right) i}}}=\sum\limits_{i=0}^{+\infty}{\sum\limits_{k=0}^n{a_kx^{\left( k+1 \right) i}}}=\sum\limits_{i=0}^{+\infty}{x^i\sum\limits_{k=0}^n{a_kx^{ki}}}.
      \nonumber
   \end{align*}
   设$f(y)=a_0 + a_1y + \cdots + a_ny^n = 0,y\in(0,1)$,则$f\in \mathbb{C}(0,1)$.
   假设对任意的$y\in(0,1)$,有$f(y)\ne0$.
   则$f$要么恒为正数,要么恒为负数.
   否则,存在$y_1,y_2\in(0,1)$,使得$f(y_1)>0,f(y_2)<0$.那么由连续函数介值定理可知,一定存在$y_0\in(0,1)$,使得$f(y_0)=0$.这与假设矛盾.
   因此不失一般性,我们假设$f(y)>0,\forall y\in (0,1)$.又由$0<x<1$可知,$x^i\in(0,1)$.从而
   \begin{align*}
      \sum\limits_{k=0}^n{\frac{a_k}{1-x^{k+1}}}=\sum\limits_{i=0}^{+\infty}{x^i\sum\limits_{k=0}^n{a_kx^{ki}}=}\sum\limits_{i=0}^{+\infty}{x^if\left( x^i \right)}>0.
      \nonumber
   \end{align*}
   这与题设矛盾.故原结论成立.
\end{proof}

\subsection{裂项求和}

\begin{theorem}[基本结论]\label{theorem:裂项求和基本结论}
   (1)当$a,b\in \mathbb{Z}$且$a\leq b$时,有
   \begin{gather*}
      \sum\limits_{n=a}^b{\left[ f\left( n \right) -f\left( n+1 \right) \right] =f\left( a \right) -f\left( b+1 \right)};
\\
\sum\limits_{n=a}^b{\left[ f\left( n+1 \right) -f\left( n \right) \right] =f\left( b+1 \right) -f\left( a \right)};
\\
\sum\limits_{n=a}^b{\left[ f\left( n \right) -f\left( n-1 \right) \right]}=f\left( b \right) -f\left( a-1 \right) ;
\\
\sum\limits_{n=a}^b{\left[ f\left( n-1 \right) -f\left( n \right) \right]}=f\left( a-1 \right) -f\left( b \right) .
   \end{gather*}
(2)当$a,b,m\in \mathbb{Z}$且$a\leq b$时,有
\begin{gather}\label{equation:隔m项的裂项求和式1}
   \sum\limits_{n=a}^b{\left[ f\left( n+m \right) -f\left( n \right) \right] =\sum\limits_{n=b+1}^{b+m}{f\left( n \right)}-\sum\limits_{n=a}^{a+m-1}{f\left( n \right)}};
\\\label{equation:隔m项的裂项求和式2}
\sum\limits_{n=a}^b{\left[ f\left( n \right) -f\left( n+m \right) \right] =\sum\limits_{n=a}^{a+m-1}{f\left( n \right)}-\sum\limits_{n=b+1}^{b+m}{f\left( n \right)}}.
\end{gather}
\end{theorem}
\begin{proof}
   (1)将求和展开后很容易得到证明.

   (2)因为(2)中上下两个式子\eqref{equation:隔m项的裂项求和式1}\eqref{equation:隔m项的裂项求和式2}互为相反数,所以我们只证明\eqref{equation:隔m项的裂项求和式1}即可.

   当\(m \geq 0\)时,若\(m \leq b - a\),则
\begin{align*}
&\sum\limits_{n = a}^{b}[f(n + m) - f(n)] 
\\
&= f(a + m) + \cdots + f(b) + f(b + 1) + \cdots + f(b + m) - f(a) - \cdots - f(a + m - 1) - f(a + m) - \cdots - f(b)\\
&= f(b + 1) + \cdots + f(b + m) - f(a) - \cdots - f(a + m - 1)\\
&= \sum\limits_{n = b + 1}^{b + m}f(n) - \sum\limits_{n = a}^{a + m - 1}f(n)
\end{align*}
若\(m > b - a\),则
\begin{align*}
&\sum\limits_{n = b + 1}^{b + m}f(n) - \sum\limits_{n = a}^{a + m - 1}f(n)\\
&= f(b + 1) + \cdots + f(a + m - 1) + f(a + m) + \cdots + f(b + m) - f(a) - \cdots - f(b) - f(b + 1) - \cdots - f(a + m - 1)\\
&= f(a + m) + \cdots + f(b + m) - f(a) - \cdots - f(b)\\
&= \sum\limits_{n = a}^{b}[f(n + m) - f(n)]
\end{align*}
综上,当\(m \geq 0\)时,有\(\sum\limits_{n = a}^{b}[f(n + m) - f(n)] = \sum\limits_{n = b + 1}^{b + m}f(n) - \sum\limits_{n = a}^{a + m - 1}f(n)\).

当\(m < 0\)时,我们有\(-m > 0\),从而
\begin{align*}
&\sum\limits_{n = a}^{b}[f(n + m) - f(n)] = \sum\limits_{n = a + m}^{b + m}[f(n) - f(n - m)]
= -\sum\limits_{n = a + m}^{b + m}[f(n - m) - f(n)]\\
&= -\left(\sum\limits_{n = b + m + 1}^{b + m - m}f(n) - \sum\limits_{n = a + m}^{a + m - m - 1}f(n)\right)
= \sum\limits_{n = a + m}^{a - 1}f(n) - \sum\limits_{n = b + m + 1}^{b}f(n)\\
&\xlongequal{\hyperref[theorem:关于求和号下限大于上限的计算]{\text{求和号下限大于上限}}}\sum\limits_{n = b + 1}^{b + m}f(n) - \sum\limits_{n = a}^{a + m - 1}f(n)
\end{align*}
综上所述,结论得证.
\end{proof}

\begin{example}
   1.对$m\in \mathbb{N}$,计算$\sum\limits_{n=1}^m{\left( \sin n^2\cdot \sin n \right)}$.
   \quad \quad
   2.对$n,m\in \mathbb{N}$,计算$\sum\limits_{k=1}^n{\frac{1}{k\left( k+m \right)}}$.
\end{example}
\begin{solution}
   1.\begin{align*}
      &\sum\limits_{n=1}^m{\left( \sin n^2\cdot \sin n \right)}\xlongequal{\text{积化和差公式}}-\frac{1}{2}\sum\limits_{n=1}^m{\left[ \cos \left( n^2+n \right) -\cos \left( n^2-n \right) \right]}
\\
&=-\frac{1}{2}\sum\limits_{n=1}^m{\left[ \cos \left( n\left( n+1 \right) \right) -\cos \left( n\left( n-1 \right) \right) \right]}
\\
&=-\frac{1}{2}\left[ \cos \left( m\left( m+1 \right) \right) -1 \right] 
   \end{align*}
   2.\begin{align*}
      &\sum\limits_{k=1}^n{\frac{1}{k\left( k+m \right)}}=\frac{1}{m}\sum\limits_{k=1}^n{\left( \frac{1}{k}-\frac{1}{k+m} \right)}
\\
&=\frac{1}{m}\left( 1+\frac{1}{2}\cdots +\frac{1}{m}-\frac{1}{n+1}-\frac{1}{n+2}-\cdots -\frac{1}{n+m} \right) 
   \end{align*}
\end{solution}


\section{求积符号}

\begin{definition}[求积符号]\label{definition:求积符号}
   \begin{align*}
     \prod_{k=1}^n{a_k}\xlongequal{\bigtriangleup}a_1a_2\cdots a_n. 
   \end{align*}
\end{definition}

\begin{theorem}[基本结论]\label{theorem:求积符号基本结论}
   当$p,q\in \mathbb{Z}$且$p\leq q$时,有
   \begin{gather*}
      \prod_{n=p}^q{\frac{a_{n+1}}{a_n}}=\frac{a_{q+1}}{a_p};
\\
\prod_{n=p}^q{\frac{a_n}{a_{n+1}}}=\frac{a_p}{a_{q+1}}.
   \end{gather*}
\end{theorem}
\begin{proof}
   由求积符号定义很容易得到证明.
\end{proof}
\begin{remark}
   对于正数列的乘积,我们可以通过取对数的方式,将其转化为$\ln \prod_{k=1}^n{a_k}=\sum\limits_{k=1}^n{\ln a_k}$来研究.
\end{remark}
\begin{example}
   计算:$\prod_{k=2}^n{\frac{k^3-1}{k^3+1}}$.
\end{example}
\begin{solution}
   \begin{align*}
      &\prod_{k=2}^n{\frac{k^3-1}{k^3+1}}=\prod_{k=2}^n{\left( \frac{k-1}{k+1}\cdot \frac{k^2+k+1}{k^2-k+1} \right)}=\prod_{k=2}^n{\frac{k-1}{k+1}\cdot}\prod_{k=2}^n{\frac{k\left( k+1 \right) +1}{k\left( k-1 \right) +1}}
\\
&=\frac{1\cdot 2\cdots n-1}{3\cdot 4\cdots n+1}\cdot \frac{n\left( n+1 \right) +1}{2+1}=\frac{2}{n+1}\cdot \frac{n\left( n+1 \right) +1}{3}
\\
&=\frac{2n^2+2n+2}{3n+3}
   \end{align*}
\end{solution}

\begin{example}
   证明:\begin{align*}
      \frac{\left( 2n-1 \right) !!}{2n!!}<\frac{1}{\sqrt{2n+1}},\forall n\in \mathbb{N} .
   \end{align*}
\end{example}
\begin{note}
   利用\hypertarget{"糖水"不等式}{\textbf{"糖水"不等式}}:
   对任意真分数$\frac{b}{a},a,b,c>0$,都有$\frac{b}{a}<\frac{b+c}{a+c}$成立.
\end{note}
\begin{proof}
   根据\hypertarget{"糖水"不等式}{"糖水"不等式},对$\forall n\in \mathbb{N}_+$,我们有
   \begin{align*}
      &\left[ \frac{\left( 2n-1 \right) !!}{2n!!} \right] ^2=\left( \prod_{k=1}^n{\frac{2k-1}{2k}} \right) ^2=\prod_{k=1}^n{\frac{2k-1}{2k}}\cdot \prod_{k=1}^n{\frac{2k-1}{2k}}
\\
&<\prod_{k=1}^n{\frac{2k-1}{2k}}\cdot \prod_{k=1}^n{\frac{2k}{2k+1}}=\prod_{k=1}^n{\frac{2k-1}{2k+1}}=\frac{1}{2n+1}
   \end{align*}
故对$\forall n\in \mathbb{N}_+$,都有$\frac{\left( 2n-1 \right) !!}{2n!!}<\frac{1}{\sqrt{2n+1}},\forall n\in \mathbb{N}$成立.
\end{proof}

\chapter{实数基本定理与上下极限}

\section{实数基本定理}

\subsection{定理介绍}

\begin{theorem}[实数基本定理]\label{theorem:实数基本定理}
\begin{enumerate}
   \item 确界存在定理:有上界的非空数集一定有上确界.
   \item 单调有界原理:单调有界数列一定收敛.
   \item 柯西收敛准则:数列\(\{x_n\}\)收敛当且仅当任意\(\varepsilon > 0\),存在\(N\)使得任意\(m,n > N\)都有\(\vert x_m - x_n\vert < \varepsilon\).
   \item 闭区间套定理:闭区间套\(I_n = [a_n,b_n]\)满足\(I_{n + 1} \subset I_n\)并且\(\lim_{n \to \infty} (a_n - b_n) = 0\),则存在唯一的\(\xi\),使得\(\xi\)属于每一个\(I_n\).
   \item 聚点定理:有界数列必有收敛子列.
   \item 有限覆盖定理:有界闭集的任意一族开覆盖,都存在有限子覆盖.
\end{enumerate}
\end{theorem}

\begin{definition}[点集相关概念]\label{definition:点集相关概念}
\begin{enumerate}
   \item 如果存在\(r > 0\)使得\((a - r,a + r) \subset A\),则称\(a\)是集合\(A\)的内点(高维改为开球即可).
   \item 如果一个集合\(A\)中的每一个点都是内点,则称\(A\)是开集.
   \item 如果集合\(A\)中的任意一个收敛序列\(x_n\)的极限点\(x\),都有\(x\in A\),则称\(A\)是闭集.
   \item 设\(B\subset A\),如果对任意\(r > 0\)和任意\(x\in A\),都有\((x - r,x + r)\cap B\neq\varnothing\),则称\(B\)在\(A\)中稠密.
\end{enumerate}
\end{definition}

\subsection{综合应用}

\begin{example}
   设\(f(x):[0,1]\to[0,1]\)单调递增且\(f(0)>0,f(1)<1\),证明:存在\(x\)使得\(f(x)=x\).
\end{example}
\begin{note}
因为题目条件中的函数$f$只是一个实值函数,并没有其他更进一步的性质(连续性、可微性、凸性等).所以我们只能利用最基本的实数基本定理证明.证明存在性,考虑反证法会更加简便.
\end{note}
\begin{remark}
   $f$并不是连续函数,不能用介值定理.
\end{remark}
\begin{proof}
   (反证法)假设对$\forall x\in[0,1]$,都有$f(x)\ne x$.将闭区间\([0,1]\)记作\([a_1,b_1]\),且由条件可知\(f(a_1)>a_1\),\(f(b_1)<b_1\).令\(c_1=\frac{a_1 + b_1}{2}\),若\(f(c_1)>c_1\),则取\([a_2,b_2]=[c_1,b_1]\);若\(f(c_1)<c_1\),则取\([a_2,b_2]=[a_1,c_1]\).从而得到闭区间\([a_2,b_2]\subset [a_1,b_1]\),并且\(f(a_2)>a_2\),\(f(b_2)<b_2\).以此类推,可得到一列闭区间\(\{[a_n,b_n]\}\),并且\([a_n,b_n]\subset [a_{n + 1},b_{n + 1}]\),\(f(a_n)>a_n\),\(f(b_n)<b_n\),\(\forall n\in\mathbb{N}_+\).

   根据闭区间套定理,可知存在唯一\(\xi=\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}b_n\),且\(\xi\in [a_n,b_n]\),\(\forall n\in\mathbb{N}_+\).又由\(f(x)\)在\([0,1]\)上单调递增及\(f(a_n)>a_n\),\(f(b_n)<b_n\),\(\forall n\in\mathbb{N}_+\),可知\(a_n<f(a_n)\leqslant f(\xi)\leqslant f(b_n)<b_n\).令\(n\rightarrow\infty\)可得\(\xi\leqslant f(\xi)\leqslant\xi\),即\(f(\xi)=\xi\).这与假设矛盾.
\end{proof}

\begin{lemma}[Lebesgue数引理]\label{lemma:Lebesgue数引理}
   如果\(\{\mathcal{O}_{\alpha}\}\)是区间\([a,b]\)的一个开覆盖,则存在一个正数\(\delta>0\),使得对于区间\([a,b]\)中的任何两个点\(x',x''\),只要\(\vert x' - x''\vert<\delta\),就存在开覆盖中的一个开区间,它覆盖\(x',x''\).(称这个数\(\delta\)为开覆盖的Lebesgue数.)
\end{lemma}
\begin{note}
   本题谢惠民上的证明是利用有限覆盖定理,而$CMC$红宝书上通过直接构造出$\delta$进行证明.这里我们采用的是聚点定理进行证明.
\end{note}
\begin{proof}
   (反证法)假设对$\forall n\in\mathbb{N}_+$,取$\delta=\frac{1}{n}>0$,都存在相应的$x_n,y_n\in [a,b]$且$\left| x_n-y_n \right|<\delta$,使得对$\forall I\in\{\mathcal{O} _{\alpha}\}$,要么$x_n \notin I$,要么$y_n \notin I$.由聚点定理可知,有界数列$\{x_n\},\{y_n\}$一定存在收敛子列.设$\{x_{n_k}\},\{y_{m_k}\}$为相应的收敛子列,则由$\left| x_n-y_n \right|<\delta=\frac{1}{n},\forall n\in \mathbb{N}_+$可知${x_{n_k}},{y_{m_k}}$收敛于同一个极限点.故设$\underset{k\rightarrow \infty}{\lim}x_{n_k}=\underset{k\rightarrow \infty}{\lim}y_{m_k}=x_0\in[a,b]$.

   因为\(\{\mathcal{O}_{\alpha}\}\)是区间\([a,b]\)的一个开覆盖,所以存在$I_0\in \{\mathcal{O}_{\alpha}\}$,使得$x_0 \in I_0$.又由于$I_0$是开集,因此存在$\eta>0$,使得$(x_0-\eta,x_0+\eta)\subset I_0$.从而由$\underset{k\rightarrow \infty}{\lim}x_{n_k}=\underset{k\rightarrow \infty}{\lim}y_{m_k}=x_0\in[a,b]$可知,存在充分大的$K$,使得$\left| x_{n_K}-x_0 \right|<\eta ,\left| y_{m_K}-x_0 \right|<\eta$.于是$x_{n_K},y_{m_K}\in \left( x_0-\eta ,x_0+\eta \right) \subset I_0$.即开区间$I_0\in \{\mathcal{O}_{\alpha}\}$同时覆盖了$x_{n_K},y_{m_K}$这两个点,与假设矛盾.
\end{proof}
\begin{remark}
注意对于两个收敛子列$\{x_{n_k}\},\{y_{m_k}\}$,此时$n_k = m_k$并不一定对$\forall k\in \mathbb{N}_+$都成立,即这两个收敛子列的指标集$\left\{ n_k \right\} _{k=1}^{\infty},\left\{ m_k \right\} _{k=1}^{\infty}$不相同也不一定有交集,故无法利用聚点定理反复取子列的方法取到两个指标相同且同时收敛的子列$\left\{ x_{n_k} \right\} _{k=1}^{\infty},\left\{ y_{n_k} \right\} _{k=1}^{\infty}$(取$\{x_n\}$为一个奇子列收敛,偶子列发散的数列;取$\{y_n\}$为一个奇子列发散,偶子列收敛的数列就能得到反例.).
\end{remark}

\begin{example}
\begin{enumerate}
   \item 设\(f(x)\)定义在\(\mathbb{R}\)中且对任意\(x\),都存在与\(x\)有关的\(r > 0\),使得\(f(x)\)在区间\((x - r,x + r)\)中为常值函数,证明:\(f(x)\)是常值函数.
   \item 设\(f(x)\)是定义在\([a,b]\)中的实值函数,如果对任意\(x\in[a,b]\),均存在\(\delta_x>0\)以及\(M_x\),使得\(\vert f(y)\vert\leq M_x\),\(\forall y\in(x - \delta_x,x + \delta_x)\cap [a,b]\),证明:\(f(x)\)是有界的.
   \item 设\(f(x)\)定义在\(\mathbb{R}\)上,对任意\(x_0\in\mathbb{R}\)均存在与\(x_0\)有关的\(\delta>0\),使得\(f(x)\)在\((x_0 - \delta,x_0 + \delta)\)是单调递增的,证明:\(f\)在整个\(\mathbb{R}\)上也是单调递增的.
\end{enumerate}
\end{example}
\begin{note}
这个结果说明:局部常值函数就是常值函数,闭区间上局部有界的函数都是有界函数,局部单调递增函数在整个区间上也是单调递增的,\textbf{实数基本定理能够将局部性质扩充为整体性质}.
\end{note}
\begin{proof}
\begin{enumerate}
   \item 
   {\color{blue}证法一(有限覆盖定理)(不建议使用):}对任意\(x\in[a,b]\),存在\(r_x>0\)使得\(f(t)\)在区间\((x - r_x,x + r_x)\)为常值函数,则\(\bigcup_{x\in[a,b]} (x - r_x,x + r_x) \supset [a,b]\),故存在其中有限个区间\((x_k - r_k,x_k + r_k),1\leq k\leq n\)使得他们的并集包含\([a,b]\).

   直观来看只需要将这些区间“从小到大”排列,就可以依次推出每一个区间上都是相同的一个常值函数,但是所谓“从小到大”排列目前是无法准确定义的,所以这样说不清楚,优化如下:
   
   方案1:选择其中个数尽可能少的区间,使得它们的并集可以覆盖\([a,b]\)但是任意删去一个都不可以(这是能够准确定义的一个操作),此时区间具备性质“任意一个不能被其余的并集盖住”,接下来将这些区间按照左端点的大小关系来排序,去论证它们确实是如你所想的那样“从小到大”排列的(关注右端点),进而得证.
   
   方案2:利用\hyperref[lemma:Lebesgue数引理]{Lebesgue数引理},将区间\([a,b]\)分为有限个\([a,a + \delta],[a + \delta,a + 2\delta],\cdots,[a + n\delta,b]\),其中$\delta$是Lebesgue数.则每一个闭区间都可以被开覆盖中的某一个开区间覆盖住,于是分段常值函数,并且还能拼接起来,所以是常值函数.

   {\color{blue}证法二(确界存在定理):}(反证法)假设存在$a,b\in \mathbb{R}$,使得$f(a)\ne f(b)$.构造数集
   \begin{align*}
     E=\left\{ x\in \left[ a,b \right] |f\left( t \right) =f\left( a \right) ,\forall t\in \left[ a,x \right] \right\}.
   \end{align*}
   从而$E\ne \varnothing$且$E\in[a,b]$.于是由确界存在定理,可知数集$E$存在上确界,设$x_0=\mathrm{sup}E$.
   
   如果\(f(a)\neq f(x_0)\),则由条件可知,存在\(r_0 > 0\),使得\(f(t)=f(x_0)\),\(\forall t\in(x_0 - r_0,x_0 + r_0)\).由\(x_0 = \sup E\)可知,存在\(x_1\in(x_0 - r_0,x_0)\)且\(x_1\in E\).于是\(f(t)=f(a)\),\(\forall t\in[a,x_1]\).从而\(f(t)=f(a)=f(x_0)\),\(\forall t\in(x_0 - r_0,x_1)\).这与\(f(x_0)\neq f(a)\)矛盾.

   如果\(f(a)=f(x_0)\),则由条件可知,存在\(r_1 > 0\),使得\(f(t)=f(x_0)=f(a)\),\(\forall t\in(x_0 - r_1,x_0 + r_1)\).又由\(x_0 = \sup E\)可知,存在\(x_2\in(x_0 - r_1,x_0)\)且\(x_2\in E\).于是\(f(t)=f(a)\),\(\forall t\in[a,x_2]\).进而对\(\forall t\in[a,x_2]\cup(x_0 - r_1,x_0+\frac{r_1}{2}]=[a,x_0+\frac{r_1}{2}]\),有\(f(t)=f(a)\).从而\(x_0+\frac{r_1}{2}\in E\),这与\(x_0 = \sup E\)矛盾.
   
   故假设不成立,命题得证.

   {\color{blue}证法三(闭区间套定理):}(反证法)假设存在$a,b\in \mathbb{R}$,使得$f(a)\ne f(b)$.不妨设\(f(a) < f(b)\),则记闭区间\([a,b]=[a_1,b_1]\).若\(f(\frac{a_1 + b_1}{2}) > f(a_1)\),则记闭区间\([a_1,\frac{a_1 + b_1}{2}]=[a_2,b_2]\);若\(f(\frac{a_1 + b_1}{2}) < f(b_1)\),则记闭区间\([\frac{a_1 + b_1}{2},b_1]=[a_2,b_2]\).以此类推,可以得到一列闭区间\(\{[a_n,b_n]\}\),满足\([a_n,b_n]\subset [a_{n + 1},b_{n + 1}]\),\(f(a_n) < f(b_n)\),\(\forall n\in\mathbb{N}_+\).由闭区间套定理,可知存在唯一\(\xi=\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}b_n\),且\(\xi\in [a_n,b_n]\).又由条件可知,存在\(r > 0\),使得\(f(t)=f(\xi)\),\(\forall t\in (\xi - r,\xi + r)\).从而存在充分大的\(N\in\mathbb{N}_+\),使得\(\vert a_N - \xi\vert < r\),\(\vert b_N - \xi\vert < r\),即\(a_N,b_N\in (\xi - r,\xi + r)\).于是\(f(a_N)=f(b_N)\),这与\(f(a_N) < f(b_N)\)矛盾.

   \item {\color{blue}(聚点定理):}(反证法)假设$f(x)$在$[a,b]$上无界,则对$\forall n>0$,都存在$x_n\in[a,b]$,使得$\left| f\left( x_n \right) \right|>n$.从而得到一个有界数列$\{x_n\}$.由聚点定理,可知其存在收敛子列$\{x_{n_k}\}$,设$\underset{k\rightarrow \infty}{\lim}x_{n_k}=x_0$.由条件可知,存在\(\delta _{x_0}>0\)以及\(M_{x_0}\),使得\(\vert f(y)\vert\leqslant M_{x_0}\),\(\forall y\in(x_0 - \delta _{x_0},x_0+\delta _{x_0})\).
   又由\(\lim_{k\rightarrow\infty}x_{n_k}=x_0\)可知,存在\(K > M_{x_0}\),使得\(\vert x_{n_K}-x_0\vert<\delta _{x_0}\),即\(x_{n_K}\in(x_0 - \delta _{x_0},x_0+\delta _{x_0})\).于是\(\vert f(x_{n_K})\vert\leqslant M_{x_0}\).
   而\(\vert f(x_{n_K})\vert>n_K\geqslant K > M_{x_0}\)矛盾.

   \item {\color{blue}(闭区间套定理):}(反证法)假设存在$a,b\in \mathbb{R}$,使得$f(a)\geq f(b)$.记闭区间\([a,b]=[a_1,b_1]\),若\(f\left(\frac{a_1 + b_1}{2}\right) \leqslant f\left(a_1\right)\),则记闭区间\(\left[a_1,\frac{a_1 + b_1}{2}\right]=[a_2,b_2]\);若\(f\left(\frac{a_1 + b_1}{2}\right) \geqslant f\left(b_1\right)\),则记闭区间\(\left[\frac{a_1 + b_1}{2},b_1\right]=[a_2,b_2]\).以此类推,可以得到一列闭区间\(\{[a_n,b_n]\}\),满足\([a_n,b_n]\subset [a_{n + 1},b_{n + 1}]\),\(f(a_n)\geqslant f(b_n)\),\(\forall n\in \mathbb{N}_+\).
   由闭区间套定理,可知存在唯一\(\xi = \lim_{n\rightarrow \infty} a_n = \lim_{n\rightarrow \infty} b_n\),且\(\xi \in [a_n,b_n]\).由条件可知,存在\(\delta > 0\),使得\(f\left(x\right)\)在区间\(\left(\xi - \delta,\xi + \delta\right)\)上单调递增.
   又由\(\xi = \lim_{n\rightarrow \infty} a_n = \lim_{n\rightarrow \infty} b_n\)可知,存在\(N > 0\),使得\(\left|a_N - \xi\right| < \delta\),\(\left|b_N - \xi\right| < \delta\),即\(a_N,b_N\in \left(\xi - \delta,\xi + \delta\right)\),且\(a_N < b_N\).于是\(f\left(a_N\right) \leqslant f\left(b_N\right)\).而\(f\left(a_N\right) \geqslant f\left(b_N\right)\),这就产生了矛盾.
\end{enumerate}
\end{proof}

\begin{lemma}\label{lemma:R中的极值点集至多可数}
   设\(f(x)\)定义在区间\(I\)中,则\(f(x)\)的全体极值构成的集合是至多可数集.
\end{lemma}
\begin{proof}
   极值只有极大值和极小值,因此只要证明极大值全体与极小值全体都是至多可数的即可.

设\(f(x)\)的全体极小值构成的集合为\(A\),则
\[
A = \{f(x)|\exists\delta > 0,\forall t\in(x - \delta,x + \delta),f(t)\geqslant f(x)\}.
\]
故对\(\forall y\in A\),都存在\(x\in I\),使得\(y = f(x)\),并且\(\exists\delta > 0,\forall t\in(x - \delta,x + \delta),f(t)\geqslant f(x)\).由有理数的稠密性可知,存在\(r\in(x - \delta,x)\cap\mathbb{Q}\),\(s\in(x,x + \delta)\cap\mathbb{Q}\).从而\((r,s)\subset(x - \delta,x + \delta)\),于是对\(\forall t\in(r,s)\),同样有\(f(t)\geqslant f(x)\).

再设全体有理开区间构成的集合为\(B\),现在定义一个映射
\[
\varphi:A\longrightarrow B;\quad y\longmapsto(r,s).
\]
任取\(y_1,y_2\in A\)且\(y_1\neq y_2\),则存在\(x_1,x_2\in I\),使得\(f(x_1)=y_1\),\(f(x_2)=y_2\).假设\(\varphi(y_1)=\varphi(y_2)=(r_0,s_0)\),则对\(\forall t\in(r_0,s_0)\),都有\(f(t)\geqslant y_1,y_2\).于是\(y_1 = f(x_1)\geqslant y_2\),\(y_2 = f(x_2)\geqslant y_1\),从而\(y_1 = y_2\),这产生了矛盾.故\(\varphi(y_1)\neq\varphi(y_2)\),因此\(\varphi\)是单射.

而由全体有理开区间构成的集合\(B\)是至多可数的,因此\(f(x)\)的全体极小值构成的集合\(A\)也是至多可数的.同理,\(f(x)\)的全体极大值构成的集合也是至多可数的.
\end{proof}
\begin{remark}
   由全体有理开区间构成的集合\(B\)是可数集的原因:

   构造一个映射
   \begin{align*}
      \phi :B\longrightarrow \mathbb{Q} \times \mathbb{Q} ;\quad \left( r,s \right) \longmapsto \left( r,s \right) .
   \end{align*}
显然$\phi$是一个双射,而$\mathbb{Q} \times \mathbb{Q}$是可数集,故$B$也是可数集.
\end{remark}

\begin{example}
设\(f(x)\)在区间\(I\)中连续,并且在每一点\(x\in I\)处都取到极值,证明:\(f(x)\)是常值函数.
\end{example}
\begin{remark}
   连续这一条件不可删去,也不可减弱为至多在可数个点不连续.反例:考虑黎曼函数即可,它处处取极值,并且在有理点不连续,无理点连续.
\end{remark}
\begin{proof}
   {\color{blue}证法一(\hyperref[lemma:R中的极值点集至多可数]{引理\ref{lemma:R中的极值点集至多可数}}):}(反证)假设$f(x)$不是常值函数,则存在$a,b \in I$,使得$f(a)\ne f(b)$.由$f$的连续性及连续函数的介值性可知,$f(x)$可以取到$f(a),f(b)$中的一切值.故$f(x)$的值域是不可数集(区间都是不可数集).又由条件可知,$f(x)$的值域就是由$f(x)$的全体极值构成的.于是根据\hyperref[lemma:R中的极值点集至多可数]{引理\ref{lemma:R中的极值点集至多可数}}可得,$f(x)$的值域是至多可数集.这与$f(x)$的值域是不可数集矛盾.

   {\color{blue}证法二(闭区间套定理):}假设$f(x)$不是常值函数,则存在$a_1,b_1 \in I$,使得$f(a_1)\ne f(b_1)$.不妨设$f(a_1)<f(b_1)$.因为\(f\)在\(I\)上连续,所以由介值定理可知,存在\(c_1\in [a_1,b_1]\),使得\(f(a_1) < f(c_1)=\frac{f(a_1) + f(b_1)}{2}<f(b_1)\).若\(b_1 - c_1\leqslant\frac{b_1 - a_1}{2}\),则令\([a_2,b_2]=[c_1,b_1]\);若\(c_1 - a_1\leqslant\frac{b_1 - a_1}{2}\),则令\([a_2,b_2]=[a_1,c_1]\).无论哪种情况,都有\(f(a_2) < f(b_2)\).

   在\([a_2,b_2]\)上重复上述操作,并依次类推下去,得到一列闭区间套\(\{[a_n,b_n]\}\)满足
   \[
   [a_n,b_n]\subset [a_{n + 1},b_{n + 1}], f(a_n) < f(b_n),\forall n\in\mathbb{N}_+.
   \]
   由闭区间套定理可知,存在唯一\(x_0\in\bigcap_{n = 1}^{\infty}[a_n,b_n]\),使得\(x_0=\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}b_n\).再由\(f\)的连续性以及\(Heine\)归结原则可知,\(f(a_n)\)严格递增收敛于\(f(x_0)\),\(f(b_n)\)严格递减收敛于\(f(x_0)\).故\(f(a_n) < f(x_0) < f(b_n)\),\(\forall n\in\mathbb{N}_+\).
   因此对\(\forall\delta > 0\),都存在\(N > 0\),使得\(\vert a_N - x_0\vert<\delta\),\(\vert b_N - x_0\vert<\delta\),并且\(f(a_N) < f(x_0) < f(b_N)\).从而\(x_0\in I\)不是\(f(x)\)的极值点,这与\(f\)在\(I\)上处处取极值矛盾.
\end{proof}

\begin{theorem}[Baire纲定理]\label{theorem:Baire纲定理}
\begin{enumerate}
\item 设 \( A_n \subset \mathbb{R}\) 是一列没有内点的闭集,则 \(\bigcup_{n=1}^{\infty}{A_n} \)
也没有内点.

\item 设 \( A_n \subset \mathbb{R}\) 是一列开集并且都在 \(\mathbb{R}\) 稠密,则 \(\bigcap_{n=1}^{\infty}A_n \)
也在 \(\mathbb{R}\) 中稠密.

\item 设 \( A_n \subset \mathbb{R}\) 是一列闭集,并且 $A=\bigcup_{n=1}^{\infty}{A_n}$
也是闭集,则存在开区间 \((a, b)\)(可以无穷区间)和正整数 \( N \) 使得 \((a,b) \cap A \subset A_N\).

\item 设 \( A_n \) 是一列无处稠密集(闭包没有内点),则 \(\bigcup_{n=1}^{\infty} A_n \)
           也没有内点.
\end{enumerate}
\end{theorem}
\begin{proof}
\begin{enumerate}
      \item 用反证法. 设\(x_0\in A=\bigcup_{n=1}^{\infty} A_n\)为内点, 则存在\(\delta_0 > 0\), 使得\([x_0 - \delta_0,x_0 + \delta_0]\subset A\).
      因为\(A_1\)没有内点,故存在\(x_1\in(x_0 - \delta_0,x_0 + \delta_0)-A_1\).由于\(A_1\)为闭集,故存在\(\delta_1 > 0\),使得
      \[
      [x_1 - \delta_1,x_1 + \delta_1]\subset(x_0 - \delta_0,x_0 + \delta_0),\quad [x_1 - \delta_1,x_1 + \delta_1]\cap A_1=\varnothing
      \]
      不妨设\(\delta_1 < 1\). 因为\(A_2\)没有内点, 故存在\(x_2\in(x_1 - \delta_1,x_1 + \delta_1)-A_2\). 由于\(A_2\)为闭集,故存在\(\delta_2 > 0\),使得
      \[
      [x_2 - \delta_2,x_2 + \delta_2]\subset(x_1 - \delta_1,x_1 + \delta_1),\quad [x_2 - \delta_2,x_2 + \delta_2]\cap A_2=\varnothing
      \]
      不妨设\(\delta_2 < \frac{1}{2}\). 如此继续,我们得到闭区间套
      \[
      [x_1 - \delta_1,x_1 + \delta_1]\supset[x_2 - \delta_2,x_2 + \delta_2]\supset\cdots\supset[x_n - \delta_n,x_n + \delta_n]\supset\cdots,
      \]
      使得\([x_n - \delta_n,x_n + \delta_n]\cap A_n=\varnothing,\delta_n < \frac{1}{n}(n\geqslant1)\).
      根据闭区间套原理, 存在\(\xi\in[x_n - \delta_n,x_n + \delta_n],\forall n\geqslant1\). 因此\(\xi\notin\bigcup_{n\geqslant1}A_n = A\),
      这和\(\xi\in[x_1 - \delta_1,x_1 + \delta_1]\subset(x_0 - \delta_0,x_0 + \delta_0)\subset A\)相矛盾.
   
      \item 
      
      \item 
      
      \item 
\end{enumerate}
\end{proof}

\begin{example}
设数列\(a_n\)单调递增趋于正无穷,并且\(\lim_{n \to \infty} \frac{a_{n + 1}}{a_n} \leqslant 1\),函数\(f(x)\)定义在\((0,+\infty)\)中且对任意\(x\geq1\)都有\(\lim_{n \to \infty} f(a_nx) = 0\).
\begin{enumerate}
   \item  若\(f(x)\)是连续函数,证明:\(\lim_{x \to +\infty} f(x) = 0\);
   \item 若删去连续这一条件,或者虽然连续,但是\({\varlimsup_{n \to \infty}} \frac{a_{n + 1}}{a_n} > 1\),则上述结论均不成立.
\end{enumerate}
\end{example}
\begin{proof}
\begin{enumerate}
   \item 对任意\(\varepsilon > 0\),定义\(E_n=\{x\geq1|\forall k\geq n,|f(a_kx)|\leq\varepsilon\}\),则\(E_n\)是一列闭集,根据条件有\(\bigcup_{n = 1}^{\infty}E_n=[1,+\infty)\).
   于是根据baire纲定理可知存在正整数\(N\)和区间\((u,v)\)使得\((u,v)\subset E_N\),也就是说,任意\(x\in(u,v)\),任意\(n\geq N\)都有\(|f(a_nx)|\leq\varepsilon\),换句话说我们得到了一个一致的\(N\).
   因此\(|f(x)|\)在区间\((a_Nu,a_Nv),(a_{N + 1}u,a_{N+1}v),\cdots\)中都是不超过\(\varepsilon\)的,只要这些区间在\(n\)很大之后能够相互有重叠,一个接着下一个,全覆盖就行了.
   换句话说,我们要证明:存在\(N_0\)使得任意\(n\geq N_0\)都有\(a_{n + 1}u < a_nv\),这等价于\(\frac{a_{n + 1}}{a_n}<\frac{v}{u}\),注意条件:极限等于\(1\)并且右端\(\frac{v}{u}>1\),所以上式成立.
   将前面推导的东西梳理一下,就是说:任意\(\varepsilon > 0\),存在\(M\)使得\(x > M\)时恒有\(|f(x)|<\varepsilon\),结论得证.

   \item 例如考虑\(a_n = n\),定义\(f(x)\)为:当\(x = m\cdot2^{\frac{1}{k}},m\in\mathbb{N}^+\)时候取\(1\),其余情况都取\(0\),则对任意的\(x > 0\),数列\(f(nx)\)中都至多只有一项为\(1\),因此极限总是\(0\),但是很明显\(f(x)\)的极限并不存在.
   另外一个反例,可以考虑\(a_n = e^n\),现在有连续性,条件为
   \[
   \lim_{n\to\infty}f(e^n)=\lim_{n\to\infty}f(e^{n+\ln x}) = 0
   \]
   将\(\ln x\in\mathbb{R}\)看成一个变量,相应的考虑\(g(x)=f(e^x)\),则连续函数\(g(x)\)定义在\(\mathbb{R}\)上且满足\(\lim_{n\to\infty}g(y + n)=\lim_{n\to\infty}f(e^{y + n}) = 0,\forall y\in\mathbb{R}\),我们构造一个例子使得\(g(x)\)在无穷处极限非零或者不存在即可.
   这与经典的命题有关:设\(f(x)\)一致连续且\(f(x + n)\to0\)对任意\(x\)成立,则\(f(x)\to0\),现在删去了一致连续性命题自然是错的,具体构造留作习题.
\end{enumerate}
\end{proof}
\begin{remark}
   通常,点态收敛(上题)或者数列极限(本题)这种非一致性的条件,描述起来是“任意\(x\in(0,1)\),任意\(\varepsilon > 0\),存在\(N\)使得任意\(n > N\)都有\(|f_n(x)-f(x)|<\varepsilon\)”或者“任意\(x > 0\),任意\(\varepsilon > 0\),存在\(N\)使得任意\(n > N\)都有\(|f(a_nx)|<\varepsilon\)”,很明显这里的\(N\)是与\(x,\varepsilon\)都有关系的,如果我们事先取定\(\varepsilon > 0\),那么这个过程可以说是“给定\(x\),去找对应的\(N\)”.
   而baire纲定理的想法就是反过来找:不同的\(x\)对应的\(N\)确实可以不一样,那就先取好\(N\),我们看都有哪些\(x\)对应到这一个\(N\),也就是说事先取定\(\varepsilon > 0\),然后对每一个\(n\)去定义集合,反找\(x\).所有baire纲定理相关的问题,思想都是如此,根据定理便能得到一个一致的东西,拿来做事情.
\end{remark}

\begin{example}
   设\(f(x)\)在区间\((0,1)\)中可导,证明:\(f'(x)\)在\((0,1)\)中的一个稠密子集中连续.
\end{example}
\begin{proof}
   
\end{proof}

\begin{lemma}
   有界数列\(x_n\)如果满足\(\lim_{n\to\infty}(x_{n + 1}-x_n)=0\),则\(x_n\)的全体聚点构成一个闭区间.
   \end{lemma}
   \begin{proof}
      
   \end{proof}
   
   \begin{example}
      设连续函数\(f(x):[0,1]\to[0,1],x_1\in[0,1],x_{n + 1}=f(x_n)\),证明:数列\(\{x_n\}\)收敛的充要条件是\(\lim_{n\to\infty}(x_{n + 1}-x_n)=0\).
   \end{example}
   \begin{proof}
      必要性($\Rightarrow$):若$\{x_n\}$收敛,则$\underset{n\rightarrow \infty}{\lim}\left( x_{n+1}-x_n \right) =0$显然成立.
   
      充分性($\Leftarrow$):
\end{proof}
   

\section{上下极限}

\begin{proposition}[子列极限命题]\label{proposition:子列极限命题}
(a):给定\(x \in \mathbb{R} \cup \{+\infty, -\infty\}\),\(\lim_{n \to \infty} x_n = x\)的充分必要条件是对任何广义存在的\(\lim_{k \to \infty} x_{n_k}\),都有\(\lim_{k \to \infty} x_{n_k} = x\).

(b):设\(m \in \mathbb{N}\),若\(\lim_{n \to \infty} x_{mn + r}\),\(\forall r = 0,1,2,\cdots,m - 1\)相同,则\(\lim_{n \to \infty} x_n\)存在且
\(\lim_{n \to \infty} x_n = \lim_{n \to \infty} x_{mn}\).
\end{proposition}
\begin{note}
当\(m = 2\),上述命题是在说如果序列奇偶子列极限存在且为同一个值,则序列的极限存在且极限和偶子列极限值相同.所谓奇偶,就是看除以\(2\)的余数是\(1\)还是\(0\).对一般的\(m \in \mathbb{N}\),我们也可以看除以\(m\)的余数是\(\{0,1,2,\cdots,m - 1\}\)中的哪一个来对整数进行分类,即\(\text{mod } m\)分类.严格的说,我们有无交并
\begin{align*}
  \mathbb{Z} = \bigcup_{r = 0}^{m - 1} \{mk + r : k \in \mathbb{Z}\}.
\end{align*}
\end{note}
\begin{proof}
对(a):考虑上下极限即可.

对(b):记\(A \triangleq \lim_{n \to \infty} x_{mn}\).
事实上对任何\(\varepsilon > 0\),存在\(N \in \mathbb{N}\),使得当\(k > N\)时,我们有
\begin{align}\label{equation:2.121}
  \vert x_{mk + r} - A \vert < \varepsilon, \forall r \in \{0,1,2,\cdots,m - 1\}.
\end{align}
我们知道对任何正整数\(n > mN + m - 1\),存在唯一的\(r \in \{0,1,2,\cdots,m - 1\}\)和\(k > N\),使得\(n = km + r\),于是运用\eqref{equation:2.121}我们有\(\vert x_n - A \vert < \varepsilon\),因此我们证明了
\begin{align*}
  \lim_{n \to \infty} x_n = A = \lim_{n \to \infty} x_{mn} .
\end{align*}
\end{proof}

\begin{definition}[上下极限的定义]\label{theorem:上下极限的定义}
我们定义
\begin{align}\label{eq:上下极限的定义}
  \varlimsup_{n \to \infty} a_n \triangleq \lim_{n \to \infty} \sup_{k \geq n} a_k, \varliminf_{n \to \infty} a_n \triangleq \lim_{n \to \infty} \inf_{k \geq n} a_k. 
\end{align}
\end{definition}
\begin{note}
注意到由定义,\(\sup_{k \geq n} a_k\)是单调递减的,\(\inf_{k \geq n} a_k\)是单调递增的.因此\eqref{eq:上下极限的定义}式的极限存在或为确定符号的\(\infty\).
\end{note}

\begin{proposition}[上下极限的等价定义]\label{proposition:上下极限的等价定义}
假定\(\{a_n\}\)是个实数列,则有

(1):设\(A\)是某个实数,则\(\varlimsup_{n \to \infty} a_n = A\)的充分必要条件是对任何\(\varepsilon > 0\),存在$N>0$,使得当$n>N$时,有$x_n<A+\varepsilon$且存在子列$\{x_{n_k}\}$,使得$x_{n_k}>A-\varepsilon,k=1,2,\cdots$.

(2):\(\varlimsup_{n \to \infty} a_n = +\infty\)的充分必要条件是对任何\(A > 0\),存在\(n\),使得\(a_n > A\).

(3):设\(A\)是某个实数,则\(\varliminf_{n \to \infty} a_n = A\)的充分必要条件是对任何\(\varepsilon > 0\),存在$N>0$,使得当$n>N$时,有$x_n>A-\varepsilon$且存在子列$\{x_{n_k}\}$,使得$x_{n_k}<A+\varepsilon,k=1,2,\cdots$.

(4):\(\varliminf_{n \to \infty} a_n = -\infty\)的充分必要条件是对任何\(A < 0\),存在\(n\),使得\(a_n < A\).
\end{proposition}

\begin{proposition}[上下极限的性质]\label{proposition:上下极限的性质}
   我们有如下的
   
   1. $\varlimsup_{n \to \infty} (a_n + b_n) \leq \varlimsup_{n \to \infty} a_n + \varlimsup_{n \to \infty} b_n.$
   
   2. $-\varlimsup_{n \to \infty} a_n = \varliminf_{n \to \infty} (-a_n).$
   
   3. $\varliminf_{n \to \infty} (a_n + b_n) \geq \varliminf_{n \to \infty} a_n + \varliminf_{n \to \infty} b_n.$

   \hypertarget{上极限的性质命题(4)}{4}.若\(\lim_{n \to +\infty} b_n = b\),\(\varlimsup_{n \to +\infty} a_n = a\),则\(\varlimsup_{n \to +\infty} a_n b_n = ab\).
\end{proposition}
\begin{note}
   上下极限的性质都可以通过考虑其子列的极限快速得到证明.因此我们一般不需要额外记忆上下极限的性质,只需要熟悉通过考虑子列极限直观地得到结论即可.并且\textbf{因为上下极限就是(最大/最小)子列极限,所以一般极限的性质对于上下极限都成立}.
\end{note}
\begin{proof}
   1.

   2.

   3.

   4.由于\(\varlimsup_{n \to +\infty} a_n = a\),因此我们可设\(\lim_{k \to +\infty} a_{n_k} = a\).
   根据极限的四则运算法则,可知\(\lim_{n \to +\infty} a_{n_k} b_{n_k} = ab\).
   从而\(\varlimsup_{n \to +\infty} a_n b_n \geqslant \lim_{n \to +\infty} a_{n_k} b_{n_k} = ab\).
   又由上下极限的性质,可知\(\varlimsup_{n \to +\infty} a_n b_n \leqslant \varlimsup_{n \to +\infty} a_n \cdot \varlimsup_{n \to +\infty} b_n = ab\).
   故\(\varlimsup_{n \to +\infty} a_n b_n = ab\).
\end{proof}

\begin{example}
   求上极限
 \begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}n\sin \left( \pi \sqrt{n^2+1} \right) .
 \end{align*}
 \end{example}
 \begin{solution}
   注意到
   \begin{align*}
     n\sin \left( \pi \sqrt{n^2+1} \right) =n\sin \left( \pi \sqrt{n^2+1}-n\pi +n\pi \right) =\left( -1 \right) ^nn\sin \left( \pi \sqrt{n^2+1}-n\pi \right) =\left( -1 \right) ^nn\sin \frac{\pi}{\sqrt{n^2+1}+n}.
   \end{align*}
 又因为
 \begin{align*}
   \underset{n\rightarrow +\infty}{\lim}n\sin \frac{\pi}{\sqrt{n^2+1}+n}=\underset{n\rightarrow +\infty}{\lim}\frac{n\pi}{\sqrt{n^2+1}+n}=\underset{n\rightarrow +\infty}{\lim}\frac{\pi}{\sqrt{1+\frac{1}{n^2}}+1}=\frac{\pi}{2}.
 \end{align*}
 所以
 \begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}n\sin \left( \pi \sqrt{n^2+1} \right) =\underset{n\rightarrow +\infty}{{\varlimsup }}\left( -1 \right) ^nn\sin \frac{\pi}{\sqrt{n^2+1}+n}\hyperlink{本题最后一个等号}{\hypertarget{本题最后一个等号target}{=}}\frac{\pi}{2}.
\end{align*}
\end{solution}
\begin{remark}
   \hypertarget{本题最后一个等号}{\hyperlink{本题最后一个等号target}{本题最后一个等号}}其实是直接套用了一个\hyperlink{上极限的性质命题(4)}{上极限的性质}得到的.
\end{remark}

\begin{proposition}
对任何\(\varepsilon > 0\),存在\(N \in \mathbb{N}\),使得
\[
f_1(n,\varepsilon) \leq a_n \leq f_2(n,\varepsilon), \forall n \geq N,
\]
这里
\[
\lim_{\varepsilon \to 0^+} \lim_{n \to \infty} f_2(n,\varepsilon) = \lim_{\varepsilon \to 0^+} \lim_{n \to \infty} f_1(n,\varepsilon) = A \in \mathbb{R}.
\]
证明\(\lim_{n \to \infty} a_n = A\).
\end{proposition}
\begin{note}
   以后可以直接使用这个命题.但是要按照证法一的格式书写.
\end{note}
\begin{proof}
   {\color{blue}证法一(利用上下极限)(也是实际做题中直接使用这个命题的书写步骤):}

   已知对$\forall \varepsilon>0$,存在$N\in \mathbb{N}$,使得
   \begin{align*}
      f_1(n,\varepsilon) \leq a_n \leq f_2(n,\varepsilon), \forall n \geq N,
   \end{align*}
   上式两边令$n\to+\infty$,则有
   \begin{align*}
      \underset{n\rightarrow +\infty}{{\varliminf }}f_1(n,\varepsilon )\le \underset{n\rightarrow +\infty}{{\varliminf }}a_n,\underset{n\rightarrow +\infty}{{\varlimsup }}a_n\le \underset{n\rightarrow +\infty}{{\varlimsup }}f_2(n,\varepsilon ),\forall \varepsilon >0.
   \end{align*}
   由$\varepsilon$的任意性,两边令$\varepsilon\to 0^+$,可得
   \begin{align*}
      A=\underset{\varepsilon \rightarrow 0^+}{\lim}\underset{n\rightarrow +\infty}{{\varliminf }}f_1(n,\varepsilon )\le \underset{n\rightarrow +\infty}{{\varliminf }}a_n,\underset{n\rightarrow +\infty}{{\varlimsup }}a_n\le \underset{\varepsilon \rightarrow 0^+}{\lim}\underset{n\rightarrow +\infty}{{\varlimsup }}f_2(n,\varepsilon )=A.
   \end{align*}
   又显然有$\underset{n\rightarrow +\infty}{{\varliminf }}a_n\le \underset{n\rightarrow +\infty}{{\varlimsup }}a_n$,于是
   \begin{align*}
      A=\underset{\varepsilon \rightarrow 0^+}{\lim}\underset{n\rightarrow +\infty}{{\varliminf }}f_1(n,\varepsilon )\le \underset{n\rightarrow +\infty}{{\varliminf }}a_n\le \underset{n\rightarrow +\infty}{{\varlimsup }}a_n\le \underset{\varepsilon \rightarrow 0^+}{\lim}\underset{n\rightarrow +\infty}{{\varlimsup }}f_2(n,\varepsilon )=A.
   \end{align*}
   故由夹逼准则可得$\lim_{n \to \infty} a_n = A$.

{\color{blue}证法二($\varepsilon-\delta$语言):}

$\forall \varepsilon>0$,记$g_1\left( \varepsilon \right) =\underset{n\rightarrow +\infty}{\lim}f_1(n,\varepsilon ),g_2\left( \varepsilon \right) =\underset{n\rightarrow +\infty}{\lim}f_2(n,\varepsilon ).$由\(\lim_{\varepsilon \to 0^+}g_1(\varepsilon)=\lim_{\varepsilon \to 0^+}g_2(\varepsilon)=A\),可知
对\(\forall \eta > 0\),存在\(\delta > 0\),使得
\begin{align*}
   g_1(\delta) > A - \frac{\eta}{2},g_2(\delta) < A + \frac{\eta}{2}.
\end{align*}
由于\(g_1(\delta)=\lim_{n \to +\infty}f_1(n,\delta)\),\(g_2(\delta)=\lim_{n \to +\infty}f_2(n,\delta)\),因此存在\(N'\in \mathbb{N}\),使得
\begin{align*}
   f_1(n,\delta) > g_1(\delta) - \frac{\eta}{2},f_2(n,\delta) < g_2(\delta) + \frac{\eta}{2},\forall n > N'.
\end{align*}
又由条件可知,存在\(N\in \mathbb{N}\),使得
\begin{align*}
  f_1(n,\delta) \leqslant a_n \leqslant f_2(n,\delta),\forall n > N .
\end{align*}
于是当\(n > \max\{N,N'\}\)时,对\(\forall \eta > 0\),我们都有
\begin{align*}
   A - \eta < g_1(\delta) - \frac{\eta}{2} < f_1(n,\delta) \leqslant a_n \leqslant f_2(n,\delta) < g_2(\delta) + \frac{\eta}{2} < A + \eta.
\end{align*}
故由夹逼准则可知\(\lim_{n \to +\infty}a_n = A\). 
\end{proof}


\chapter{极限与渐近分析方法}

\section{基本的渐进估计与求极限方法}

\subsection{基本极限计算}

\subsubsection{基础习题}

\begin{example}
   对正整数\(v\)，求极限\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\frac{1}{k(k + 1)\cdots(k + v)}\).
\end{example}
\begin{note}
   直接裂项即可.
\end{note}
\begin{solution}
   \begin{align*}
      \lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{1}{k(k+1)\cdots (k+v)}}&=\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{1}{v}\left[ \frac{1}{k\left( k+1 \right) \cdots \left( k+v-1 \right)}-\frac{1}{\left( k+1 \right) \left( k+2 \right) \cdots \left( k+v \right)} \right]}
\\
&=\lim_{n\rightarrow \infty} \frac{1}{v}\left[ \frac{1}{v!}-\frac{1}{n\left( n+1 \right) \cdots \left( n+v \right)} \right] =\frac{1}{v!v}.
   \end{align*}
\end{solution}

\begin{example}
设\(\vert x\vert < 1\)，求极限\(\lim_{n\rightarrow\infty}(1 + x)(1 + x^2)\cdots(1 + x^{2^n})\).
\end{example}
\begin{remark}
   如果把幂次\(1,2,2^2,\cdots\)改成\(1,2,3,\cdots\)，那么显然极限存在，但是并不能求出来，要引入别的特殊函数，省流就是：钓鱼题.
\end{remark}
\begin{note}
   平方差公式即可
\end{note}
\begin{solution}
   \begin{align*}
\lim_{n\rightarrow \infty} (1+x)(1+x^2)\cdots (1+x^{2^n})&=\lim_{n\rightarrow \infty} \frac{(1-x)(1+x)(1+x^2)\cdots (1+x^{2^n})}{1-x}
\\
&=\lim_{n\rightarrow \infty} \frac{(1-x^2)(1+x^2)\cdots (1+x^{2^n})}{1-x}\\
&=\cdots =\lim_{n\rightarrow \infty} \frac{1-x^{2^{n+1}}}{1-x}=\frac{1}{1-x}.
\end{align*}
\end{solution}

\subsubsection{带ln的极限计算}
通常，带着一堆\(\ln\)的极限算起来都非常烦人，并不是简单的一个泰勒就秒杀的，比如这种题.这种题不建议用泰勒，很多时候等价无穷小替换、拆项和加一项减一项会方便不少.

\begin{remark}
   另外,做这种题一定要严格处理余项，不要想当然.
\end{remark}
\begin{example}
求极限\(\lim_{x\rightarrow +\infty}\left(\frac{(2x^2 + 3x + 1)\ln x}{x\ln(1 + x)}\arctan x-\pi x\right)\)。
\end{example}
\begin{remark}
   做这种题一定要严格处理余项，不要想当然，比如下面的做法就是错的（过程和答案都不对）
\[\frac{(2x^2 + 3x + 1)\ln x}{x\ln(1 + x)}\arctan x-\pi x\approx(2x + 3)\frac{\ln x}{\ln(1 + x)}\arctan x-\pi x\approx(2x + 3)\cdot1\cdot\frac{\pi}{2}-\pi x=\frac{3\pi}{2}.\]
\end{remark}
\begin{solution}
   根据洛必达法则，显然\(\lim_{x\rightarrow +\infty}\frac{\ln x}{\ln(1 + x)}=\lim_{x\rightarrow +\infty}\frac{\frac{1}{x}}{\frac{1}{1 + x}} = 1\)，拆分一下有
\begin{align*}
&\lim_{x\rightarrow +\infty}\left(\frac{(2x^2 + 3x + 1)\ln x}{x\ln(1 + x)}\arctan x-\pi x\right)\\
=&\lim_{x\rightarrow +\infty}\left((2x + 3)\frac{\ln x}{\ln(1 + x)}\arctan x-\pi x\right)+\lim_{x\rightarrow +\infty}\frac{\ln x}{x\ln(1 + x)}\arctan x\\
=&\lim_{x\rightarrow +\infty}\left(\frac{2x\ln x}{\ln(1 + x)}\arctan x-\pi x\right)+3\lim_{x\rightarrow +\infty}\frac{\ln x}{\ln(1 + x)}\arctan x\\
=&2\lim_{x\rightarrow +\infty}x\left(\frac{\ln x}{\ln(1 + x)}\arctan x-\frac{\pi}{2}\right)+\frac{3}{2}\pi\\
=&2\left(\lim_{x\rightarrow +\infty}\frac{x\ln x}{\ln(1 + x)}\left(\arctan x-\frac{\pi}{2}\right)+\frac{\pi}{2}\lim_{x\rightarrow +\infty}x\left(\frac{\ln x}{\ln(1 + x)}-1\right)\right)+\frac{3}{2}\pi\\
=&2\left(\lim_{x\rightarrow +\infty}x\left(\arctan x-\frac{\pi}{2}\right)-\frac{\pi}{2}\lim_{x\rightarrow +\infty}\frac{x\ln(1 + \frac{1}{x})}{\ln(1 + x)}\right)+\frac{3}{2}\pi\\
=&2\left(\lim_{x\rightarrow +\infty}\frac{\arctan x-\frac{\pi}{2}}{\frac{1}{x}}-\frac{\pi}{2}\lim_{x\rightarrow +\infty}\frac{1}{\ln(1 + x)}\right)+\frac{3}{2}\pi\\
=&2\lim_{x\rightarrow +\infty}\frac{\frac{-1}{1 + x^2}}{-\frac{1}{x^2}}+\frac{3}{2}\pi=\frac{3}{2}\pi - 2.
\end{align*}
\end{solution}

\subsubsection{幂指函数的极限问题}
幂指函数的极限问题，一律写成\(e^{\ln}\)形式，并利用等价无穷小替换和加一项减一项去解决，方便.

\begin{remark}
 不要用泰勒做这个题，因为你需要分别展开好几项直到余项是高阶无穷小才可以，等价无穷小替换则只需要看Taylor展开的第一项并且是严谨的，泰勒则需要展开好几项,计算量爆炸.  
\end{remark}
\begin{example}
   求极限\(\lim_{x\rightarrow0^{+}}\frac{x^{\sin x}-(\sin x)^{x}}{x^{3}\ln x}\)。
\end{example}
\begin{remark}
   不要用泰勒做这个题，因为你需要分别展开好几项直到余项是高阶无穷小才可以，等价无穷小替换则只需要看第一项并且是严谨的，泰勒则至少需要展开三项，计算量爆炸，大致如下
   \begin{align*}
   x^{\sin x}&=e^{\sin x\ln x}=1+\sin x\ln x+\frac{1}{2}\sin^{2}x\ln^{2}x+\frac{1}{6}\sin^{3}x\ln^{3}x+O(x^{4}\ln^{4}x)\\
   (\sin x)^{x}&=e^{x\ln\sin x}=1 + x\ln\sin x+\frac{1}{2}x^{2}\ln^{2}\sin x+\frac{1}{6}x^{3}\ln^{3}\sin x+O(x^{4}\ln^{4}\sin x)
   \end{align*}
   然后你不仅需要看第一项，还要检查并验证平方项，三次方项作差后对应的极限是零，麻烦. 
\end{remark}
\begin{note}
   先说明写成\(e^{\ln}\)形式后，指数部分都是趋于零的，然后等价无穷小替换即可.
\end{note}
\begin{solution}
注意到\begin{align*}
   \lim_{x\rightarrow0^{+}}\sin x\ln x=\lim_{x\rightarrow0^{+}}x\ln x = 0, \lim_{x\rightarrow0^{+}}x\ln\sin x=\lim_{x\rightarrow0^{+}}\sin x\ln\sin x=\lim_{x\rightarrow0^{+}}x\ln x = 0.
\end{align*}
从而
\begin{align*}
   \lim_{x\rightarrow 0^+} (\sin x)^x=\lim_{x\rightarrow 0^+} e^{x\ln\sin x}=1.
\end{align*}
于是我们有
   \begin{align*}
   &\lim_{x\rightarrow0^{+}}\frac{x^{\sin x}-(\sin x)^{x}}{x^{3}\ln x}=\lim_{x\rightarrow0^{+}}(\sin x)^{x}\frac{e^{\sin x\ln x - x\ln\sin x}-1}{x^{3}\ln x}=\lim_{x\rightarrow0^{+}}\frac{e^{\sin x\ln x - x\ln\sin x}-1}{x^{3}\ln x}\\
   =&\lim_{x\rightarrow0^{+}}\frac{\sin x\ln x - x\ln\sin x}{x^{3}\ln x}=\lim_{x\rightarrow0^{+}}\frac{\sin x\ln x - x\ln x + x\ln x - x\ln\sin x}{x^{3}\ln x}\\
   =&\lim_{x\rightarrow0^{+}}\frac{\sin x - x}{x^{3}}+\lim_{x\rightarrow0^{+}}\frac{\ln x - \ln\sin x}{x^{2}\ln x}=-\frac{1}{6}-\lim_{x\rightarrow0^{+}}\frac{\ln\frac{\sin x}{x}}{x^{2}\ln x}(\frac{\sin x}{x}\sim1 - \frac{1}{6}x^{2},x\to 0^+)\\
   =&-\frac{1}{6}-\lim_{x\rightarrow0^{+}}\frac{\ln(1 + \frac{\sin x - x}{x})}{x^{2}\ln x}=-\frac{1}{6}-\lim_{x\rightarrow0^{+}}\frac{\sin x - x}{x^{3}\ln x}=-\frac{1}{6}+\frac{1}{6}\lim_{x\rightarrow0^{+}}\frac{1}{\ln x}=-\frac{1}{6}.
   \end{align*}
\end{solution}

\begin{example}
求极限\(\lim_{x\rightarrow\infty}x^{2}\left(e^{(1 + \frac{1}{x})^{x}} - \left(1 + \frac{1}{x}\right)^{ex}\right)\).
\end{example}
\begin{solution}
   注意到
   \begin{align*}
   \lim_{x\rightarrow\infty}\left(1 + \frac{1}{x}\right)^{x}=e,\lim_{x\rightarrow\infty}ex\ln\left(1 + \frac{1}{x}\right)=e.
   \end{align*}
   从而
\begin{align*}
   \lim_{x\rightarrow 0^+} \left( 1+\frac{1}{x} \right) ^{ex}=\lim_{x\rightarrow 0^+} e^{ex\ln \left( 1+\frac{1}{x} \right)}=e^e.
\end{align*}
于是我们有
   \begin{align*}
&\lim_{x\rightarrow\infty}x^{2}\left(e^{(1 + \frac{1}{x})^{x}} - \left(1 + \frac{1}{x}\right)^{ex}\right)=\lim_{x\rightarrow\infty}x^{2}\left(1 + \frac{1}{x}\right)^{ex}\left(e^{(1 + \frac{1}{x})^{x}-ex\ln(1 + \frac{1}{x})}-1\right)\\
&=e^{e}\lim_{x\rightarrow\infty}x^{2}\left(e^{(1 + \frac{1}{x})^{x}-ex\ln(1 + \frac{1}{x})}-1\right)=e^{e}\lim_{x\rightarrow\infty}x^{2}\left(\left(1 + \frac{1}{x}\right)^{x}-ex\ln\left(1 + \frac{1}{x}\right)\right)\\
&=e^{e}\lim_{x\rightarrow\infty}x^{2}\left(e^{x\ln(1 + \frac{1}{x})}-ex\ln\left(1 + \frac{1}{x}\right)\right)=e^{e + 1}\lim_{x\rightarrow\infty}x^{2}\left(e^{x\ln(1 + \frac{1}{x})-1}-x\ln\left(1 + \frac{1}{x}\right)\right)\\
&\xlongequal{Taylor\text{展开}}e^{e + 1}\lim_{x\rightarrow\infty}x^{2}\frac{1}{2}\left(x\ln\left(1 + \frac{1}{x}\right)-1\right)^{2}=\frac{e^{e + 1}}{2}\lim_{x\rightarrow\infty}\left(x^{2}\ln\left(1 + \frac{1}{x}\right)-x\right)^{2}=\frac{e^{e + 1}}{8}
\end{align*}
\end{solution}



\subsection{Taylor公式}

\begin{theorem}[带Peano余项的Taylor公式]\label{theorem:带Peano余项的Taylor公式}
   设\(f\)在\(x = a\)是\(n\)阶右可微的,则
\begin{gather}
   f(x)=\sum\limits_{k = 0}^{n}\frac{f^{(k)}(a)}{k!}(x - a)^{k}+o((x - a)^{n}),x \to a^{+}.
   \label{Taylor:eq1}
   \\
   f(x)=\sum\limits_{k = 0}^{n - 1}\frac{f^{(k)}(a)}{k!}(x - a)^{k}+O((x - a)^{n}),x \to a^{+}.\label{Taylor:eq2}
\end{gather}
\end{theorem}
\begin{note}
   用Taylor公式计算极限,如果展开$n$项还是不方便计算,那么就多展开一项或几项即可.
\end{note}
\begin{proof}
   (1)要证明\eqref{Taylor:eq1}式等价于证明
   \begin{align*}
      \underset{x\rightarrow a^+}{\lim}\frac{f\left( x \right) -\sum\limits_{k=0}^n{\frac{f^{(k)}\left( a \right)}{k!}\left( x-a \right) ^k}}{\left( x-a \right) ^n}=0.
   \end{align*}
   对上式左边反复使用$n-1$次$L'Hospital'rules$,可得
\begin{align*}
&\underset{x\rightarrow a^+}{\lim}\frac{f\left( x \right) -\sum\limits_{k=0}^n{\frac{f^{(k)}\left( a \right)}{k!}\left( x-a \right) ^k}}{\left( x-a \right) ^n}\xlongequal{L'Hospital'rules}\underset{x\rightarrow a^+}{\lim}\frac{f'\left( x \right) -\sum\limits\limits_{k=1}^n{\frac{f^{(k)}\left( a \right)}{\left( k-1 \right) !}\left( x-a \right) ^{k-1}}}{n\left( x-a \right) ^{n-1}}
\\
&\xlongequal{L'Hospital'rules}\underset{x\rightarrow a^+}{\lim}\frac{f''\left( x \right) -\sum\limits_{k=2}^n{\frac{f^{(k)}\left( a \right)}{\left( k-2 \right) !}\left( x-a \right) ^{k-2}}}{n\left( n-1 \right) \left( x-a \right) ^{n-2}}
\\
&\xlongequal{L'Hospital'rules}\cdots \xlongequal{L'Hospital'rules}\underset{x\rightarrow a^+}{\lim}\frac{f^{\left( n-1 \right)}\left( x \right) -f^{\left( n-1 \right)}\left( a \right) -f^{\left( n \right)}\left( a \right) \left( x-a \right)}{n!\left( x-a \right)}
\\
&=\frac{1}{n!}\underset{x\rightarrow a^+}{\lim}\frac{f^{\left( n-1 \right)}\left( x \right) -f^{\left( n-1 \right)}\left( a \right)}{x-a}-\frac{f^{\left( n \right)}\left( a \right)}{n!}\xlongequal{n\text{阶导数定义}}0
\end{align*}
故\eqref{Taylor:eq1}式成立.

(2)要证明\eqref{Taylor:eq2}式等价于证明:存在$C>0$和$\delta>0$,使得
\begin{align*}
   \left| \frac{f\left( x \right) -\sum\limits_{k=0}^n{\frac{f^{(k)}\left( a \right)}{k!}\left( x-a \right) ^k}}{\left( x-a \right) ^n} \right|\leqslant C,\forall x\in \left[ a,a+\delta \right].
\end{align*}

\end{proof}


\subsubsection{直接利用Taylor公式计算极限}


\begin{example}
   设$\underset{n\rightarrow +\infty}{\lim}\frac{f\left( n \right)}{n}=1$,计算
   \begin{align*}
      \underset{n\rightarrow +\infty}{\lim}\left( 1+\frac{1}{f\left( n \right)} \right) ^n.
   \end{align*}
\end{example}
\begin{note}
由$\frac{f\left( n \right)}{n}=1+o\left( 1 \right) ,n\rightarrow +\infty$,可得$f\left( n \right) =n+o\left( n \right) ,n\rightarrow +\infty$.这个等式的意思是:$f(n)=n+o(n)$对$\forall n\in \mathbb{N}_+$都成立.并且当$n\to +\infty$时,有$\underset{n\rightarrow +\infty}{\lim}\frac{f\left( n \right)}{n}=\underset{n\rightarrow +\infty}{\lim}\frac{n+o\left( n \right)}{n}=1+\underset{n\rightarrow +\infty}{\lim}\frac{o\left( n \right)}{n}=1
$.其中$o(n)$表示一个(类)数列,只不过这个(类)数列具有$\underset{n\rightarrow +\infty}{\lim}\frac{o\left( n \right)}{n}=0$的性质.
\end{note}
\begin{solution}
   {\color{blue}解法一(一般解法):}
   \begin{align*}
      \underset{n\rightarrow +\infty}{\lim}\left( 1+\frac{1}{f\left( n \right)} \right) ^n=\underset{n\rightarrow +\infty}{\lim}e^{n\ln \left( 1+\frac{1}{f\left( n \right)} \right)}=e^{\underset{n\rightarrow +\infty}{\lim}n\ln \left( 1+\frac{1}{f\left( n \right)} \right)}=e^{\underset{n\rightarrow +\infty}{\lim}\frac{n}{f\left( n \right)}}=e.
   \end{align*}
   {\color{blue}解法二(渐进估计):}

   由$\underset{n\rightarrow +\infty}{\lim}\frac{f\left( n \right)}{n}=1$,可知
   \begin{align*}
      \frac{f\left( n \right)}{n}=1+o\left( 1 \right) ,n\rightarrow +\infty .
   \end{align*}
从而
\begin{align*}
   \left( 1+\frac{1}{f\left( n \right)} \right) ^n=\left[ 1+\frac{1}{n}\cdot \frac{1}{1+o\left( 1 \right)} \right] ^n=\left[ 1+\frac{1}{n}\left( 1+o\left( 1 \right) \right) \right] ^n=\left[ 1+\frac{1}{n}+o\left( \frac{1}{n} \right) \right] ^n=e^{n\ln \left[ 1+\frac{1}{n}+o\left( \frac{1}{n} \right) \right]},n\to +\infty.
\end{align*}
于是
\begin{align*}
   \underset{n\rightarrow +\infty}{\lim}\left( 1+\frac{1}{f\left( n \right)} \right) ^n=\underset{n\rightarrow +\infty}{\lim}e^{n\ln \left[ 1+\frac{1}{n}+o\left( \frac{1}{n} \right) \right]}=\underset{n\rightarrow +\infty}{\lim}e^{n\left[ \frac{1}{n}+o\left( \frac{1}{n} \right) \right]}=\underset{n\rightarrow +\infty}{\lim}e^{1+o\left( 1 \right)}=e.
\end{align*}
\end{solution}

\begin{example}
计算:

1.\(
\lim_{x \to 0} \frac{\cos \sin x - \cos x}{x^4}.
\)

2.\(
\lim_{x \to +\infty} \left[\left(x^3 - x^2 + \frac{x}{2}\right) e^{\frac{1}{x}} - \sqrt{1 + x^6}\right].
\)
\end{example}
\begin{solution}
   
\end{solution}

\begin{example}
   计算$(1+\frac{1}{x})^x,x\to+\infty$的渐进估计.
\end{example}
\begin{solution}
   由带$Peano$余项的$Taylor$公式,可得
   \begin{align*}
      &\left( 1+\frac{1}{x} \right) ^x=e^{x\ln \left( 1+\frac{1}{x} \right)}=e^{x\left[ \frac{1}{x}-\frac{1}{2x^2}+\frac{1}{3x^3}+o\left( \frac{1}{x^3} \right) \right]}=e^{1-\frac{1}{2x}+\frac{1}{3x^2}+o\left( \frac{1}{x^2} \right)}=e\cdot e^{-\frac{1}{2x}+\frac{1}{3x^2}+o\left( \frac{1}{x^2} \right)}
\\
&=e\left[ 1-\frac{1}{2x}+\frac{1}{3x^2}+o\left( \frac{1}{x^2} \right) +\frac{1}{2}\left( -\frac{1}{2x}+\frac{1}{3x^2}+o\left( \frac{1}{x^2} \right) \right) ^2+o\left( -\frac{1}{2x}+\frac{1}{3x^2}+o\left( \frac{1}{x^2} \right) \right) ^2 \right] 
\\
&=e\left[ 1-\frac{1}{2x}+\frac{1}{3x^2}+\frac{1}{8x^2}+o\left( \frac{1}{x^2} \right) \right] 
\\
&e-\frac{e}{2x}+\frac{11e}{24x^2}+o\left( \frac{1}{x^2} \right) 
   \end{align*}
故\begin{align*}
   \left( 1+\frac{1}{x} \right) ^x=e-\frac{e}{2x}+\frac{11e}{24x^2}+o\left( \frac{1}{x^2} \right) ,x\rightarrow +\infty .
\end{align*}
于是
\begin{align}\label{equation:12345}
   \underset{x\rightarrow +\infty}{\lim}x\left[ e-\left( 1+\frac{1}{x} \right) ^x \right] =\frac{e}{2},\underset{x\rightarrow +\infty}{\lim}x\left[ x\left( e-\left( 1+\frac{1}{x} \right) ^x \right) -\frac{e}{2} \right] =-\frac{11e}{24}.
\end{align}
\end{solution}
\begin{remark}
   反复利用上述\eqref{equation:12345}式构造极限的方法,再求出相应极限,就能得到$e$的更精确的渐进估计.这也是计算渐进估计的一般方法.
\end{remark}

\begin{example}
   计算
\[
\lim_{x \to 0} \frac{1 - \cos x \cos(2x) \cdots \cos(nx)}{x^2}.
\]
\end{example}
\begin{solution}
记$I=\lim_{x \to 0} \frac{1 - \cos x \cos(2x) \cdots \cos(nx)}{x^2}$,则由带$Peano$余项的$Taylor$公式,可得
\begin{align*}
   &\cos x \cos(2x) \cdots \cos(nx)
   =\left[1 - \frac{1}{2}x^2 + o(x^2)\right]\left[1 - \frac{(2x)^2}{2} + o(x^2)\right] \cdots \left[1 - \frac{(nx)^2}{2} + o(x^2)\right]
   \\
   &= 1 - \frac{1^2 + 2^2 + \cdots + n^2}{2}x^2 + o(x^2)
   = 1 - \frac{n(n + 1)(2n + 1)}{2 \cdot 6}x^2 + o(x^2),x\to0.
\end{align*}
故\(I = \frac{n(n + 1)(2n + 1)}{12}\).
\end{solution}

\begin{example}
   计算
\[
\lim_{x\rightarrow 0} \frac{x-\overset{n\text{次复合}}{\overbrace{\sin\sin \cdots \sin x}}}{x^3}.
\]
\end{example}
\begin{solution}
   先证明\(\underbrace{\sin(\sin(\sin(\cdots (\sin x))\cdots))}_{n\text{次复合}} = x - \frac{n}{6}x^3 + o(x^3),x\to0\).

当\(n = 1\)时,由$Taylor$公式结论显然成立.假设\(n=k\)时,结论成立.则当\(n=k + 1\)时,我们有
\begin{align*}
   &\sin\left(x - \frac{n}{6}x^3 + o(x^3)\right)
   \\
   &= x - \frac{n}{6}x^3 + o(x^3) - \frac{1}{6}\left(x - \frac{n}{6}x^3 + o(x^3)\right)^3 + o\left(\left(x - \frac{n}{6}x^3 + o(x^3)\right)^3\right)
   \\
   &= x - \frac{n + 1}{6}x^3 + o(x^3),x\to0.
\end{align*}
由数学归纳法得\(\underbrace{\sin(\sin(\sin(\cdots (\sin x))\cdots))}_{n\text{次复合}} = x - \frac{n}{6}x^3 + o(x^3)\),$x\to0$.
故$\lim_{x\rightarrow 0} \frac{x-\overset{n\text{次复合}}{\overbrace{\sin\sin \cdots \sin x}}}{x^3}=\frac{n}{6}.$
\end{solution}


\begin{example}
计算
\[
\lim_{n\rightarrow \infty}n\sin(2\pi en!).
\]
\end{example}
\begin{solution}
   由带Lagrange余项的Taylor展开式可知
   \[
   e^x = \sum_{k = 0}^{n + 1}\frac{x^k}{k!} + \frac{e^{\theta}x^{n + 2}}{(n + 2)!}, \theta \in (0, x).
   \]
   从而
   \[
   e = \sum_{k = 0}^{n + 1}\frac{1}{k!} + \frac{e^{\theta}}{(n + 2)!}, \theta \in (0, 1).
   \]
   于是
   \[
   2\pi en! = 2\pi n!\sum_{k = 0}^{n + 1}\frac{1}{k!} + \frac{2\pi n!e^{\theta}}{(n + 2)!}, \theta \in (0, 1).
   \]
   而\(n!\sum_{k = 0}^n\frac{1}{k!} \in \mathbb{N}\)，因此
   \begin{align*}
   n\sin(2\pi en!)&=n\sin\left(2\pi n!\sum_{k = 0}^{n + 1}\frac{1}{k!} + \frac{2\pi n!e^{\theta}}{(n + 2)!}\right)
   =n\sin\left(\frac{2\pi n!}{(n + 1)!} + \frac{2\pi n!e^{\theta}}{(n + 2)!}\right)\\
   &=n\sin\left(\frac{2\pi}{n + 1} + \frac{2\pi e^{\theta}}{(n + 1)(n + 2)}\right)
   \sim n\left[\frac{2\pi}{n + 1} + \frac{2\pi e^{\theta}}{(n + 1)(n + 2)}\right] \to 2\pi, n \to +\infty.
   \end{align*} 
\end{solution}


\subsection{利用Lagrange中值定理求极限}
Lagrange中值定理不会改变原数列或函数的阶,但是可以更加精细地估计原数列或函数的阶.以后利用Lagrange中值定理处理数列或函数的阶的过程都会直接省略.

\begin{example}
计算
\begin{align*}
   \lim_{n \to \infty} [\sin(\sqrt{n + 1}) - \sin(\sqrt{n})].
\end{align*}
\end{example}
\begin{solution}
   由Lagrange中值定理,可知对$\forall n\in\mathbb{N}_+$,存在$\theta_n \in(\sqrt{n+1},\sqrt{n})$,使得
   \begin{align*}
      \sin(\sqrt{n+1})-\sin(\sqrt{n})=(\sqrt{n+1}-\sqrt{n})\cos\theta_n=\frac{1}{\sqrt{n+1}+\sqrt{n}}\cdot \cos\theta_n.
   \end{align*}
从而当$n\to +\infty$时,有$\theta_n \to +\infty$.于是
\begin{align*}
   \lim_{n \to \infty} [\sin(\sqrt{n + 1}) - \sin(\sqrt{n})]=\lim_{n \to \infty} [\frac{1}{\sqrt{n+1}+\sqrt{n}}\cdot \cos\theta_n]=0.
\end{align*}
\end{solution}

\begin{example}
   计算
\begin{align*}
   \lim_{n \to \infty} n^2 \left(\arctan\frac{2024}{n} - \arctan\frac{2024}{n + 1}\right).
\end{align*}
\end{example}
\begin{proof}
   由Lagrange中值定理,可知对$\forall n\in\mathbb{N}$,存在$\theta_n\in(\frac{2024}{n},\frac{2024}{n + 1})$,使得
   \begin{align*}
      \arctan\frac{2024}{n} - \arctan\frac{2024}{n + 1} = \frac{1}{1+\theta _{n}^{2}}\cdot \left( \frac{2024}{n}-\frac{2024}{n+1} \right).
   \end{align*}
并且$\underset{n\rightarrow +\infty}{\lim}\theta _n=0$.故
\begin{align*}
   \lim_{n\rightarrow \infty} n^2\left( \mathrm{arc}\tan \frac{2024}{n}-\mathrm{arc}\tan \frac{2024}{n+1} \right) =\lim_{n\rightarrow \infty} \frac{n^2}{1+\theta _{n}^{2}}\cdot \left( \frac{2024}{n}-\frac{2024}{n+1} \right) =2024\lim_{n\rightarrow \infty} \frac{n^2}{n\left( n+1 \right)}=2024.
\end{align*}
\end{proof}

\begin{example}
   
1. 对\(\alpha \neq 0\),求\((n + 1)^{\alpha} - n^{\alpha}, n \to \infty\)的等价量;

2. 求\(n \ln n - (n - 1) \ln (n - 1), n \to \infty\)的等价量.
\end{example}
\begin{note}
   熟练这种利用Lagrange中值定理求极限的方法以后,这类数列或函数的等价量我们应该做到能够快速口算出来.因此,以后利用Lagrange中值定理计算数列或函数的等价量的具体过程我们不再书写,而是直接写出相应的等价量.
\end{note}
\begin{remark}
   不难发现利用Lagrange中值定理计算数列或函数的等价量,并不改变原数列或函数的阶.
\end{remark}
\begin{solution}
   1.根据Lagrange中值定理,可知对$n\in\mathbb{N}$,都有
   \begin{align*}
      (n + 1)^{\alpha} - n^{\alpha}=\alpha\cdot\theta _{n}^{\alpha -1},\theta _{n}\in(n,n+1).
   \end{align*}
   不妨设$\alpha>1$,则有$\alpha n^{\alpha -1}\leqslant \alpha \theta _{n}^{\alpha -1}\leqslant \alpha \left( n+1 \right) ^{\alpha -1}$(若$\alpha\leq1$,则有$\alpha \left( n+1 \right) ^{\alpha -1}\leqslant \alpha \theta _{n}^{\alpha -1}\leqslant \alpha n^{\alpha -1}$).故
   \begin{align*}
      \alpha =\lim_{n\rightarrow \infty} \frac{\alpha n^{\alpha -1}}{n^{\alpha -1}}\leqslant \lim_{n\rightarrow \infty} \frac{\alpha \theta _{n}^{\alpha -1}}{n^{a-1}}\leqslant \lim_{n\rightarrow \infty} \frac{\alpha (n+1)^{\alpha -1}}{n^{a-1}}=\alpha.
   \end{align*}
   因此$(n+1)^{\alpha}-n^{\alpha}\sim \alpha n^{\alpha -1},n\rightarrow \infty$.

   2.由Lagrange中值定理,可知对$n\in\mathbb{N}$,都有
   \begin{align*}
      \lim_{n \to \infty} \frac{n \ln n - (n - 1) \ln (n - 1)}{\ln n} = \lim_{n \to \infty} \frac{(n - (n - 1)) \cdot (1 + \ln \theta_n)}{\ln n}= \lim_{n \to \infty} \frac{1}{\ln n} + \lim_{n \to \infty} \frac{\ln \theta_n}{\ln n}=\lim_{n \to \infty} \frac{\ln \theta_n}{\ln n}, n - 1 < \theta_n < n.
   \end{align*}
   又\(\frac{\ln (n - 1)}{\ln n} < \frac{\ln \theta_n}{\ln n} < \frac{\ln n}{\ln n} = 1\),故\(\lim_{n \to \infty} \frac{\ln \theta_n}{\ln n} = 1\),从而
   \begin{align*}
      \lim_{n \to \infty} \frac{n \ln n - (n - 1) \ln (n - 1)}{\ln n} = \lim_{n \to \infty} \frac{\ln \theta_n}{\ln n}=1.
   \end{align*}
   于是\(n \ln n - (n - 1) \ln (n - 1) \sim \ln n,n\to+\infty\).
\end{solution}

\begin{example}
   计算
\begin{align*}
   \lim_{x \to 0} \frac{\cos(\sin x) - \cos x}{(1 - \cos x)\sin^{2}x}.
\end{align*}
\end{example}
\begin{proof}
   由Lagrange中值定理,可知对$\forall x\in U\left( 0 \right)$,都有
   \begin{align*}
      \cos \left( \sin x \right) -\cos x=\left( x-\sin x \right) \sin \theta ,\theta \in \left( \sin x,x \right) .
   \end{align*}
   从而
   \begin{align*}
      \lim_{x\rightarrow 0} \frac{\mathrm{cos(}\sin x)-\cos x}{(1-\cos x)\sin ^2x}=\lim_{x\rightarrow 0} \frac{\left( x-\sin x \right) \sin \theta}{\frac{1}{2}x^2\cdot x^2}=\lim_{x\rightarrow 0} \frac{\frac{1}{6}x^3\cdot \sin \theta}{\frac{1}{2}x^4}=\frac{1}{3}\lim_{x\rightarrow 0} \frac{\sin \theta}{x}.
   \end{align*}
   又由$\sin x<\theta <x,\forall x\in U\left( 0 \right)$可知
   \begin{align*}
      1=\lim_{x\rightarrow 0} \frac{\sin x}{x}=\lim_{x\rightarrow 0} \frac{\sin \left( \sin x \right)}{x}<\lim_{x\rightarrow 0} \frac{\sin \theta}{x}\leqslant \lim_{x\rightarrow 0} \frac{\theta}{x}<\lim_{x\rightarrow 0} \frac{x}{x}=1.
   \end{align*}
   故$\sin \theta \sim \theta \sim x,x\rightarrow 0$.因此$\lim_{x\rightarrow 0} \frac{\mathrm{cos(}\sin x)-\cos x}{(1-\cos x)\sin ^2x}=\frac{1}{3}\lim_{x\rightarrow 0} \frac{\sin \theta}{x}=\frac{1}{3}\lim_{x\rightarrow 0} \frac{x}{x}=\frac{1}{3}$.
\end{proof}



\subsection{L'Hospital'rules}

\begin{theorem}[上下极限L'Hospital法则]\label{theorem:上下极限L'Hospital法则}
设\(f, g\)满足洛必达法则的适用条件，则有
\begin{align}\label{theorem4.2-13.26}
  \varliminf \frac{f'}{g'} \leqslant \varliminf \frac{f}{g} \leqslant \varlimsup \frac{f}{g} \leqslant \varlimsup \frac{f'}{g'}. 
\end{align}
且
\begin{align}\label{theorem4.2-13.27}
   \varliminf \left|\frac{f'}{g'}\right| \leqslant \varliminf \left|\frac{f}{g}\right| \leqslant \varlimsup \left|\frac{f}{g}\right| \leqslant \varlimsup \left|\frac{f'}{g'}\right|.
\end{align}
\end{theorem}
\begin{note}
   此定理第一部分\eqref{theorem4.2-13.26}可以直接使用且以后可以不必再担心分子分母同时求导之后极限不存在而不能使用洛必达法则的情况. 但\eqref{theorem4.2-13.27}一般是不能直接用的, 需要给证明.
\end{note}
\begin{proof}
   以\(\to +\infty\)为例, 事实上, 固定\(x\), 由Cauchy中值定理, 我们有
\[
\frac{f(y)-f(x)}{g(y)-g(x)}=\frac{f'(\xi)}{g'(\xi)},x < \xi < y.
\]
我们断言对\(A \in \mathbb{R} \cup \{+\infty\}\), 必有
\begin{align}\label{theorem4.2-13.28}
   \lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}\right| = A \Leftrightarrow \lim_{n\rightarrow\infty}\left|\frac{f(y_n)-f(x)}{g(y_n)-g(x)}\right| = A.
\end{align}
若\(\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}\right| = A\). 首先利用极限的四则运算, 我们有
\[
\lim_{n\rightarrow\infty}\left|\frac{f(y_n)-f(x)}{g(y_n)-g(x)}\right|=\lim_{n\rightarrow\infty}\left|\frac{\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}}{1 - \frac{g(x)}{g(y_n)}}\right|=\lim_{n\rightarrow\infty}\left|\frac{1}{1 - \frac{g(x)}{g(y_n)}}\right|\cdot\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right|=\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right|.
\]
利用
\[
\left|\frac{f(y_n)}{g(y_n)}\right|-\left|\frac{f(x)}{g(y_n)}\right|\leqslant\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right|\leqslant\left|\frac{f(y_n)}{g(y_n)}\right|+\left|\frac{f(x)}{g(y_n)}\right|, \lim_{n\rightarrow\infty} g(y_n) = \infty,
\]
我们知道
\[
\lim_{n\rightarrow\infty}\left|\frac{f(y_n)-f(x)}{g(y_n)-g(x)}\right|=\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right| = A.
\]
反之设\(\lim_{n\rightarrow\infty}\left|\frac{f(y_n)-f(x)}{g(y_n)-g(x)}\right| = A\), 同样的由四则运算, 我们有
\[
\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right| = A.
\]
于是由
\[
\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right|-\left|\frac{f(x)}{g(y_n)}\right|\leqslant\left|\frac{f(y_n)}{g(y_n)}\right|\leqslant\left|\frac{f(y_n)}{g(y_n)}-\frac{f(x)}{g(y_n)}\right|+\left|\frac{f(x)}{g(y_n)}\right|, \lim_{n\rightarrow\infty}|g(y_n)| = \infty,
\]
我们知道
\[
\lim_{n\rightarrow\infty}\left|\frac{f(y_n)}{g(y_n)}\right| = A.
\]
现在就证明了\eqref{theorem4.2-13.28}.

于是结合\(x \to +\infty\), 我们容易得到⁷
\begin{align*}
&\varlimsup_{y\rightarrow+\infty}\left|\frac{f(y)}{g(y)}\right|=\varlimsup_{y\rightarrow+\infty}\left|\frac{f(y)-f(x)}{g(y)-g(x)}\right|=\varlimsup_{y\rightarrow+\infty}\left|\frac{f'(\xi)}{g'(\xi)}\right|\leqslant\varlimsup_{y\rightarrow+\infty}\left|\frac{f'(y)}{g'(y)}\right|\\
&\varliminf_{y\rightarrow+\infty}\left|\frac{f(y)}{g(y)}\right|=\varliminf_{y\rightarrow+\infty}\left|\frac{f(y)-f(x)}{g(y)-g(x)}\right|=\varliminf_{y\rightarrow+\infty}\left|\frac{f'(\xi)}{g'(\xi)}\right|\geqslant\varliminf_{y\rightarrow+\infty}\left|\frac{f'(y)}{g'(y)}\right|
\end{align*}
这就完成了证明.
\end{proof}



\begin{example}
   若\(f\in D^1[0,+\infty)\).
\begin{enumerate}[(1)]
   \item 设
   \[
   \lim_{x\rightarrow +\infty}[f(x)+f'(x)] = s\in\mathbb{R},
   \]
   证明\(\lim_{x\rightarrow +\infty}f(x)=s\).

   \item 设
   \[
   \lim_{x\rightarrow +\infty}\left[f'(x)+\frac{2x}{\sqrt[3]{1 + x^{3}}}f(x)\right]=s\in\mathbb{R},
   \]
   证明\(\lim_{x\rightarrow +\infty}f(x)=\frac{s}{2}\).
\end{enumerate}
\end{example}
\begin{note}
   (2)中的构造思路:根据条件构造相应的微分方程,然后求解这个微分方程,再常数变易得到我们需要构造的函数. 具体步骤如下:

   构造微分方程:\(y'+\frac{2x}{\sqrt[3]{1 + x^3}}y = 0\),整理可得\(\frac{y'}{y}=-\frac{2x}{\sqrt[3]{1 + x^3}}\),再对其两边同时积分得到\(\ln y = -\int_{0}^{x}\frac{2x}{\sqrt[3]{1 + x^3}}dx + C_0\).从而\(y = Ce^{-\int_{0}^{x}\frac{2x}{\sqrt[3]{1 + x^3}}dx}\),于是\(C = ye^{\int_{0}^{x}\frac{2x}{\sqrt[3]{1 + x^3}}dx}\).
故我们要构造的函数就是\(C(x) = f(x)e^{\int_{0}^{x}\frac{2x}{\sqrt[3]{1 + x^3}}dx}\).并且此时$C(x)$满足$C'\left( x \right) =f'\left( x \right) +\frac{2x}{\sqrt[3]{1+x^3}}f\left( x \right)$.
\end{note}
\begin{proof}
\begin{enumerate}[(1)]
   \item $\lim_{x\rightarrow +\infty}f(x) = \lim_{x\rightarrow +\infty}\frac{e^{x}f(x)}{e^{x}}
      =\lim_{x\rightarrow +\infty}\frac{e^{x}[f(x)+f'(x)]}{e^{x}}
      =\lim_{x\rightarrow +\infty}[f + f']
      =s$.
   
   \item 注意到$\lim_{x\rightarrow +\infty} e^{\int_0^x{\frac{2t}{\sqrt[3]{1+t^3}}dt}}=+\infty$,从而由$\mathrm{L}'\mathrm{Hospital}'\mathrm{rules}$可得
\begin{align*}
\lim_{x\rightarrow +\infty} f(x)&=\lim_{x\rightarrow +\infty} \frac{f(x)\cdot e^{\int_0^x{\frac{2t}{\sqrt[3]{1+t^3}}dt}}}{e^{\int_0^x{\frac{2t}{\sqrt[3]{1+t^3}}dt}}}\xlongequal[]{\mathrm{L}'\mathrm{Hospital}'\mathrm{rules}}\lim_{x\rightarrow +\infty} \frac{\left[ f'(x)+\frac{2x}{\sqrt[3]{1+x^3}}f(x) \right] e^{\int_0^x{\frac{2t}{\sqrt[3]{1+t^3}}dt}}}{\frac{2x}{\sqrt[3]{1+x^3}}e^{\int_0^x{\frac{2t}{\sqrt[3]{1+t^3}}dt}}}
\\
&=\lim_{x\rightarrow +\infty} \frac{\sqrt[3]{1+x^3}}{2x}\left[ f(x)+\frac{2x}{\sqrt[3]{1+x^3}}f'(x) \right] =\frac{s}{2}.
   \end{align*}
\end{enumerate}
\end{proof}



\subsection{与方程的根有关的渐近估计}

\subsubsection{可以解出n的类型}

\begin{example}
   设\(x^{2n + 1}+e^{x}=0\)的根记为\(x_n\),计算
\[
\lim_{n\rightarrow\infty}x_n,\lim_{n\rightarrow\infty}n(1 + x_n).
\]
\end{example}
\begin{solution}
   注意到\(0^{2n + 1}+e^{0}>0,(-1)^{2n + 1}+e^{-1}<0\)且\(x^{2n + 1}+e^{x}\)严格单调递增,所以由零点存在定理可知,对每个\(n\in\mathbb{N}\),存在唯一的\(x_n\in(-1,0)\),使得
\[
x_n^{2n + 1}+e^{x_n}=0\Rightarrow\frac{x_n}{\ln(-x_n)} = 2n + 1\rightarrow +\infty,n\to +\infty.
\]
任取$\{x_n\}$的一个收敛子列$\{x_{n_k}\}$,又$x_n\in(-1,0)$,因此可设\(\lim_{k\rightarrow\infty}x_{n_k}=c\in[-1,0]\),则$\underset{k\rightarrow +\infty}{\lim}\frac{x_{n_k}}{\ln \left( -x_{n_k} \right)}=\frac{c}{\ln \left( -c \right)}$.又因为$\underset{n\rightarrow +\infty}{\lim}\frac{x_n}{\ln \left( -x_n \right)}=+\infty$,所以由Heine归结原则可知$\underset{k\rightarrow +\infty}{\lim}\frac{x_{n_k}}{\ln \left( -x_{n_k} \right)}=+\infty$.从而
\[
\underset{k\rightarrow +\infty}{\lim}\frac{x_{n_k}}{\ln \left( -x_{n_k} \right)}=\frac{c}{\ln(-c)}=+\infty,
\]
故$c = - 1$.
于是由\hyperref[proposition:子列极限命题]{子列极限命题(a)}知\(\lim_{n\rightarrow\infty}x_n=-1\).因此
\begin{align*}
\lim_{n\rightarrow\infty}n(1 + x_n)=\frac{1}{2}\lim_{n\rightarrow\infty}(2n + 1)(1 + x_n)
=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{x_n(1 + x_n)}{\ln(-x_n)}
=\frac{1}{2}\lim_{x\rightarrow - 1^+}\frac{x(1 + x)}{\ln(-x)}
=\frac{1}{2}.
\end{align*}
\end{solution}

\begin{example}
   设\(a_n\in(0,1)\)是\(x^n + x = 1\)的根,证明
\[
a_n=1-\frac{\ln n}{n}+o\left(\frac{\ln n}{n}\right).
\]
\end{example}
\begin{proof}
   注意到\(0^n + 0 - 1 < 0\),\(1^n + 1 - 1 > 0\),且\(x^n + x - 1\)在\((0, 1)\)上严格单调递增,所以由零点存在定理可知,对\(\forall n\in \mathbb{N}_+\),存在唯一的\(a_n\in (0, 1)\),使得
\begin{align}\label{example4.16-1.1}
  a_{n}^{n} + a_n = 1 \Rightarrow \frac{\ln(1 - a_n)}{\ln a_n} = n \rightarrow +\infty, n \rightarrow +\infty.  
\end{align}
任取\(\{ a_n \}\)的一个收敛子列\(\{ a_{n_k} \}\),又\(a_n\in (0, 1)\),因此可设\(\lim_{k\rightarrow +\infty}a_{n_k} = c\in [0, 1]\),则\(\lim_{k\rightarrow +\infty}\frac{\ln(1 - a_{n_k})}{\ln a_{n_k}} = \frac{\ln(1 - c)}{\ln c}\).又由\((1.1)\)式可知\(\lim_{n\rightarrow +\infty}\frac{\ln(1 - a_n)}{\ln a_n} = +\infty\),所以由Heine归结原则可知\(\lim_{k\rightarrow +\infty}\frac{\ln(1 - a_{n_k})}{\ln a_{n_k}} = +\infty\).从而
\[
\lim_{k\rightarrow +\infty}\frac{\ln(1 - a_{n_k})}{\ln a_{n_k}} = \frac{\ln(1 - c)}{\ln c} = +\infty.
\]
故\(c = 1\),于是由\hyperref[proposition:子列极限命题]{子列极限命题(a)}可知
\begin{align}\label{example4.16-1.2}
  \lim_{n\rightarrow +\infty}a_n = c = 1.  
\end{align}
而要证\(a_n = 1 - \frac{\ln n}{n} + o\left(\frac{\ln n}{n}\right), n \rightarrow +\infty\),等价于证明\(\lim_{n\rightarrow +\infty}\frac{a_n - 1 + \frac{\ln n}{n}}{\frac{\ln n}{n}} = \lim_{n\rightarrow +\infty}\frac{na_n - n + \ln n}{\ln n} = 0\).利用\eqref{example4.16-1.1}\eqref{example4.16-1.2}式可得
\begin{align}
   \underset{n\rightarrow +\infty}{\lim}\frac{na_n-n+\ln n}{\ln n}&=\underset{n\rightarrow +\infty}{\lim}\left[ \frac{\frac{\ln \left( 1-a_n \right)}{\ln a_n}\cdot a_n-\frac{\ln \left( 1-a_n \right)}{\ln a_n}}{\ln \frac{\ln \left( 1-a_n \right)}{\ln a_n}}+1 \right] =\underset{n\rightarrow +\infty}{\lim}\left[ \frac{\left( a_n-1 \right) \ln \left( 1-a_n \right)}{\ln a_n\left( \ln \frac{\ln \left( 1-a_n \right)}{\ln a_n} \right)}+1 \right] \nonumber
   \\
   &=\underset{x\rightarrow 1^-}{\lim}\left[ \frac{\left( x-1 \right) \ln \left( 1-x \right)}{\ln x\left( \ln \frac{\ln \left( 1-x \right)}{\ln x} \right)}+1 \right] =\underset{x\rightarrow 0^-}{\lim}\left[ \frac{x\ln \left( -x \right)}{\ln \left( 1+x \right) \left( \ln \frac{\ln \left( -x \right)}{\ln \left( 1+x \right)} \right)}+1 \right] .
\label{example4.16-1.3}
\end{align}
由L'Hospital's rules可得
\begin{align}
   \underset{x\rightarrow 0^-}{\lim}\frac{x\ln \left( -x \right)}{\ln \left( 1+x \right) \left( \ln \frac{\ln \left( -x \right)}{\ln \left( 1+x \right)} \right)}&=\underset{x\rightarrow 0^-}{\lim}\frac{\ln \left( -x \right)}{\ln \frac{\ln \left( -x \right)}{\ln \left( 1+x \right)}}\xlongequal{\text{L'Hospital's rules}}\underset{x\rightarrow 0^-}{\lim}\frac{\frac{1}{x}}{\frac{\ln \left( 1+x \right)}{\ln \left( -x \right)}\cdot \frac{\frac{1}{x}\ln \left( 1+x \right) -\frac{1}{1+x}\ln \left( -x \right)}{\ln ^2\left( 1+x \right)}}\nonumber
   \\
   &=\underset{x\rightarrow 0^-}{\lim}\frac{\ln \left( -x \right) \cdot \ln \left( 1+x \right)}{\ln \left( 1+x \right) -\frac{x}{1+x}\ln \left( -x \right)}=\underset{x\rightarrow 0^-}{\lim}\frac{x\ln \left( -x \right)}{\ln \left( 1+x \right) -\frac{x}{1+x}\ln \left( -x \right)}\nonumber
   \\
   &=\underset{x\rightarrow 0^-}{\lim}\frac{x}{\frac{\ln \left( 1+x \right)}{\ln \left( -x \right)}-\frac{x}{1+x}}=\underset{x\rightarrow 0^-}{\lim}\frac{x}{-\frac{x}{1+x}}=-1.
\label{example4.16-1.4}
\end{align}
于是结合\eqref{example4.16-1.3}\eqref{example4.16-1.4}式可得
\[
\lim_{n\rightarrow +\infty}\frac{na_n - n + \ln n}{\ln n} = \lim_{x\rightarrow 0^-}\left[ \frac{x\ln(-x)}{\ln(1 + x)\left(\ln \frac{\ln(-x)}{\ln(1 + x)}\right)} + 1 \right] = -1 + 1 = 0.
\]
故\(a_n = 1 - \frac{\ln n}{n} + o\left(\frac{\ln n}{n}\right), n \rightarrow +\infty\).
\end{proof}

\begin{example}
   设\(f_n(x)=x + x^2+\cdots+x^n,n\in\mathbb{N}\),\(f_n(x)=1\)在\([0,1]\)的根为\(x_n\).求\(\lim_{n\rightarrow\infty}x_n\).
\end{example}
\begin{solution}
   注意到\(f_n(x) - 1\)严格单调递增，且\(f_n(0) - 1 = -1 < 0\)，\(f_n(1) - 1 = n - 1 > 0\)，\(\forall n\geqslant 2\)。故由零点存在定理可知，当\(n\geqslant 2\)时，存在唯一的\(x_n\in(0, 1)\)，使得\(f_n(x_n) = 1\)。
从而
\begin{align}\label{example4.17-1.1}
 f_n(x_n)=\frac{x_n - x_{n}^{n + 1}}{1 - x_n}=1\Rightarrow x_n - x_{n}^{n + 1}=1 - x_n\Rightarrow x_{n}^{n + 1}=2x_n - 1\Rightarrow n + 1=\frac{\ln(2x_n - 1)}{\ln x_n}.  
\end{align}
由上式\eqref{example4.17-1.1}可知\(x_{n}^{n + 1}=2x_n - 1\)且\(x_n\in(0, 1)\)，因此
\[
0\leqslant x_{n}^{n + 1}=2x_n - 1\leqslant 1\Rightarrow x_n\in\left(\frac{1}{2}, 1\right).
\]
任取\(\{x_n\}\)的收敛子列\(\{x_{n_k}\}\)，设\(\lim_{k\rightarrow +\infty}x_{n_k}=a\in\left[\frac{1}{2}, 1\right]\)，则由\((1.1)\)式和Heine归结原则可知
\[
\lim_{k\rightarrow +\infty}\frac{\ln(2x_{n_k} - 1)}{\ln x_{n_k}}=\frac{\ln(2a - 1)}{\ln a}=+\infty.
\]
故\(a = \frac{1}{2}\)，再由\hyperref[proposition:子列极限命题]{子列极限命题(a)}可知\(\lim_{n\rightarrow +\infty}x_n=a=\frac{1}{2}\)。
\end{solution}

\subsubsection{迭代方法}

\begin{example}
设\(x_n\)是\(x = \tan x\)从小到大排列的全部正根，设
\[
\lim_{n\rightarrow\infty}n(x_n - An - B)=C,
\]
求\(A,B,C\)。
\end{example}
\begin{note}
   主要想法是结合$\arctan x$的性质:\(\arctan x + \arctan\frac{1}{x} = \frac{\pi}{2}\)，\(x > 0\),再利用迭代法计算渐近展开.
\end{note}
\begin{solution}
   令\(f(x)=\tan x - x\)，\(x\in(n\pi, n\pi + \frac{\pi}{2})\)，\(n = 1, 2, \cdots\)，则\(f^\prime(x)=\tan^2 x > 0\)，\(\forall x\in(n\pi, n\pi + \frac{\pi}{2})\)，\(n = 1, 2, \cdots\)。因此\(f(x)\)在\((n\pi, n\pi + \frac{\pi}{2})\)上严格单调递增，其中\(n = 1, 2, \cdots\)。又注意到\(\lim_{x\rightarrow (n\pi)^+}(\tan x - x)= -n\pi < 0\)，\(\lim_{x\rightarrow (n\pi + \frac{\pi}{2})^+}(\tan x - x)= +\infty > 0\)。故由零点存在定理可知，存在唯一的\(x_n\in(n\pi, n\pi + \frac{\pi}{2})\)，\(n = 1, 2, \cdots\)，使得
\[
\tan x_n = x_n.
\]
从而\(x_n - n\pi\in(0, \frac{\pi}{2})\)，于是
\begin{align}\label{example4.19-1.1}
 x_n = \tan x_n = \tan(x_n - n\pi) \Rightarrow x_n = \arctan x_n + n\pi.  
\end{align}
又因为\(x_n\in(n\pi, n\pi + \frac{\pi}{2})\)，\(n = 1, 2, \cdots\)，所以当\(n\rightarrow +\infty\)时，有\(x_n\rightarrow +\infty\)。再结合\eqref{example4.19-1.1}式可得
\begin{align}\label{example4.19-1.2}
   x_n = \arctan x_n + n\pi = n\pi + \frac{\pi}{2} + o(1), n\rightarrow +\infty.
\end{align}
注意到\(\arctan x + \arctan\frac{1}{x} = \frac{\pi}{2}\)，\(x > 0\)，从而\(\arctan x = \frac{\pi}{2} - \arctan\frac{1}{x}\)。于是利用\eqref{example4.19-1.2}式可得
\begin{align*}
   x_n&=\mathrm{arc}\tan x_n+n\pi =\frac{\pi}{2}+n\pi -\mathrm{arc}\tan \frac{1}{x_n}=\frac{\pi}{2}+n\pi -\mathrm{arc}\tan \frac{1}{n\pi +\frac{\pi}{2}+o(1)}
   \\
   &=\frac{\pi}{2}+n\pi -\mathrm{arc}\tan \left( \frac{1}{n\pi}\frac{1}{1+\frac{1}{2n}+o(\frac{1}{n})} \right) =\frac{\pi}{2}+n\pi -\mathrm{arc}\tan \left[ \frac{1}{n\pi}\left( 1+O(\frac{1}{n}) \right) \right] 
   \\
   &=\frac{\pi}{2}+n\pi -\mathrm{arc}\tan \left[ \frac{1}{n\pi}+O(\frac{1}{n^2}) \right] =\frac{\pi}{2}+n\pi -\frac{1}{n\pi}+O(\frac{1}{n^2}),n\rightarrow +\infty .
\end{align*}
因此\(\lim_{n\rightarrow +\infty}n\left(x_n - \frac{\pi}{2} - n\pi\right)= -\frac{1}{\pi}\)。
\end{solution}

\subsection{综合题}

\begin{example}
   设二阶可微函数\(f:[1,+\infty)\to(0,+\infty)\)满足
   \[
   f''(x)\leqslant0,\lim_{x\rightarrow +\infty}f(x)=+\infty.
   \]
   求极限
   \[
   \lim_{s\rightarrow0^{+}}\sum_{n = 1}^{\infty}\frac{(-1)^n}{f^s(n)}.
   \]
\end{example}
\begin{note}
      本例非常经典，深刻体现了“拉格朗日中值定理”保持阶不变和“和式和积分”转化的思想.
\end{note}
\begin{proof}
由条件$f''(x)\leqslant 0$可知,$f$是上凸函数.而上凸函数只能在递增、递减、先增后减中发生一个.又$\lim_{x\rightarrow +\infty}f(x)=+\infty$,因此$f$一定在$[1,+\infty)$上递增.再结合$f''(x)\leqslant 0$可知$f'\geqslant0$且单调递减.
下面来求极限.

   由Lagrange中值定理可得，对\(\forall n\in \mathbb{N}_+\)，存在\(\theta_n\in(2n - 1, 2n)\)，使得
   \begin{align}\label{example4.73-1.0}
      \sum_{n = 1}^{\infty}\frac{(-1)^n}{f^s(n)} = \sum_{n = 1}^{\infty}\left[\frac{1}{f^s(2n)} - \frac{1}{f^s(2n - 1)}\right] \xlongequal{\text{Lagrange中值定理}} s\sum_{n = 1}^{\infty}\frac{-f'(\theta_n)}{f^{s + 1}(\theta_n)}.
   \end{align}
   由于\(\theta_n\in(2n - 1, 2n)\)，\(\forall n\in \mathbb{N}_+\)且\(f\geqslant 0\)单调递增，\(f'\geqslant 0\)单调递减，因此
   \begin{align}
      s\sum_{n = 1}^{\infty}\frac{-f'(2n - 1)}{f^{s + 1}(2n - 1)} \leqslant s\sum_{n = 1}^{\infty}\frac{-f'(\theta_n)}{f^{s + 1}(\theta_n)} \leqslant s\sum_{n = 1}^{\infty}\frac{-f'(2n)}{f^{s + 1}(2n)}. \label{example4.73-1.1}
   \end{align}
   又因为\(\left[\frac{-f'(x)}{f^{s + 1}(x)}\right]' = \frac{f''(x)f(x) - (s + 1)f'(x)}{f^{s + 2}(x)}\leqslant 0\)，所以\(\frac{-f'(x)}{f^{s + 1}(x)}\)单调递减。从而一方面，我们有
   \begin{align}
      \underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\frac{-f'\left( 2n \right)}{f^{s+1}\left( 2n \right)}}&\leqslant -\underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\int_{n-1}^n{\frac{f'\left( 2x \right)}{f^{s+1}\left( 2x \right)}\mathrm{d}x}}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\sum_{n=1}^{\infty}{\int_{2n-1}^{2n}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}}\nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{1}{f^{s+1}\left( x \right)}\mathrm{d}f\left( x \right)}
      \nonumber
      \\
      &=\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\cdot \frac{1}{sf^s\left( x \right)}\Big|_{1}^{+\infty}=-\underset{s\rightarrow 0^+}{\lim}\left[ \frac{s}{2}\cdot \frac{1}{sf^s\left( 1 \right)} \right] =-\frac{1}{2}. \label{example4.73-1.2}
   \end{align}
   
   \begin{align}
      \underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\frac{-f'\left( 2n \right)}{f^{s+1}\left( 2n \right)}}&\geqslant -\underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\int_n^{n+1}{\frac{f'\left( 2x \right)}{f^{s+1}\left( 2x \right)}\mathrm{d}x}}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\sum_{n=1}^{\infty}{\int_{2n}^{2n+1}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}}
      \nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_2^{+\infty}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_2^{+\infty}{\frac{1}{f^{s+1}\left( x \right)}\mathrm{d}f\left( x \right)}
      \nonumber
      \\
      &=\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\cdot \frac{1}{sf^s\left( x \right)}\Big|_{2}^{+\infty}=-\underset{s\rightarrow 0^+}{\lim}\left[ \frac{s}{2}\cdot \frac{1}{sf^s\left( 2 \right)} \right] =-\frac{1}{2}. \label{example4.73-1.3}
   \end{align}
   于是利用\eqref{example4.73-1.2}\eqref{example4.73-1.3}式，由夹逼准则可得
   \begin{align}
     \lim_{s\rightarrow 0^+}s\sum_{n = 1}^{\infty}\frac{-f'(2n)}{f^{s + 1}(2n)} = -\frac{1}{2}. \label{example4.73-2.1} 
   \end{align}
   另一方面，我们有
   \begin{align}
      \underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\frac{-f'\left( 2n-1 \right)}{f^{s+1}\left( 2n-1 \right)}}&\leqslant -\underset{s\rightarrow 0^+}{\lim}s\left[ \frac{f'\left( 1 \right)}{f^{s+1}\left( 1 \right)}+\sum_{n=2}^{\infty}{\int_{n-1}^n{\frac{f'\left( 2x-1 \right)}{f^{s+1}\left( 2x-1 \right)}\mathrm{d}x}} \right] =-\underset{s\rightarrow 0^+}{\lim}s\left[ \frac{f'\left( 1 \right)}{f^{s+1}\left( 1 \right)}+\frac{1}{2}\sum_{n=2}^{\infty}{\int_{2n-3}^{2n-1}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}} \right] 
      \nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}s\left[ \frac{f'\left( 1 \right)}{f^{s+1}\left( 1 \right)}+\frac{1}{2}\int_1^{+\infty}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x} \right] =-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}
      \nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{1}{f^{s+1}\left( x \right)}\mathrm{d}f\left( x \right)}=\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\cdot \frac{1}{sf^s\left( x \right)}\Big|_{1}^{+\infty}
      \nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}\left[ \frac{s}{2}\cdot \frac{1}{sf^s\left( 1 \right)} \right] =-\frac{1}{2}.\label{example4.73-1.4}
   \end{align}
   
   \begin{align}
      \underset{s\rightarrow 0^+}{\lim}s\sum_{n=1}^{\infty}{\frac{-f'\left( 2n-1 \right)}{f^{s+1}\left( 2n-1 \right)}}&\geqslant -\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\sum_{n=1}^{\infty}{\int_n^{n+1}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\sum_{n=1}^{\infty}{\int_{2n-1}^{2n+1}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}}
      \nonumber
      \\
      &=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{f'\left( x \right)}{f^{s+1}\left( x \right)}\mathrm{d}x}=-\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\int_1^{+\infty}{\frac{1}{f^{s+1}\left( x \right)}\mathrm{d}f\left( x \right)}
      \nonumber
      \\
      &=\underset{s\rightarrow 0^+}{\lim}\frac{s}{2}\cdot \frac{1}{sf^s\left( x \right)}\Big|_{1}^{+\infty}=-\underset{s\rightarrow 0^+}{\lim}\left[ \frac{s}{2}\cdot \frac{1}{sf^s\left( 1 \right)} \right] =-\frac{1}{2}.\label{example4.73-1.5}
   \end{align}
   于是利用\eqref{example4.73-1.4}\eqref{example4.73-1.5}式，由夹逼准则可得
   \begin{align}
     \lim_{s\rightarrow 0^+}s\sum_{n = 1}^{\infty}\frac{-f'(2n - 1)}{f^{s + 1}(2n - 1)} = -\frac{1}{2}. \label{example4.73-2.2} 
   \end{align}
   故结合\eqref{example4.73-1.0}\eqref{example4.73-1.1}\eqref{example4.73-2.1}\eqref{example4.73-2.2}式，由夹逼准则可得
   \[
   \lim_{s\rightarrow 0^+} \sum_{n = 1}^{\infty}\frac{(-1)^n}{f^s(n)} = \lim_{s\rightarrow 0^+} s\sum_{n = 1}^{\infty}\frac{-f'(\theta_n)}{f^{s + 1}(\theta_n)} = -\frac{1}{2}.
   \]
\end{proof}


\section{估计和式的常用方法}

\subsection{强行替换(拟合法)和凑定积分}\label{强行替换(拟合法)和凑定积分}

\begin{example}
计算
\[
\lim_{n\rightarrow\infty}\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}+1}{n}}.
\]
\end{example}
\begin{note}
   证明的想法要么是凑定积分定义. 要么强行替换为自己熟悉的结构(拟合法), 无需猜测放缩手段.
\end{note}
\begin{remark}
   注意定积分定义是任意划分任意取点,而不只是等分取端点.
\end{remark}
\begin{solution}
{\color{blue}解法一:}注意到
\[
\frac{i}{n}<\frac{\sqrt{i^{2}+1}}{n}<\frac{i + 1}{n},i = 1,2,\cdots,n,
\]
于是由定积分定义有
\[
\lim_{n\rightarrow\infty}\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}+1}{n}}=\lim_{n\rightarrow\infty}\frac{1}{n}\sum_{i = 1}^{n}\frac{1}{1+\left(\frac{\sqrt{i^{2}+1}}{n}\right)^{2}}=\int_{0}^{1}\frac{1}{1 + x^{2}}dx=\frac{\pi}{4}.
\]

{\color{blue}解法二:}注意到
\[
0\leq\left|\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}+1}{n}}-\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}}{n}}\right|\leqslant\sum_{i = 1}^{n}\frac{1}{n\left(n+\frac{i^{2}+1}{n}\right)\left(n+\frac{i^{2}}{n}\right)}\leqslant\sum_{i = 1}^{n}\frac{1}{n^{3}}=\frac{1}{n^{2}}\rightarrow0,n\rightarrow\infty,
\]
故
\[
\lim_{n\rightarrow\infty}\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}+1}{n}}=\lim_{n\rightarrow\infty}\sum_{i = 1}^{n}\frac{1}{n+\frac{i^{2}}{n}}=\lim_{n\rightarrow\infty}\frac{1}{n}\sum_{i = 1}^{n}\frac{1}{1+\frac{i^{2}}{n^{2}}}=\int_{0}^{1}\frac{1}{1 + x^{2}}dx=\frac{\pi}{4}.
\]
\end{solution}

\begin{example}
计算
\[
\lim_{n\rightarrow\infty}\sum_{i = 1}^{2n}\frac{i + 4}{n^{2}+\frac{1}{i}}\sin^{4}\frac{\pi i}{n}.
\]
\end{example}
\begin{note}
   长得神似定积分定义且很容易观察到\(\frac{i + 4}{n^{2}+\frac{1}{i}}\)和\(\frac{i}{n^{2}}\)没有区别,懒得去寻求放缩方法,直接采用强行替换的方法,即做差\(\frac{i + 4}{n^{2}+\frac{1}{i}}-\frac{i}{n^{2}}\) 强估证明不影响极限.
\end{note}
\begin{proof}
   注意到
\begin{align*}
&\left|\sum_{i = 1}^{2n}\frac{i + 4}{n^{2}+\frac{1}{i}}\sin^{4}\frac{\pi i}{n}-\sum_{i = 1}^{2n}\frac{i}{n^{2}}\sin^{4}\frac{\pi i}{n}\right|=\left|\sum_{i = 1}^{2n}\left(\frac{i + 4}{n^{2}+\frac{1}{i}}-\frac{i}{n^{2}}\right)\sin^{4}\frac{\pi i}{n}\right|\\
&\leqslant\sum_{i = 1}^{2n}\frac{4n^{2}-1}{n^{2}\left(n^{2}+\frac{1}{i}\right)}
\leqslant\sum_{i = 1}^{2n}\frac{4n^{2}-1}{n^{4}}
=\frac{2n(4n^{2}-1)}{n^{4}},
\end{align*}
于是
\[
0\leqslant\lim_{n\rightarrow\infty}\left|\sum_{i = 1}^{2n}\frac{i + 4}{n^{2}+\frac{1}{i}}\sin^{4}\frac{\pi i}{n}-\sum_{i = 1}^{2n}\frac{i}{n^{2}}\sin^{4}\frac{\pi i}{n}\right|\leqslant\lim_{n\rightarrow\infty}\frac{2n(4n^{2}-1)}{n^{4}} = 0.
\]
因此
\begin{align*}
   &\lim_{n\rightarrow \infty} \sum_{i=1}^{2n}{\frac{i+4}{n^2+\frac{1}{i}}\sin ^4\frac{\pi i}{n}}=\lim_{n\rightarrow \infty} \frac{1}{n}\sum_{i=1}^{2n}{\frac{i}{n}\sin ^4\frac{\pi i}{n}}
   \\
   &=\int_0^2{x\sin ^4\pi xdx}\xlongequal[\text{令}x=2-y]{\text{区间再现}}\int_0^2{\left( 2-y \right) \sin ^4\pi \left( 2-y \right) dy}
   \\
   &=\int_0^2{\left( 2-y \right) \sin ^4\pi ydy}=\int_0^2{\sin ^4\pi xdx}=\frac{1}{\pi}\int_0^{2\pi}{\sin ^4xdx}
   \\
   &=\frac{4}{\pi}\int_0^{\frac{\pi}{2}}{\sin ^4xdx}=\frac{4}{\pi}\cdot \frac{3!!}{4!!}\cdot \frac{\pi}{2}=\frac{3}{4}.
\end{align*}
\end{proof}


\subsection{和式内部对n可求极限(极限号与求和号可换序)}\label{section:和式内部对n可求极限(极限号与求和号可换序)}

当和式内部对n可求极限时,极限号与求和号可以换序.(当和式内部对n求极限是$\frac{\infty}{\infty}$或$\frac{0}{0}$等都不能换序)

\begin{remark}
  不能按照极限号与求和号可换序的想法书写过程,应该利用不等式放缩、夹逼准则和上下极限进行严谨地书写证明. 
\end{remark}


\begin{example}\label{example:和式极限例题1}
   求极限
   \begin{align*}
     \underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}.
   \end{align*}
 \end{example}
 \begin{note}\label{计算二元数列求和的极限的思路}
   求这种前$n$项和关于$n$的极限($n$既和求和号上限有关,又和通项有关)的思路是:先假设极限存在(这里极限号内是数列不是级数,所以这里是数列收敛).于是由数列收敛的柯西收敛准则可知,对$\forall \varepsilon>0$,存在$N_0\in \mathbb{N}_+$,使得对$\forall n>N_0$,都有
   \begin{align*}
     \varepsilon >\left| \sum\limits_{k=0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}-\sum\limits_{k=0}^{N_0+1}{\frac{\cos \sqrt{\frac{k}{N_0+1}}}{2^k}} \right|=\left| \sum\limits_{k>N_0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}+\sum\limits_{k=0}^{N_0+1}{\frac{\cos \sqrt{\frac{k}{n}}-\cos \sqrt{\frac{k}{N_0+1}}}{2^k}} \right|>\sum\limits_{k>N_0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}.
   \end{align*}
   从而由数列极限的定义,可知对$\forall N>N_0,$都有$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k>N}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}=0.$
 
   因此对$\forall N>N_0$,我们有
   \begin{align*}
     \underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}=\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=0}^N{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}+\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k>N}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}=\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=0}^N{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}
 =\sum\limits_{k=0}^N{\underset{n\rightarrow +\infty}{\lim}\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}=\sum\limits_{k=0}^N{\frac{1}{2^k}}.
   \end{align*}
 再令$N\to +\infty$,得到$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=0}^n{\frac{\cos \sqrt{\frac{k}{n}}}{2^k}}=\underset{N\rightarrow +\infty}{\lim}\sum\limits_{k=0}^N{\frac{1}{2^k}}=2.$
 
 综上所述,我们在假设原极限收敛的前提下能够得到原极限就是2,因此我们可以凭借直觉不严谨地断言原极限实际上就是2(如果原极限不是2,那么原极限只能发散,否则与上述证明矛盾.而出题人要我们求解的极限一般都不发散,并且凭借直觉也能感觉到这个极限不发散).
 
 \textbf{注意:因为这里我们并不能严谨地证明原数列收敛,所以只凭借上述论证并不能严谨地得到原极限等于2.}
 
 (\textbf{上述论证实际上就是一种"猜测"这种极限的值的方法})
 
 虽然只凭借上述论证我们并不能直接得到原极限等于2的证明,但是我们可以得到一个重要的结果:原极限的值就是2.我们后续只需要证明这个结果是正确的即可.后续证明只需要适当放缩原本数列,再利用上下极限和夹逼定理即可(因为我们已经知道极限的值,放缩的时候就能更容易地把握放缩的“度”).并且我们根据上述论证可知(放缩的时候我们可以利用下述想法,即将不影响整体的阶的余项通过放缩去掉),原和式的极限等于其前$N$项的极限,原和式除前$N$项外的余项的极限趋于0,即余项并不影响原数列的极限,可以通过放缩将其忽略.我们只需要考虑前$N$项的极限即可.

 后续证明的套路一般都是:
 放大:可以直接通过一些常用不等式得到;
 放小:将原级数直接放缩成有限项再取下极限.

 \textbf{注:关键是如何利用上述想法直接计算出极限的值,后续的放缩证明只是为了保证其严谨性的形式上的证明.}
 \end{note}
 \begin{remark}
   上述思路只是我的一点个人拙见,也可以使用$Toplitz$定理的分段估计想法解决本题.于是我们今后遇到类似问题可以分别采取这两种思路解决.
   
   这里我们可以采取两种方法去证明这个极限(夹逼定理和$Toplitz$定理).
 \end{remark}
 \begin{solution}
   {\color{blue}解法一(夹逼定理):}
 
   一方面,注意到\(\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \leqslant \sum\limits_{k = 0}^{n}\frac{1}{2^k} = \frac{1 - \frac{1}{2^{n + 1}}}{1 - \frac{1}{2}}\),于是
     $\varlimsup_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \leqslant \varlimsup_{n \to +\infty}\frac{1 - \frac{1}{2^{n + 1}}}{1 - \frac{1}{2}} = 2$.
  
 另一方面,注意到对\(\forall N \in \mathbb{N}_+\),都有\(\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \geqslant \sum\limits_{k = 0}^{N}\frac{\cos\sqrt{\frac{k}{n}}}{2^k}\),$\forall n>N$.从而
 \begin{align*}
   \varliminf_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \geqslant \varliminf_{n \to +\infty}\sum\limits_{k = 0}^{N}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} = \sum\limits_{k = 0}^{N}\varliminf_{n \to +\infty}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} = \sum\limits_{k = 0}^{N}\lim_{n \to +\infty}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} = \sum\limits_{k = 0}^{N}\frac{1}{2^k},\forall N \in \mathbb{N}_+.
 \end{align*}
 
 于是令\(N \to +\infty\),得到\(\varliminf_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \geqslant \lim_{N \to +\infty}\sum\limits_{k = 0}^{N}\frac{1}{2^k} = 2\).
 
 综上所述,我们有\(2 \leqslant \varliminf_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \leqslant \varlimsup_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} \leqslant 2\).故\(\lim_{n \to +\infty}\sum\limits_{k = 0}^{n}\frac{\cos\sqrt{\frac{k}{n}}}{2^k} = 2\). 
 
   {\color{blue}解法二(Toplitz定理):}
 \end{solution}

\begin{example}
   计算$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{\left( \frac{k}{n} \right) ^n}$.
\end{example}
\begin{note}
   我们利用\hyperref[计算二元数列求和的极限的思路]{上一题的想法}计算$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}$.先假设级数$\sum\limits_{k=1}^n{\left( \frac{k}{n} \right) ^n}$收敛,则由$Cauchy$收敛准则可知,存在$N'>0$,使得
   \begin{align*}
      \underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}=\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^N{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}=\sum\limits_{k=1}^N{\underset{n\rightarrow +\infty}{\lim}e^{n\ln \left( 1-\frac{k-1}{n} \right)}=\sum\limits_{k=1}^N{e^{1-k}},\forall N>N'}.
   \end{align*}
   令$N\to +\infty$,则$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}=\underset{N\rightarrow +\infty}{\lim}\sum\limits_{k=1}^N{e^{1-k}}=\frac{e}{e-1}$.
然后再根据计算出来的结果对原级数进行适当放缩,最后利用上下极限和夹逼准则得到完整的证明.
\end{note}
\begin{solution}
   注意到
\[
\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n = \sum\limits_{k = 1}^{n}\left(\frac{n - k + 1}{n}\right)^n = \sum\limits_{k = 1}^{n}\left(1 - \frac{k - 1}{n}\right)^n = \sum\limits_{k = 1}^{n}e^{n\ln\left(1 - \frac{k - 1}{n}\right)},  \forall n \in \mathbb{N}_+.
\]

一方面,利用\(\ln(1 + x) \leq x\),\(\forall x \in \mathbb{R}\),我们有

\[
\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n = \sum\limits_{k = 1}^{n}e^{n\ln\left(1 - \frac{k - 1}{n}\right)} \leq \sum\limits_{k = 1}^{n}e^{n\cdot\left(-\frac{k - 1}{n}\right)} = \sum\limits_{k = 1}^{n}e^{1 - k},  \forall n \in \mathbb{N}_+.
\]

令\(n \to +\infty\),则\(\varlimsup_{n \to +\infty}\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n \leq \varlimsup_{n \to +\infty}\sum\limits_{k = 1}^{n}e^{1 - k} = \frac{e}{e - 1}\).

另一方面,注意到\(\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n = \sum\limits_{k = 1}^{n}e^{n\ln\left(1 - \frac{k - 1}{n}\right)} \geq \sum\limits_{k = 1}^{N}e^{n\ln\left(1 - \frac{k - 1}{n}\right)}\),\(\forall N \in \mathbb{N}_+\).两边同时对\(n\)取下极限,可得对\(\forall N \in \mathbb{N}_+\),都有
\begin{align*}
   &\underset{n\rightarrow +\infty}{{\varliminf }}\sum\limits_{k=1}^n{\left( \frac{k}{n} \right) ^n}\geqslant \underset{n\rightarrow +\infty}{{\varliminf }}\sum\limits_{k=1}^N{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}=\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^N{e^{n\ln \left( 1-\frac{k-1}{n} \right)}}
   \\
   &=\sum\limits_{k=1}^N{\underset{n\rightarrow +\infty}{\lim}e^{n\ln \left( 1-\frac{k-1}{n} \right)}}=\sum\limits_{k=1}^N{\underset{n\rightarrow +\infty}{\lim}e^{n\cdot \left( -\frac{k-1}{n} \right)}}=\sum\limits_{k=1}^N{e^{1-k}}
\end{align*}
令\(N \to +\infty\),则\(\varliminf_{n \to +\infty}\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n \geq \lim_{N \to +\infty}\sum\limits_{k = 1}^{N}e^{1 - k} = \frac{e}{e - 1}\).
故\(\lim_{n \to +\infty}\sum\limits_{k = 1}^{n}\left(\frac{k}{n}\right)^n = \frac{e}{e - 1}\). 
\end{solution}


\subsection{利用Taylor公式计算和式极限(和式内部n,k不同阶)}

只有当和式内部$n,k$不同阶时,我们才可以直接利用Taylor展开进行计算.但是书写过程不能用Taylor展开书写(关于o和O余项的求和估计不好说明),这样书写不严谨(见\hyperref[example-varepsilon-delta语言书写过程示例]{例题\ref{example-varepsilon-delta语言书写过程示例}证法一}).

我们可以采用\textbf{拟合法}(见\hyperref[example-拟合法书写过程示例]{例题\ref{example-拟合法书写过程示例}})、\textbf{夹逼准则}(见\hyperref[example-夹逼准则书写过程示例]{例题\ref{example-夹逼准则书写过程示例}})、\textbf{$\varepsilon-\delta$语言}(见\hyperref[example-varepsilon-delta语言书写过程示例]{例题\ref{example-varepsilon-delta语言书写过程示例}证法二})严谨地书写过程

\begin{note}
虽然这三种方法都比较通用,但是更推荐\textbf{拟合法}和\textbf{夹逼准则},一般比较简便.

虽然\textbf{$\varepsilon-\delta$语言}书写起来比较繁琐,但是当有些和式不容易放缩、拟合的时候,用这个方法更简单.
\end{note}

\textbf{这类和式内部$n,k$不同阶的问题的处理方式}:先利用Taylor展开计算极限(可以先不算出极限),并判断到底要展开多少项,然后根据具体问题综合运用\textbf{拟合法}、\textbf{夹逼准则}、\textbf{$\varepsilon-\delta$语言}严谨地书写过程(怎么书写简便就怎么写).

\begin{remark}
   这类和式内部$n,k$不同阶的问题,Taylor公式是本质,\textbf{拟合法}、\textbf{夹逼准则}、\textbf{$\varepsilon-\delta$语言}只是形式上的过程.
\end{remark}

\begin{example}\label{example-varepsilon-delta语言书写过程示例}
   设\(f\)在\(0\)处可微,$f(0)=0$,证明:
\[
\lim_{n \to \infty} \sum\limits_{i = 1}^{n} f\left(\frac{i}{n^2}\right) = \frac{f^{\prime}(0)}{2}.
\]
\end{example}
\begin{note}
   本题如果使用\hyperref[example:和式极限例题1]{例题\ref{example:和式极限例题1}}的方法求极限,那么我们将得到
   \begin{align*}
     \lim_{n\rightarrow \infty} \sum\limits_{i=1}^n{f\left( \frac{i}{n^2} \right)}=\lim_{N\rightarrow \infty} \lim_{n\rightarrow \infty} \sum\limits_{i=1}^N{f\left( \frac{i}{n^2} \right)}=\lim_{N\rightarrow \infty} \sum\limits_{i=1}^N{\lim_{n\rightarrow \infty} f\left( \frac{i}{n^2} \right)}=\lim_{N\rightarrow \infty} \sum\limits_{i=1}^N{f\left( 0 \right)}=\lim_{N\rightarrow \infty} \left( N\cdot 0 \right) =+\infty \cdot 0.
   \end{align*}
   而$+\infty \cdot 0$我们是无法确定其结果的,故本题并不适用这种方法.不过,我们也从上述论述结果发现我们需要更加精细地估计原级数的阶,才能确定出上述“$+\infty \cdot 0$”的值,进而得到原级数的极限.因此我们使用Taylor展开并引入余项方法和$\varepsilon-\delta$方法更加精细地估计原级数的阶.
\end{note}
\begin{remark}
   虽然使用余项证明这类问题并不严谨,但是在实际解题中,我们仍使用这种余项方法解决这类问题.因为严谨的$\varepsilon-\delta$语言证明比较繁琐.我们只在需要书写严谨证明的时候才使用严谨的$\varepsilon-\delta$语言进行证明.
\end{remark}
\begin{proof}
{\color{blue}证法一(不严谨的余项方法):}
由\(f\)在\(0\)处可微且$f(0)=0$和带$Peano$余项的$Taylor$公式,可知
\begin{align*}
f(x)=f'(0)x+o(x),x\to0.
\end{align*}
于是
\begin{align*}
&\sum\limits_{i = 1}^{n} f\left(\frac{i}{n^2}\right) = \sum\limits_{i = 1}^{n} \left[f^{\prime}(0) \cdot \frac{i}{n^2} + o\left(\frac{i}{n^2}\right)\right]
= \frac{f^{\prime}(0)(n + 1)}{2n} + \sum\limits_{i = 1}^{n} o\left(\frac{i}{n^2}\right)\\
&= \frac{f^{\prime}(0)(n + 1)}{2n} + \sum\limits_{i = 1}^{n} o\left(\frac{1}{n}\right)
= \frac{f^{\prime}(0)(n + 1)}{2n} + n\cdot o\left(\frac{1}{n}\right) \to \frac{f^{\prime}(0)}{2},n\to+\infty.
\end{align*}
{\color{blue}证法二($\varepsilon-\delta$严谨的证明):}
由$Taylor$定理,可知
对\(\forall \varepsilon \in (0,1)\),\(\exists \delta > 0\),当\(\vert x \vert \leq \delta\)时,有\(\vert f(x) - f'(0)x \vert \leq \varepsilon \vert x \vert\).

只要\(n > \frac{1}{\delta}\),有\(\left\vert \frac{i}{n^2} \right\vert \leq \delta\),\(\forall i = 1,2,\cdots,n\),故\(\left\vert f\left(\frac{i}{n^2}\right) - f'(0)\frac{i}{n^2} \right\vert \leq \varepsilon \frac{i}{n^2}\),\(i = 1,2,\cdots,n\).

从而\begin{align*}
   f'(0)(1 - \varepsilon) \frac{i}{n^2} \leq f\left(\frac{i}{n^2}\right) \leq f'(0)(1 + \varepsilon) \frac{i}{n^2}.
\end{align*}
进而
\begin{align*}
   \frac{f^{\prime}(0)}{2} (1 - \varepsilon) \cdot \frac{n + 1}{n}=f'(0)(1 - \varepsilon) \sum\limits_{i = 1}^{n} \frac{i}{n^2} \leq \sum\limits_{i = 1}^{n} f\left(\frac{i}{n^2}\right) \leq f'(0)(1 + \varepsilon) \sum\limits_{i = 1}^{n} \frac{i}{n^2}=\frac{f^{\prime}(0)}{2} (1 + \varepsilon) \cdot \frac{n + 1}{n}.
\end{align*}
于是
\begin{align*}
   -\frac{\varepsilon f^{\prime}(0)}{2} \leq \frac{n}{n + 1} \sum\limits_{i = 1}^{n} f\left(\frac{i}{n^2}\right) - \frac{f^{\prime}(0)}{2} \leq \frac{f^{\prime}(0)\varepsilon}{2} .
\end{align*}
即\begin{align*}
   \left\vert \frac{n}{n + 1} \sum\limits_{i = 1}^{n} f\left(\frac{i}{n^2}\right) - \frac{f^{\prime}(0)}{2} \right\vert \leq \frac{\vert f^{\prime}(0) \vert}{2} \varepsilon.
\end{align*}
因此$\lim_{n\rightarrow \infty} \frac{n}{n+1}\sum\limits_{i=1}^n{f\left( \frac{i}{n^2} \right)}=\frac{f^{\prime}(0)}{2}
$,故\(\lim_{n\rightarrow \infty} \sum\limits_{i=1}^n{f\left( \frac{i}{n^2} \right)}=\frac{\lim\limits_{n\rightarrow \infty} \frac{n}{n+1}\sum\limits_{i=1}^n{f\left( \frac{i}{n^2} \right)}}{\lim\limits_{n\rightarrow \infty} \frac{n}{n+1}}=\frac{f^{\prime}(0)}{2}\).
\end{proof}

\begin{example}\label{example-拟合法书写过程示例}
   求极限：\(\lim_{n\rightarrow\infty}\sqrt{n}\left(1 - \sum_{k = 1}^{n}\frac{1}{n + \sqrt{k}}\right)\).
\end{example}
\begin{note}
   本题采用\textbf{拟合法}书写过程.
\end{note}
\begin{solution}
由于对$\forall k\in \mathbb{N}_+$,都有$\frac{\sqrt{k}}{n}\to +\infty,n\to \infty$,故由Taylor定理可得,对$\forall k\in \mathbb{N}_+$,都有
\[
\frac{1}{n + \sqrt{k}} = \frac{1}{n}\frac{1}{1 + \frac{\sqrt{k}}{n}} = \frac{1}{n}\left(1 - \frac{\sqrt{k}}{n} + \frac{k}{n^{2}} + \cdots\right),n\to \infty.
\]
于是考虑拟合
\begin{align*}
   \lim_{n\rightarrow\infty}\sqrt{n}\left(1 - \sum_{k = 1}^{n}\frac{1}{n + \sqrt{k}}\right)=\lim_{n\rightarrow\infty}\sqrt{n}\left(1 - \frac{1}{n}\sum_{k = 1}^{n}\left(1 - \frac{\sqrt{k}}{n}\right) - \frac{1}{n}\sum_{k = 1}^{n}\left(\frac{1}{1 + \frac{\sqrt{k}}{n}} - 1 + \frac{\sqrt{k}}{n}\right)\right).
\end{align*}
又由于
\begin{align*}
   \frac{1}{\sqrt{n}}\sum_{k = 1}^{n}\left(\frac{1}{1 + \frac{\sqrt{k}}{n}} - 1 + \frac{\sqrt{k}}{n}\right)=\frac{1}{\sqrt{n}}\sum_{k = 1}^{n}\frac{k}{n^{2}}\frac{1}{1 + \frac{\sqrt{k}}{n}}\leq\frac{1}{\sqrt{n}}\sum_{k = 1}^{n}\frac{k}{n^{2}}\leq\frac{1}{\sqrt{n}}\to0.
\end{align*}
因此
\begin{align*}
\lim_{n\rightarrow\infty}\sqrt{n}\left(1 - \sum_{k = 1}^{n}\frac{1}{n + \sqrt{k}}\right)=\lim_{n\rightarrow\infty}\sqrt{n}\left(1 - \frac{1}{n}\sum_{k = 1}^{n}\left(1 - \frac{\sqrt{k}}{n}\right)\right)=\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{n}\sqrt{k}}{n\sqrt{n}}\xlongequal{Stolz\text{公式或定积分定义}}\frac{2}{3}.
\end{align*}
\end{solution}

\begin{example}\label{example-夹逼准则书写过程示例}
   求极限\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\left(\sqrt{1 + \frac{k}{n^{2}}} - 1\right)\)。
\end{example}
\begin{note}
   本题采用\textbf{夹逼准则}书写过程.注意\(n,k\)不同阶，因此有理化然后直接把无穷小量放缩掉,然后使用夹逼准则即可.
\end{note}
\begin{proof}
注意到
\[
\frac{\frac{k}{n^{2}}}{\sqrt{1 + \frac{1}{n}} + 1}\leq\sqrt{1 + \frac{k}{n^{2}}} - 1 = \frac{\frac{k}{n^{2}}}{\sqrt{1 + \frac{k}{n^{2}}} + 1}\leq\frac{k}{2n^{2}},\forall k\in \mathbb{N}.
\]
所以
\[
\frac{n + 1}{2n\left(\sqrt{1 + \frac{1}{n}} + 1\right)}=\sum_{k = 1}^{n}\frac{\frac{k}{n^{2}}}{\sqrt{1 + \frac{1}{n}} + 1}\leq\sum_{k = 1}^{n}\left(\sqrt{1 + \frac{k}{n^{2}}} - 1\right)\leq\sum_{k = 1}^{n}\frac{k}{2n^{2}}=\frac{n + 1}{4n}
\]
根据夹逼准则可知所求极限是\(\frac{1}{4}\).
\end{proof}

\begin{example}
计算$\lim_{n \to \infty} \left(\sum\limits_{k = 1}^{n} \frac{1}{\sqrt{n^2 + k}}\right)^n$.
\end{example}
\begin{note}
   {\color{blue}证法二}综合运用了拟合法和夹逼准则书写过程(只用其中一种方法的话,书写起来很麻烦).
\end{note}
\begin{solution}
   {\color{blue}证法一(不严谨的余项方法):}注意到
\[
\lim_{n \to \infty} \left(\sum\limits_{k = 1}^{n} \frac{1}{\sqrt{n^2 + k}}\right)^n=\lim_{n \to \infty} e^{n \ln \sum\limits_{k = 1}^{n} \frac{1}{\sqrt{n^2 + k}}} = \lim_{n \to \infty} e^{n \ln \left(\sum\limits_{k = 1}^{n} \frac{1}{n} \frac{1}{\sqrt{1 + \frac{k}{n^2}}}\right)}.
\]
由带$带Peano$余项的$Taylor$公式,可知
\begin{align*}
   &\sum\limits_{k = 1}^{n} \frac{1}{\sqrt{n^2 + k}} = \frac{1}{n} \sum\limits_{k = 1}^{n} \frac{1}{\sqrt{1 + \frac{k}{n^2}}} = \frac{1}{n} \sum\limits_{k = 1}^{n} \left[1 - \frac{k}{2n^2} + O\left(\frac{k^2}{n^4}\right)\right]
   = \frac{1}{n} \left[n - \frac{\sum\limits_{k = 1}^{n} k}{2n^2} + \sum\limits_{k = 1}^{n} O\left(\frac{1}{n^2}\right)\right]
   \\
   &= 1 - \frac{n + 1}{4n^2} + O\left(\frac{1}{n^2}\right) = 1 - \frac{1}{4n} - \frac{1}{4n^2} + O\left(\frac{1}{n^2}\right) = 1 - \frac{1}{4n} + O\left(\frac{1}{n^2}\right),n\to+\infty.
\end{align*}
从而
\begin{align*}
   \lim_{n \to \infty} \left(\sum\limits_{k = 1}^{n} \frac{1}{\sqrt{n^2 + k}}\right)^n=\lim_{n \to \infty} e^{n \ln \left(\sum\limits_{k = 1}^{n} \frac{1}{n} \frac{1}{\sqrt{1 + \frac{k}{n^2}}}\right)} = \lim_{n \to \infty} e^{n \ln \left(1 - \frac{1}{4n} + O\left(\frac{1}{n^2}\right)\right)}
= \lim_{n \to \infty} e^{n \cdot \left(-\frac{1}{4n} + O\left(\frac{1}{n^2}\right)\right)}
= \lim_{n \to \infty} e^{-\frac{1}{4} + O\left(\frac{1}{n}\right)} = e^{-\frac{1}{4}}.
\end{align*}

{\color{blue}证法二(严谨地书写过程):}
注意到
\begin{align}
   \lim_{n\rightarrow \infty} \left( \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}} \right) ^n=\lim_{n\rightarrow \infty} e^{n\ln \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}}=\lim_{n\rightarrow \infty} e^{n\ln \left( \frac{1}{n}\sum_{k=1}^n{\frac{1}{\sqrt{1+\frac{k}{n^2}}}} \right)}. \label{example4.14-1.0}
\end{align}
因为对\(\forall k\in \mathbb{N}_+\)，有\(\frac{k}{n^2}\rightarrow 0\)，\(n\rightarrow \infty\)，所以利用Taylor公式可得
\[
\frac{1}{\sqrt{1+\frac{k}{n^2}}}=1-\frac{k}{2n^2}+\cdots ,n\rightarrow \infty.
\]
从而考虑拟合
\[
\lim_{n\rightarrow \infty} \frac{1}{n}\sum_{k=1}^n{\frac{1}{\sqrt{1+\frac{k}{n^2}}}}=\lim_{n\rightarrow \infty} \left[ \frac{1}{n}\sum_{k=1}^n{\left( \frac{1}{\sqrt{1+\frac{k}{n^2}}}-1+\frac{k}{2n^2} \right)}+\frac{1}{n}\sum_{k=1}^n{\left( 1-\frac{k}{2n^2} \right)} \right] .
\]
由于
\[
\frac{1}{n}\sum_{k=1}^n{\left( \frac{1}{\sqrt{1+\frac{k}{n^2}}}-1+\frac{k}{2n^2} \right)}=\sum_{k=1}^n{\left( \frac{1}{\sqrt{n^2+k}}+\frac{k}{2n^3} \right)}-1\leqslant \sum_{k=1}^n{\left( \frac{1}{n}+\frac{k}{2n^3} \right)}-1=\frac{n+1}{4n^2}\rightarrow 0,n\rightarrow \infty.
\]
因此
\begin{align*}
\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}=\lim_{n\rightarrow \infty} \frac{1}{n}\sum_{k=1}^n{\frac{1}{\sqrt{1+\frac{k}{n^2}}}}
=\lim_{n\rightarrow \infty} \frac{1}{n}\sum_{k=1}^n{\left( 1-\frac{k}{2n^2} \right)}
=1-\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{k}{2n^3}}
=1.
\end{align*}
于是
\begin{align}
   \lim_{n\rightarrow \infty} n\ln \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}&=\lim_{n\rightarrow \infty} n\left( \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}-1 \right) =\lim_{n\rightarrow \infty} n\left( \frac{1}{n}\sum_{k=1}^n{\frac{1}{\sqrt{1+\frac{k}{n^2}}}}-1 \right) 
   \nonumber \\
   &=\lim_{n\rightarrow \infty} \left( \sum_{k=1}^n{\frac{1}{\sqrt{1+\frac{k}{n^2}}}}-n \right) =\lim_{n\rightarrow \infty} \sum_{k=1}^n{\left( \frac{1}{\sqrt{1+\frac{k}{n^2}}}-1 \right)}
   \nonumber \\
   &=\lim_{n\rightarrow \infty} \sum_{k=1}^n{\left( \frac{n}{\sqrt{n^2+k}}-1 \right)}=\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{n-\sqrt{n^2+k}}{\sqrt{n^2+k}}}
   \nonumber \\
   &=\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{-k}{\sqrt{n^2+k}\left( n+\sqrt{n^2+k} \right)}}=\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{-k}{n^2+k+n\sqrt{n^2+k}}}.\label{example4.14-1.2}
\end{align}
注意到
\[
-\frac{n+1}{2\left( n+1+\sqrt{n^2+n} \right)}=\sum_{k=1}^n{\frac{-k}{n^2+n+n\sqrt{n^2+n}}}\leqslant \sum_{k=1}^n{\frac{-k}{n^2+k+n\sqrt{n^2+k}}}\leqslant \sum_{k=1}^n{\frac{-k}{2n^2}}=-\frac{n+1}{4n},\forall n\in \mathbb{N}_+.
\]
令\(n\rightarrow \infty\)，则由夹逼准则可得\(\lim_{n\rightarrow \infty} \sum_{k=1}^n{\frac{-k}{n^2+k+n\sqrt{n^2+k}}}=-\frac{1}{4}\)。再结合\eqref{example4.14-1.0}\eqref{example4.14-1.2}式可知
\begin{align*}
\lim_{n\rightarrow \infty} \left( \sum_{k=1}^n{\frac{1}{\sqrt{n^2+k}}} \right) ^n=\lim_{n\rightarrow \infty} e^{n\ln \sum\limits_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}}
=e^{\lim\limits_{n\rightarrow \infty} n\ln \sum\limits_{k=1}^n{\frac{1}{\sqrt{n^2+k}}}}
=e^{\lim\limits_{n\rightarrow \infty} \sum\limits_{k=1}^n{\frac{-k}{n^2+k+n\sqrt{n^2+k}}}}
=e^{-\frac{1}{4}}.
\end{align*}
\end{solution}


\subsection{分段估计(Toeplitz定理)}

\begin{theorem}[Toeplitz定理]\label{theorem:Toeplitz定理}
   (a):设\(\{t_{nk}\}_{1\leqslant k\leqslant n} \subset [0, +\infty)\)满足\(\lim_{n \to \infty} \sum\limits_{k = 1}^{n} t_{nk} = 1\)和\(\lim_{n \to \infty} t_{nk} = 0\).若\(\lim_{n \to \infty} a_n = a \in \mathbb{R}\).证明
   \begin{align}\label{equation:2.5}
      \lim_{n \to \infty} \sum\limits_{k = 1}^{n} t_{nk}a_k = a.
   \end{align}
(b):设\(\{t_{nk}\}_{n,k = 1}^{\infty} \subset [0, +\infty)\)满足\(\lim_{n \to \infty} \sum\limits_{k = 1}^{\infty} t_{nk} = 1\)和\(\lim_{n \to \infty} t_{nk} = 0\).若\(\lim_{n \to \infty} a_n = a \in \mathbb{R}\).证明
\begin{align}\label{equation:2.6}
   \lim_{n \to \infty} \sum\limits_{k = 1}^{\infty} t_{nk}a_k = a.
\end{align}
\end{theorem}
\begin{note}
   无需记忆$Toeplitz$定理的叙述,其证明的思想更为重要.一句话证明$Toeplitz$定理,即当\(n\)比较小的时候,用\(t_{nk}\)趋于\(0\)来控制,当\(n\)比较大的时候,用\(a_n\)趋于\(a\)来控制.
   
   我们需要熟悉蕴含在$Toeplitz$定理当中的一个关键想法:\textbf{分段估计}(分段的方式要合理才行).
   
   $Toeplitz$定理只是先对和式进行分段处理,将和式分成两部分,一部分是和式的前充分多项(前有限项/前N项),另一部分是余项(从N+1项开始包括后面的所有项).然后在这种分段估计的基础上,利用已知的极限条件,分别控制(放缩)和式的前充分多项(前有限项/前N项)和余项(从N+1项开始包括后面的所有项).
\end{note}
\begin{remark}
   注意区分(a),(b)两者的条件:$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^{\infty}{t_{nk}}=\underset{n\rightarrow +\infty}{\lim}\underset{m\rightarrow +\infty}{\lim}\sum\limits_{k=1}^m{t_{nk}}\ne \underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{t_{nk}}$.
\end{remark}
\begin{proof}
   (a):事实上,不妨设$a=0$,否则用$a_n-a$代替$a_n$即可.

   对$\forall N\in\mathbb{N}$,当$n>N$时,我们有
   \begin{align*}
      \left| \sum\limits_{k=1}^n{t_{nk}a_k} \right|=\left| \sum\limits_{k=1}^N{t_{nk}a_k}+\sum\limits_{k=N+1}^n{t_{nk}a_k} \right|\leqslant \left| \sum\limits_{k=1}^N{t_{nk}a_k} \right|+\sum\limits_{k=N+1}^n{\left| t_{nk}a_k \right|}.
   \end{align*}
令$n\to+\infty$,得到
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^n{t_{nk}a_k} \right|\leqslant \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^N{t_{nk}a_k} \right|+\underset{n\rightarrow +\infty}{{\varlimsup }}\sum\limits_{k=N+1}^n{\left| t_{nk}a_k \right|}\leqslant \mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|\cdot \underset{n\rightarrow +\infty}{{\varlimsup }}\sum\limits_{k=1}^n{t_{nk}}=\mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|,\forall N\in \mathbb{N} .
\end{align*}
由$N$的任意性,再令$N\to+\infty$,可得
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^n{t_{nk}a_k} \right|\leqslant \underset{N\rightarrow +\infty}{\lim}\mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|=\underset{n\rightarrow +\infty}{{\varlimsup }}\left| a_n \right|=\underset{n\rightarrow +\infty}{{\varlimsup }}a_n=\underset{n\rightarrow +\infty}{\lim}a_n=0.
\end{align*}
故\eqref{equation:2.5}式成立.

(b):事实上,不妨设$a=0$,否则用$a_n-a$代替$a_n$即可.

对$\forall N\in\mathbb{N}$,我们有
\begin{align*}
   \left| \sum\limits_{k=1}^{\infty}{t_{nk}a_k} \right|=\left| \sum\limits_{k=1}^N{t_{nk}a_k}+\sum\limits_{k=N+1}^{\infty}{t_{nk}a_k} \right|\leqslant \left| \sum\limits_{k=1}^N{t_{nk}a_k} \right|+\sum\limits_{k=N+1}^{\infty}{\left| t_{nk}a_k \right|}.
\end{align*}
令$n\to+\infty$,得到
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^{\infty}{t_{nk}a_k} \right|\leqslant \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^N{t_{nk}a_k} \right|+\underset{n\rightarrow +\infty}{{\varlimsup }}\sum\limits_{k=N+1}^{\infty}{\left| t_{nk}a_k \right|}\leqslant \mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|\cdot \underset{n\rightarrow +\infty}{{\varlimsup }}\sum\limits_{k=1}^{\infty}{t_{nk}}=\mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|,\forall N\in \mathbb{N} .
\end{align*}
由$N$的任意性,再令$N\to+\infty$,可得
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^{\infty}{t_{nk}a_k} \right|\leqslant \underset{N\rightarrow +\infty}{\lim}\mathop {\mathrm{sup}} \limits_{k\geqslant N+1}\left| a_k \right|=\underset{n\rightarrow +\infty}{{\varlimsup }}\left| a_n \right|=\underset{n\rightarrow +\infty}{{\varlimsup }}a_n=\underset{n\rightarrow +\infty}{\lim}a_n=0.
\end{align*}
故\eqref{equation:2.6}式成立.
\end{proof}

\begin{example}
   设\(p_k > 0\),\(k = 1,2,\cdots,n\)且
   \begin{align*}
      \lim_{n \to \infty} \frac{p_n}{p_1 + p_2 + \cdots + p_n} = 0,\lim_{n \to \infty} a_n = a.
   \end{align*}
   证明
   \begin{align*}
   \lim_{n \to \infty} \frac{p_n a_1 + \cdots + p_1 a_n}{p_1 + p_2 + \cdots + p_n} = a.   
   \end{align*}
   \end{example}
   \begin{note}
   理解到本质之后不需要记忆\hyperref[theorem:Toeplitz定理]{Toeplitz定理},但是这里可以直接套用$Toeplitz$定理我们就引用了.今后我们不再直接套用$Toeplitz$定理,而是利用$Toeplitz$定理的证明方法解决问题.
   \end{note}
   \begin{proof}
   记\(t_{nk} = \frac{p_{n - k + 1}}{p_1 + p_2 + \cdots + p_n} \geq 0\),\(k = 1,2,\cdots,n\).则\(\sum\limits_{k = 1}^{n} t_{nk} = \frac{\sum\limits_{k = 1}^{n} p_{n - k + 1}}{p_1 + p_2 + \cdots + p_n} = 1\).
   又因为
   \begin{align*}
      0 \leq \lim_{n \to \infty} t_{nk} \leq \lim_{n \to \infty} \frac{p_{n - k + 1}}{p_1 + p_2 + \cdots + p_{n + k + 1}} = 0.
   \end{align*}
   所以由夹逼准则可知,$\lim_{n \to \infty} t_{nk}=0$.
故由\hyperref[theorem:Toeplitz定理]{Toeplitz定理}得
   \begin{align*}
      \lim_{n \to \infty} \frac{p_n a_1 + \cdots + p_1 a_n}{p_1 + p_2 + \cdots + p_n}=\lim_{n \to \infty} \sum\limits_{k = 1}^{n} t_{nk} a_k = a .
   \end{align*}
\end{proof}

\begin{example}
   设\(\lim_{n \to \infty} a_n = a\)且\(b_n \geqslant 0\).记\(S_n = \sum\limits_{k = 1}^{n} b_k\),若\(\lim_{n \to \infty} S_n = S\).证明
\begin{align*}
   \lim_{n \to \infty} (a_n b_1 + a_{n - 1} b_2 + \cdots + a_1 b_n) = aS.
\end{align*}
\end{example}
\begin{proof}
   ($i$)若$S=0$,则$b_n\equiv0$.此时结论显然成立.

   ($ii$)若$S>0$,则令\(t_{nk} = \frac{1}{S} b_{n - k + 1}\),\(k = 1,2,\cdots,n\).从而
   \begin{align*}
   \sum\limits_{k=1}^{\infty}{t_{nk}}=\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{t_{nk}}=\frac{1}{S}\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{b_{n-k+1}}=\frac{1}{S}\underset{n\rightarrow +\infty}{\lim}S_n=1.
   \end{align*}
又因为$\underset{n\rightarrow +\infty}{\lim}S_n$存在,所以$\underset{n\rightarrow +\infty}{\lim}b_n=\underset{n\rightarrow +\infty}{\lim}\left( S_n-S_{n-1} \right) =0
$.故$\underset{n\rightarrow +\infty}{\lim}t_{nk}=0$.于是
\begin{align*}
   \lim_{n\rightarrow \infty} \left( a_nb_1+a_{n-1}b_2+\cdots +a_1b_n \right) =\lim_{n\rightarrow \infty} \sum\limits_{k=1}^n{a_kb_{n-k+1}}=S\cdot \lim_{n\rightarrow \infty} \sum\limits_{k=1}^n{a_kt_{nk}}.
\end{align*}
不妨设$a=0$,则对$\forall N\in\mathbb{N}$,当$n>N$时,有
\begin{align*}
   0\leqslant \left| \sum\limits_{k=1}^n{a_kt_{nk}} \right|\leqslant \left| \sum\limits_{k=1}^N{a_kt_{nk}} \right|+\left| \sum\limits_{k=N+1}^n{a_kt_{nk}} \right|\leqslant \left| \sum\limits_{k=1}^N{a_kt_{nk}} \right|+\underset{k\ge N+1}{\mathrm{sup}}\left| a_k \right|\sum\limits_{k=N+1}^n{t_{nk}}\leqslant \left| \sum\limits_{k=1}^N{a_kt_{nk}} \right|+\underset{k\ge N+1}{\mathrm{sup}}\left| a_k \right|\sum\limits_{k=1}^n{t_{nk}}.
\end{align*}
令$n\to+\infty$,则
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^n{a_kt_{nk}} \right|\leqslant \underset{n\rightarrow +\infty}{\lim}\left( \underset{k\ge N+1}{\mathrm{sup}}\left| a_k \right|\sum\limits_{k=1}^n{t_{nk}} \right) =\underset{k\ge N+1}{\mathrm{sup}}\left| a_k \right|,\forall N\in \mathbb{N} .
\end{align*}
再令$N\to +\infty$,可得
\begin{align*}
   \underset{n\rightarrow +\infty}{{\varlimsup }}\left| \sum\limits_{k=1}^n{a_kt_{nk}} \right|\leqslant \underset{N\rightarrow +\infty}{\lim}\underset{k\ge N+1}{\mathrm{sup}}\left| a_k \right|=\underset{n\rightarrow +\infty}{{\varlimsup }}\left| a_k \right|=\underset{n\rightarrow +\infty}{\lim}\left| a_k \right|=\underset{n\rightarrow +\infty}{\lim}a_k=0.
\end{align*}
于是$\underset{n\rightarrow +\infty}{\lim}\sum\limits_{k=1}^n{a_kt_{nk}}=a$.故$\lim_{n\rightarrow \infty} \left( a_nb_1+a_{n-1}b_2+\cdots +a_1b_n \right) =S\cdot \lim_{n\rightarrow \infty} \sum\limits_{k=1}^n{a_kt_{nk}}=aS$.
\end{proof}

\begin{example}
设$\lim_{n \to \infty} x_n = \lim_{n \to \infty} y_n = 0.$且存在常数\(K > 0\),使得\(\sum\limits_{j = 0}^{n} |y_i| \leq K\),\(\forall n \in \mathbb{N}\),证明
\[
\lim_{n \to \infty} \sum\limits_{i = 1}^{n} x_i y_{n - i} = 0.
\]
\end{example}
\begin{proof}
   对\(\forall N\in \mathbb{N}\),当\(n > N\)时,有
\begin{align*}
\left|\sum\limits_{i = 1}^{n} x_i y_{n - i}\right| \leq \left|\sum\limits_{i = 1}^{N} x_i y_{n - i}\right| + \left|\sum\limits_{i = N + 1}^{n} x_i y_{n - i}\right|
\leq \left|\sum\limits_{i = 1}^{N} x_i y_{n - i}\right| + \sup_{i\geq N + 1} |x_i| \cdot \sum\limits_{i = N + 1}^{n} |y_{n - i}|
\leq \left|\sum\limits_{i = 1}^{N} x_i y_{n - i}\right| + K \cdot \sup_{i\geq N + 1} |x_i|.
\end{align*}
令$n\to+\infty$,则\(\varlimsup_{n \to \infty} \left|\sum\limits_{i = 1}^{n} x_i y_{n - i}\right| \leq K \cdot \sup_{i\geq N + 1} |x_i|\).

由\(N\)任意性得
\begin{align*}
   \lim_{n\rightarrow \infty} \sum\limits_{i=1}^n{x_iy_{n-i}}=\lim_{N\rightarrow \infty} \mathop {\mathrm{sup}} \limits_{i\ge N+1}|x_i|=\underset{n\rightarrow \infty}{{\varlimsup }}|x_n|=\lim_{n\rightarrow \infty} x_n=0.
\end{align*}
\end{proof}

\begin{example}
   设\(\lim_{n \to \infty} a_n = a\),\(\lim_{n \to \infty} b_n = b\),证明
\[
\lim_{n \to \infty} \frac{a_1 b_n + a_2 b_{n - 1} + \cdots + a_n b_1}{n} = ab.
\]
\end{example}
\begin{note}
   可以不妨设$a=b=0$的原因:假设当$a=b=0$时,结论成立.则当$a,b$至少有一个不为零时,我们有$\lim_{n \to \infty} \left(a_n-a\right)=0,\lim_{n \to \infty} \left(b_n-b\right)=0$.从而由假设可知
   \begin{gather*}
      \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\left( a_k-a \right) \left( b_{n-k+1}-b \right)}}{n}=0.
\\
\Leftrightarrow \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{a_kb_{n-k+1}}}{n}+ab-a\cdot \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{b_{n-k+1}}}{n}-b\cdot \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{a_k}}{n}=0
   \end{gather*}
又由\hyperref[theorem:Stolz定理]{Stolz定理}可知
\begin{align*}
   \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{a_k}}{n}=\lim_{n\rightarrow \infty} a_n=a,\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{b_{n-k+1}}}{n}=\lim_{n\rightarrow \infty} b_n=b.
\end{align*}
故$\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{a_kb_{n-k+1}}}{n}=a\cdot \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{b_{n-k+1}}}{n}+b\cdot \lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{a_k}}{n}-ab=ab$.
\end{note}
\begin{proof}
   不妨设$a=b=0$,否则用$a_n-a$代替$a_n$,用$b_n-b$代替$b_n$.
   对$\forall N\in \mathbb{N}$,当$n>N$时,有
\begin{align*}
&\left|\frac{\sum\limits_{k = 1}^{n} a_k b_{n - k + 1}}{n}\right| \leq \frac{\left|\sum\limits_{k = 1}^{N} a_k b_{n - k + 1}\right|}{n} + \frac{\left|\sum\limits_{k = N + 1}^{n} a_k b_{n - k + 1}\right|}{n}\\
&\leq \frac{1}{n}\left|\sum\limits_{k = 1}^{N} a_k b_{n - k + 1}\right| + \sup_{k\geq N + 1} |a_k| \cdot \frac{1}{n}\sum\limits_{k = N + 1}^{n} |b_{n - k + 1}|\\
&\leq \frac{1}{n}\left|\sum\limits_{k = 1}^{N} a_k b_{n - k + 1}\right| + \sup_{k\geq N + 1} |a_k| \cdot \frac{1}{n}\sum\limits_{k = 1}^{n} |b_k|.
\end{align*}
令$n\to+\infty$,则
\begin{align*}
   \underset{n\rightarrow \infty}{{\varlimsup }}\left| \frac{1}{n}\sum\limits_{k=1}^n{a_kb_{n-k+1}} \right|\leqslant \mathop {\mathrm{sup}} \limits_{k\ge N+1}|a_k|\cdot \underset{n\rightarrow \infty}{{\varlimsup }}\frac{\sum\limits_{k=1}^n{\left| b_k \right|}}{n}\leqslant \mathop {\mathrm{sup}} \limits_{k\ge N+1}|a_k|\cdot \underset{n\rightarrow \infty}{{\varlimsup }}b_n=0.
\end{align*}
故$\underset{n\rightarrow \infty}{{\varlimsup }} \frac{1}{n}\sum\limits_{k=1}^n{a_kb_{n-k+1}} =0$.
\end{proof}

\subsection{欧拉麦克劳林公式(E-M公式)}

\begin{proposition}[0阶欧拉麦克劳林公式(0阶E-M公式)]\label{proposition:0阶欧拉麦克劳林公式(0阶E-M公式)}
设\(a,b\in\mathbb{Z}, f\in D[a,b], f'\in L^1[a,b]\),让我们有
\[
\sum_{k = a}^{b}f(k)=\int_{a}^{b}f(x)dx+\frac{f(a)+f(b)}{2}+\int_{a}^{b}\left(x - [x]-\frac{1}{2}\right)f'(x)dx.
\]
\end{proposition}
\begin{remark}
   如果考试中要使用0阶欧拉麦克劳林公式,则一定要先证明0阶欧拉麦克劳林公式(按照下面的证明书写即可),再使用.
\end{remark}
\begin{note}
   在\([0,1)\)上\(x - [x]-\frac{1}{2}=x - \frac{1}{2}\),它也是\(x - \frac{1}{2}\)做周期\(1\)延拓得到的函数.故$-\frac{1}{2}\leqslant x-[x]-\frac{1}{2}\leqslant \frac{1}{2},\forall x\in \mathbb{R} .$
\end{note}
\begin{proof}
\begin{align*}
   &\int_a^b{\left( x-[x]-\frac{1}{2} \right) f'(x)dx}=\sum_{k=a}^{b-1}{\int_k^{k+1}{\left( x-[x]-\frac{1}{2} \right) f'(x)dx}}
\\
&=\sum_{k=a}^{b-1}{\int_k^{k+1}{\left( x-k-\frac{1}{2} \right) f'(x)dx}}=\sum_{k=a}^{b-1}{\int_0^1{\left( x-\frac{1}{2} \right) f'(x}}+k)dx
\\
&=\sum_{k=a}^{b-1}{\left[ \frac{1}{2}f(1+k)+\frac{1}{2}f(k)-\int_0^1{f(x}+k)dx \right]}
\\
&=\sum_{k=a}^{b-1}{\left[ \frac{f(k)+f(k+1)}{2}-\int_k^{k+1}{f(x)dx} \right]}
\\
&=\frac{1}{2}\sum_{k=a}^{b-1}{[f(k)}+f(k+1)]-\int_a^b{f(x)dx}
\\
&=-\frac{f(a)+f(b)}{2}+\sum_{k=a}^b{f(k)}-\int_a^b{f(x)dx}.
\end{align*}
\end{proof}
\begin{remark}
   \hypertarget{remark:利用0阶E-M公式精细估阶的构造}{假设已知}$f'(x)$在$\mathbb{R}$上连续,记\(b_1(x)=x - [x]-\frac{1}{2}\),使用0阶E-M公式后,由于$-\frac{1}{2}\leqslant x-[x]-\frac{1}{2}\leqslant \frac{1}{2},\forall x\in \mathbb{R}$,因此直接将$b_1(x)$放大成$\frac{1}{2}$就可以得到原级数的一个较为粗略的估计.具体例题见\hyperref[example:4.461111]{例题\ref{example:4.461111}}.

   但是如果我们想要得到原级数更加精确的估计,就需要对$b_1(x)$使用分部积分.但是由于\(b_1\)并非连续函数,为了把\(\int_{a}^{b}(x - [x]-\frac{1}{2})f'(x)dx\)继续分部积分,我们需要寻求\(b_1\)的原函数\(b_2\)使得
\[
\int_{a}^{b}b_1(x)f'(x)dx=\int_{a}^{b}f'(x)db_2(x),
\]
即期望\(b_2(x)\)是$b_1(x)$的一个原函数并且仍然有周期\(1\)(因为求导不改变周期性,又由于$b_1(x)$周期为1,故原函数$b_2(x)$的周期也必须为1).相当于需要
\[
   b_2(x)=\int_0^x{b_1(y)dy},b_2(x+1)=b_2(x),\forall x\in \mathbb{R} .
\]
(构造$b_2(x)$的想法:先找到$x\in [0,1)$这个特殊情况下的$b_2(x)$,再由此构造出$x\in \mathbb{R}$这个一般情况下的$b_2(x)$,即\textbf{由特殊推广到一般})

先考虑$x\in [0,1)$的情况(因为此时$[x]\equiv0$,方便后续计算得到原函数$b_2(x)$),于是就需要\(\int_0^1{b_1(x)dx}=b_2\left( 1 \right) =b_2\left( 0 \right) =0\).显然
\[
b_2(1)=\int_{0}^{1}b_1(x)dx=\int_{0}^{1}\left(x-\frac{1}{2}\right)dx = 0 =b_2(0)
\]
是自带条件.
并且还需要\(b_2(x)=\int_0^x{b_1\left( y \right) dy}=\int_0^x{\left( y-\frac{1}{2} \right) dy}=\frac{1}{2}x^2-\frac{1}{2}x + c(\text{其中}c\text{为任意常数}),x\in[0,1)\).又因为我们需要$b_2(x)$在$\mathbb{R}$上连续且周期为1,所以再将$\frac{1}{2}x^2-\frac{1}{2}x + c$做周期1延拓到$\mathbb{R}$上,得到在$\mathbb{R}$上连续且周期为1的$b_2(x)$(易知此时$b_2(x)$在$\mathbb{R}$上只有至多可数个不可导点).
由此我们可以得到$b_2(x)$在$\mathbb{R}$上的表达式为
\begin{align*}
   b_2\left( x \right) =b_2\left( x-\left[ x \right] \right) =\int_0^{x-\left[ x \right]}{b_1\left( y \right) dy}=\int_0^{x-\left[ x \right]}{\left( y-\frac{1}{2} \right) dy}=\frac{1}{2}\left( x-\left[ x \right] \right) ^2-\frac{1}{2}\left( x-\left[ x \right] \right) +c,\forall x\in \mathbb{R} .
\end{align*}
此时又由$\int_0^1{b_1\left( y \right) dy}=0$可得
\begin{align*}
   b_2\left( x \right) &=b_2\left( x-\left[ x \right] \right) =\int_0^{x-\left[ x \right]}{b_1\left( y \right) dy}=\int_{\left[ x \right]}^x{b_1\left( y-\left[ x \right] \right) dy}=\int_{\left[ x \right]}^x{b_1\left( y \right) dy}
\\
&=\sum_{k=0}^{\left[ x \right] -1}{\int_0^1{b_1\left( y \right) dy}}+\int_{\left[ x \right]}^x{b_1\left( y \right) dy}=\sum_{k=0}^{\left[ x \right] -1}{\int_0^1{b_1\left( y+k \right) dy}}+\int_{\left[ x \right]}^x{b_1\left( y \right) dy}
\\
&=\sum_{k=0}^{\left[ x \right] -1}{\int_k^{k+1}{b_1\left( y \right) dy}}+\int_{\left[ x \right]}^x{b_1\left( y \right) dy}=\int_0^{\left[ x \right]}{b_1\left( y \right) dy}+\int_{\left[ x \right]}^x{b_1\left( y \right) dy}
\\
&=\int_0^x{b_1\left( y \right) dy},\forall x\in \mathbb{R}.
\end{align*}
故此时周期延拓得到的$b_2(x)$恰好就是$b_1(x)$的一个原函数.即$b_1(x)$在$\mathbb{R}$上有连续且周期为1的原函数$b_2(x)$,$f'(x)$在$\mathbb{R}$上连续.
因此我们可以对$b_1(x)$进行分部积分.即此时
\[
\int_{a}^{b}b_1(x)f'(x)dx=\int_{a}^{b}f'(x)db_2(x)
\]
成立.并且此时$ b_2\left( x \right)=\frac{1}{2}\left( x-\left[ x \right] \right) ^2-\frac{1}{2}\left( x-\left[ x \right] \right) +c,\forall x\in \mathbb{R}$.其中$c$为任意常数.

如果我们想要继续分部积分,就需要$b_3(x)$是$b_2(x)$的一个原函数.按照上述构造的想法,实际上,我们只需期望\(b_3(1)=b_3(0)\)和$b_3(x)=\int_0^x{b_2\left( y \right) dy},\forall x\in \left[ 0,1 \right) $.即
\begin{gather*}
   \int_{0}^{1}b_2(x)dx =b_3(1)=b_3(0)= 0,
   \\
   b_3(x)=\int_0^x{b_2\left( y \right) dy},\forall x\in \left[ 0,1 \right).
\end{gather*}
然后以此构造出$[0,1)$上的$b_3(x)$,再对其做周期1延拓,就能得到$\mathbb{R}$上的$b_3(x)$,并且$b_3(x)$满足在$\mathbb{R}$上连续且周期为1.进而可以利用这个$b_3(x)$继续对原积分进行分部积分,得到更加精细的估计.

而由\(\int_{0}^{1}b_2(x)dx =b_3(1)=b_3(0)= 0\)可知
\[
\int_{0}^{1}b_2(x)dx=\int_{0}^{1}\left(\frac{1}{2}x^2-\frac{1}{2}x + c\right)dx = 0\Rightarrow c=\frac{1}{12}.
\]
于是如果我们还需要继续分部积分的话,此时$b_1(x)$的原函数\(b_2(x)\)就被唯一确定了(如果只进行一次分部积分,那么$c$可以任取.但是一般情况下,无论是否还需要继续分部积分,我们都会先取定这里的$c=\frac{1}{12}$).此时这个唯一确定的$b_2(x)$在$\mathbb{R}$上连续且周期为1,\hypertarget{b2性质}{并且}
\begin{gather*}
   b_2(x)=\frac{1}{2}x^2-\frac{1}{2}x + \frac{1}{12},x\in[0,1);
   \\
   b_2(x)=\frac{1}{2}\left( x-\left[ x \right] \right) ^2-\frac{1}{2}\left( x-\left[ x \right] \right) +\frac{1}{12},b_2\left( x \right) =\int_0^x{b_1\left( y \right) dy},\left| b_2\left( x \right) \right|\leqslant \frac{1}{12},\forall x\in \mathbb{R}.
\end{gather*}
依次下去我们给出计算\(b_n,n\in\mathbb{N}\)的算法.
\end{remark}

\begin{definition}[\(b_n(x)\)定义和算法]\label{definition:b_n(x)定义和算法}
   我们令\(b_1(x)\)为\(x-\frac{1}{2},x\in[0,1)\)的周期\(1\)延拓. 对所有\(n=2,3,\cdots,b_n(x)\)是\(b_{n - 1}(x)\)的一个原函数.
\end{definition}
\begin{note}
   \textbf{\(b_n(x)\)的算法:}

   根据\hyperlink{remark:利用0阶E-M公式精细估阶的构造}{上述构造$b_2(x),b_3(x)$的想法}可知,我们只需期望\(b_n(1)=b_n(0)\)和$b_n(x)=\int_0^x{b_{n-1}\left( y \right) dy},\forall x\in \left[ 0,1 \right) $.即
   \begin{gather*}
      \int_{0}^{1}b_{n-1}(x)dx =b_n(1)=b_n(0)= 0,
      \\
      b_n(x)=\int_0^x{b_{n-1}\left( y \right) dy},\forall x\in \left[ 0,1 \right).
   \end{gather*}
   然后以此构造出$[0,1)$上的$b_n(x)$,再对其做周期1延拓,就能得到$\mathbb{R}$上的$b_n(x)$,并且$b_n(x)$满足在$\mathbb{R}$上连续且周期为1.并且根据$\int_{0}^{1}b_{n-1}(x)dx =b_n(1)=b_n(0)= 0$我们可唯一确定\(b_{n-1}(x)\)在\([0,1)\)上的表达式.从而可以唯一确定$b_n(x)$之前的所有\(b_{n-1}(x)\)在\(\mathbb{R}\)上的表达式.又因为这个过程可以无限地进行下去,所以我们其实可以唯一确定所有的\(b_n(x)\)在\(\mathbb{R}\)上的表达式,方便我们后续可按照我们的需要对原积分进行多次分部积分.

   根据上述$b_n(x)$的定义和算法,可知$b_n(x)$是连续且周期为1的函数.而连续的周期函数一定有界,故一定存在$M_n>0$,使得对$\forall x\in \mathbb{R}$,有$\left| b_n(x) \right|\leqslant M_n$.
\end{note}
\begin{remark}
   我们可以利用这些$b_n(x)$不断地对原积分进行分部积分,得到更加精细的估计,而且这个过程可以一直进行下去.因此无论我们需要多么精确的估计,都可以通过这样的分部积分方式来得到.具体例题见\hyperref[example:E-M4.49]{例题\ref{example:E-M4.49}},\hyperref[example:4.461111]{例题\ref{example:4.461111}}.
\end{remark}
\begin{conclusion}\label{conclusion:b_n(x)的初等表达式}
   我们计算一些$b_n(x)$以备用:
\begin{gather*}
   b_1\left( x \right) =x-\frac{1}{2},x\in \left[ 0,1 \right) .
\\
b_1\left( x \right) =x-\left[ x \right] -\frac{1}{2},\left| b_1\left( x \right) \right|\leqslant \frac{1}{2},x\in \mathbb{R} .
\\
\\
b_2\left( x \right) =\frac{1}{2}x^2-\frac{1}{2}x+\frac{1}{12},x\in \left[ 0,1 \right) .
\\
b_2\left( x \right) =\frac{1}{2}\left( x-\left[ x \right] \right) ^2-\frac{1}{2}\left( x-\left[ x \right] \right) +\frac{1}{12},\left| b_2\left( x \right) \right|\leqslant \frac{1}{12},x\in \mathbb{R} .
\\
\\
b_3\left( x \right) =\frac{x^3}{6}-\frac{x^2}{4}+\frac{x}{12},x\in \left[ 0,1 \right) .
\\
b_3\left( x \right) =\frac{\left( x-\left[ x \right] \right) ^3}{6}-\frac{\left( x-\left[ x \right] \right) ^2}{4}+\frac{\left( x-\left[ x \right] \right)}{12},\left| b_3\left( x \right) \right|\leqslant \frac{2\sqrt{3}-3}{36},x\in \mathbb{R} .
\\
\\
b_4\left( x \right) =\frac{x^4}{24}-\frac{x^3}{12}+\frac{x^2}{24}-\frac{1}{720},x\in \left[ 0,1 \right) .
\\
b_4\left( x \right) =\frac{\left( x-\left[ x \right] \right) ^4}{24}-\frac{\left( x-\left[ x \right] \right) ^3}{12}+\frac{\left( x-\left[ x \right] \right) ^2}{24}-\frac{1}{720},\left| b_4\left( x \right) \right|\leqslant \frac{1}{720},x\in \mathbb{R} .
\end{gather*}
\end{conclusion}

\begin{example}\label{example:4.461111}
估计$\sum_{k=1}^n{\frac{1}{k}},n\rightarrow \infty $.
\end{example}
\begin{solution}
{\color{blue}解法一:}
   一方面,对\(\forall n\in\mathbb{N}\)我们有
\[
\sum_{k = 1}^n\frac{1}{k}=\sum_{k = 1}^n\int_{k}^{k + 1}\frac{1}{k}dx\geqslant\sum_{k = 1}^n\int_{k}^{k + 1}\frac{1}{x}dx=\int_{1}^{n + 1}\frac{1}{x}dx=\ln(n + 1).
\]
另一方面,对\(\forall n\in\mathbb{N}\)我们也有
\[
\sum_{k = 1}^n\frac{1}{k}=1+\sum_{k = 2}^n\int_{k - 1}^{k}\frac{1}{k}dx\leqslant1+\sum_{k = 2}^n\int_{k - 1}^{k}\frac{1}{x}dx=1+\int_{1}^{n}\frac{1}{x}dx=1+\ln n.
\]
于是对\(\forall n\in\mathbb{N}\)都有
\[
\ln(n + 1)\leqslant\sum_{k = 1}^n\frac{1}{k}\leqslant1+\ln n.
\]
从而对\(\forall n\in\mathbb{N}\)都有
\[
\frac{\ln(n + 1)}{\ln n}\leqslant\frac{\sum\limits_{k = 1}^n\frac{1}{k}}{\ln n}\leqslant\frac{1}{\ln n}+1.
\]
令\(n\rightarrow\infty\),由夹逼准则可知\(\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^n\frac{1}{k}}{\ln n}=1\).即\(\sum_{k = 1}^n\frac{1}{k}\sim\ln n\),\(n\rightarrow\infty\).

{\color{blue}解法二(\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}):}
由\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}可得
\begin{align}\label{equation:4.4617}
\sum_{k = 1}^n\frac{1}{k}=\int_1^n\frac{1}{x}dx+\frac{1+\frac{1}{n}}{2}-\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx
=\ln n+\frac{1}{2n}+\frac{1}{2}-\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx.
\end{align}
因为\(\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\leqslant\int_1^n\frac{1}{2x^2}dx\),而\(\lim_{n\rightarrow\infty}\int_1^n\frac{1}{2x^2}dx\)存在,所以可设
\[
\lim_{n\rightarrow\infty}\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx=\int_1^{+\infty}\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\triangleq C<\infty.
\]
于是\(\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx = C-\int_n^{+\infty}\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\).从而
\begin{align*}
\sum_{k = 1}^n\frac{1}{k}&=\ln n+\frac{1}{2n}+\frac{1}{2}-\int_1^n\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-\left[C-\int_n^{+\infty}\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\right]\\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-C+\int_n^{+\infty}\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\\
&\leqslant\ln n+\frac{1}{2n}+\frac{1}{2}-C+\int_n^{+\infty}\frac{1}{2x^2}dx\\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-C+\frac{1}{2n}.
\end{align*}
故\(\sum_{k=1}^n{\frac{1}{k}}=\ln n+\frac{1}{2}-C+\frac{1}{2n}+O\left( \frac{1}{n} \right) =\ln n+\frac{1}{2}-C++O\left( \frac{1}{n} \right)\),\(\forall n\in\mathbb{N}\).此时令\(\frac{1}{2}-C=\frac{1}{2}-\int_1^{+\infty}\left(x - [x]-\frac{1}{2}\right)\frac{1}{x^2}dx\triangleq\gamma\)(欧拉常数).则
\begin{align}\label{equation:4.461888}
   \sum_{k=1}^n{\frac{1}{k}}=\ln n+\gamma+O\left( \frac{1}{n} \right),\forall n\in\mathbb{N}.
\end{align}
由\hyperlink{remark:利用0阶E-M公式精细估阶的构造}{$b_n(x)$的构造和分部积分}可知,上述结果只是对$\sum_{k=1}^n{\frac{1}{k}}$的一个最粗糙的估计.实际上,我们可以利用分部积分得到更加精细的估计.记$b_1(x)=x-[x]-\frac{1}{2},b_2\left( x \right) =\frac{1}{2}\left( x-\left[ x \right] \right) ^2-\frac{1}{2}\left( x-\left[ x \right] \right) +\frac{1}{12}$.则\hyperlink{b2性质}{不难发现}$b_2(x)$是连续且周期为1的函数,$b_2(x)$是$b_1(x)$在$\mathbb{R}$上的一个原函数,并且$|b_2(x)|\leq \frac{1}{12},x\in \mathbb{R}$.
而由Dirichlet判别法可知$\int_1^{+\infty}{\frac{b_1\left( x \right)}{x^2}dx}$收敛,于是设$\int_1^{+\infty}{\frac{b_1\left( x \right)}{x^2}dx}\triangleq C$.从而
再对\eqref{equation:4.4617}分部积分得到
\begin{align}
   \sum_{k=1}^n{\frac{1}{k}}&=\ln n+\frac{1}{2n}+\frac{1}{2}-\int_1^n{\frac{b_1\left( x \right)}{x^2}dx}=\ln n+\frac{1}{2n}+\frac{1}{2}-\left( \int_1^{+\infty}{\frac{b_1\left( x \right)}{x^2}dx}-\int_n^{+\infty}{\frac{b_1\left( x \right)}{x^2}dx} \right) 
   \nonumber
   \\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-C+\int_n^{+\infty}{\frac{b_1\left( x \right)}{x^2}dx}=\ln n+\frac{1}{2n}+\frac{1}{2}-C+\int_n^{+\infty}{\frac{1}{x^2}db_2\left( x \right)}
\nonumber
\\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-C+\frac{b_2\left( x \right)}{x^2}\Big|_{n}^{+\infty}+2\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^3}dx}
\nonumber
\\
&=\ln n+\frac{1}{2n}+\frac{1}{2}-C+2\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^3}dx}-\frac{b_2\left( n \right)}{n^2}.再对\eqref{equation:4.4617}分部积分得到
\label{equation:4.4616}
\end{align}
又由$\left| b_2\left( x \right) \right|\leqslant \frac{1}{12},\forall x\in \mathbb{R} $可知
\begin{align*}
   \left| 2\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^3}dx}-\frac{b_2\left( n \right)}{n^2} \right|\leqslant 2\left| \int_n^{+\infty}{\frac{b_2\left( x \right)}{x^3}dx} \right|+\frac{\left| b_2\left( n \right) \right|}{n^2}\leqslant \frac{1}{6}\left| \int_n^{+\infty}{\frac{1}{x^3}dx} \right|+\frac{1}{12n^2}=\frac{1}{6n^2},\forall n\in \mathbb{N} .
\end{align*}
即
\begin{align}\label{equation:4.4618}
   2\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^3}dx}-\frac{b_2\left( n \right)}{n^2}=O\left( \frac{1}{n^2} \right) ,\forall n\in \mathbb{N} .
\end{align}
再结合\eqref{equation:4.4616}和\eqref{equation:4.4618}式可得
\begin{align*}
   \sum_{k=1}^n{\frac{1}{k}}=\ln n+\frac{1}{2n}+\frac{1}{2}-C+O\left( \frac{1}{n^2} \right) ,\forall n\in \mathbb{N} .
\end{align*}
记$\gamma \triangleq=\frac{1}{2}-C$($\gamma$为欧拉常数),则我们就得到了比\eqref{equation:4.461888}式更加精细的估计:
\begin{align*}
   \sum_{k=1}^n{\frac{1}{k}}=\ln n+\gamma +\frac{1}{2n}+O\left( \frac{1}{n^2} \right) ,\forall n\in \mathbb{N} .
\end{align*}
\end{solution}

\begin{example}
   计算
\[
   \lim_{m\rightarrow \infty} \sum_{n=1}^m{\left( -1 \right) ^{n-1}\frac{\ln n}{n}}.
\]
\end{example}
\begin{note}
\textbf{估计交错级数的想法:将原交错级数分奇偶子列,观察奇偶子列的关系(一般奇偶子列的阶相同),再估计奇子列或偶子列,进而得到原级数的估计.}
\end{note}
\begin{solution}
   注意到原级数的奇子列有
\[
\sum_{n = 1}^{2m - 1}(-1)^{n - 1}\frac{\ln n}{n}=\sum_{n = 1}^{2m - 2}(-1)^{n - 1}\frac{\ln n}{n}+(-1)^{2m - 2}\frac{\ln(2m - 1)}{2m - 1}=\sum_{n = 1}^{2m - 2}(-1)^{n - 1}\frac{\ln n}{n}+\frac{\ln(2m - 1)}{2m - 1}, \forall m\in\mathbb{N}.
\]
从而
\begin{align}\label{equation:4.473.1}
   \sum_{n = 1}^{2m - 1}(-1)^{n - 1}\frac{\ln n}{n}=\sum_{n = 1}^{2m - 2}(-1)^{n - 1}\frac{\ln n}{n}+o(1), m\rightarrow +\infty.
\end{align}
因此我们只需要估计原级数的偶子列\(\sum_{n = 1}^{2m}(-1)^{n - 1}\frac{\ln n}{n}\)即可.又注意到
\begin{align}
\sum_{n = 1}^{2m}(-1)^{n - 1}\frac{\ln n}{n}&=\sum_{n = 1}^{m}\left[(-1)^{2n - 2}\frac{\ln(2n - 1)}{2n - 1}+(-1)^{2n - 1}\frac{\ln 2n}{2n}\right]
=\sum_{n = 1}^{m}\left[\frac{\ln(2n - 1)}{2n - 1}-\frac{\ln 2n}{2n}\right]
\nonumber
\\
&=\sum_{n = 1}^{2m}\frac{\ln n}{n}-\sum_{n = 1}^{m}\frac{\ln 2n}{2n}-\sum_{n = 1}^{m}\frac{\ln 2n}{2n}
=\sum_{n = 1}^{2m}\frac{\ln n}{n}-\sum_{n = 1}^{m}\frac{\ln 2n}{n}
\nonumber
\\
&=\sum_{n = 1}^{2m}\frac{\ln n}{n}-\sum_{n = 1}^{m}\frac{\ln 2 + \ln n}{n}.\label{equation:4.471.1}
\end{align}
由例题\hyperref[example:4.461111]{例题\ref{example:4.461111}}可知
\begin{align}\label{equation:4.471.2}
   \sum_{n = 1}^{m}\frac{\ln 2}{n}=\ln 2(\ln m + \gamma + o(1))=\ln 2\cdot\ln m + \gamma\ln 2 + o(1), m\rightarrow +\infty.
\end{align}
又由\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}可知
\begin{align}
\sum_{n = 1}^{m}\frac{\ln n}{n}&=\frac{\ln m}{2m}+\int_{1}^{m}\frac{\ln x}{x}dx+\int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx
\nonumber
\\
&=\frac{\ln m}{2m}+\frac{1}{2}\ln^2m+\int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx.\label{equation:4.472.1}
\end{align}
因为
\[
\left|\int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx\right|\leqslant\frac{1}{2}\left|\int_{1}^{m}\frac{1 - \ln x}{x^2}dx\right|, \forall m\in\mathbb{N}.
\]
并且\(\int_{1}^{m}\frac{1 - \ln x}{x^2}dx\)收敛,所以\(\lim_{m\rightarrow +\infty}\int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx=\int_{1}^{+\infty}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx = C < \infty\).即
\begin{align}\label{equation:4.472.2}
  \int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx = C + o(1), m\rightarrow +\infty. 
\end{align}
于是结合\eqref{equation:4.472.1}\eqref{equation:4.472.2}式可得
\begin{align}
\sum_{n = 1}^{m}\frac{\ln n}{n}&=\frac{\ln m}{2m}+\frac{1}{2}\ln^2m+\int_{1}^{m}\left(x - [x] - \frac{1}{2}\right)\frac{1 - \ln x}{x^2}dx
\nonumber
\\
&= o(1)+\frac{1}{2}\ln^2m + C + o(1)
\nonumber
\\
&=\frac{1}{2}\ln^2m + C + o(1), m\rightarrow +\infty.\label{equation:4.471.3}
\end{align}
因此由\eqref{equation:4.471.1}\eqref{equation:4.471.2}\eqref{equation:4.471.3}式可得
\begin{align*}
\sum_{n = 1}^{2m}(-1)^{n - 1}\frac{\ln n}{n}&=\sum_{n = 1}^{2m}\frac{\ln n}{n}-\sum_{n = 1}^{m}\frac{\ln 2 + \ln n}{n}
=\frac{1}{2}\ln^22m + C + o(1)-\left[\ln 2\cdot\ln m + \gamma\ln 2 + o(1)+\frac{1}{2}\ln^2m + C + o(1)\right]\\
&=\frac{1}{2}\ln^22m - \frac{1}{2}\ln^2m - \ln 2\cdot\ln m - \gamma\ln 2 + o(1)
=\frac{1}{2}(\ln 2 + \ln m)^2 - \frac{1}{2}\ln^2m - \ln 2\cdot\ln m - \gamma\ln 2 + o(1)\\
&=\frac{\ln^22}{2}-\gamma\ln 2 + o(1), m\rightarrow +\infty.
\end{align*}
即\(\lim_{m\rightarrow +\infty}\sum_{n = 1}^{2m}(-1)^{n - 1}\frac{\ln n}{n}=\frac{\ln^22}{2}-\gamma\ln 2\).再结合\eqref{equation:4.473.1}式可得
\[
\lim_{m\rightarrow +\infty}\sum_{n = 1}^{2m - 1}(-1)^{n - 1}\frac{\ln n}{n}=\lim_{m\rightarrow +\infty}\sum_{n = 1}^{2m - 2}(-1)^{n - 1}\frac{\ln n}{n}=\frac{\ln^22}{2}-\gamma\ln 2.
\]
故\(\lim_{m\rightarrow +\infty}\sum_{n = 1}^{m}(-1)^{n - 1}\frac{\ln n}{n}=\frac{\ln^22}{2}-\gamma\ln 2\).
\end{solution}

\begin{example}
   设\(f\in C^1[1,+\infty)\)且\(\int_{1}^{\infty}|f'(x)|dx<\infty\),证明\(\int_{1}^{\infty}f(x)dx\)收敛等价于\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}f(k)\)存在.
\end{example}
\begin{note}
   关键想法参考:\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}和\hyperref[proposition:反常积分与其子列极限存在命题]{命题\ref{proposition:反常积分与其子列极限存在命题}}.
\end{note}
\begin{proof}
   由\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}可知
\begin{align}\label{equation:4.481.1}
   \sum_{k = 1}^n f(k)=\frac{f(1) + f(n)}{2}+\int_1^n f(x)dx+\int_1^n\left(x - [x] - \frac{1}{2}\right)f^\prime(x)dx.
\end{align}
注意到\(0\leqslant\left|\left(x - [x] - \frac{1}{2}\right)f^\prime(x)\right|\leqslant\frac{1}{2}\left|f^\prime(x)\right|\),并且\(\int_1^{\infty}\left|f^\prime(x)\right|dx\)收敛,因此\(\int_1^{\infty}\left|\left(x - [x] - \frac{1}{2}\right)f^\prime(x)\right|dx\)也收敛.从而\(\int_1^{\infty}\left(x - [x] - \frac{1}{2}\right)f^\prime(x)dx\)也收敛,故由\(Henie\)归结原则可知\(\lim_{n\rightarrow +\infty}\int_1^n\left(x - [x] - \frac{1}{2}\right)f^\prime(x)dx\)存在.

\((1)\)若\(\int_1^{\infty}f(x)dx\)存在,则由\(Henie\)归结原则可知\(\lim_{n\rightarrow +\infty}\int_1^n f(x)dx\)存在.又由\(\int_1^{\infty}\left|f^\prime(x)\right|dx < \infty\)可知\(\int_1^{\infty}f^\prime(x)dx\)收敛.于是
\[
\lim_{x\rightarrow +\infty}[f(x) - f(1)]=\lim_{x\rightarrow +\infty}\int_1^x f^\prime(y)dy=\int_1^{\infty}f^\prime(x)dx < \infty.
\]
由此可知\(\lim_{x\rightarrow +\infty}f(x)\)存在.从而由\(Henie\)归结原则可知\(\lim_{n\rightarrow +\infty}f(n)\)也存在.又由\(\lim_{n\rightarrow +\infty}\int_1^n\left(x - [x] - \frac{1}{2}\right)f^\prime(x)dx\)存在,再结合\eqref{equation:4.481.1}式可知\(\lim_{n\rightarrow +\infty}\sum_{k = 1}^n f(k)\)存在.

\((2)\)若\(\lim_{n\rightarrow +\infty}\sum_{k = 1}^n f(k)\)存在,则\(\lim_{x\rightarrow +\infty}f(x)=\lim_{n\rightarrow +\infty}f(n)=0\).又由\(\lim_{n\rightarrow +\infty}\int_1^n\left(x - [x] - \frac{1}{2}\right)f^\prime(x)dx\)存在,再结合\eqref{equation:4.481.1}式可知\(\lim_{n\rightarrow +\infty}\int_1^n f(x)dx\)也存在.
于是对\(\forall x\geqslant1\),一定存在\(n\in\mathbb{N}\),使得\(n\leqslant x < n + 1\).从而可得
\begin{align}\label{equation:4.481.3}
  \int_1^x f(x)dx=\int_1^n f(x)dx+\int_n^x f(x)dx. 
\end{align}
并且
\begin{align}\label{equation:4.481.2}
   \int_n^x f(x)dx\leqslant\int_n^x\left|f(x)\right|dx\leqslant\int_n^{n + 1}\left|f(x)\right|dx\leqslant\sup_{y\geqslant n}\left|f(y)\right|.
\end{align}
对\eqref{equation:4.481.2}式两边同时令\(x\rightarrow +\infty\),则\(n\rightarrow +\infty\).进而可得
\[
\lim_{x\rightarrow +\infty}\int_n^x f(x)dx\leqslant\lim_{n\rightarrow +\infty}\sup_{y\geqslant n}\left|f(y)\right|={\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|.
\]
由于此时\(\lim_{x\rightarrow +\infty}f(x)=0\),因此\({\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|=\lim_{x\rightarrow +\infty}\left|f(x)\right|=\lim_{x\rightarrow +\infty}f(x)=0\).从而
\[
\lim_{x\rightarrow +\infty}\int_n^x f(x)dx\leqslant{\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|=0.
\]
故\(\lim_{x\rightarrow +\infty}\int_n^x f(x)dx = 0\).于是再对\eqref{equation:4.481.3}式两边同时令\(x\rightarrow +\infty\),则\(n\rightarrow +\infty\).从而可得
\[
\int_1^{\infty}f(x)dx=\lim_{x\rightarrow +\infty}\int_1^x f(x)dx=\lim_{n\rightarrow +\infty}\int_1^n f(x)dx+\lim_{x\rightarrow +\infty}\int_n^x f(x)dx=\lim_{n\rightarrow +\infty}\int_1^n f(x)dx.
\]
又因为此时\(\lim_{n\rightarrow +\infty}\int_1^n f(x)dx\)存在,所以\(\int_1^{\infty}f(x)dx\)也存在.
\end{proof}

\begin{example}
   用积分放缩法得到\(\sum_{k = 2}^{n}\frac{1}{k\ln k},n\to\infty\)的等价无穷大.
\end{example}
\begin{proof}
注意到对\(\forall n\geqslant 2\)且\(n\in\mathbb{N}\),都有
\begin{align}\label{equation:4.471}
\sum_{k = 2}^n\frac{1}{k\ln k}&=\sum_{k = 2}^n\int_{k}^{k + 1}\frac{1}{k\ln k}dx
\geqslant\sum_{k = 2}^n\int_{k}^{k + 1}\frac{1}{x\ln x}dx
=\int_{2}^{n + 1}\frac{1}{x\ln x}dx
=\ln\ln(n + 1) - \ln\ln 2.
\end{align}
同时,也有
\begin{align}\label{equation:4.472}
\sum_{k = 2}^n\frac{1}{k\ln k}&=\sum_{k = 2}^n\int_{k - 1}^{k}\frac{1}{k\ln k}dx
\leqslant\sum_{k = 2}^n\int_{k - 1}^{k}\frac{1}{x\ln x}dx
=\int_{1}^{n}\frac{1}{x\ln x}dx
=\ln\ln n.
\end{align}
从而对\(\forall n\geqslant 2\)且\(n\in\mathbb{N}\),由\eqref{equation:4.471}\eqref{equation:4.472}式可得
\[
\ln\ln(n + 1) - \ln\ln 2\leqslant\sum_{k = 2}^n\frac{1}{k\ln k}\leqslant\ln\ln n.
\]
于是对\(\forall n\geqslant 2\)且\(n\in\mathbb{N}\),我们有
\[
\frac{\ln\ln(n + 1) - \ln\ln 2}{\ln\ln n}\leqslant\frac{\sum\limits_{k = 2}^n\frac{1}{k\ln k}}{\ln\ln n}\leqslant 1.
\]
令\(n\rightarrow\infty\),由夹逼准则可得\(\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 2}^n\frac{1}{k\ln k}}{\ln\ln n}=1\).即\(\sum_{k = 2}^n\frac{1}{k\ln k}\sim\ln\ln n\),\(n\rightarrow\infty\).
\end{proof}

\begin{example}
   用积分放缩法得到\(\sum_{n = 1}^{\infty}x^{n^{2}},x\to1^{-}\)的等价无穷大.
\end{example}
\begin{proof}
注意到对\(\forall x\in(0,1)\),固定\(x\),都有
\begin{align}\label{equation:4.481}
\sum_{n = 1}^{\infty}x^{n^2}&=-1 + \sum_{n = 0}^{\infty}x^{n^2}
=-1 + \sum_{n = 0}^{\infty}\int_{n}^{n + 1}x^{n^2}dt
\geqslant -1 + \sum_{n = 0}^{\infty}\int_{n}^{n + 1}x^{t^2}dt
=-1 + \lim_{n\rightarrow\infty}\int_{0}^{n}x^{t^2}dt.
\end{align}
同时也有
\begin{align}\label{equation:4.482}
\sum_{n = 1}^{\infty}x^{n^2}&=\sum_{n = 1}^{\infty}\int_{n - 1}^{n}x^{n^2}dt
\leqslant\sum_{n = 1}^{\infty}\int_{n - 1}^{n}x^{t^2}dt
=\lim_{n\rightarrow\infty}\int_{0}^{n}x^{t^2}dt.
\end{align}
又由于\(x\in(0,1)\),因此\(\ln x\in(-\infty,0)\).从而
\begin{align*}
\int_{0}^{\infty}x^{t^2}dt=\int_{0}^{\infty}e^{t^2\ln x}dt
\xlongequal{\text{令}y = t\sqrt{-\ln x}}\frac{1}{\sqrt{-\ln x}}\int_{0}^{\infty}e^{-y^2}dy
=\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}.
\end{align*}
故$\int_{0}^{\infty}x^{t^2}dt=\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}$收敛.于是由Henie归结原则可知
\begin{align}\label{equation:4.483}
   \lim_{n\rightarrow\infty}\int_{0}^{n}x^{t^2}dt
=\int_{0}^{\infty}x^{t^2}dt
=\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}.
\end{align}
从而对\(\forall x\in(0,1)\),结合\eqref{equation:4.481}\eqref{equation:4.482}\eqref{equation:4.483}式可得
\begin{align*}
-1+\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}=-1+\lim_{n\rightarrow \infty} \int_1^n{x^{t^2}dt}\leqslant \sum_{n=1}^{\infty}{x^{n^2}}\leqslant \lim_{n\rightarrow \infty} \int_0^n{x^{t^2}dt}=\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}.
\end{align*}
即
\[
-\sqrt{-\ln x}+\frac{\sqrt{\pi}}{2}\leqslant\sqrt{-\ln x}\sum_{n = 1}^{\infty}x^{n^2}\leqslant\frac{\sqrt{\pi}}{2},\forall x\in(0,1).
\]
令\(x\rightarrow 1^-\),则\(\lim_{x\rightarrow 1^-}\sqrt{-\ln x}\sum_{n = 1}^{\infty}x^{n^2}=\frac{\sqrt{\pi}}{2}\).即\(\sum_{n = 1}^{\infty}x^{n^2}\sim\frac{\sqrt{\pi}}{2\sqrt{-\ln x}}\),\(x\rightarrow 1^-\).

又由$ln(1+x)\sim x,x \to 0$可知$-\ln x=-\ln \left( 1+x-1 \right) \sim 1-x,x\rightarrow 1^-$.因此
\begin{align*}
   \sum_{n=1}^{\infty}{x^{n^2}}\sim \frac{\sqrt{\pi}}{2\sqrt{-\ln x}}\sim \frac{\sqrt{\pi}}{2\sqrt{1-x}},x\rightarrow 1^-.
\end{align*}
\end{proof}

\begin{proposition}\label{example:E-M4.49}
   用欧拉麦克劳林公式估计\(\sum_{k = 1}^{n}\ln k,n\to\infty\)的渐近展开式, 以此结合 \hyperref[theorem:Wallis公式]{Wallis 公式}:\(\frac{(2n)!!}{(2n - 1)!!}\sim\sqrt{\pi n},n\to\infty\)证明:
\[
n!\sim\sqrt{2\pi n}\left(\frac{n}{e}\right)^{n},n\to\infty.
\]
\end{proposition}
\begin{note}
   需要记忆这个公式:
   $n!\sim\sqrt{2\pi n}\left(\frac{n}{e}\right)^{n},n\to\infty.$
\end{note}
\begin{proof}
由\hyperref[proposition:0阶欧拉麦克劳林公式(0阶E-M公式)]{E-M公式}可知,对\(\forall n\in\mathbb{N}\),都有
\begin{align}\label{equation:4.4911}
\sum_{k = 1}^n\ln k&=\frac{\ln n}{2}+\int_1^n\ln xdx+\int_1^n\left(x - [x] - \frac{1}{2}\right)\frac{1}{x}dx
=\frac{\ln n}{2}+n\ln n - n + 1+\int_1^n\left(x - [x] - \frac{1}{2}\right)\frac{1}{x}dx.
\end{align}
由Dirichlet判别法可知,\(\int_1^{+\infty}\left(x - [x] - \frac{1}{2}\right)\frac{1}{x}dx\)收敛.则可设\(\lim_{n\rightarrow\infty}\int_1^n\left(x - [x] - \frac{1}{2}\right)\frac{1}{x}dx=\int_1^{+\infty}\left(x - [x] - \frac{1}{2}\right)\frac{1}{x}dx\triangleq C_0<\infty\).
记\(b_1(x)=x - [x] - \frac{1}{2}\),再令\(b_2(x)=\frac{1}{2}(x - [x])^2 - \frac{1}{2}(x - [x]) + \frac{1}{12}\),\(x\in\mathbb{R}\).则\hyperlink{b2性质}{不难发现}\(b_2(x)\)在\(\mathbb{R}\)上连续且周期为\(1\),并且
\[
b_2(x)=\int_0^x{b_1(y)dy}, \quad |b_2(x)|\leqslant\frac{1}{12}, \forall x\in\mathbb{R}.
\]
从而对\eqref{equation:4.4911}式使用分部积分可得
\begin{align*}
   \sum_{k=1}^n{\ln k}&=\frac{\ln n}{2}+n\ln n-n+1+\int_1^n{\frac{b_1\left( x \right)}{x}dx}=\frac{\ln n}{2}+n\ln n-n+1+\int_1^{+\infty}{\frac{b_1\left( x \right)}{x}dx}-\int_n^{+\infty}{\frac{b_1\left( x \right)}{x}dx}
   \\
   &=\frac{\ln n}{2}+n\ln n-n+1+C_0-\int_n^{+\infty}{\frac{1}{x}db_2\left( x \right)}=\frac{\ln n}{2}+n\ln n-n+1+C_0-\frac{b_2\left( x \right)}{x}\Big|_{n}^{+\infty}-\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^2}dx}
   \\
   &=\left( n+\frac{1}{2} \right) \ln n-n+1+C_0+\frac{b_2\left( n \right)}{n}-\int_n^{+\infty}{\frac{b_2\left( x \right)}{x^2}dx},\forall n\in\mathbb{N}.
\end{align*}
又因为\(|b_2(x)|\leqslant\frac{1}{12}\),\(\forall x\in\mathbb{R}\).所以对\(\forall n\in\mathbb{N}\),我们有
\[
\left|\frac{b_2(n)}{n} - \int_n^{+\infty}\frac{b_2(x)}{x^2}dx\right|\leqslant\frac{1}{12}\left(\frac{1}{n}+\int_n^{+\infty}\frac{1}{x^2}dx\right)=\frac{1}{6n}.
\]
故\(\frac{b_2(n)}{n} - \int_n^{+\infty}\frac{b_2(x)}{x^2}dx = O\left(\frac{1}{n}\right)\),\(\forall n\in\mathbb{N}\).于是再记\(C = 1 + C_0\),则
\begin{align}\label{equation:4491}
  \sum_{k = 1}^n\ln k=\left(n + \frac{1}{2}\right)\ln n - n + C + O\left(\frac{1}{n}\right),\forall n\in\mathbb{N} .
\end{align}
注意到
\begin{align}\label{equation:4492}
   (2n)!! = 2^n n!, n = 0,1,2,\cdots.
\end{align}
于是由\(Wallis\)公式:\(\frac{(2n)!!}{(2n - 1)!!}\sim\sqrt{\pi n}\),\(n\rightarrow\infty\).再结合\eqref{equation:4491}\eqref{equation:4492}可得
\begin{align*}
   \sqrt{\pi}&=\underset{n\rightarrow \infty}{\lim}\frac{\left( 2n \right) !!}{\left( 2n-1 \right) !!\sqrt{n}}=\underset{n\rightarrow \infty}{\lim}\frac{\left[ \left( 2n \right) !! \right] ^2}{\left( 2n \right) !\sqrt{n}}=\underset{n\rightarrow \infty}{\lim}\frac{\left( 2^nn! \right) ^2}{\left( 2n \right) !\sqrt{n}}=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!\cdot n!}{\left( 2n \right) !\sqrt{n}}
\\
&=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!\prod\limits_{k=1}^n{k}}{\sqrt{n}\prod\limits_{k=n+1}^{2n}{k}}=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!e^{\sum\limits_{k=1}^n{\ln k}}}{\sqrt{n}e^{\sum\limits_{k=1}^{2n}{\ln k}}}=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!e^{\left( n+\frac{1}{2} \right) \ln n-n+C+O\left( \frac{1}{n} \right)}}{\sqrt{n}e^{\left( 2n+\frac{1}{2} \right) \ln 2n-2n+C+O\left( \frac{1}{n} \right)}}
\\
&=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!e^{\left( n+\frac{1}{2} \right) \ln n-n+C+O\left( \frac{1}{n} \right) -\left[ \left( 2n+\frac{1}{2} \right) \ln 2n-2n+C+O\left( \frac{1}{n} \right) \right]}}{\sqrt{n}}=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!e^{-n\ln n+n-\left( 2n+\frac{1}{2} \right) \ln 2+O\left( \frac{1}{n} \right)}}{\sqrt{n}}
\\
&=\underset{n\rightarrow \infty}{\lim}\frac{4^nn!2^{-2n-\frac{1}{2}}e^n}{n^n\sqrt{n}}e^{O\left( \frac{1}{n} \right)}=\underset{n\rightarrow \infty}{\lim}\frac{n!e^n}{n^n\sqrt{2n}}e^{O\left( \frac{1}{n} \right)}.
\end{align*}
从而\(\lim_{n\rightarrow\infty}\frac{n!e^n}{n^n\sqrt{2n}}=\frac{\sqrt{\pi}}{\lim\limits_{n\rightarrow\infty}e^{O\left(\frac{1}{n}\right)}}=\sqrt{\pi}\).因此\(\lim_{n\rightarrow\infty}\frac{n!}{\sqrt{n}\left(\frac{n}{e}\right)^n}=\lim_{n\rightarrow\infty}\frac{n!e^n}{n^n\sqrt{n}}=\sqrt{2\pi}\).故\(n!\sim\sqrt{2\pi n}\left(\frac{n}{e}\right)^n\),\(n\rightarrow\infty\).
\end{proof}



\section{Abel变换}

\begin{theorem}[Abel变换]\label{theorem:Abel变换}
设\(\{a_n\}_{n = 1}^{N}\),\(\{b_n\}_{n = 1}^{N}\)是数列,则有恒等式
\begin{align*}
   \sum\limits_{k = 1}^{N} a_k b_k &= (a_1 - a_2)b_1 + \cdots + (a_{N - 1} - a_N)(b_1 + b_2 + \cdots + b_{N - 1}) + a_N(b_1 + b_2 + \cdots + b_N)
   \\
   &= \sum\limits_{j = 1}^{N - 1} (a_j - a_{j + 1}) \sum\limits_{i = 1}^{j} b_i + a_N \sum\limits_{i = 1}^{N} b_i.
\end{align*}
\end{theorem}
\begin{note}
\hyperref[theorem:Abel变换]{Abel变换}的证明想法“强行裂项”是一种很重要的思想.
\end{note}
\begin{proof}
   为了计算\(\sum\limits_{j = 1}^{N - 1} (a_j - a_{j + 1}) \sum\limits_{i = 1}^{j} b_i + a_N \sum\limits_{i = 1}^{N} b_i\),我们来强行构造裂项,差什么就给他补上去再补回来,即:
\begin{align*}
   &\sum\limits_{j = 1}^{N - 1} (a_j - a_{j + 1}) \sum\limits_{i = 1}^{j} b_i + a_N \sum\limits_{i = 1}^{N} b_i = \sum\limits_{j = 1}^{N - 1} \left(a_j \sum\limits_{i = 1}^{j} b_i - a_{j + 1} \sum\limits_{i = 1}^{j} b_i\right) + a_N \sum\limits_{i = 1}^{N} b_i
   \\
   &= \sum\limits_{j = 1}^{N - 1} \left(a_j \sum\limits_{i =1}^{j} b_i - a_{j + 1} \sum\limits_{i = 1}^{j + 1} b_i\right) + \sum\limits_{j = 1}^{N - 1} \left(a_{j + 1} \sum\limits_{i = 1}^{j + 1} b_i - a_{j + 1} \sum\limits_{i = 1}^{j} b_i\right) + a_N \sum\limits_{i = 1}^{N} b_i
   \\
   &= a_1 b_1 - a_N \sum\limits_{i = 1}^{N} b_i + \sum\limits_{j = 1}^{N - 1} a_{j + 1} b_{j + 1} + a_N \sum\limits_{i = 1}^{N} b_i
   = \sum\limits_{j = 1}^{N} a_j b_j.
\end{align*}
\end{proof}

\begin{proposition}[经典乘积极限结论]\label{proposition:经典乘积极限结论}
设\(a_1 \geqslant a_2 \geqslant \cdots \geqslant a_n \geqslant 0\)且\(\lim_{n \to \infty} a_n = 0\),极限\(\lim_{n \to \infty} \sum\limits_{k = 1}^{n} a_k b_k\)存在.证明
\begin{align*}
  \lim_{n \to \infty} (b_1 + b_2 + \cdots + b_n)a_n = 0. 
\end{align*}
\end{proposition}
\begin{note}
   为了估计\(\sum\limits_{j = 1}^{n} b_j\),前面的有限项不影响.而要用上极限\(\sum\limits_{n = 1}^{\infty} a_n b_n\)收敛,自然想到\(\sum\limits_{j = 1}^{n} b_j = \sum\limits_{j = 1}^{n} \frac{b_j a_j}{a_j}\)和\hyperref[theorem:Abel变换]{Abel变换}.而\(a_j\)的单调性能用在\hyperref[theorem:Abel变换]{Abel变换}之后去绝对值.
\end{note}
\begin{proof}
不妨设\(a_1 \geqslant a_2 \geqslant \cdots \geqslant a_n > 0\).则由于级数\(\sum\limits_{n = 1}^{\infty} a_n b_n\)收敛,存在\(N \in \mathbb{N}\),使得
\begin{align*}
   \left|\sum\limits_{i = N + 1}^{m} a_i b_i\right| \leqslant \varepsilon, \forall m \geqslant N + 1.
\end{align*}
当\(n \geqslant N + 1\),由\hyperref[theorem:Abel变换]{Abel变换},我们有
\begin{align*}
&\left|\sum\limits_{j = N + 1}^{n} b_j\right| = \left|\sum\limits_{j = N + 1}^{n} \frac{a_j b_j}{a_j}\right|
= \left|\sum\limits_{j = N + 1}^{n - 1} \left(\frac{1}{a_j} - \frac{1}{a_{j + 1}}\right) \sum\limits_{i = N + 1}^{j} a_i b_i + \frac{1}{a_n} \sum\limits_{i = N + 1}^{n} a_i b_i\right|
\\
&\leqslant \sum\limits_{j = N + 1}^{n - 1} \left(\left|\frac{1}{a_j} - \frac{1}{a_{j + 1}}\right| \cdot \left|\sum\limits_{i = N + 1}^{j} a_i b_i\right|\right) + \frac{1}{|a_n|} \left|\sum\limits_{i = N + 1}^{n} a_i b_i\right|
\\
&\leqslant \left|\sum\limits_{i = N + 1}^{n} a_i b_i\right|\cdot\sum\limits_{j = N + 1}^{n - 1} \left(\left|\frac{1}{a_j} - \frac{1}{a_{j + 1}}\right| \right) + \frac{1}{|a_n|} \left|\sum\limits_{i = N + 1}^{n} a_i b_i\right|
\\
&\leqslant \varepsilon \left[\sum\limits_{j = N + 1}^{n - 1} \left(\frac{1}{a_{j + 1}} - \frac{1}{a_j}\right) + \frac{1}{a_n}\right]
= \varepsilon \left(\frac{2}{a_n} - \frac{1}{a_{N + 1}}\right).
\end{align*}
因此我们有
\begin{align*}
   &\underset{n\rightarrow \infty}{{\varlimsup }} \left|a_n \sum\limits_{j = 1}^{n} b_j\right| \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \left|a_n \sum\limits_{j = 1}^{N} b_j\right| + \underset{n\rightarrow \infty}{{\varlimsup }} \left|a_n \sum\limits_{j = N + 1}^{n} b_j\right|
   \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \left|a_n \sum\limits_{j = 1}^{N} b_j\right| + \varepsilon \underset{n\rightarrow \infty}{{\varlimsup }} \left(2 - \frac{a_n}{a_{N + 1}}\right)= 2\varepsilon.
\end{align*}
由\(\varepsilon\)任意性即可得
\(\underset{n\rightarrow \infty}{{\varlimsup }} \left|a_n \sum\limits_{j = 1}^{n} b_j\right| = 0\),
于是就证明了
\(\lim_{n \to \infty} (b_1 + b_2 + \cdots + b_n)a_n = 0\).
\end{proof}

\begin{example}
   设\(\lim_{n \to \infty} x_n = x\),证明:
   \[
   \lim_{n \to \infty} \frac{1}{2^n} \sum\limits_{k = 0}^{n} \mathrm{C}_{n}^{k} x_{k} = x.
   \]
\end{example}
\begin{note}
可以不妨设$x=0$的原因:
假设当$x=0$时,结论成立,则当$x\ne 0$时,令$y_n=x_n-x$,则$\underset{n\rightarrow +\infty}{\lim}y_n=0$.从而由假设可知
\begin{align*}
   0=\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}y_k}=\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}\left( x_k-x \right)}=\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}x_k}-x\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}}=\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}x_k}-x.
\end{align*}
于是$\underset{n\rightarrow +\infty}{\lim}\frac{1}{2^n}\sum\limits_{k=0}^n{\mathrm{C}_{n}^{k}x_k}=x$.
\end{note}
\begin{proof}
   不妨设\(x = 0\),则对\(\forall N > 0\),当\(n > N\)时,我们有
\begin{align*}
0 &\leqslant \left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right|
= \left|\frac{1}{2^n}\sum\limits_{k = 0}^{N}C_{n}^{k}x_k\right| + \left|\frac{1}{2^n}\sum\limits_{k = N + 1}^{n}C_{n}^{k}x_k\right|\\
&\leqslant \left|\frac{1}{2^n}\sum\limits_{k = 0}^{N}C_{n}^{k}x_k\right| + \frac{1}{2^n}\sum\limits_{k = N + 1}^{n}C_{n}^{k}\sup_{k \geqslant N + 1}|x_k|
\leqslant \left|\frac{1}{2^n}\sum\limits_{k = 0}^{N}C_{n}^{k}x_k\right| + \frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}\sup_{k \geqslant N + 1}|x_k|\\
&= \left|\frac{1}{2^n}\sum\limits_{k = 0}^{N}C_{n}^{k}x_k\right| + \sup_{k \geqslant N + 1}|x_k|
\end{align*}
上式两边同时令\(n \to +\infty\),则结合\(\varlimsup_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{N}C_{n}^{k}x_k\right|\xlongequal{\text{因为分子是关于}n\text{的多项式}}0\),可得

\[
\varlimsup_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right| \leqslant \sup_{k \geqslant N + 1}|x_k|,  \forall N > 0.
\]

由\(N\)的任意性,上式两边令\(N \to +\infty\),则

\[
\varlimsup_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right| \leqslant \varlimsup_{N \to +\infty}\sup_{k \geqslant N + 1}|x_k|.
\]

又根据上极限的定义,可知\(\lim_{N \to +\infty}\sup_{k \geqslant N + 1}|x_k| = \varlimsup_{n \to +\infty}|x_n| = \lim_{n \to +\infty}x_n = 0\).

从而

\[
0 \leqslant \varliminf_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right| \leqslant \varlimsup_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right| \leqslant 0.
\]

故\(\lim_{n \to +\infty}\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k = \lim_{n \to +\infty}\left|\frac{1}{2^n}\sum\limits_{k = 0}^{n}C_{n}^{k}x_k\right| = 0\).原命题得证. 
\end{proof}


\section{Stolz定理}

\subsection{数列Stolz定理}

\begin{theorem}[Stolz定理]\label{theorem:Stolz定理}
(a):设\(x_n\)是严格递增数列且满足\(\lim_{n \to \infty} x_n = +\infty\),则
\begin{align*}
   \underset{n\rightarrow \infty}{{\varliminf }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n} \leqslant \underset{n\rightarrow \infty}{{\varliminf }} \frac{y_n}{x_n} \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_n}{x_n} \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}.
\end{align*}

(b):设\(x_n\)是严格递减数列且满足\(\lim_{n \to \infty} x_n = \lim_{n \to \infty} y_n = 0\),则
\begin{align*}
   \underset{n\rightarrow \infty}{{\varliminf }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n} \leqslant \underset{n\rightarrow \infty}{{\varliminf }} \frac{y_n}{x_n} \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_n}{x_n} \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}.
\end{align*}

(c):分别在(a),(b)的条件基础上,若还有\(\lim_{n \to \infty} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}\)存在或者为确定符号的\(\infty\),则
\begin{align}\label{equation:Stolz公式(c)}
  \lim_{n \to \infty} \frac{y_n}{x_n} = \lim_{n \to \infty} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n} .
\end{align}
\end{theorem}
\begin{remark}
注意(c)由(a),(b)是显然的,且只有\(\lim_{n \to \infty} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}\)存在或者为确定符号的\(\infty\)时才\eqref{equation:Stolz公式(c)}式成立.他和我们的洛必达法则有一定的相似程度.即\hyperref[theorem:Stolz定理]{Stolz定理}是离散的洛必达法则.
\end{remark}
\begin{proof}
我们仅证明\(x_n\)是严格递增数列且满足\(\lim_{n \to \infty} x_n = +\infty\)和\(\lim_{n \to \infty} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n} < \infty\)时有
\begin{align}\label{equation:2.1123}
   \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_n}{x_n} \leqslant \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}.
\end{align}

记\(A \triangleq \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_{n + 1} - y_n}{x_{n + 1} - x_n}\),由上极限定义我们知道对任何\(\varepsilon > 0\),存在\(N \in \mathbb{N}\),使得
\(\frac{y_{n + 1} - y_n}{x_{n + 1} - x_n} \leqslant A + \varepsilon, \forall n \geqslant N\).

利用\(x_n\)严格递增时,成立\(y_{n + 1} - y_n \leqslant (A + \varepsilon)(x_{n + 1} - x_n), n \geqslant N\),然后求和得
\begin{align*}
   \sum\limits_{j = N}^{n - 1} (y_{j + 1} - y_j) \leqslant (A + \varepsilon) \sum\limits_{j = N}^{n - 1} (x_{j + 1} - x_j), \forall n \geqslant N + 1.
\end{align*}
即
\begin{align*}
   y_n - y_N \leqslant (A + \varepsilon)(x_n - x_N), \forall n \geqslant N + 1.
\end{align*}
令$n\to+\infty$,取上极限就得
\begin{align*}
   \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_n}{x_n} = \underset{n\rightarrow \infty}{{\varlimsup }} \frac{\frac{y_n}{x_n} - \frac{y_N}{x_n}}{1 - \frac{x_N}{x_n}} = \underset{n\rightarrow \infty}{{\varlimsup }} \frac{y_n - y_N}{x_n - x_N} \leqslant A + \varepsilon.
\end{align*}
由\(\varepsilon\)任意性得到式\eqref{equation:2.1123}.
\end{proof}

\begin{proposition}[Cauchy命题]\label{proposition:Cauchy命题}
若\(\lim_{n \to \infty} y_n\)存在或者为确定符号的\(\infty\),则有
\begin{align*}
   \lim_{n \to \infty} \frac{y_1 + y_2 + \cdots + y_n}{n} = \lim_{n \to \infty} y_n.
\end{align*}
\end{proposition}
\begin{note}
   这个命题说明\hyperref[theorem:Stolz定理]{Stolz定理}是一种有效的把求和消去的降阶方法.
\end{note}
\begin{proof}
   容易由\hyperref[theorem:Stolz定理]{Stolz定理的(a)}直接得出.
\end{proof}

\subsubsection{利用Stolz定理求数列极限}

\begin{example}
   计算
\begin{align*}
   \lim_{n \to \infty} \frac{\ln n}{\ln \sum\limits_{k = 1}^{n} k^{2020}}.
\end{align*}
\end{example}
\begin{note}
   本题计算过程中使用了Lagrange中值定理,只是过程省略了而已(以后这种过程都会省略).
\end{note}
\begin{proof}
   由\hyperref[theorem:Stolz定理]{Stolz定理}可得
   \begin{align*}
      \lim_{n \to \infty} \frac{\ln n}{\ln \sum\limits_{k = 1}^{n} k^{2020}}=\lim_{n\rightarrow \infty} \frac{\ln\mathrm{(}n+1)-\ln n}{\ln \sum\limits_{k=1}^{n+1}{k^{2020}}-\ln \sum\limits_{k=1}^n{k^{2020}}}=\lim_{n\rightarrow \infty} \frac{\ln\mathrm{(}1+\frac{1}{n})}{\ln \frac{\sum\limits_{k=1}^{n+1}{k^{2020}}}{\sum\limits_{k=1}^n{k^{2020}}}}=\lim_{n\rightarrow \infty} \frac{\frac{1}{n}}{\ln\mathrm{(}1+\frac{(n+1)^{2020}}{\sum\limits_{k=1}^n{k^{2020}}})}.
   \end{align*}
   又由\hyperref[theorem:Stolz定理]{Stolz定理}可知
   \begin{align*}
      \lim_{n\rightarrow \infty} \frac{(n+1)^{2020}}{\sum\limits_{k=1}^n{k^{2020}}}=\lim_{n\rightarrow \infty} \frac{(n+2)^{2020}-(n+1)^{2020}}{(n+1)^{2020}}=\lim_{n\rightarrow \infty} \frac{2020\cdot n^{2019}}{(n+1)^{2020}}=0.
   \end{align*}
于是再利用\hyperref[theorem:Stolz定理]{Stolz定理}可得
\begin{align*}
   &\lim_{n\rightarrow \infty} \frac{\frac{1}{n}}{\ln\mathrm{(}1+\frac{(n+1)^{2020}}{\sum\limits_{k=1}^n{k^{2020}}})}=\lim_{n\rightarrow \infty} \frac{\frac{1}{n}}{\frac{(n+1)^{2020}}{\sum\limits_{k=1}^n{k^{2020}}}}=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{k^{2020}}}{n\cdot (n+1)^{2020}}=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{k^{2020}}}{n^{2021}}  \\
   &=\lim_{n\rightarrow \infty} \frac{(n+1)^{2020}}{(n+1)^{2021}-n^{2021}}=\lim_{n\rightarrow \infty} \frac{(n+1)^{2020}}{2021\cdot n^{2020}}=\frac{1}{2021}.
\end{align*}
故$\lim_{n \to \infty} \frac{\ln n}{\ln \sum\limits_{k = 1}^{n} k^{2020}}=\frac{1}{2021}$.
\end{proof}

\begin{example}
\begin{enumerate}
\item 计算极限\(\lim_{n \to \infty} \frac{\sum\limits_{k = 1}^{n} \frac{1}{k}}{\ln n}\).

\item 证明下述极限存在
\(\lim_{n \to \infty} \left(\sum\limits_{k = 1}^{n} \frac{1}{k} - \ln n\right)\).

\item 计算
\(\lim_{n \to \infty} n \left(\sum\limits_{k = 1}^{n} \frac{1}{k} - \ln n - \gamma\right)\).
\end{enumerate}
\end{example}
\begin{note}
   注意,\(\gamma \triangleq \lim_{n \to \infty} \left(\sum\limits_{k = 1}^{n} \frac{1}{k} - \ln n\right) \approx 0.577\cdots\)
   是没有初等表达式的,我们只能规定为一个数字,这个数字叫做欧拉常数,截至目前,人类甚至都不知道\(\gamma\)会不会是一个分数.
\end{note}
\begin{solution}
\begin{enumerate}
   \item 直接由\hyperref[theorem:Stolz定理]{Stolz定理}可得
   \[\lim_{n \to \infty} \frac{\sum\limits_{k = 1}^{n} \frac{1}{k}}{\ln n} = \lim_{n \to \infty} \frac{\frac{1}{n + 1}}{\ln (n + 1) - \ln n} = \lim_{n \to \infty} \frac{\frac{1}{n + 1}}{\frac{1}{n}} = 1.\]

   \item 记\(c_n=\sum\limits_{k = 1}^n{\frac{1}{k}-\ln n}\),则
   \begin{align*}
   c_{n + 1}-c_n&=\frac{1}{n + 1}+\ln n-\ln (n + 1)
   =\frac{1}{n + 1}-\ln\left(1+\frac{1}{n}\right)\\
   &=\frac{1}{n + 1}-\left[\frac{1}{n}+O\left(\frac{1}{n^2}\right)\right]
   =-\frac{1}{n(n + 1)}+O\left(\frac{1}{n^2}\right)\\
   &=O\left(\frac{1}{n^2}\right),n\rightarrow +\infty.
   \end{align*}
   从而存在常数\(C > 0\),使得\(\left|c_{n + 1}-c_n\right|\leq\frac{C}{n^2}\),又因为\(\sum\limits_{n = 1}^{\infty}\frac{C}{n^2}\)收敛,所以由比较原则可知\(\sum\limits_{n = 1}^{\infty}{\left|c_{n + 1}-c_n\right|}\)也收敛.由于数列级数绝对收敛一定条件收敛,因此\(\sum\limits_{n = 1}^{\infty}{\left(c_{n + 1}-c_n\right)}\)也收敛,即\(\lim_{n\rightarrow\infty}\sum\limits_{k = 1}^n{\left(c_{k + 1}-c_k\right)}=\lim_{n\rightarrow\infty}\left(c_{n + 1}-c_1\right)\)存在.故\(\lim_{n\rightarrow\infty}c_n=\lim_{n\rightarrow\infty}\left(\sum\limits_{k = 1}^n{\frac{1}{k}-\ln n}\right)\)也存在.

   \item 由\hyperref[theorem:Stolz定理]{Stolz定理}可得
\begin{align*}
&\lim_{n\rightarrow \infty} n\left( \sum\limits_{k=1}^n{\frac{1}{k}}-\ln n-\gamma \right) =\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\frac{1}{k}}-\ln n-\gamma}{\frac{1}{n}}=\lim_{n\rightarrow \infty} \frac{\frac{1}{n+1}-\ln \left( 1+\frac{1}{n} \right)}{\frac{1}{n+1}-\frac{1}{n}}
\\
&\underset{n\rightarrow \infty}{\lim}\frac{1}{\left( \frac{1}{n+1}-\frac{1}{n} \right) n^2}\cdot \lim_{n\rightarrow \infty} n^2\left[ \frac{1}{n+1}-\ln \left( 1+\frac{1}{n} \right) \right] 
=\underset{n\rightarrow \infty}{\lim}\frac{1}{-\frac{1}{n\left( n+1 \right)}\cdot n^2}\cdot \lim_{n\rightarrow \infty} n^2\left[ \frac{1}{n+1}-\ln \left( 1+\frac{1}{n} \right) \right] 
\\
&=-\lim_{n\rightarrow \infty} n^2\left[ \frac{1}{n+1}-\left( \frac{1}{n}-\frac{1}{2n^2}+o\left( \frac{1}{n^2} \right) \right) \right] =\frac{1}{2}.
\end{align*}
因此我们得到了调和级数的渐进估计:
\begin{align*}
   \sum\limits_{k=1}^n{\frac{1}{k}}=\ln n+\gamma +\frac{1}{2n}+o\left( \frac{1}{n} \right) ,n\rightarrow \infty.
\end{align*}
\end{enumerate}
\end{solution}

\begin{example}
计算
\begin{enumerate}
\item \(\lim_{n \to \infty} \frac{\sqrt[n]{n!}}{n}\);
\item \(\lim_{n \to \infty} (\sqrt[n + 1]{(n + 1)!} - \sqrt[n]{n!})\).
\end{enumerate}
\end{example}
\begin{proof}
\begin{enumerate}
\item 由\hyperref[theorem:Stolz定理]{Stolz定理}可得
\begin{align*}
\lim_{n\rightarrow \infty} \frac{\sqrt[n]{n!}}{n}&=\lim_{n\rightarrow \infty} \frac{e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}}}{n}=\lim_{n\rightarrow \infty} e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}-\ln n}=e^{\lim\limits_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\ln k}-n\ln n}{n}}
\\
&=e^{\lim\limits_{n\rightarrow \infty} \frac{\ln \left(n+1\right)-\left( n+1 \right) \ln \left( n+1 \right) +n\ln n}{1}}=e^{\lim\limits_{n\rightarrow \infty} n \ln \frac{n+1}{n}}
\\
&=e^{\lim\limits_{n\rightarrow \infty} n\left( \frac{n}{n+1}-1 \right)}=e^{-1}.
\end{align*}

\item 注意到\begin{align*}
   \lim_{n\rightarrow \infty} \left( \sqrt[n+1]{\left( n+1 \right) !}-\sqrt[n]{n!} \right) =\lim_{n\rightarrow \infty} \left( e^{\frac{\sum\limits_{k=1}^{n+1}{\ln k}}{n+1}}-e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}} \right) =\lim_{n\rightarrow \infty} e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}}\left( e^{\frac{\sum\limits_{k=1}^{n+1}{\ln k}}{n+1}-\frac{\sum\limits_{k=1}^n{\ln k}}{n}}-1 \right).
\end{align*}
由上一小题可知
\begin{align*}
   \lim_{n\rightarrow \infty} \frac{\sqrt[n]{n!}}{n}=\lim_{n\rightarrow \infty} \frac{e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}}}{n}=e^{-1}.
\end{align*}
故$e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}}\sim \frac{n}{e},n\to\infty$.
并且
\begin{align*}
&\lim_{n\rightarrow \infty} \left( \frac{\sum\limits_{k=1}^{n+1}{\ln k}}{n+1}-\frac{\sum\limits_{k=1}^n{\ln k}}{n} \right) =\lim_{n\rightarrow \infty} \frac{n\sum\limits_{k=1}^{n+1}{\ln k}-\left( n+1 \right) \sum\limits_{k=1}^n{\ln k}}{n\left( n+1 \right)}=\lim_{n\rightarrow \infty} \frac{n\ln \left( n+1 \right) -\sum\limits_{k=1}^n{\ln k}}{n\left( n+1 \right)}
\\
&=-\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\ln k}}{n\left( n+1 \right)}\xlongequal{\text{\hyperref[theorem:Stolz定理]{Stolz定理}}}-\lim_{n\rightarrow \infty} \frac{\ln n}{2\left( n+1 \right)}=0.
\end{align*}
因此
\begin{align*}
   &\lim_{n\rightarrow \infty} \left( \sqrt[n+1]{\left( n+1 \right) !}-\sqrt[n]{n!} \right) =\lim_{n\rightarrow \infty} e^{\frac{\sum\limits_{k=1}^n{\ln k}}{n}}\left( e^{\frac{\sum\limits_{k=1}^{n+1}{\ln k}}{n+1}-\frac{\sum\limits_{k=1}^n{\ln k}}{n}}-1 \right) =\lim_{n\rightarrow \infty} \frac{n}{e}\cdot \left( \frac{\sum\limits_{k=1}^{n+1}{\ln k}}{n+1}-\frac{\sum\limits_{k=1}^n{\ln k}}{n} \right) 
   \\
   &=\frac{1}{e}\lim_{n\rightarrow \infty} n\cdot \frac{n\ln \left( n+1 \right) -\sum\limits_{k=1}^n{\ln k}}{n\left( n+1 \right)}=\frac{1}{e}\lim_{n\rightarrow \infty} \frac{n\ln \left( n+1 \right) -\sum\limits_{k=1}^n{\ln k}}{n+1}
   \\
   &\xlongequal{\text{\hyperref[theorem:Stolz定理]{Stolz定理}}}\frac{1}{e}\lim_{n\rightarrow \infty} \left[ \left( n+1 \right) \ln \left( n+2 \right) -\sum\limits_{k=1}^{n+1}{\ln k}-n\ln \left( n+1 \right) +\sum\limits_{k=1}^n{\ln k} \right] 
   \\
   &=\frac{1}{e}\lim_{n\rightarrow \infty} \left[ \left( n+1 \right) \ln \left( n+2 \right) -\left( n+1 \right) \ln \left( n+1 \right) \right] =\frac{1}{e}\lim_{n\rightarrow \infty} \left( n+1 \right) \ln \left( 1+\frac{1}{n+1} \right) 
   \\
   &=\frac{1}{e}\lim_{n\rightarrow \infty} \left( n+1 \right) \left[ \frac{1}{n+1}+o\left( \frac{1}{n+1} \right) \right] =\frac{1}{e}.
\end{align*}
\end{enumerate}
\end{proof}

\begin{example}
   计算
\[
\lim_{n \to \infty} \frac{\sum\limits_{k = 1}^{n} \ln C_{n}^{k}}{n^2}.
\]
\end{example}
\begin{note}
注意到,分子求和时,不是单纯的\(\sum\limits_{k = 0}^{n + 1} \ln C_{n}^{k} - \sum\limits_{k = 0}^{n} \ln C_{n}^{k}\),而是\(\sum\limits_{k = 0}^{n + 1} \ln C_{n + 1}^{k} - \sum\limits_{k = 0}^{n} \ln C_{n}^{k}\).

组合数的定义和性质可以参考Binomial Coefficient.
\end{note}
\begin{conclusion}
$\mathrm{C}_{a}^{b}=\frac{a}{b}\mathrm{C}_{a-1}^{b-1}$.
\end{conclusion}
\begin{solution}
   由\hyperref[theorem:Stolz定理]{Stolz定理}可得\begin{align*}
      &\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\ln C_{n}^{k}}}{n^2}=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^{n+1}{\ln C_{n+1}^{k}}-\sum\limits_{k=1}^n{\ln C_{n}^{k}}}{n^2-\left( n-1 \right) ^2}=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^{n+1}{\ln C_{n+1}^{k}}-\sum\limits_{k=1}^n{\ln C_{n}^{k}}}{2n}
\\
&=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^n{\ln C_{n+1}^{k}}-\sum\limits_{k=1}^n{\ln C_{n}^{k}}}{2n}=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^{n\,\,}{\ln \left( \frac{n+1}{k}C_{n}^{k-1} \right)}-\sum\limits_{k=1}^n{\ln C_{n}^{k}}}{2n}
\\
&=\lim_{n\rightarrow \infty} \frac{\sum\limits_{k=1}^{n\,\,}{\ln \left( n+1 \right)}-\sum\limits_{k=1}^{n\,\,}{\ln k}+\sum\limits_{k=1}^n{\left( \ln C_{n}^{k-1}-\ln C_{n}^{k} \right)}}{2n}=\lim_{n\rightarrow \infty} \frac{n\ln \left( n+1 \right) -\sum\limits_{k=1}^{n\,\,}{\ln k}-\left( \ln C_{n}^{0}-\ln C_{n}^{n} \right)}{2n}
\\
&=\lim_{n\rightarrow \infty} \frac{n\ln \left( n+1 \right) -\sum\limits_{k=1}^{n\,\,}{\ln k}}{2n}=\frac{1}{2}\lim_{n\rightarrow \infty} \frac{\left( n+1 \right) \ln \left( n+2 \right) -n\ln \left( n+1 \right) -\ln \left( n+1 \right)}{1}
\\
&=\frac{1}{2}\lim_{n\rightarrow \infty} \left( n+1 \right) \ln \frac{n+2}{n+1}=\frac{1}{2}\lim_{n\rightarrow \infty} \left( n+1 \right) \left( \frac{n+2}{n+1}-1 \right) =\frac{1}{2}.
\end{align*}
\end{solution}

\begin{example}
求极限\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\frac{n + 1}{2^k(n + 1 - k)}\)
\end{example}
\begin{note}
   倒序求和与顺序求和相等!(看到$n+1-k$,就应该想到倒序求和)
\end{note}
\begin{solution}
{\color{blue}解法一(Stolz公式):}
\begin{align*}
\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\frac{n + 1}{2^k(n + 1 - k)}&=\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\frac{n + 1}{2^{n + 1 - k}k}=\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{n}\frac{2^k}{k}}{\frac{2^{n + 1}}{n + 1}}=\lim_{n\rightarrow\infty}\frac{\frac{2^n}{n}}{\frac{2^{n + 1}}{n + 1}-\frac{2^n}{n}}=\lim_{n\rightarrow\infty}\frac{\frac{1}{n}}{\frac{2}{n + 1}-\frac{1}{n}} = 1.
\end{align*}

{\color{blue}解法二(\hyperref[section:和式内部对n可求极限(极限号与求和号可换序)]{和式内部对n可求极限(极限号与求和号可换序)}):}一方面，注意到对 \(\forall N\in \mathbb{N}_+\)，都有
\[
\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\geqslant \sum_{k = 1}^N\frac{n + 1}{2^k(n + 1 - k)},\forall n > N.
\]
上式两边同时令 \(n\rightarrow \infty\) 并取下极限，得到
\begin{align*}
\varliminf_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\geqslant \varliminf_{n\rightarrow \infty}\sum_{k = 1}^N\frac{n + 1}{2^k(n + 1 - k)}
=\sum_{k = 1}^N\varliminf_{n\rightarrow \infty}\frac{n + 1}{2^k(n + 1 - k)}
=\sum_{k = 1}^N\frac{1}{2^k}
=\frac{\frac{1}{2}(1 - \frac{1}{2^N})}{1 - \frac{1}{2}},\forall N\in \mathbb{N}_+.
\end{align*}
令 \(N\rightarrow \infty\)，则 \(\varliminf_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\geqslant \lim_{N\rightarrow \infty}\frac{\frac{1}{2}(1 - \frac{1}{2^N})}{1 - \frac{1}{2}} = 1\).

另一方面，我们有
\[
\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\leqslant \sum_{k = 1}^n\frac{1}{2^k(n + 1 - n)}=\sum_{k = 1}^n\frac{1}{2^k}=\frac{\frac{1}{2}(1 - \frac{1}{2^n})}{1 - \frac{1}{2}},\forall n\in \mathbb{N}_+.
\]
上式两边同时令 \(n\rightarrow \infty\) 并取上极限，得到
\[
\varlimsup_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\leqslant \varlimsup_{n\rightarrow \infty}\frac{\frac{1}{2}(1 - \frac{1}{2^n})}{1 - \frac{1}{2}} = 1.
\]
故
\[
1\leqslant \varliminf_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\leqslant \varlimsup_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)}\leqslant 1.
\]
即 \(\lim_{n\rightarrow \infty}\sum_{k = 1}^n\frac{n + 1}{2^k(n + 1 - k)} = 1\).
\end{solution}

\begin{example}
   求极限\(\lim_{n\rightarrow\infty}n(H_n-\ln n - \gamma)\)，其中\(\gamma\)为欧拉常数，\(H_n = 1+\frac{1}{2}+\cdots+\frac{1}{n}\)。
\end{example}
\begin{proof}
\begin{align*}
   \lim_{n\rightarrow\infty}n(H_n - \ln n - \gamma)&=\lim_{n\rightarrow\infty}\frac{H_n - \ln n - \gamma}{\frac{1}{n}}=\lim_{n\rightarrow\infty}\frac{H_{n + 1}-H_n-\ln(n + 1)+\ln n}{\frac{1}{n + 1}-\frac{1}{n}}\\
   &=\lim_{n\rightarrow\infty}\frac{\frac{1}{n + 1}-\ln(1 + \frac{1}{n})}{-\frac{1}{n^2}}=\lim_{n\rightarrow\infty}n^2\left(\ln(1 + \frac{1}{n})-\frac{1}{n + 1}\right)=\lim_{n\rightarrow\infty}n^2\left(\frac{1}{n}-\frac{1}{2n^2}-\frac{1}{n + 1}\right)=\frac{1}{2}
   \end{align*}
\end{proof}
\begin{remark}
类似的，你可以继续计算\(\lim_{n\rightarrow\infty}\left(n(H_n - \ln n - \gamma)-\frac{1}{2}\right)\)，并且仅用stolz公式就能证明存在一列\(c_1,\cdots,c_k\)使得
\[H_n=\ln n+\gamma+\frac{c_1}{n}+\frac{c_2}{n^2}+\cdots+\frac{c_k}{n^k}+O\left(\frac{1}{n^{k + 1}}\right),n\rightarrow\infty.\]
\end{remark}






\subsubsection{利用Stolz定理求抽象数列极限}

\begin{example}
设\(x_1 > 0,x_{n + 1}=x_n+\frac{1}{x_n\sqrt{n}}\)，求极限\(\lim_{n\rightarrow\infty}n^{-\frac{1}{4}}x_n\)。
\end{example}
\begin{proof}
   归纳易证\(x_n\)单调递增,如果\(x_n\)有界则设\(x_n\leq A<\infty\)，代入条件可知\(x_{n + 1}-x_n=\frac{1}{\sqrt{nx_n}}\geq\frac{1}{A\sqrt{n}}\)，从而$x_{n+1}=\sum_{k=1}^n{\left( x_{k+1}-x_k \right)}\geqslant \sum_{k=1}^n{\frac{1}{A\sqrt{n}}}$.而这个不等式右边发散,故$x_n$也发散,矛盾.所以\(x_n\)单调递增趋于无穷，下面用Stolz公式求极限
\begin{align*}
\lim_{n\rightarrow \infty} \frac{x_{n}^{2}}{\sqrt{n}}=\lim_{n\rightarrow \infty} \frac{x_{n+1}^{2}-x_{n}^{2}}{\frac{1}{2\sqrt{n}}}=\lim_{n\rightarrow \infty} \frac{\left( x_{n+1}-x_n \right) \left( x_{n+1}+x_n \right)}{\frac{1}{2\sqrt{n}}}=\lim_{n\rightarrow \infty} \frac{\frac{1}{x_n\sqrt{n}}\left( 2x_n+\frac{1}{x_n\sqrt{n}} \right)}{\frac{1}{2\sqrt{n}}}=2\lim_{n\rightarrow \infty} \left( 2+\frac{1}{x_{n}^{2}\sqrt{n}} \right) =4.
\end{align*}
因此所求的极限是\(2\).
\end{proof}
\begin{remark}
\begin{enumerate}
   \item 直接用stolz会做不出来：
\[
\lim_{n\rightarrow \infty} \frac{x_n}{n^{\frac{1}{4}}}=\lim_{n\rightarrow \infty} \frac{x_{n+1}-x_n}{\frac{1}{4}n^{-\frac{3}{4}}}=\lim_{n\rightarrow \infty} \frac{4\frac{1}{x_n\sqrt{n}}}{n^{-\frac{3}{4}}}=4\lim_{n\rightarrow \infty} \frac{n^{-\frac{1}{4}}}{x_n}.
\]
设$\lim_{n\rightarrow \infty} \frac{x_n}{n^{\frac{1}{4}}}=A$,则由上式可得$A=\frac{4}{A}$,解得$A=2$.

但是注意我们事先并没有论证上式最后一个极限存在,所以不满足Stolz定理的条件,这导致前面的等号都不一定成立.因此不可以“解方程”得到所求极限为\(2\).

\item \textbf{上述证明中最后一步求原式平方的极限而不求其他次方的极限的原因:}我们也可以待定系数自己探索出数列的阶并算出这样的结果,待定$a,b>0$,则由Stolz定理可得
\begin{align*}
\lim_{n\rightarrow \infty} \frac{x_{n}^{a}}{n^b}=\lim_{n\rightarrow \infty} \frac{x_{n+1}^{a}-x_{n}^{a}}{bn^{b-1}}=\lim_{n\rightarrow \infty} \frac{\left( x_n+\frac{1}{x_n\sqrt{n}} \right) ^a-x_{n}^{a}}{bn^{b-1}}=\lim_{n\rightarrow \infty} \frac{x_{n}^{a}\left( \left( 1+\frac{1}{x_{n}^{2}\sqrt{n}} \right) ^a-1 \right)}{bn^{b-1}}
=\lim_{n\rightarrow \infty} \frac{x_{n}^{a}\frac{a}{x_{n}^{2}\sqrt{n}}}{bn^{b-1}}=\frac{a}{b}\lim_{n\rightarrow \infty} \frac{x_{n}^{a-2}}{n^{b-\frac{1}{2}}}.
\end{align*}
我们希望上式最后一个极限能够直接算出具体的数,因此令$a=2,b=\frac{1}{2}$,则$\lim_{n\rightarrow \infty} \frac{x_{n}^{a}}{n^b}=\lim_{n\rightarrow \infty} \frac{x_{n}^{2}}{\sqrt{n}}=\frac{a}{b}=4$.

类似题目的最后一步求的极限式都是通过这种待定系数的方式得到的,并不是靠猜.
\end{enumerate}
\end{remark}


\begin{example}
设\(\lim_{n \to \infty} a_n \sum\limits_{k = 1}^{n} a_{k}^{2} = 1\),计算\(\lim_{n \to \infty} \sqrt[3]{n}a_n\).
\end{example}
\begin{solution}
   因为\(\left\{\sum\limits_{k = 1}^n{a_{k}^{2}}\right\}\)单调递增,故由单调有界定理可知,\(\left\{\sum\limits_{k = 1}^n{a_{k}^{2}}\right\}\)的极限要么为有限数,要么为\(+\infty\).假设\(\lim_{n\rightarrow\infty}a_n\neq 0\)或不存在,则此时\(\lim_{n\rightarrow\infty}\sum\limits_{k = 1}^n{a_{k}^{2}}=+\infty\).否则,设\(\lim_{n\rightarrow\infty}\sum\limits_{k = 1}^n{a_{k}^{2}}=c <\infty\),则\(\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}\left(\sum\limits_{k = 1}^n{a_{k}^{2}}-\sum\limits_{k = 1}^{n - 1}{a_{k}^{2}}\right)=c - c = 0\)矛盾.又由\(\lim_{n\rightarrow\infty}a_n\sum\limits_{k = 1}^n{a_{k}^{2}}=1\)可得\(\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}a_n\sum\limits_{k = 1}^n{a_{k}^{2}}\cdot\lim_{n\rightarrow\infty}\frac{1}{\sum\limits_{k = 1}^n{a_{k}^{2}}}=0\),这与\(\lim_{n\rightarrow\infty}a_n\neq 0\)或不存在矛盾.故\(\lim_{n\rightarrow\infty}a_n = 0\).并且由\(\lim_{n\rightarrow\infty}a_n\sum\limits_{k = 1}^n{a_{k}^{2}}=1\)可知\(a_n\sim\frac{1}{\sum\limits_{k = 1}^n{a_{k}^{2}}}\),\(n\rightarrow\infty\).于是
\begin{align*}
\lim_{n\rightarrow\infty}\frac{1}{na_{n}^{3}}&=\lim_{n\rightarrow\infty}\frac{\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3}{n}=\lim_{n\rightarrow\infty}\left[\left(\sum\limits_{k = 1}^{n + 1}{a_{k}^{2}}\right)^3-\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3\right]\\
&=\lim_{n\rightarrow\infty}\left[\left(a_{n + 1}^{2}+\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3-\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3\right]\\
&=\lim_{n\rightarrow\infty}\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3\left[\left(\frac{a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}+1\right)^3 - 1\right]
\end{align*}
又由于\(\lim_{n\rightarrow\infty}\frac{a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}=\lim_{n\rightarrow\infty}a_{n + 1}^{2}a_n = 0\),因此由Taylor公式可知\(\left(\frac{a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}+1\right)^3 - 1\sim\frac{3a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}\),\(n\rightarrow\infty\).从而上式可化为
\begin{align*}
\lim_{n\rightarrow\infty}\frac{1}{na_{n}^{3}}&=\lim_{n\rightarrow\infty}\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3\left[\left(\frac{a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}+1\right)^3 - 1\right]\\
&=\lim_{n\rightarrow\infty}\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^3\frac{3a_{n + 1}^{2}}{\sum\limits_{k = 1}^n{a_{k}^{2}}}=3\lim_{n\rightarrow\infty}a_{n + 1}^{2}\left(\sum\limits_{k = 1}^n{a_{k}^{2}}\right)^2\\
&=3\lim_{n\rightarrow\infty}a_{n + 1}^{2}\left(\sum\limits_{k = 1}^{n + 1}{a_{k}^{2}}-a_{n + 1}\right)^2=3\lim_{n\rightarrow\infty}a_{n + 1}^{2}\left(\sum\limits_{k = 1}^{n + 1}{a_{k}^{2}}-a_{n + 1}^{2}\right)^2\\
&=3\lim_{n\rightarrow\infty}\left[a_{n + 1}^{2}\left(\sum\limits_{k = 1}^{n + 1}{a_{k}^{2}}\right)^2 - 2a_{n + 1}^{4}\sum\limits_{k = 1}^{n + 1}{a_{k}^{2}}+a_{n + 1}^{6}\right]=3 + 0 + 0 = 3.
\end{align*}
因此\(\lim_{n\rightarrow\infty}\sqrt[3]{n}a_n=\frac{1}{\sqrt[3]{\lim\limits_{n\rightarrow\infty}\frac{1}{na_{n}^{3}}}}=\frac{1}{\sqrt[3]{3}}\).
\end{solution}

\begin{example}
   \begin{enumerate}
      \item 设\(x_{n + 1} = \ln(1 + x_n), n = 1, 2, \cdots, x_1 > 0\),计算\(\lim_{n \to \infty} \frac{n(nx_n - 2)}{\ln n}\).
   
      \item 设\(x_{n + 1} = \sin x_n, n = 1, 2, \cdots, x_1 \in (0, \pi)\),计算\(\lim_{n \to \infty} \frac{n}{\ln n}(1 - \sqrt{\frac{n}{3}}x_n)\).
      
      \item 设\(x_1 = 1, x_{n + 1} = x_n + \frac{1}{x_n}, n = 1, 2, \cdots\),计算
      \(\lim_{n \to \infty} \frac{\sqrt{2n}(x_n - \sqrt{2n})}{\ln n}\).
   \end{enumerate}
   \end{example}
   \begin{solution}
   \begin{enumerate}
      \item 由\(\ln(1 + x) \leq x\),\(\forall x\in\mathbb{R}\)可知\(x_{n + 1} \leq x_n\),\(\forall n\in\mathbb{N}\).并且\(x_1 > 0\),假设\(x_n > 0\),则\(x_{n + 1} = \ln(1 + x_n) > 0\).从而由数学归纳法,可知\(x_n > 0\),\(\forall n\in\mathbb{N}\).于是由单调有界定理,可知数列\(\{x_n\}\)收敛.设\(\lim_{n\rightarrow\infty}x_n = a\geq0\).对\(x_{n + 1} = \ln(1 + x_n)\)两边同时令\(n\rightarrow\infty\),可得
      \[
      a = \lim_{n\rightarrow\infty}x_{n + 1} = \lim_{n\rightarrow\infty}\ln(1 + x_n) = \ln(1 + a).
      \]
      故\(\lim_{n\rightarrow\infty}x_n = a = 0\).进而,由\(Stolz\)定理可得
      \begin{align*}
      \lim_{n\rightarrow\infty}\frac{1}{nx_n}&=\lim_{n\rightarrow\infty}\frac{\frac{1}{x_n}}{n}=\lim_{n\rightarrow\infty}\left(\frac{1}{x_{n + 1}} - \frac{1}{x_n}\right)\\
      &=\lim_{n\rightarrow\infty}\left(\frac{1}{\ln(1 + x_n)} - \frac{1}{x_n}\right)=\lim_{x\rightarrow0}\left(\frac{1}{\ln(1 + x)} - \frac{1}{x}\right)\\
      &=\lim_{x\rightarrow0}\frac{x - \ln(1 + x)}{x\ln(1 + x)}=\lim_{x\rightarrow0}\frac{x - \left(x - \frac{x^2}{2} + o(x^2)\right)}{x^2}=\frac{1}{2}.
      \end{align*}
      因此\(\lim_{n\rightarrow\infty}nx_n = 2\).即\(x_n\sim\frac{2}{n}\),\(n\rightarrow\infty\).
      
      因而,再结合Stolz定理可得
      \begin{align*}
      \lim_{n\rightarrow\infty}\frac{n(nx_n - 2)}{\ln n}&=\lim_{n\rightarrow\infty}\frac{nx_n\left(n - \frac{2}{x_n}\right)}{\ln n}=2\lim_{n\rightarrow\infty}\frac{n - \frac{2}{x_n}}{\ln n}\\
      &=2\lim_{n\rightarrow\infty}\frac{1 + \frac{2}{x_n} - \frac{2}{x_{n + 1}}}{\ln\left(1 + \frac{1}{n}\right)}=2\lim_{n\rightarrow\infty}\frac{1 + \frac{2}{x_n} - \frac{2}{x_{n + 1}}}{\frac{1}{n}}\\
      &=2\lim_{n\rightarrow\infty}\frac{1 + \frac{2}{x_n} - \frac{2}{\ln(1 + x_n)}}{\frac{x_n}{2}}=4\lim_{x\rightarrow0}\frac{1 + \frac{2}{x} - \frac{2}{\ln(1 + x)}}{x}\\
      &=4\lim_{x\rightarrow0}\frac{(x + 2)\ln(1 + x) - 2x}{x^2\ln(1 + x)}=4\lim_{x\rightarrow0}\frac{(x + 2)\left(x - \frac{x^2}{2} + \frac{x^3}{3} + o(x^3)\right) - 2x}{x^3}\\
      &=4\lim_{x\rightarrow0}\frac{-\frac{x^3}{2} + \frac{2x^3}{3} + o(x^3)}{x^3}=\frac{2}{3}.
      \end{align*}
      实际上,由上述计算我们可以得到\(x_n\)在\(n\rightarrow\infty\)时的渐进估计:
      \begin{align*}
      \frac{n(nx_n - 2)}{\ln n}&=\frac{2}{3} + o(1)\Rightarrow nx_n - 2=\frac{2\ln n}{3n} + o\left(\frac{\ln n}{n}\right)\\
      &\Rightarrow x_n=\frac{2}{n} + \frac{2\ln n}{3n^2} + o\left(\frac{\ln n}{n^2}\right),n\rightarrow\infty.
      \end{align*}
   
   \item 由\(\sin x\leqslant x\),\(\forall x\in\mathbb{R}\)可知\(x_{n + 1}\leqslant x_n\),\(\forall n\in\mathbb{N}\).又由于\(0 < x_1 < \pi\)及\(0 < x_{n + 1} = \sin x_n < 1\),\(\forall n\in\mathbb{N}_+\),故归纳可得\(0\leqslant x_n\leqslant 1\),\(\forall n\geqslant 2\).因此\(\{x_n\}\)极限存在,设\(\lim_{n\rightarrow\infty}x_n = a < \infty\).从而对\(x_{n + 1} = \sin x_n\)两边同时令\(n\rightarrow\infty\)可得
   \[
   a = \lim_{n\rightarrow\infty}x_{n + 1} = \lim_{n\rightarrow\infty}\sin x_n = \sin a.
   \]
   故\(\lim_{n\rightarrow\infty}x_n = a = 0\).于是由\(Stolz\)定理可得
   \begin{align*}
   \lim_{n\rightarrow\infty}\frac{3}{nx_{n}^{2}}&=3\lim_{n\rightarrow\infty}\frac{\frac{1}{x_{n}^{2}}}{n}=3\lim_{n\rightarrow\infty}\left(\frac{1}{x_{n+1}^{2}} - \frac{1}{x_{n}^{2}}\right)=3\lim_{n\rightarrow\infty}\left(\frac{1}{\sin ^2x_n} - \frac{1}{x_{n}^{2}}\right)\\
   &=3\lim_{x\rightarrow0}\frac{x^2 - \sin ^2x}{x^2\sin ^2x}=3\lim_{x\rightarrow0}\frac{x^2 - \left(x - \frac{x^3}{3!} + o(x^3)\right)^2}{x^4}\\
   &=3\lim_{x\rightarrow0}\frac{\frac{x^4}{3} + o(x^4)}{x^4}=1.
   \end{align*}
   因此\(\lim_{n\rightarrow\infty}\sqrt{\frac{n}{3}}x_n=\lim_{n\rightarrow\infty}\sqrt{\frac{1}{\frac{3}{nx_{n}^{2}}}}=1\),\(\lim_{n\rightarrow\infty}nx_{n}^{2}=3\).即\(x_n\sim \sqrt{\frac{3}{n}}\),\(n\rightarrow\infty\).进而,再结合\(Stolz\)定理可得
   \begin{align*}
   \lim_{n\rightarrow \infty} \frac{n}{\ln n}\left(1 - \sqrt{\frac{n}{3}}x_n\right) &\xlongequal{\text{平方差公式}} \lim_{n\rightarrow \infty} \frac{n\left(1 - \frac{n}{3}x_{n}^{2}\right)}{\ln n\left(1 + \sqrt{\frac{n}{3}}x_n\right)}=\lim_{n\rightarrow \infty} \frac{nx_{n}^{2}\left(\frac{1}{x_{n}^{2}} - \frac{n}{3}\right)}{\ln n\left(1 + \sqrt{\frac{n}{3}}x_n\right)}\\
   &=\frac{3}{2}\lim_{n\rightarrow \infty} \frac{\frac{1}{x_{n}^{2}} - \frac{n}{3}}{\ln n}=\frac{3}{2}\lim_{n\rightarrow \infty} \frac{\frac{1}{x_{n+1}^{2}} - \frac{1}{x_{n}^{2}} - \frac{1}{3}}{\ln\left(1 + \frac{1}{n}\right)}\\
   &=\frac{3}{2}\lim_{n\rightarrow \infty} \frac{\frac{1}{\sin ^2x_n} - \frac{1}{x_{n}^{2}} - \frac{1}{3}}{\frac{1}{n}}=\frac{3}{2}\lim_{n\rightarrow \infty} \frac{\frac{1}{\sin ^2x_n} - \frac{1}{x_{n}^{2}} - \frac{1}{3}}{\frac{x_{n}^{2}}{3}}\\
   &=\frac{9}{2}\lim_{x\rightarrow 0} \frac{\frac{1}{\sin ^2x} - \frac{1}{x^2} - \frac{1}{3}}{x^2}=\frac{9}{2}\lim_{x\rightarrow 0} \frac{x^2 - \sin ^2x - \frac{1}{3}x^2\sin ^2x}{x^4\sin ^2x}\\
   &=\frac{9}{2}\lim_{x\rightarrow 0} \frac{x^2 - \left(x - \frac{x^3}{3!} + \frac{x^5}{5!} + o(x^5)\right)^2 - \frac{1}{3}x^2\left(x - \frac{x^3}{3!} + \frac{x^5}{5!} + o(x^5)\right)^2}{x^6}\\
   &=\frac{9}{2}\lim_{x\rightarrow 0} \frac{-\frac{x^6}{36}-\frac{x^6}{60}+\frac{x^6}{9}+o\left( x^6 \right)}{x^6}=\frac{3}{10}.
   \end{align*}
   (最几步的计算除了用Taylor展开也可以用洛朗展开计算,即先用长除法算出$\frac{1}{\sin ^2x}=\frac{1}{x^2}+\frac{1}{3}+\frac{1}{15}x^2+o\left( x^2 \right)$,再直接带入计算得到结果,实际上利用洛朗展开计算更加简便.)
   
   \item 由条件可知\(x_{n + 1}=x_n+\frac{1}{x_n}\geqslant x_n\),\(\forall n\in\mathbb{N}_+\).又\(x_1 = 1 > 0\),故归纳可得\(x_n > 0\),\(\forall n\in\mathbb{N}_+\).由单调有界定理可知数列\(\{x_n\}\)的极限要么是\(+\infty\),要么是有限数.假设\(\lim_{n\rightarrow\infty}x_n = a <\infty\),则对\(x_{n + 1}=x_n+\frac{1}{x_n}\)两边同时令\(n\rightarrow\infty\),可得\(a = a+\frac{1}{a}\Rightarrow\frac{1}{a}=0\)矛盾.故\(\lim_{n\rightarrow\infty}x_n = +\infty\).于是由\(Stolz\)定理可得
   \begin{align*}
   \lim_{n\rightarrow\infty}\frac{x_n}{\sqrt{n}}&=\sqrt{\lim_{n\rightarrow\infty}\frac{x_{n}^{2}}{n}}=\sqrt{\lim_{n\rightarrow\infty}\frac{x_{n + 1}^{2}-x_{n}^{2}}{n + 1 - n}}=\sqrt{\lim_{n\rightarrow\infty}\left(\left(x_n+\frac{1}{x_n}\right)^2 - x_{n}^{2}\right)}\\
   &=\sqrt{\lim_{n\rightarrow\infty}\left(2+\frac{1}{x_{n}^{2}}\right)}=\sqrt{2}.
   \end{align*}
   因此\(x_n\sim\sqrt{2n}\),\(n\rightarrow\infty\).从而\(x_n+\sqrt{2n}\sim 2\sqrt{2n}\),\(n\rightarrow\infty\).再结合\(Stolz\)定理可得
   \begin{align*}
   \lim_{n\rightarrow\infty}\frac{\sqrt{2n}(x_n-\sqrt{2n})}{\ln n}&\xlongequal{\text{平方差公式}} \lim_{n\rightarrow\infty}\frac{\sqrt{2n}(x_{n}^{2}-2n)}{(x_n+\sqrt{2n})\ln n}=\lim_{n\rightarrow\infty}\frac{\sqrt{2n}(x_{n}^{2}-2n)}{2\sqrt{2n}\ln n}\\
   &=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{x_{n}^{2}-2n}{\ln n}=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{x_{n + 1}^{2}-x_{n}^{2}-2}{\ln(n + 1)-\ln n}\\
   &=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{\left(x_n+\frac{1}{x_n}\right)^2 - x_{n}^{2}-2}{\frac{1}{n}}=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{\left(x_n+\frac{1}{x_n}\right)^2 - x_{n}^{2}-2}{\frac{2}{x_{n}^{2}}}\\
   &=\frac{1}{2}\lim_{n\rightarrow\infty}\frac{\frac{2}{x_{n}^{2}}}{\frac{2}{x_{n}^{2}}}=\frac{1}{2}.
   \end{align*}
\end{enumerate}
\end{solution}

\begin{example}
设\(a_1 = 1\),\(a_{n + 1} = a_n + \frac{1}{S_n}\),\(S_n = \sum\limits_{k = 1}^{n} a_k\),计算\(\lim_{n \to \infty} \frac{a_n}{\sqrt{\ln n}}\).
\end{example}
\begin{solution}
   由于$a_{n + 1} = a_n + \frac{1}{S_n},\forall n\in \mathbb{N}_+$,并且$a_1>0$,故由数学归纳法可知$a_n>0,\forall n\in \mathbb{N}_+$.又$a_2=a_1+a_1>a_1$,再根据递推式,可以归纳得到数列$\{a_n\}$单调递增.因此,数列$\{a_n\}$要么$\underset{n\rightarrow \infty}{\lim}a_n=a<\infty $,要么$\underset{n\rightarrow \infty}{\lim}a_n=+\infty $.由条件可知\(a_{n + 1}-a_n=\frac{1}{S_n}\geqslant\frac{1}{na_1}=\frac{1}{n}\),\(\forall n\in\mathbb{N}_+\).从而对\(\forall n\in\mathbb{N}_+\),都有
   \[
   a_n=a_n - a_{n - 1}+a_{n - 1}-a_{n - 2}+\cdots+a_2 - a_1\geqslant\frac{1}{n - 1}+\frac{1}{n - 2}+\cdots+1=\sum_{k = 1}^{n - 1}\frac{1}{k}.
   \]
   而\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n - 1}\frac{1}{k}=+\infty\),故\(\lim_{n\rightarrow\infty}a_n=+\infty\).于是由\(Stolz\)定理,可知
   \begin{align*}
   \lim_{n\rightarrow\infty}\frac{a_n^2}{\ln n}&=\lim_{n\rightarrow\infty}\frac{a_{n + 1}^2 - a_n^2}{\ln(1+\frac{1}{n})}=\lim_{n\rightarrow\infty}n(a_{n + 1}^2 - a_n^2)\\
   &=\lim_{n\rightarrow\infty}n\left[\left(a_n+\frac{1}{S_n}\right)^2 - a_n^2\right]=\lim_{n\rightarrow\infty}n\left(\frac{2a_n}{S_n}+\frac{1}{S_n^2}\right).
   \end{align*}
   根据Stolz定理,可得
   \begin{align*}
   \lim_{n\rightarrow\infty}\frac{n}{S_n^2}&=\lim_{n\rightarrow\infty}\frac{1}{a_{n + 1}^2}=0;\\
   \lim_{n\rightarrow\infty}\frac{na_n}{S_n}&=\lim_{n\rightarrow\infty}\frac{(n + 1)a_{n + 1}-na_n}{a_{n + 1}}=\lim_{n\rightarrow\infty}\left[n + 1-\frac{na_n}{a_{n + 1}}\right].
   \end{align*}
   由递推公式,可得对\(\forall n\in\mathbb{N}_+\),有
   \begin{align*}
   1&=n + 1 - n\leqslant n + 1-\frac{na_n}{a_{n + 1}}=n + 1-\frac{na_n}{a_n+\frac{1}{S_n}}=1+\frac{\frac{n}{a_nS_n}}{1+\frac{1}{a_nS_n}}\\
   &=1+\frac{n}{1 + a_nS_n}\leqslant1+\frac{n}{1 + a_1S_n}=1+\frac{n}{1 + S_n}.
   \end{align*}
   又由\(Stolz\)定理,可得\(\lim_{n\rightarrow\infty}\frac{n}{1 + S_n}=\lim_{n\rightarrow\infty}\frac{1}{a_{n + 1}}=0\).故由夹逼准则可知,\(\lim_{n\rightarrow\infty}\frac{na_n}{S_n}=\lim_{n\rightarrow\infty}\left[n + 1-\frac{na_n}{a_{n + 1}}\right]=1\).于是
   \[
   \lim_{n\rightarrow\infty}\frac{a_n^2}{\ln n}=\lim_{n\rightarrow\infty}n\left(\frac{2a_n}{S_n}+\frac{1}{S_n^2}\right)=2\lim_{n\rightarrow\infty}\frac{na_n}{S_n}+\lim_{n\rightarrow\infty}\frac{n}{S_n^2}=2 + 0=2.
   \]
   因此\(\lim_{n\rightarrow\infty}\frac{a_n}{\sqrt{\ln n}}=\sqrt{2}\).
\end{solution}


\subsection{函数Stolz定理}

\begin{theorem}[函数Stolz定理]\label{theorem:函数Stolz定理}
设\(T > 0,f,g:[0,+\infty)\to\mathbb{R}\)是内闭有界函数.
\begin{enumerate}[(1)]
   \item 设\(g(x + T)>g(x)\),若有\(\lim_{x\rightarrow +\infty}g(x)=+\infty\)且
\[
\lim_{x\rightarrow +\infty}\frac{f(x + T)-f(x)}{g(x + T)-g(x)}=A\in\mathbb{R}\bigcup\{-\infty,+\infty\}.
\]
则有
\[
\lim_{x\rightarrow +\infty}\frac{f(x)}{g(x)}=A.
\]
   
   \item 设\(0 < g(x + T)<g(x)\),若有
   \[
   \lim_{x\rightarrow +\infty}f(x)=\lim_{x\rightarrow +\infty}g(x)=0,
   \]
   且
   \[
   \lim_{x\rightarrow +\infty}\frac{f(x + T)-f(x)}{g(x + T)-g(x)}=A\in\mathbb{R}\bigcup\{-\infty,+\infty\}.
   \]
   
   则有
   \[
   \lim_{x\rightarrow +\infty}\frac{f(x)}{g(x)}=A.
   \]
\end{enumerate}
\end{theorem}
\begin{remark}
   考试中,如果要用函数Stolz定理,不要直接证明这个抽象的版本(直接证明这个定理太繁琐).而是根据具体问题,利用夹逼准则和数列Stolz定理进行证明.具体可见\hyperref[example:4.272123]{例题\ref{example:4.272123}}.
\end{remark}
\begin{note}
\begin{enumerate}[(1)]
   \item 不妨设\(A = 0\)的原因:

   \item 不妨设\(T = 1\)的原因:
\end{enumerate}
\end{note}
\begin{proof}
   我们仅考虑\(A\in\mathbb{R}\),其余情况类似,为了书写方便,我们不妨设\(A = 0\),否则用\(f - Ag\)代替\(f\)即可. 不妨设\(T = 1\),否则用\(f(Tx)\)代替\(f\)即可.
\begin{enumerate}[(1)]
   \item 不妨设\(A = 0\),否则用\(f - Ag\)代替\(f\)即可. 不妨设\(T = 1\),否则用\(f(Tx)\)代替\(f\)即可.对任何\(\varepsilon>0\),由条件知存在某个\(X\in\mathbb{N}\),使得对任何\(x>X\)都有
   \begin{align}\label{theorem4.5-equation:13.24}
     |f(x + 1)-f(x)|<\varepsilon[g(x + 1)-g(x)],g(x)>0. 
   \end{align}
   于是对\(\forall x>X\),利用\eqref{theorem4.5-equation:13.24}式,我们有
   \begin{align*}
   \left|\frac{f(x)}{g(x)}\right|&=\left|\frac{\sum\limits_{k = 1}^{[x]-X}[f(x - k + 1)-f(x - k)]}{g(x)}+\frac{f(x - [x]+X)}{g(x)}\right|\\
   &\leqslant\left|\frac{\sum\limits_{k = 1}^{[x]-X}[f(x - k + 1)-f(x - k)]}{g(x)}\right|+\left|\frac{f(x - [x]+X)}{g(x)}\right|\\
   &\stackrel{\eqref{theorem4.5-equation:13.24}\text{式}}{\leqslant}\varepsilon\frac{\sum\limits_{k = 1}^{[x]-X}[g(x - k + 1)-g(x - k)]}{|g(x)|}+\left|\frac{f(x - [x]+X)}{g(x)}\right|\\
   &=\varepsilon\frac{g(x)-g(x - [x]+X)}{|g(x)|}+\left|\frac{f(x - [x]+X)}{g(x)}\right|\\
   &\stackrel{\eqref{theorem4.5-equation:13.24}\text{式}g>0}\leqslant \varepsilon+\left|\frac{f(x - [x]+X)}{g(x)}\right|.
   \end{align*}
   于是利用\(f\)在\([X,X + 1]\)有界及$X\leqslant x-[x]+X<X+1$,我们有
   \[
   \varlimsup_{x\rightarrow +\infty}\left|\frac{f(x)}{g(x)}\right|\leqslant\varepsilon,
   \]
   由\(\varepsilon\)任意性即得
   \[
   \lim_{x\rightarrow +\infty}\frac{f(x)}{g(x)}=0.
   \]
   这就完成了证明.

   \item 不妨设\(A = 0\),否则用\(f - Ag\)代替\(f\)即可. 不妨设\(T = 1\),否则用\(f(Tx)\)代替\(f\)即可.任何\(\varepsilon>0\),由条件可知存在某个\(X\in\mathbb{N}\),使得对任何\(x>X\)都有
   \begin{align}\label{theorem4.5-equation:13.25}
   |f(x + 1)-f(x)|<\varepsilon[g(x)-g(x + 1)]. 
   \end{align}
   于是对\(\forall x>X,\forall n\in\mathbb{N}\),利用\eqref{theorem4.5-equation:13.25}可得
   \begin{align*}
   \left|\frac{f(x)}{g(x)}\right|&=\left|\frac{\sum\limits_{k = 1}^{n}[f(x + k - 1)-f(x + k)]+f(x + n)}{g(x)}\right|\\
   &\leqslant\frac{\sum\limits_{k = 1}^{n}|f(x + k - 1)-f(x + k)|}{g(x)}+\frac{|f(x + n)|}{g(x)}\\
   &\leqslant\varepsilon\frac{\sum\limits_{k = 1}^{n}[g(x + k - 1)-g(x + k)]}{g(x)}+\frac{|f(x + n)|}{g(x)}\\
   &=\varepsilon\frac{g(x)-g(x + n)}{g(x)}+\frac{|f(x + n)|}{g(x)}\\
   &\leqslant\varepsilon+\frac{|f(x + n)|}{g(x)}.
   \end{align*}
   再利用$\lim_{x\rightarrow +\infty}f(x)=\lim_{x\rightarrow +\infty}g(x)=0$得
   \[
   \lim_{n\rightarrow\infty}\frac{|f(x + n)|}{g(x)}=0\Rightarrow\left|\frac{f(x)}{g(x)}\right|\leqslant\varepsilon,\forall x>X.
   \]
   从而结论得证. 
\end{enumerate}
\end{proof}

\begin{example}\label{example:4.272123}
\begin{enumerate}[(1)]
   \item 设\(\alpha > - 1\),计算\(\lim_{x\rightarrow +\infty}\frac{\int_{0}^{x}t^{\alpha}|\sin t|dt}{x^{\alpha + 1}}\).
   
   \item 计算\(\lim_{x\rightarrow +\infty}\frac{\int_{0}^{x}\frac{|\sin t|}{t}dt}{\ln x}\).
   
   \item  计算\(\lim_{x\rightarrow +\infty}\frac{1}{x}\int_{0}^{x}(t - [t])dt\),这里\([\cdot]\)表示向下取整函数.
\end{enumerate}
\end{example}
\begin{note}
   虽然这个几个问题的思路都是\hyperref[theorem:函数Stolz定理]{函数Stolz定理},但是注意在考试中我们不能直接使用这个定理,需要我们结合具体问题给出这个定理的证明.具体可见下述证明.
\end{note}
\begin{remark}
第(1)题如果直接洛必达得
\[
\lim_{x\rightarrow +\infty}\frac{\int_{0}^{x}t^{\alpha}|\sin t|dt}{x^{\alpha + 1}}=\lim_{x\rightarrow +\infty}\frac{|\sin x|}{\alpha + 1}\text{不存在},
\]
因此无法运用洛必达,但也无法判断原本的极限,而需要其他方法确定其极限.
\end{remark}
\begin{proof}
\begin{enumerate}[(1)]
   \item {\color{blue}直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}:}由\hyperref[theorem:函数Stolz定理]{函数Stolz定理}、Lagrange中值定理和\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{积分中值定理}可知
   \begin{align*}
      &\underset{x\rightarrow +\infty}{\lim}\frac{\int_0^x{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{x^{\alpha +1}}=\underset{x\rightarrow +\infty}{\lim}\frac{\int_0^{x+\pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}-\int_0^x{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\left( x+\pi \right) ^{\alpha +1}-x^{\alpha +1}}
\\
   &\xlongequal{Lagrange\text{中值定理}}\underset{x\rightarrow +\infty}{\lim}\frac{\int_x^{x+\pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\pi \left( \alpha +1 \right) x^{\alpha}}\xlongequal{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\underset{x\rightarrow +\infty}{\lim}\frac{\theta_x ^{\alpha}\int_x^{x+\pi}{\left| \sin t \right|\mathrm{d}t}}{\pi \left( \alpha +1 \right) x^{\alpha}},
   \end{align*}
   其中$x\leqslant \theta_x \leqslant x+\pi$.从而$\theta_x \sim x,x\rightarrow +\infty$.于是
   \begin{align*}
      \underset{x\rightarrow +\infty}{\lim}\frac{\int_0^x{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{x^{\alpha +1}}=\underset{x\rightarrow +\infty}{\lim}\frac{\theta_x ^{\alpha}\int_x^{x+\pi}{\left| \sin t \right|\mathrm{d}t}}{\pi \left( \alpha +1 \right) x^{\alpha}}=\frac{1}{\pi \left( \alpha +1 \right)}\underset{x\rightarrow +\infty}{\lim}\int_x^{x+\pi}{\left| \sin t \right|\mathrm{d}t}=\frac{1}{\pi \left( \alpha +1 \right)}\underset{x\rightarrow +\infty}{\lim}\int_0^{\pi}{\left| \sin t \right|\mathrm{d}t}=\frac{2}{\pi \left( \alpha +1 \right)}.
   \end{align*}

   {\color{blue}不直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}(考试中的书写):}对\(\forall x\in (0, +\infty)\)，存在唯一的\(n\in \mathbb{N}\)，使得\(n\pi \leq x \leq (n + 1)\pi\)。
   故
   \begin{align}\label{example4.30-1.1}
    \frac{\int_0^{n\pi}t^{\alpha}|\sin t|\mathrm{d}t}{[(n + 1)\pi]^{\alpha + 1}} \leq \frac{\int_0^x t^{\alpha}|\sin t|\mathrm{d}t}{x^{\alpha + 1}} \leq \frac{\int_0^{(n + 1)\pi}t^{\alpha}|\sin t|\mathrm{d}t}{(n\pi)^{\alpha + 1}}, \forall x\in [0, +\infty).  
   \end{align}
   又由数列Stolz定理、Lagrange中值定理和\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}可知
   \begin{align}
      &\underset{x\rightarrow +\infty}{\lim}\frac{\int_0^{\left( n+1 \right) \pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\left( n\pi \right) ^{\alpha +1}}\xlongequal[]{\text{Stolz定理}}\frac{1}{\pi ^{\alpha +1}}\underset{x\rightarrow +\infty}{\lim}\frac{\int_{n\pi}^{\left( n+1 \right) \pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\left( n+1 \right) ^{\alpha +1}-n^{\alpha +1}}\nonumber
      \\
      &\xlongequal[\text{Lagrange中值定理}]{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\frac{1}{\pi ^{\alpha +1}}\underset{x\rightarrow +\infty}{\lim}\frac{\left( n\pi \right) ^{\alpha}\int_{n\pi}^{\left( n+1 \right) \pi}{\left| \sin t \right|\mathrm{d}t}}{\left( \alpha +1 \right) n^{\alpha +1}}=\frac{2}{\pi \left( \alpha +1 \right)},\label{example4.27(1)-1.2}
      \\
      &\underset{x\rightarrow +\infty}{\lim}\frac{\int_0^{n\pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\left[ \left( n+1 \right) \pi \right] ^{\alpha +1}}\xlongequal[]{\text{Stolz定理}}\frac{1}{\pi ^{\alpha +1}}\underset{x\rightarrow +\infty}{\lim}\frac{\int_{\left( n-1 \right) \pi}^{n\pi}{t^{\alpha}\left| \sin t \right|\mathrm{d}t}}{\left( n+1 \right) ^{\alpha +1}-n^{\alpha +1}}\nonumber
      \\
      &\xlongequal[\text{Lagrange中值定理}]{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\frac{1}{\pi ^{\alpha +1}}\underset{x\rightarrow +\infty}{\lim}\frac{\left( n\pi \right) ^{\alpha}\int_{\left( n-1 \right) \pi}^{n\pi}{\left| \sin t \right|\mathrm{d}t}}{\left( \alpha +1 \right) n^{\alpha +1}}=\frac{2}{\pi \left( \alpha +1 \right)}.\label{example4.27(1)-1.3}
   \end{align}
   又因为\(n\pi \leq x \leq (n + 1)\pi, \forall x \in (0, +\infty)\)，所以\(n\rightarrow +\infty\)等价于\(x\rightarrow +\infty\).于是利用\eqref{example4.30-1.1}\eqref{example4.27(1)-1.2}\eqref{example4.27(1)-1.3}式，由夹逼准则可得
   \[
   \lim_{x\rightarrow +\infty} \frac{\int_0^x{t^{\alpha}|\sin t|\mathrm{d}t}}{x^{\alpha +1}}=\underset{n\rightarrow \infty}{\lim}\frac{\int_0^x{t^{\alpha}|\sin t|\mathrm{d}t}}{x^{\alpha +1}}=\frac{2}{\pi (\alpha +1)}.
   \]
   

   \item {\color{blue}直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}:}由\hyperref[theorem:函数Stolz定理]{函数Stolz定理}、Lagrange中值定理和\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{积分中值定理}可知
   \begin{align}
   &\lim_{x\rightarrow +\infty}\frac{\int_{0}^{x}\frac{|\sin t|}{t}dt}{\ln x}=\lim_{x\rightarrow +\infty} \frac{\int_0^{x+\pi}{\frac{|\sin t|}{t}\mathrm{d}t}-\int_0^x{\frac{|\sin t|}{t}\mathrm{d}t}}{\ln \left( x+\pi \right) -\ln x}
   \xlongequal{\text{Lagrange中值定理}}\lim_{x\rightarrow +\infty} \frac{\int_x^{x+\pi}{\frac{|\sin t|}{t}\mathrm{d}t}}{\frac{\pi}{x}} \nonumber
   \\
   &\xlongequal{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\frac{1}{\pi}\lim_{x\rightarrow +\infty} \frac{x}{ \theta _x}\int_x^{x+\pi}{\left| \sin t \right|\mathrm{d}t}
   =\frac{1}{\pi}\lim_{x\rightarrow +\infty} \frac{x}{ \theta _x}\int_0^{\pi}{\left| \sin t \right|\mathrm{d}t}
   =\frac{2}{\pi}\lim_{x\rightarrow +\infty} \frac{x}{ \theta _x}.\label{example4.27(2)-1.1}
   \end{align}
   其中\(x\leqslant \theta _x\leqslant x+\pi\).从而$\theta _x\sim x,x\rightarrow +\infty $.再结合\eqref{example4.27(2)-1.1}式可得
   \begin{align*}
      \lim_{x\rightarrow +\infty}\frac{\int_{0}^{x}\frac{|\sin t|}{t}dt}{\ln x}=\frac{2}{\pi}\lim_{x\rightarrow +\infty} \frac{x}{ \theta _x}=\frac{2}{\pi}.
   \end{align*}

   {\color{blue}不直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}(考试中的书写):}对\(\forall x\in (0, +\infty)\)，存在唯一的\(n\in \mathbb{N}\)，使得\(n\pi \leq x \leq (n + 1)\pi\)。
   故
   \begin{align}\label{example4.27(2)-2.1}
    \frac{\int_0^{n\pi}\frac{|\sin t|}{t}dt}{\ln((n + 1)\pi)} \leq \frac{\int_0^x\frac{|\sin t|}{t}dt}{\ln x} \leq \frac{\int_0^{(n + 1)\pi}\frac{|\sin t|}{t}dt}{\ln(n\pi)}, \forall x > 0.  
   \end{align}
又由数列Stolz定理和\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}可知
\begin{align}
   &\lim_{n\rightarrow \infty} \frac{\int_0^{(n+1)\pi}{\frac{|\sin t|}{t}dt}}{\ln\mathrm{(}n\pi )}\xlongequal{\text{Stolz定理}}\lim_{n\rightarrow \infty} \frac{\int_{n\pi}^{(n+1)\pi}{\frac{|\sin t|}{t}dt}}{\ln\mathrm{(}n\pi )-\ln\mathrm{((}n-1)\pi )}\nonumber
   \\
   &\xlongequal{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\lim_{n\rightarrow \infty} \frac{\frac{1}{n\pi}\int_{n\pi}^{(n+1)\pi}{|\sin t|dt}}{\ln\mathrm{(}1+\frac{1}{n-1})}=\lim_{n\rightarrow \infty} \frac{2(n-1)}{n\pi}=\frac{2}{\pi},\label{example4.27(2)-2.2}
   \\
   &\lim_{n\rightarrow \infty} \frac{\int_0^{n\pi}{\frac{|\sin t|}{t}dt}}{\ln\mathrm{((}n+1)\pi )}\xlongequal{\text{Stolz定理}}\lim_{n\rightarrow \infty} \frac{\int_{n\pi}^{(n+1)\pi}{\frac{|\sin t|}{t}dt}}{\ln\mathrm{((}n+2)\pi )-\ln\mathrm{((}n+1)\pi )}\nonumber
   \\
   &\xlongequal{\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{\text{积分中值定理}}}\lim_{n\rightarrow \infty} \frac{\frac{1}{n\pi}\int_{n\pi}^{(n+1)\pi}{|\sin t|dt}}{\ln\mathrm{(}1+\frac{1}{n+1})}=\lim_{n\rightarrow \infty} \frac{2(n+1)}{n\pi}=\frac{2}{\pi}.\label{example4.27(2)-2.3}
\end{align}
又因为\(n\pi \leq x \leq (n + 1)\pi, \forall x \in (0, +\infty)\)，所以\(n\rightarrow +\infty\)等价于\(x\rightarrow +\infty\)。于是利用\eqref{example4.27(2)-2.1}\eqref{example4.27(2)-2.2}\eqref{example4.27(2)-2.3}式，由夹逼准则可得
\[
\lim_{x\rightarrow +\infty}\frac{\int_0^x\frac{|\sin t|}{t}dt}{\ln x} = \lim_{n\rightarrow \infty}\frac{\int_0^x\frac{|\sin t|}{t}dt}{\ln x} = \frac{2}{\pi}.
\]
   
   \item {\color{blue}直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}:}注意到$t-[t]$是$\mathbb{R}$上周期为1的非负函数,故由\hyperref[theorem:函数Stolz定理]{函数Stolz定理}可知
   \begin{align*}
      \lim_{x\rightarrow +\infty} \frac{1}{x}\int_0^x{(t}-[t])dt&=\lim_{x\rightarrow +\infty} \frac{\int_0^{x+1}{(t-[t])\mathrm{d}t}-\int_0^x{(t-[t])\mathrm{d}t}}{x+1-x}=\lim_{x\rightarrow +\infty} \int_x^{x+1}{(t-[t])\mathrm{d}t}
\\
&=\lim_{x\rightarrow +\infty} \int_x^{x+1}{(t-[t])\mathrm{d}t=\lim_{x\rightarrow +\infty} \int_0^1{(t-[t])\mathrm{d}t}}=\lim_{x\rightarrow +\infty} \int_0^1{t\mathrm{d}t}=\frac{1}{2}. 
   \end{align*}

   {\color{blue}不直接使用\hyperref[theorem:函数Stolz定理]{函数Stolz定理}(考试中的书写):}对\(\forall x\in (0, +\infty)\)，存在唯一的\(n\in \mathbb{N}\)，使得\(n \leq x \leq n + 1\)。
   故
   \begin{align}\label{example4.30(3)-1.1}
      \frac{\int_0^n{(t}-[t])dt}{n+1}\leqslant \frac{1}{x}\int_0^x{(t}-[t])dt\leqslant \frac{\int_0^{n+1}{(t}-[t])dt}{n},\forall x>0.
   \end{align}
   又由数列Stolz定理可知
   \begin{align}
      &\lim_{n\rightarrow \infty} \frac{\int_0^{n+1}{(t}-[t])dt}{n}\xlongequal{\text{Stolz定理}}\lim_{n\rightarrow \infty} \int_n^{n+1}{(t}-[t])dt=\int_0^1{(t}-[t])dt=\int_0^1{t}dt=1,\label{example4.30(3)-1.2}
\\
&\lim_{n\rightarrow \infty} \frac{\int_0^n{(t}-[t])dt}{n+1}\xlongequal{\text{Stolz定理}}\lim_{n\rightarrow \infty} \int_{n-1}^n{(t}-[t])dt=\int_0^1{(t}-[t])dt=\int_0^1{t}dt=1.\label{example4.30(3)-1.3}
   \end{align}
   又因为\(n \leq x \leq n + 1, \forall x \in (0, +\infty)\)，所以\(n\rightarrow +\infty\)等价于\(x\rightarrow +\infty\)。于是利用\eqref{example4.30(3)-1.1}\eqref{example4.30(3)-1.2}\eqref{example4.30(3)-1.3}式，由夹逼准则可得
   \begin{align*}
      \lim_{x\rightarrow +\infty} \frac{1}{x}\int_0^x{(t}-[t])dt=\lim_{n\rightarrow \infty} \frac{1}{x}\int_0^x{(t}-[t])dt=1.
   \end{align*}
\end{enumerate}
\end{proof}





\section{递推数列求极限和估阶}


\subsection{“折线图(蛛网图)”分析法(图未完成,但已学会)}
关于递推数列求极限的问题,可以先画出相应的"折线图",然后根据“折线图(蛛网图)”的性质来判断数列的极限.这种方法可以帮助我们快速得到数列的极限,但是对于数列的估阶问题,这种方法并不适用.

\begin{remark}
   这种方法只能用来分析问题,严谨的证明还是需要用单调性分析法或压缩映像法书写.

   一般的递推数列问题,我们先画“折线图(蛛网图)”分析,如果能直接分析出数列的收敛情况,就再用单调分析法或压缩映像法严谨地书写证明.
\end{remark}

\begin{example}
   设\(u_1 = b\),\(u_{n + 1}=u_{n}^{2}+(1 - 2a)u_{n}+a^{2}\),判断\(u_{n}\)的收敛性.
\end{example}
\begin{solution}
   
\end{solution}

\begin{example}
   定义数列\(a_0 = x\),\(a_{n + 1}=\frac{a_{n}^{2}+y^{2}}{2}\),\(n = 0,1,2,\cdots\),求\(D\triangleq\{(x,y)\in\mathbb{R}^2:\text{数列}a_n\text{收敛}\}\)的面积.
\end{example}
\begin{solution}
   
\end{solution}


\begin{example}
   
\end{example}
\begin{solution}
   
\end{solution}



\subsection{单调性分析法}

\begin{proposition}[不动点]\label{proposition:不动点}
   设数列 \(\{x_n\}\) 满足递推公式 \(x_{n+1} = f(x_n), n \in \mathbb{N}_+\)。若有 \(\lim\limits_{n \to \infty} x_n = \xi\), 同时又成立 \(\lim\limits_{n \to \infty} f(x_n) = f(\xi)\) 则极限 \(\xi\) 一定是方程 \(f(x) = x\) 的根 (这时称 \(\xi\) 为函数 \(f\) 的不动点).
\end{proposition}
\begin{proof}
   对$x_{n+1} = f(x_n)$两边取极限即得.
\end{proof}

关于递推数列求极限和估阶的问题,单调性分析法只适用于
\[
x_{n + 1} = f(x_n),n \in \mathbb{N}.
\]

\(f\)是递增或者递减的类型,且大多数情况只适用于\(f\)递增情况,其余情况不如压缩映像思想方便快捷.显然递推数列$x_{n + 1} = f(x_n)$确定的\(x_n\)如果收敛于\(x \in \mathbb{R}\),则当\(f\)连续时一定有\(f(x) = x\),此时我们也把这个\(x\)称为\(f\)的不动点.因此\(f(x) = x\)是\(x_n\)收敛于\(x \in \mathbb{R}\)的必要条件.



\begin{proposition}[递增函数递推数列]\label{proposition:递增函数递推数列}
设\(f\)是递增函数,则递推
\begin{align}\label{equation:486565}
   x_{n + 1} = f(x_n),n \in \mathbb{N}.
\end{align}
确定的\(x_n\)一定单调,且和不动点大小关系恒定.
\end{proposition}
\begin{note}
   本结论表明由递增递推\eqref{equation:486565}确定的数列的单调性和有界性,完全由其\(x_2 - x_1\)和\(x_1\)与不动点$x_0$的大小关系确定.即$x_2>x_1\Rightarrow x_{n+1}>x_n,\forall n\in \mathbb{N} _+.x_1>x_0\Rightarrow x_n>x_0,\forall n\in \mathbb{N} _+$.
\end{note}
\begin{proof}
   我们只证一种情况,其余情况是完全类似的.设\(x_0\)是\(f\)的不动点且\(x_1\leq x_0,x_2\geq x_1\),则若\(x_n\leq x_{n + 1},x_n\leq x_0,n\in\mathbb{N}\),运用\(f\)递增性有
\[
x_{n + 1} = f(x_n)\leq f(x_0) = x_0,x_{n + 2} = f(x_{n + 1})\geq f(x_n) = x_{n + 1}.
\]
由数学归纳法即证明了\hyperref[proposition:递增函数递推数列]{命题\ref{proposition:递增函数递推数列}}
\end{proof}

\begin{proposition}[递减函数递推数列]\label{proposition:递减函数递推数列}
设\(f\)是递减函数,则递推
\begin{align}\label{equation:486561}
   x_{n + 1} = f(x_n),n \in \mathbb{N}.
\end{align}
确定的\(\{x_n\}\)一定不单调,且和不动点大小关系交错.但$\{x_n\}$的两个奇偶子列$\{x_{2k-1}\}$和$\{x_{2k}\}$分别为单调数列,且具有相反的单调性.
\end{proposition}
\begin{note}
   我们注意到\(f\circ f\)递增就能把\(f\)递减转化为递增的情况,本结论无需记忆或证明,只记得思想即可.$x_n$和不动点关系交错,即若$x_0$为数列${x_n}$的不动点,且$x_1\geq x_0,x_2\leq x_0$,则$x_3 \geq x_0,\cdots,x_{2n}\leq x_0,x_{2n-1}\geq x_0,\cdots$;并且$x_2\leq x_1,x_3\geq x_1,x_4\leq x_2,x_5\geq x_3,\cdots,x_{2n}\leq x_{2n-2},x_{2n-1}\geq x_{2n-3},\cdots$.
\end{note}
\begin{proof}
   由\hyperref[proposition:递增函数递推数列]{命题\ref{proposition:递增函数递推数列}}类似证明即可.
\end{proof}

\begin{example}[$\,\,$递增/递减递推数列]
\begin{enumerate}
   \item 设\(x_1 > - 6,x_{n + 1} = \sqrt{6 + x_n},n = 1,2,\cdots\),计算\(\lim_{n \to \infty} x_n\).
   \item 设\(x_1,a > 0,x_{n + 1} = \frac{1}{4}(3x_n+\frac{a}{x_n^3}),n = 1,2,\cdots\),求极限\(\lim_{n \to \infty} x_n\).
   \item 设\(x_1 = 2,x_n+(x_n - 4)x_{n - 1} = 3,(n = 2,3,\cdots)\),求极限\(\lim_{n \to \infty} x_n\).
   \item 设\(x_1 > 0,x_n e^{x_{n + 1}} = e^{x_n}-1,n = 1,2,\cdots\),求极限\(\lim_{n \to \infty} x_n\).
\end{enumerate}
\end{example}
\begin{note}
\begin{enumerate}
   \item 不妨设$x_1\geq 0$的原因:我们只去掉原数列$\{x_n\}$的第一项,得到一个新数列,并且此时新数列是从原数列$\{x_n\}$的第二项$x_2$开始的.对于原数列$\{x_n\}$而言,有$x_{n+1}=\sqrt{6+x_n}\geq 0,\forall n \in \mathbb{N}_+$.故新数列的每一项都大于等于0.将新数列重新记为$\{x_n\}$,则$x_1\geq 0$.若此时能够证得新数列收敛到$x_0$,则由于数列去掉有限项不会影响数列的敛散性以及极限值,可知原数列也收敛到$x_0$.故不妨设$x_1\geq 0$是合理地.
   
   (简单地说,就是原数列用$x_2$代替$x_1$,用$x_{n+1}$代替$x_n$,$\forall n \in \mathbb{N}_+$,而由$x_1>-6$,可知$x_2=\sqrt{6+x_1}\geq 0$.)

\begin{remark}
   {\color{blue}这种不妨设的技巧在数列中很常用,能减少一些不必要的讨论.实际上就是去掉数列中有限个有问题的项,而去掉这些项后对数列的极限没有影响.}
\end{remark}
\end{enumerate}
\end{note}
\begin{solution}
\begin{enumerate}
   \item 不妨设$x_1\geq 0$,则设\(f(x)=\sqrt{6 + x}\),则\(f(x)\)单调递增.

   当\(x_1 < 3\)时,由条件可知
   \begin{gather}\label{eqq123}
      x_2 - x_1=\sqrt{6 + x_1}-x_1=\frac{(3 - x_1)(2 + x_1)}{\sqrt{6 + x_1}+x_1}.
   \end{gather}
   从而此时\(x_2 > x_1\).假设当\(n = k\)时,有\(x_k < 3\).则当\(n = k + 1\)时,就有
   \[
   x_{k + 1}=f(x_k)=\sqrt{6 + x_k}<\sqrt{6 + 3}=3.
   \]
   故由数学归纳法,可知\(x_n < 3\),\(\forall n\in\mathbb{N}_+\).
   
   假设当\(n = k\)时,有\(x_{k + 1}\geqslant x_k\).则当\(n = k + 1\)时,就有
   \[
   x_{k + 2}=f(x_{k + 1})\geqslant f(x_k)=x_{k + 1}.
   \]
   故由数学归纳法,可知\(\{x_n\}\)单调递增.
   于是由单调有界定理,可得数列\(\{x_n\}\)收敛.
   
   当\(x_1\geqslant 3\)时,由\eqref{eqq123}式可知,此时\(x_2\leqslant x_1\).假设当\(n = k\)时,有\(x_k\geqslant 3\).则当\(n = k + 1\)时,就有
   \[
   x_{k + 1}=f(x_k)=\sqrt{6 + x_k}\geqslant\sqrt{6 + 3}=3.
   \]
   故由数学归纳法,可知\(x_n\geqslant 3\),\(\forall n\in\mathbb{N}_+\).
   
   假设当\(n = k\)时,有\(x_{k + 1}\leqslant x_k\).则当\(n = k + 1\)时,就有
   \[
   x_{k + 2}=f(x_{k + 1})\leqslant f(x_k)=x_{k + 1}.
   \]
   故由数学归纳法,可知\(\{x_n\}\)单调递减.
   于是由单调有界定理,可得数列\(\{x_n\}\)收敛.
   
   综上,无论\(x_1 > 3\)还是\(x_1\leqslant 3\),都有数列\(\{x_n\}\)收敛.设\(\lim_{n\rightarrow\infty}x_n = a\).则对\(x_{n + 1}=\sqrt{6 + x_n}\)两边同时令\(n\rightarrow\infty\)可得\(a=\sqrt{6 + a}\),解得\(\lim_{n\rightarrow\infty}x_n = a = 3\).

   \item 

   \item 

   \item 
\end{enumerate}
\end{solution}

\subsection{利用上下极限求递推数列极限}

\begin{example}
   设\(A,B > 0\),\(a_1 > A\)以及
   \(a_{n + 1} = A + \frac{B}{a_n}, n \in \mathbb{N}_+\),
   计算\(\lim_{n \to \infty} a_n\).
   \end{example}
   \begin{proof}
   显然$a_n>A>0,\forall n\in\mathbb{N}_+$.从而$a_{n+1}=A+\frac{B}{a_n}\leq A+\frac{B}{A},\forall n\in\mathbb{N}_+$.故数列$\{a_n\}$有界.于是可设$a=\underset{n\rightarrow \infty}{{\varlimsup }}a_n<\infty,b=\underset{n\rightarrow \infty}{{\varliminf }}a_n<\infty$.对等式$a_{n + 1} = A + \frac{B}{a_n}$两边同时关于$n\to+\infty$取上下极限得到
   \begin{align*}
   &a=\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+1}=A+\underset{n\rightarrow \infty}{{\varlimsup }}\frac{B}{a_n}=A+\frac{B}{\underset{n\rightarrow \infty}{{\varliminf }}a_n}=A+\frac{B}{b},
   \\
   &b=\underset{n\rightarrow \infty}{{\varliminf }}a_{n+1}=A+\underset{n\rightarrow \infty}{{\varliminf }}\frac{B}{a_n}=A+\frac{B}{\underset{n\rightarrow \infty}{{\varlimsup }}a_n}=A+\frac{B}{a}.
   \end{align*}
   于是我们有$\begin{cases}
      ab=Ab+B\\
      ab=Aa+B\\
   \end{cases}$,解得$a=b0=\frac{A\pm\sqrt{A^2-4B}}{2}$.又由$a_n>A>0$,可知$a=b=\frac{A+\sqrt{A^2-4B}}{2}$.故$\underset{n\rightarrow \infty}{\lim}a_n=\frac{A+\sqrt{A^2-4B}}{2}$.
\end{proof}


\subsection{类递增/类递减递推数列}

\begin{example}[类递增模型]\label{example:类递增模型}
   \begin{enumerate}
      \item 设\(c_1,c_2 > 0\),\(c_{n + 2} = \sqrt{c_{n + 1}} + \sqrt{c_{n}}\),\(n = 1,2,\cdots\),计算\(\lim_{n \to \infty} c_{n}\).
      
      \item 设\(a_k \in (0,1)\),\(1 \leq k \leq 2021\)且
      \((a_{n + 2021})^{2022} = a_{n} + a_{n + 1} + \cdots + a_{n + 2020}\),\(n = 1,2,\cdots\),
      这里\(a_{n} > 0\),\(\forall n \in \mathbb{N}\)证明\(\lim_{n \to \infty} a_{n}\)存在.
   \end{enumerate}
   \end{example}
   \begin{note}
   解决此类问题一般先定界(即确定$c_n$的上下界的具体数值),再对等式两边同时取上下极限即可.
   \end{note}
   \begin{remark}
   \begin{enumerate}
      \item \label{example3.23-1}记\(b\triangleq\max\{c_1,c_2,4\}\)的原因:为了证明数列${c_n}$有界,我们需要先定界(即确定$c_n$的上下界的具体数值),然后再利用数学归纳法证得数列${c_n}$有界.显然${c_n}$有一个下界0,但上界无法直接观察出来.为了确定出数列${c_n}$的一个上界,我们可以先假设${c_n}$有一个上界$b$(此时$b$是待定常数).则$c_{n+1}=\sqrt{c_n}+\sqrt{c_{n - 1}}\leqslant\sqrt{b}+\sqrt{b}=2\sqrt{b}\leqslant b$,由此解得$b\geq 4$.又由数学归纳法的原理,可知需要保证$b$同时也是$c_1,c_2$的上界.故只要取$b\geq 4,c_1,c_2$就一定能归纳出$b$是${c_n}$的一个上界.而我们取$b\triangleq\max\{c_1,c_2,4\}$满足这个条件.
      
      \item \label{example3.23-2}记$M=$的原因:同上一问,假设数列${a_n}$有一个上界$M$(此时$M$是待定常数),则
      \begin{align*}
         a_{n+2021}=\sqrt[2022]{a_n+a_{n+1}+\cdots +a_{n+2020}}\le \sqrt[2022]{M+M+\cdots +M}=\sqrt[2022]{2021M}\le M.
      \end{align*}
      由此解得$M\geq (2021)^{\frac{1}{2021}}$.又由数学归纳法的原理,可知需要保证$M$同时也是$a_1,a_2,\cdots,a_{2020}$的上界.故只要取$M\geq \left(2021\right)^{\frac{1}{2021}},a_1,a_2,\cdots,a_{2020}$就一定能归纳出$M$是${a_n}$的一个上界.而我们取$M=\max \left\{ \left( 2021 \right) ^{\frac{1}{2021}},a_1,a_2,\cdots ,a_{2020} \right\}$满足这个条件.
   \end{enumerate}
   \end{remark}
   \begin{solution}
   \begin{enumerate}
      \item \hyperref[example3.23-1]{记\(b\triangleq\max\{c_1,c_2,4\}\),则\(0 < c_1,c_2\le b\)}.假设\(0 < c_n\le b\),则
      \[
      0 < c_{n + 1}=\sqrt{c_n}+\sqrt{c_{n - 1}}\leqslant\sqrt{b}+\sqrt{b}=2\sqrt{b}\leqslant b.
      \]
      由数学归纳法,可知对\(\forall n\in\mathbb{N}_+\),都有\(0 < c_n\le b\)成立.即数列\(\{c_n\}\)有界.
      
      因此可设\(L=\varlimsup_{n\rightarrow\infty}c_n <\infty\),\(l=\varliminf_{n\rightarrow\infty}c_n <\infty\).
      令\(c_{n + 1}=\sqrt{c_n}+\sqrt{c_{n - 1}}\)两边同时对\(n\rightarrow\infty\)取上下极限,可得
      \[
      L=\varlimsup_{n\rightarrow\infty}c_{n + 1}=\varlimsup_{n\rightarrow\infty}(\sqrt{c_n}+\sqrt{c_{n - 1}})\leqslant\varlimsup_{n\rightarrow\infty}\sqrt{c_n}+\varlimsup_{n\rightarrow\infty}\sqrt{c_{n - 1}}=2\sqrt{L}\Rightarrow L\leqslant 4,
      \]
      \[
      l=\varliminf_{n\rightarrow\infty}c_{n + 1}=\varliminf_{n\rightarrow\infty}(\sqrt{c_n}+\sqrt{c_{n - 1}})\geqslant\varliminf_{n\rightarrow\infty}\sqrt{c_n}+\varliminf_{n\rightarrow\infty}\sqrt{c_{n - 1}}=2\sqrt{l}\Rightarrow l\geqslant 4.
      \]
      又\(l=\varliminf_{n\rightarrow\infty}c_n\leqslant\varlimsup_{n\rightarrow\infty}c_n = L\),故\(L = l = 4\).即\(\lim_{n\rightarrow\infty}c_n = 4\).
   
      \item \hyperref[example3.23-2]{取\(M=\max \left\{ \left( 2021 \right) ^{\frac{1}{2021}},a_1,a_2,\cdots ,a_{2020} \right\}\)},显然$a_n>0$且$a_1,a_2,\cdots ,a_{2020}\leq M$.假设$a_k\leq M$,$k=1,2,\cdots,n$则由条件可得
      \begin{align*}
         a_{n+1}=\sqrt[2022]{a_{n-2020}+a_{n-2019}+\cdots +a_{n}}\le \sqrt[2022]{M+M+\cdots +M}=\sqrt[2022]{2021M}\le M.
      \end{align*}
   由数学归纳法,可知$0<a_n\leq M,\forall n\in\mathbb{N}_+$.即数列${a_n}$有界.因此可设$A=\underset{n\rightarrow \infty}{{\varlimsup }}a_n<\infty ,a=\underset{n\rightarrow \infty}{{\varliminf }}a_n<\infty$.由条件可得
   \begin{align*}
      a_{n+2021}=\sqrt[2022]{a_n+a_{n+1}+\cdots +a_{n+2020}}.
   \end{align*}
   上式两边同时对$n\to \infty$取上下极限得到
   \begin{align*}
      &A=\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+2021}=\underset{n\rightarrow \infty}{{\varlimsup }}\sqrt[2022]{a_n+a_{n+1}+\cdots +a_{n+2020}}=\sqrt[2022]{\underset{n\rightarrow \infty}{{\varlimsup }}\left( a_n+a_{n+1}+\cdots +a_{n+2020} \right)}
   \\
   &\leqslant \sqrt[2022]{\underset{n\rightarrow \infty}{{\varlimsup }}a_n+\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+1}+\cdots +\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+2020}}=\sqrt[2022]{A+A+\cdots +A}\Rightarrow A\leqslant \left( 2021 \right) ^{\frac{1}{2021}},   
   \end{align*}
   \begin{align*}
   &a=\underset{n\rightarrow \infty}{{\varliminf }}a_{n+2021}=\underset{n\rightarrow \infty}{{\varliminf }}\sqrt[2022]{a_n+a_{n+1}+\cdots +a_{n+2020}}=\sqrt[2022]{\underset{n\rightarrow \infty}{{\varliminf }}\left( a_n+a_{n+1}+\cdots +a_{n+2020} \right)}
   \\
   &\geqslant \sqrt[2022]{\underset{n\rightarrow \infty}{{\varliminf }}a_n+\underset{n\rightarrow \infty}{{\varliminf }}a_{n+1}+\cdots +\underset{n\rightarrow \infty}{{\varliminf }}a_{n+2020}}=\sqrt[2022]{a+a+\cdots +a}\Rightarrow a\geqslant \left( 2021 \right) ^{\frac{1}{2021}}.
   \end{align*}
   又$a=\underset{n\rightarrow \infty}{{\varliminf }}a_n\leqslant \underset{n\rightarrow \infty}{{\varlimsup }}a_n=A$,故$A=a=\left( 2021 \right) ^{\frac{1}{2021}}$.即$\underset{n\rightarrow \infty}{\lim}a_n=\left( 2021 \right) ^{\frac{1}{2021}}$.
   \end{enumerate}
   \end{solution}
   
   \begin{example}[类递减模型]\label{example:类递减模型}
   \begin{enumerate}
      \item 设\(a_{n + 2} = \frac{1}{a_{n + 1}} + \frac{1}{a_{n}}, a_{1}, a_{2} > 0, n = 1,2,\cdots\).证明\(\lim_{n \to \infty} a_{n}\)存在.
   
      \item 设\(x_{1} = \frac{1}{2}, x_{2} = \frac{1}{3}, x_{n + 2} = 3 + \frac{1}{x_{n + 1}^{2}} + \frac{1}{x_{n}^{2}}, n = 1,2,\cdots\).
      证明\(\lim_{n \to \infty} x_{n}\)存在.
   \end{enumerate}   
   \end{example}
   \begin{note}
      此类问题一定要记住,隔项抽子列.如果不记住做题时会难以想到.与\hyperref[example:类递增模型]{类递增模型}一样,一开始要定界.
   \end{note}
   \begin{proof}
   \begin{enumerate}
      \item \hyperref[example3.24(1)]{取\(a=\min \left\{ a_1,a_2,\frac{2}{a_1},\frac{2}{a_2} \right\}>0\)},则有$0<a\leq a_1,a_2\leq \frac{2}{a}$成立.假设$0<a\leq a_n\leq \frac{2}{a}$,则由条件可得
      \begin{align*}
         a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}\leqslant \frac{1}{a}+\frac{1}{a}=\frac{2}{a}.
      \end{align*}
      由数学归纳法,可知$0<a\leq a_n\leq \frac{2}{a},\forall n\in\mathbb{N}_+$.即数列${a_n}$有界.于是可设$A=\underset{n\rightarrow \infty}{{\varlimsup }}a_n<\infty ,B=\underset{n\rightarrow \infty}{{\varliminf }}a_n<\infty$.\hyperref[example3.24(2)]{由致密性定理,可知存在一个子列$\{a_{n_k}\}$,使得$\lim_{k\rightarrow \infty} a_{n_k+2}=A,\lim_{k\rightarrow \infty} a_{n_k+1}=l_1<\infty,\lim_{k\rightarrow \infty} a_{n_k}=l_2<\infty,\lim_{k\rightarrow \infty} a_{n_k-1}=l_3<\infty$}.并且根据上下极限的定义,可知$B\leq l_1,l_2,l_3\leq A$.对等式$a_{n + 2} = \frac{1}{a_{n + 1}} + \frac{1}{a_{n}}$两边同时关于$n\to+\infty$取上下极限得到
   \begin{align*}
   &A=\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+2}=\underset{n\rightarrow \infty}{{\varlimsup }}\left( \frac{1}{a_{n+1}}+\frac{1}{a_n} \right) \leqslant \underset{n\rightarrow \infty}{{\varlimsup }}\frac{1}{a_{n+1}}+\underset{n\rightarrow \infty}{{\varlimsup }}\frac{1}{a_n}
   \\
   &=\frac{1}{\underset{n\rightarrow \infty}{{\varliminf }}a_{n+1}}+\frac{1}{\underset{n\rightarrow \infty}{{\varliminf }}a_n}=\frac{1}{B}+\frac{1}{B}=\frac{2}{B}\Rightarrow AB\leqslant 2.
   \end{align*}
   \begin{align*}
   &B=\underset{n\rightarrow \infty}{{\varliminf }}a_{n+2}=\underset{n\rightarrow \infty}{{\varliminf }}\left( \frac{1}{a_{n+1}}+\frac{1}{a_n} \right) \geqslant \underset{n\rightarrow \infty}{{\varliminf }}\frac{1}{a_{n+1}}+\underset{n\rightarrow \infty}{{\varliminf }}\frac{1}{a_n}
   \\
   &=\frac{1}{\underset{n\rightarrow \infty}{{\varlimsup }}a_{n+1}}+\frac{1}{\underset{n\rightarrow \infty}{{\varlimsup }}a_n}=\frac{1}{A}+\frac{1}{A}=\frac{2}{A}\Rightarrow AB\geqslant 2.
   \end{align*}
   故$AB=2$.因为$\{a_{n_k}\}$是数列${a_n}$的一个子列,所以$\{a_{n_k}\}$也满足$a_{n_k+2}=\frac{1}{a_{n_k+1}}+\frac{1}{a_{n_k}},\forall k\in\mathbb{N}_+$.并且子列$\{a_{n_k-1}\},\{a_{n_k}\},\{a_{n_k+1}\},\{a_{n_k+2}\}$的极限都存在,于是对$a_{n_k+2}=\frac{1}{a_{n_k+1}}+\frac{1}{a_{n_k}}$等式两边同时关于$k\to+\infty$取极限,再结合$B\leq l_1,l_2,l_3\leq A$得到
   \begin{align*}
   &A=\lim_{k\rightarrow \infty} a_{n_k+2}=\lim_{k\rightarrow \infty} \frac{1}{a_{n_k+1}}+\lim_{k\rightarrow \infty} \frac{1}{a_{n_k}}
   \\
   &=\frac{1}{l_1}+\frac{1}{l_2}\leqslant \frac{1}{B}+\frac{1}{B}=\frac{2}{B}=A\Rightarrow l_1=l_2=B.
   \end{align*}
   同理再对$a_{n_k+1}=\frac{1}{a_{n_k}}+\frac{1}{a_{n_k-1}}$等式两边同时关于$k\to+\infty$取极限,再结合$B\leq l_1,l_2,l_3\leq A$得到
   \begin{align*}
   &B=l_1=\lim_{k\rightarrow \infty} a_{n_k+1}=\lim_{k\rightarrow \infty} \frac{1}{a_{n_k}}+\lim_{k\rightarrow \infty} \frac{1}{a_{n_k-1}}
   \\
   &=\frac{1}{l_2}+\frac{1}{l_3}\geqslant \frac{1}{A}+\frac{1}{A}=\frac{2}{A}=B\Rightarrow l_2=l_3=A.
   \end{align*}
   故$A=B=l_1=l_2=l_3$,又由于$AB=2$,因此$\underset{n\rightarrow \infty}{{\varlimsup }}a_n=\underset{n\rightarrow \infty}{{\varliminf }}a_n=A=B=\sqrt{2}$.即$\underset{n\rightarrow \infty}{\lim}a_n=\sqrt{2}$.
   
   \item 
   \end{enumerate}    
   \end{proof}
   \begin{remark}
   \begin{enumerate}
   \item 
   \begin{enumerate}[(1)]
   \item  \label{example3.24(1)}
   取$a=\min \left\{ a_1,a_2,\frac{2}{a_1},\frac{2}{a_2} \right\}$的原因:为了证明数列${a_n}$有界,我们需要先定界,然后再利用数学归纳法证得数列${a_n}$有界.显然${a_n}$有一个下界0,但上界无法直接观察出来.为了确定出数列${a_n}$的上下界,我们可以先假设$b$为数列${a_n}$的一个上界(此时$b$是待定常数),但是我们根据$a_n>0$和$a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}$只能得到$a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}<+\infty$,无法归纳法出$a_n\leq b$,故我们无法归纳出$0<a_n<b,\forall n\in\mathbb{N}_+$.因此仅待定一个上界并不够,下界并不能简单的取为0,我们还需要找到一个更接近下确界的大于零的下界,不妨先假设这个下界为$a>0$(此时$a$也是待定常数).利用这个下界和递推式$a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}$归纳出$0<a\leq a_n\leq b,\forall n\in\mathbb{N}_+$(此时$a,b$都是待定常数).于是由已知条件可得
   \begin{gather*}
   a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}\leqslant \frac{1}{a}+\frac{1}{a}=\frac{2}{a}\leqslant b\Rightarrow ab\geqslant 2,
   \\
   a_{n+2}=\frac{1}{a_{n+1}}+\frac{1}{a_n}\geqslant \frac{1}{b}+\frac{1}{b}=\frac{2}{b}\geqslant a\Rightarrow ab\leqslant 2.
   \end{gather*}
   从而$ab=2$,即$b=\frac{2}{a}$.进而$0<a\leq a_n\leq\frac{2}{a}$.又由数学归纳法的原理,可知我们需要同时保证$0<a\leq a_1,a_2\leq \frac{2}{a}$.因此找到一个合适的$a$,使得$0<a\leq a_1,a_2\leq \frac{2}{a}$成立就一定能归纳出$0<a\leq a_n\leq \frac{2}{a},\forall n\in\mathbb{N}_+$,即数列$\{a_n\}$有界.而当我们取$a=\min \left\{ a_1,a_2,\frac{2}{a_1},\frac{2}{a_2} \right\}$时,有$a_1,a_2\leqslant a,\,\,\frac{2}{a}\ge \frac{2}{\frac{2}{a_1}}=a_1,\,\,\frac{2}{a}\ge \frac{2}{\frac{2}{a_2}}=a_2.$恰好满足这个条件.
      
   \item \label{example3.24(2)}能取到一个子列$a_{n_k}$,使得$\lim_{k\rightarrow \infty} a_{n_k+2}=A,\lim_{k\rightarrow \infty} a_{n_k+1}=l_1<\infty,\lim_{k\rightarrow \infty} a_{n_k}=l_2<\infty,\lim_{k\rightarrow \infty} a_{n_k-1}=l_3<\infty$成立的原因:
   由$A=\underset{n\rightarrow \infty}{{\varlimsup}}a_n$和上极限的定义(上极限就是最大的子列极限),可知存在一个子列$\{a_{n_k}\}$,使得$\lim_{k\rightarrow \infty} a_{n_k+2}=A$.因为数列$\{a_{n_k+1}\}$有界(因为数列$\{a_n\}$有界),所以由致密性定理可知$\{a_{n_k+1}\}$一定存在一个收敛的子列$\{a_{n_{k_j}+1}\}$,并记$\lim_{j\rightarrow \infty} a_{n_{k_j}+1}=l_1<\infty$.又因为$\{a_{n_{k_j}+2}\}$是$\{a_{n_{k}+2}\}$的子列,所以$\lim_{k\rightarrow \infty} a_{n_{k_j}+2}=A$.由于$\{a_{n_{k_j}}\}$仍是$\{a_n\}$的一个子列,因此不妨将$\{a_{n_{k_j}}\}$记作$\{a_{n_k}\}$,则此时有$\lim_{k\rightarrow \infty} a_{n_k+2}=A,\lim_{k\rightarrow \infty} a_{n_k+1}=l_1<\infty$.同理由于数列$\{a_{n_k}\}$有界,所以由致密性定理可知$\{a_{n_k}\}$存在一个收敛的子列$\{a_{n_{k_l}}\}$,并记$\lim_{l\rightarrow \infty} a_{n_{k_l}}=l_2$.又因为$\{a_{n_{k_l}+2}\}$是$\{a_{n_{k}+2}\}$的子列,$\{a_{n_{k_l}+1}\}$是$\{a_{n_{k}+1}\}$的子列,所以$\lim_{l\rightarrow \infty} a_{n_{k_l}+2}=A,\lim_{l\rightarrow \infty} a_{n_{k_l}+1}=l_1$.由于$\{a_{n_{k_l}}\}$仍是$\{a_n\}$的一个子列,因此不妨将$\{a_{n_{k_l}}\}$记作$\{a_{n_k}\}$,则此时有$\lim_{k\rightarrow \infty} a_{n_k+2}=A,\lim_{k\rightarrow \infty} a_{n_k+1}=l_1<\infty,\lim_{k\rightarrow \infty} a_{n_k}=l_2<\infty$.再同理由于数列$\{a_{n_k}\}$有界,所以由致密性定理可知$\{a_{n_k}\}$存在一个收敛的子列$\{a_{n_{k_s}}\}$,并记$\lim_{s\rightarrow \infty} a_{n_{k_s}}=l_3$.又因为$\{a_{n_{k_s}+2}\}$是$\{a_{n_{k}+2}\}$的子列,$\{a_{n_{k_s}+1}\}$是$\{a_{n_{k}+1}\}$的子列,$\{a_{n_{k_s}}\}$是$\{a_{n_{k}}\}$的子列,所以$\lim_{s\rightarrow \infty} a_{n_{k_s}+2}=A,\lim_{s\rightarrow \infty} a_{n_{k_s}+1}=l_1,\lim_{s\rightarrow \infty} a_{n_{k_s}}=l_2$.由于$\{a_{n_{k_s}}\}$仍是$\{a_n\}$的一个子列,因此不妨将$\{a_{n_{k_s}}\}$记作$\{a_{n_k}\}$,则此时有$\lim_{k\rightarrow \infty} a_{n_k+2}=A,\lim_{k\rightarrow \infty} a_{n_k+1}=l_1<\infty,\lim_{k\rightarrow \infty} a_{n_k}=l_2<\infty,\lim_{k\rightarrow \infty} a_{n_k-1}=l_3<\infty$.
\end{enumerate}
   \item 
\end{enumerate}
\end{remark}


\subsection{压缩映像}
我们来看一种重要的处理模型,压缩映像方法,它是我们以后解决基础题的重要方法.其思想内核有两种,一种是找到不动点\(x_0\),然后得到某个\(L\in(0,1)\),使得
\[
|x_n - x_0|\leq L|x_{n - 1} - x_0|\leq\cdots\leq L^{n - 1}|x_1 - x_0|.
\]
还有一种是得到某个\(L\in(0,1)\),使得
\[
|x_n - x_{n - 1}|\leq L|x_{n - 1} - x_{n - 2}|\leq\cdots\leq L^{n - 2}|x_2 - x_1|.
\]
当数列由递推确定时,我们有
\[
|x_n - x_0| = |f(x_{n - 1}) - f(x_0)|,|x_n - x_{n - 1}| = |f(x_{n - 1}) - f(x_{n - 2})|,
\]
因此往往可适用中值定理或者直接放缩法来得到渴望的\(L\in(0,1)\),特别强调\(L = 1\)是不对的.
\begin{note}
   常规的递减递推数列求极限问题我们一般使用压缩映像证明.压缩映像的书写过程往往比用递推函数的二次复合和数学归纳法的书写要简便的多.
\end{note}
\begin{example}
\begin{enumerate}
   \item 设\(x_1 > - 1,x_{n + 1} = \frac{1}{1 + x_n},n = 1,2,\cdots\),求极限\(\lim_{n \to \infty} x_n\).
   \item 求数列\(\sqrt{7},\sqrt{7 - \sqrt{7}},\sqrt{7 - \sqrt{7 + \sqrt{7}}},\cdots\)极限.
\end{enumerate}
\end{example}
\begin{solution}
\begin{enumerate}
   \item 
   {\color{blue}解法一(\hyperref[proposition:递减函数递推数列]{递减递推归纳法}):}
   不妨设$x_1>0$(因为$x_2=\frac{1}{1+x_1}>0$),归纳可知$x_n>0$.由于原递推函数是递减函数,因此考虑递推函数的二次复合$x_{n+2}=\frac{1}{1+\frac{1}{1+x_n}}=\frac{1+x_n}{2+_n}$,这个递推函数一定是单调递增的.进而考虑
   \begin{align*}
      \frac{1+x}{2+x}-x=\frac{\left( x+\frac{\sqrt{5}+1}{2} \right) \left( \frac{\sqrt{5}-1}{2}-x \right)}{2+x}.
   \end{align*}
于是当$x_1\geq \frac{\sqrt{5}-1}{2}$时,有$x_3-x_1=\frac{1+x_1}{2+x_1}-x_1\leqslant 0$,即$x_3\leqslant x_1$.从而由\hyperref[proposition:递增函数递推数列]{递增递推结论}可知,$\{x_{2n-1}\}$单调递减且$x_{2n-1}>\frac{\sqrt{5}-1}{2},\forall n \in \mathbb{N}_+$.此时\(x_2<\frac{\sqrt{5}-1}{2}\)(由\(x = \frac{1}{1 + x}\)以及$x_n>0$可以解得不动点\(x_0=\frac{\sqrt{5}-1}{2}\),又因为原数列是递减递推,所以\(x_n\)与\(x_0\)大小关系交错.而\(x_1\geqslant\frac{\sqrt{5}-1}{2}\),故\(x_2<\frac{\sqrt{5}-1}{2}\)).
于是\(x_4 - x_2=\frac{1 + x_2}{2 + x_2}-x_2>0\),即\(x_4>x_2\).从而由\hyperref[proposition:递增函数递推数列]{递增递推结论}可知,\(\{x_{2n}\}\)单调递增且\(x_{2n}>\frac{\sqrt{5}-1}{2}\),\(\forall n\in\mathbb{N}_+\).

因此由单调有界定理可知,$\{x_{2n}\},\{x_{2n-1}\}$收敛.设$\underset{n\rightarrow \infty}{\lim}x_{2n}=a>0,\underset{n\rightarrow \infty}{\lim}x_{2n-1}=b>0$.又由$x_{2n}=\frac{1}{1+x_{2n}},x_{2n-1}=\frac{1}{1+x_{2n-1}},\forall n\in \mathbb{N}_+$,再令$n\to \infty$,可得$a=\frac{1}{1+a},b=\frac{1}{1+b}$,进而解得$a=b=\frac{\sqrt{5}-1}{2}$.故$\underset{n\rightarrow \infty}{\lim}x_n=\underset{n\rightarrow \infty}{\lim}x_{2n}=\underset{n\rightarrow \infty}{\lim}x_{2n-1}=\frac{\sqrt{5}-1}{2}$.
同理,当$x_1<\frac{\sqrt{5}-1}{2}$时,也有$\underset{n\rightarrow \infty}{\lim}x_n=\frac{\sqrt{5}-1}{2}$.

{\color{blue}解法二(压缩映像):}不妨设$x_1>0$(用$x_2=\frac{1}{1+x_1}>0$代替$x_1$),归纳可知$x_n>0$.设$x=\frac{\sqrt{5}-1}{2}$,则
\begin{align*}
   \left| x_{n+1}-x \right|=\left| \frac{1}{1+x_n}-x \right|=\left| \frac{1}{1+x_n}-\frac{1}{1+x} \right|=\frac{\left| x_n-x \right|}{\left( 1+x_n \right) \left( 1+x \right)}\leqslant \frac{1}{1+x}\left| x_n-x \right|.
\end{align*}
从而
\begin{align*}
   \left| x_{n+1}-x \right|\leqslant \frac{1}{1+x}\left| x_n-x \right|\leqslant \frac{1}{\left( 1+x \right) ^2}\left| x_{n-1}-x \right|\leqslant \cdots \leqslant \frac{1}{\left( 1+x \right) ^n}\left| x_1-x \right|.
\end{align*}
于是令$n\to\infty$,得到$\underset{n\rightarrow \infty}{\lim}\left| x_{n+1}-x \right|=0$,因此$\underset{n\rightarrow \infty}{\lim}x_n=x=\frac{\sqrt{5}-1}{2}$.

\item 由条件可知,\(x_{n + 2}=\sqrt{7-\sqrt{7 + x_n}}\),\(\forall n\in\mathbb{N}_+\)(由此可解得\(x = 2\)为不动点).于是
\begin{align*}
\vert x_{n + 2}-2\vert&=\vert\sqrt{7-\sqrt{7 + x_n}}-2\vert
=\frac{\vert 3-\sqrt{7 + x_n}\vert}{\sqrt{7-\sqrt{7 + x_n}}+2}\\
&=\frac{\vert 2 - x_n\vert}{(\sqrt{7-\sqrt{7 + x_n}}+2)(3+\sqrt{7 + x_n})}
\leqslant\frac{1}{6}\vert x_n - 2\vert.
\end{align*}
从而对$\forall n \in \mathbb{N}_+$,都有
\begin{align*}
\vert x_{2n}-2\vert&\leqslant\frac{1}{6}\vert x_{2n - 2}-2\vert\leqslant\frac{1}{6^2}\vert x_{2n - 4}-2\vert\leqslant\cdots\leqslant\frac{1}{6^{n - 1}}\vert x_2 - 2\vert;\\
\vert x_{2n + 1}-2\vert&\leqslant\frac{1}{6}\vert x_{2n - 1}-2\vert\leqslant\frac{1}{6^2}\vert x_{2n - 3}-2\vert\leqslant\cdots\leqslant\frac{1}{6^n}\vert x_1 - 2\vert.
\end{align*}
上式两边同时令\(n\rightarrow\infty\),得到\(\lim_{n\rightarrow\infty}\vert x_{2n}-2\vert=\lim_{n\rightarrow\infty}\vert x_{2n + 1}-2\vert = 0\).因此\(\lim_{n\rightarrow\infty}x_n=\lim_{n\rightarrow\infty}x_{2n}=\lim_{n\rightarrow\infty}x_{2n + 1}=2\).
\end{enumerate}
\end{solution}

\begin{example}
   设数列\(x_1\in\mathbb{R},x_{n + 1} = \cos x_n,n\in\mathbb{N}\),求\(\lim_{n \to \infty} x_n\).
\end{example}
\begin{solution}
   令\(g(x)=x - \cos x\),则\(g^\prime(x)=1 + \sin x\geqslant0\),且\(g^\prime(x)\)不恒等于\(0\).
又\(g(0)= -1 < 0\),\(g(1)=1 - \cos 1 > 0\),因此由零点存在定理可知,\(g\)存在唯一零点\(x_0\in(0,1)\).
不妨设\(x_1\in[-1,1]\)(用\(x_2\)代替\(x_1\)),则\(x_n\in[-1,1]\).再令\(f(x)=\cos x\),则\(f^\prime(x)=-\sin x\).于是记\(C\triangleq \max_{x\in[-1,1]}\vert f^\prime(x)\vert\in(0,1)\).

故由Lagrange中值定理,可得存在\(\theta_n\in(\min\{x_n,x_0\},\max\{x_n,x_0\})\),使得对\(\forall n\in\mathbb{N}_+\),都有
\[
\vert x_{n + 1}-x_0\vert=\vert f(x_n)-f(x_0)\vert=\vert f^\prime(\theta_n)\vert\vert x_n - x_0\vert\leqslant C\vert x_n - x_0\vert.
\]
进而对\(\forall n\in\mathbb{N}_+\),都有
\[
\vert x_{n + 1}-x_0\vert\leqslant C\vert x_n - x_0\vert\leqslant C^2\vert x_{n - 1}-x_0\vert\leqslant\cdots\leqslant C^n\vert x_1 - x_0\vert.
\]
上式两边同时令\(n\rightarrow\infty\),再结合\(C\in(0,1)\),可得\(\lim_{n\rightarrow\infty}\vert x_{n + 1}-x_0\vert = 0\).即\(\lim_{n\rightarrow\infty}x_n = x_0\).
\end{solution}

\begin{proposition}[加强的压缩映像]\label{proposition:加强的压缩映像}
   设可微函数\(f:[a,b]\to[a,b]\)满足\(\vert f'(x)\vert<1,\forall x\in[a,b]\).证明:对
   \[
   x_1\in[a,b],x_{n + 1} = f(x_n),n\in\mathbb{N},
   \]
   必有\(\lim_{n \to \infty} x_n\)存在.  
\end{proposition}
\begin{remark}
   注意到\(f'\)未必是连续函数,所以\(\sup_{x\in[a,b]}\vert f'(x)\vert\)未必可以严格小于\(1\).
\end{remark}
\begin{note}
   实际上,用压缩映像证明$\{x_n\}$的极限是$x_0$,也同时蕴含了$x_0$就是这个递推数列的唯一不动点(反证易得).
\end{note}
\begin{proof}
令\(g(x)=x - f(x)\),则\(g(a)=a - f(a)\leqslant0\),\(g(b)=b - f(b)\geqslant0\).由零点存在定理可知,存在\(x_0\in[a,b]\),使得\(x_0 = f(x_0)\).
令\(h(x)=\begin{cases}
\frac{f(x) - f(x_0)}{x - x_0},&x\neq x_0\\
f^\prime(x_0),&x = x_0
\end{cases}\),则由导数定义可知\(h\in C[a,b]\).又由\(\vert f^\prime(x)\vert<1\),\(\forall x\in[a,b]\),可知\(\vert h(x_0)\vert<1\).
对\(\forall x\neq x_0\),由Lagrange中值定理可知
\[
\vert h(x)\vert=\left\vert\frac{f(x) - f(x_0)}{x - x_0}\right\vert=\vert f^\prime(\theta_x)\vert<1,\quad\theta_x\in(\min\{x,x_0\},\max\{x,x_0\})
\]
故\(\vert h(x)\vert<1\),\(\forall x\in[a,b]\).于是记\(L\triangleq\max_{x\in[a,b]}\vert h(x)\vert\in(0,1)\).因此再由\(Lagrange\)中值定理可得,对\(\forall n\in\mathbb{N}_+\),都有
\[
\vert x_{n + 1}-x_0\vert=\vert f(x_n) - f(x_0)\vert=\vert f^\prime(\xi_n)\vert\vert x_n - x_0\vert,\quad\xi_n\in(\min\{x_n,x_0\},\max\{x_n,x_0\})
\]
从而对\(\forall n\in\mathbb{N}_+\),都有
\[
\vert f^\prime(\xi_n)\vert=\left\vert\frac{f(x_n) - f(x_0)}{x_n - x_0}\right\vert=\vert h(x_n)\vert\leqslant L
\]
进而对\(\forall n\in\mathbb{N}_+\),都有
\[
\vert x_{n + 1}-x_0\vert=\vert f^\prime(\xi_n)\vert\vert x_n - x_0\vert\leqslant L\vert x_n - x_0\vert\leqslant L^2\vert x_{n - 1}-x_0\vert\leqslant\cdots\leqslant L^n\vert x_1 - x_0\vert
\]
上式两边同时令\(n\rightarrow\infty\),则\(\lim_{n\rightarrow\infty}\vert x_{n + 1}-x_0\vert = 0\).即\(\lim_{n\rightarrow\infty}x_n = x_0\).
\end{proof}

\begin{proposition}[反向压缩映像]\label{proposition:反向压缩映像}
设\(x_{n + 1} = f(x_n),n\in\mathbb{N}\)满足
\[
\lim_{n \to \infty} x_n = a\in\mathbb{R},x_n\neq a,\forall n\in\mathbb{N},
\]
证明:若\(f\)在\(x = a\)可导,则\(\vert f'(a)\vert\leq 1\).
\end{proposition}
\begin{proof}
   (反证法)假设\(\vert f^\prime(a)\vert > 1\),由导数定义及极限保号性可知,存在\(r > 1\),\(\delta > 0\),使得
   \[
   \left\vert\frac{f(x) - f(a)}{x - a}\right\vert\geqslant r > 1, \quad\forall x\in [a - \delta, a + \delta].
   \]
   即
   \[
   \vert f(x) - f(a)\vert\geqslant r\vert x - a\vert, \quad\forall x\in [a - \delta, a + \delta].
   \]
   因为\(f\)在\(x = a\)可导以及\(\lim_{n\rightarrow\infty}x_n = a\),所以由\(Heine\)归结原则可知\(\lim_{n\rightarrow\infty}f(x_n) = f(a)\).又\(x_{n + 1} = f(x_n)\),\(\forall n\in\mathbb{N}_+\),从而等式两边同时令\(n\rightarrow\infty\),可得\(a = f(a)\).
   由于\(\lim_{n\rightarrow\infty}\vert x_n - a\vert = 0\),因此存在\(N\in\mathbb{N}\),使得对\(\forall n\geqslant N\),有
   \[
   \vert x_{n + 1} - a\vert = \vert f(x_n) - f(a)\vert\geqslant r\vert x_n - a\vert.
   \]
   故对\(\forall n\geqslant N\),有
   \[
   \vert x_{n + 1} - a\vert\geqslant r\vert x_n - a\vert\geqslant r^2\vert x_{n - 1} - a\vert\geqslant\cdots\geqslant r^n\vert x_1 - x_0\vert.
   \]
   上式两边同时令\(n\rightarrow\infty\),得到\(\lim_{n\rightarrow\infty}\vert x_{n + 1} - a\vert = +\infty\),矛盾.
\end{proof}


\subsection{利用不等放缩求递推数列极限}

\begin{example}
   对\(x\geq0\)，定义\(y_n(x)=\sqrt[n]{[x[x\cdots[x]\cdots]]}\)，这里一共\(n\)层取整，求极限\(\lim_{n\rightarrow\infty}y_n(x)\).
   \end{example}
   \begin{note}
      这里求极限运用了递推的想法找关系，如果直接对取整函数用不等式放缩，只能得到\(x - 1<y_n(x)\leq x\)，这没什么用处，因为放缩太粗糙了.
   
      实际上,由Stolz定理可知,数列$\frac{1}{n}$次幂的极限与其相邻两项项除的极限近似相等.
   \end{note}
   \begin{solution}
      显然\(x\in[0,1)\)时\(y_n(x)=0\),\(x\in[1,2)\)时\(y_n(x)=1\),这两个式子对任意\(n\)都成立，下面来看\(x\geq2\)时的极限.
      
      令\(u_n(x) = (y_n(x))^n=\overbrace{[x[\cdots [x]\cdots ]]}^{n\text{次复合}}\geqslant 0\)，由于单调递增函数的复合仍是单调递增函数，且\([x]\)在\([0, +\infty)\)上单调递增，故\(u_n(x)\)在\([0, +\infty)\)上单调递增。
      从而由\(u_n(x)\)的单调性可得
      \[
      u_n(x) \geqslant u_n(2)=\overbrace{[2[\cdots [2]\cdots ]]}^{n\text{次复合}} = 2^n\rightarrow \infty, n\rightarrow \infty.
      \]
      再结合\([x]\)的基本不等式:$x-1<\left[ x \right] \leqslant x$可知
   \begin{align*}
      &xu_{n-1}(x)-1\le u_n(x)=[xu_{n-1}(x)]\le xu_{n-1}(x),\forall x\ge 2.
      \\
      \Rightarrow &1-\frac{1}{u_{n-1}(x)}\le \frac{u_n(x)}{u_{n-1}(x)}\le x\Rightarrow \lim_{n\rightarrow \infty} \frac{u_n(x)}{u_{n-1}(x)}=x,\forall x\ge 2.
   \end{align*}
   再根据Stolz公式有
   \begin{align*}
      \lim_{n\rightarrow \infty} y_n(x)=\lim_{n\rightarrow \infty} u_n(x)^{\frac{1}{n}}=e^{\lim\limits_{n\rightarrow \infty} \frac{\ln u_n(x)}{n}}=e^{\lim\limits_{n\rightarrow \infty} [\ln u_n(x)-\ln u_{n-1}(x)]}=\lim_{n\rightarrow \infty} \frac{u_n(x)}{u_{n-1}(x)}=x.
   \end{align*}
   因此
   \[ 
   \lim_{n\rightarrow\infty}y_n(x)=
   \begin{cases}
   0, & x\in[0,1)\\
   1, & x\in[1,2)\\
   x, & x\geq2
   \end{cases}
   \]
\end{solution}
   

\subsection{可求通项和强求通项}

\subsubsection{三角换元求通项}

先来看能够直接构造出数列通项的例子.这类问题只能靠记忆积累.找不到递推数列通项就很难处理.一般我们可以猜递推数列通项就是三角函数或\href{https://baike.baidu.com/item/%E5%8F%8C%E6%9B%B2%E5%87%BD%E6%95%B0/8704306}{双曲三角函数}的形式,再利用三角函数或\href{https://baike.baidu.com/item/%E5%8F%8C%E6%9B%B2%E5%87%BD%E6%95%B0/8704306}{双曲三角函数}的性质递推归纳.

\begin{example}
设\(a_1\in(0,1)\),\(a_{n + 1}=\sqrt{\frac{1 + a_n}{2}}\),\(n = 1,2,\cdots\),求\(\lim_{n\rightarrow\infty}a_1a_2\cdots a_n\).
\end{example}
\begin{note}
   本题是经典的例子,注意此类问题如果不能求出通项就无法求出具体值,本题便是一个能求出通项从而算出极限值的经典例子.
\end{note}
\begin{remark}
   这类问题只能靠记忆积累.
\end{remark}
\begin{solution}
利用
\[
\cos\frac{\theta}{2}=\sqrt{\frac{1 + \cos\theta}{2}},\theta\in\mathbb{R},
\]
因为$a_1\in (0,1)$,所以一定存在$\theta\in(0,\frac{\pi}{2})$,使得\(a_1=\cos\theta\).则$\theta=\arccos a_1,\sin\theta=\sqrt{1-a_1^2}$.并且由\(a_{n + 1}=\sqrt{\frac{1 + a_n}{2}}\),\(n = 1,2,\cdots\)可得
\[
a_2=\cos\frac{\theta}{2},a_3=\cos\frac{\theta}{2^2},\cdots,a_n=\cos\frac{\theta}{2^{n - 1}}.
\]
因此
\begin{align*}
\lim_{n\rightarrow\infty}a_1a_2\cdots a_n&=\lim_{n\rightarrow\infty}\prod_{k = 0}^{n - 1}\cos\frac{\theta}{2^k}=\lim_{n\rightarrow\infty}\frac{\sin\frac{\theta}{2^{n - 1}}}{\sin\frac{\theta}{2^{n - 1}}}\prod_{k = 0}^{n - 1}\cos\frac{\theta}{2^k}=\lim_{n\rightarrow\infty}\frac{\sin\frac{\theta}{2^{n - 2}}}{2\sin\frac{\theta}{2^{n - 1}}}\prod_{k = 0}^{n - 2}\cos\frac{\theta}{2^k}\\
&=\cdots=\lim_{n\rightarrow\infty}\frac{\sin2\theta}{2^n\sin\frac{\theta}{2^{n - 1}}}=\frac{\sin2\theta}{2\theta}=\frac{\sin(2\arccos a_1)}{2\arccos a_1}=\frac{a_1\sqrt{1 - a_1^2}}{\arccos a_1}.
\end{align*}
\end{solution}

\begin{example}
   设\(x_1 = \sqrt{5}\),\(x_{n + 1}=x_{n}^{2}-2\),计算
\[
\lim_{n\rightarrow\infty}\frac{x_1x_2\cdots x_n}{x_{n + 1}}.
\]
\end{example}
\begin{note}
   这类问题只能靠记忆积累.找不到递推数列通项就很难处理.一般我们可以猜递推数列通项就是三角函数/双曲三角函数的形式,再利用三角函数/双曲三角函数的性质递推归纳.
\end{note}
\begin{solution}
注意到\(\cos x=\frac{\sqrt{5}}{2}\)在\(\mathbb{R}\)上无解,因此推测类似的\href{https://baike.baidu.com/item/%E5%8F%8C%E6%9B%B2%E5%87%BD%E6%95%B0/8704306}{双曲三角函数}可以做到.
设\(x_1 = 2\cosh\theta,\theta\in(0,+\infty)\). 利用
\[
\cosh x=2\cosh^{2}\frac{x}{2}-1,\forall x\in\mathbb{R},
\]
我们归纳可证
\[
x_n=2\cosh(2^{n - 1}\theta),n = 1,2,\cdots.
\]
于是利用\(\sinh(2x)=2\sinh x\cosh x,\forall x\in\mathbb{R}\),我们有
\begin{align*}
\lim_{n\rightarrow\infty}\frac{x_1x_2\cdots x_n}{x_{n + 1}}&=\lim_{n\rightarrow\infty}\frac{2^{n}\prod\limits_{k = 0}^{n - 1}\cosh(2^{k}\theta)}{2\cosh(2^{n}\theta)}=\lim_{n\rightarrow\infty}\frac{2^{n}\sinh\theta\prod\limits_{k = 0}^{n - 1}\cosh(2^{k}\theta)}{2\sinh\theta\cosh(2^{n}\theta)}=\lim_{n\rightarrow\infty}\frac{2^{n - 1}\sinh(2\theta)\prod\limits_{k = 1}^{n - 1}\cosh(2^{k}\theta)}{2\sinh\theta\cosh(2^{n}\theta)}\\
&=\lim_{n\rightarrow\infty}\frac{2^{n - 2}\sinh(2^{2}\theta)\prod\limits_{k = 2}^{n - 1}\cosh(2^{k}\theta)}{2\sinh\theta\cosh(2^{n}\theta)}=\lim_{n\rightarrow\infty}\frac{\sinh2^{n}\theta}{2\sinh\theta\cosh(2^{n}\theta)}=\lim_{n\rightarrow\infty}\frac{\tanh2^{n}\theta}{2\sinh\theta}=\frac{1}{2\sinh\theta}=1,
\end{align*}
这里倒数第二个等号来自\(\lim_{x\rightarrow+\infty}\tanh x = 1\).
\end{solution}

\begin{example}
   设\(a_1 = 3,a_n=2a_{n - 1}^{2}-1,n = 2,3,\cdots\),则计算
   \[
   \lim_{n\rightarrow\infty}\frac{a_n}{2^n a_1a_2\cdots a_{n - 1}}.
   \]
\end{example}
\begin{remark}
   因为双曲三角函数\(\cosh x\)在\((0, +\infty)\)上的值域为\((1, +\infty)\),并且\(\cosh x\)在\((0, +\infty)\)上严格递增,所以一定存在唯一的\(\theta \in (0, +\infty)\),使得\(a_1 = \cosh\theta = 3\).
\end{remark}
\begin{proof}
   设\(a_1 = \cosh\theta=3, \theta \in (0, +\infty)\).则利用\(\cosh 2\theta = 2\cosh^2\theta - 1\),再结合条件归纳可得
   \[
   a_n = 2a_{n - 1}^{2} - 1 = \cosh 2^{n - 1}\theta, \quad n = 2, 3, \cdots.
   \]
   于是
   \begin{align*}
   \lim_{n\rightarrow \infty} \frac{a_n}{2^na_1a_2\cdots a_{n - 1}}
   &=\lim_{n\rightarrow \infty} \frac{\cosh 2^{n - 1}\theta}{2^n\prod\limits_{k = 1}^{n - 1}{\cosh 2^{k - 1}\theta}}
   =\lim_{n\rightarrow \infty} \frac{\sinh\theta\cosh 2^{n - 1}\theta}{2^n\sinh\theta\prod\limits_{k = 1}^{n - 1}{\cosh 2^{k - 1}\theta}}\\
   &=\lim_{n\rightarrow \infty} \frac{\sinh\theta\cosh 2^{n - 1}\theta}{2^{n - 1}\sinh 2\theta\prod\limits_{k = 2}^{n - 1}{\cosh 2^{k - 1}\theta}}
   =\cdots
   =\lim_{n\rightarrow \infty} \frac{\sinh\theta\cosh 2^{n - 1}\theta}{2\sinh 2^{n - 1}\theta}\\
   &=\lim_{n\rightarrow \infty} \frac{\sinh\theta}{2\tanh 2^{n - 1}\theta}
   \xlongequal{\lim\limits_{n\rightarrow \infty} \tanh 2^{n - 1}\theta = 1}\frac{\sinh\theta}{2}=\frac{\sqrt{\cosh ^2\theta -1}}{2}=\sqrt{2}.
   \end{align*}
\end{proof}

\begin{example}
   设\(y_0\geq2,y_n=y_{n - 1}^{2}-2,n\in\mathbb{N}\),计算\(\sum_{n = 0}^{\infty}\frac{1}{y_0y_1\cdots y_n}\).
\end{example}
\begin{note}
   关于求和的问题,要注意求和的通项能否凑成相邻两项相减的形式,从而就能直接求和消去中间项,进而将求和号去掉.
\end{note}
\begin{remark}
   因为双曲三角函数\(2\cosh x\)在\((0, +\infty)\)上的值域为\((1, +\infty)\),并且\(2\cosh x\)在\((0, +\infty)\)上严格递增,所以一定存在唯一的\(\theta \in (0, +\infty)\),使得\(y_0 = 2\cosh\theta \geq 2\).
\end{remark}
\begin{proof}
   设\(y_0 = 2\cosh\theta, \theta \in (0, +\infty)\),则利用\(\cosh 2\theta = 2\cosh^2\theta - 1\),再结合条件归纳可得
\begin{align*}
y_1&=y_{0}^{2}-2 = 4\cosh^2\theta - 2 = 2(2\cosh^2\theta - 1) = 2\cosh 2\theta,\\
y_2&=y_{1}^{2}-2 = 4\cosh^22\theta - 2 = 2(2\cosh^22\theta - 1) = 2\cosh 2^2\theta,\\
&\cdots\cdots\\
y_n&=y_{n - 1}^{2}-2 = 4\cosh^22^{n - 1}\theta - 2 = 2(2\cosh^22^{n - 1}\theta - 1) = 2\cosh 2^n\theta,\\
&\cdots\cdots
\end{align*}
于是
\begin{align*}
\sum_{n=0}^{\infty}{\frac{1}{y_0y_1\cdots y_n}}&=\sum_{n=0}^{\infty}{\frac{1}{\prod\limits_{k=0}^n{2^{n+1}\cosh 2^k\theta}}}=\sum_{n=0}^{\infty}{\frac{\sinh \theta}{2^{n+1}\sinh \theta \prod\limits_{k=0}^n{\cosh 2^k\theta}}}
\\
&=\sum_{n=0}^{\infty}{\frac{\sinh \theta}{2^n\sinh 2\theta \prod\limits_{k=1}^n{\cosh 2^k\theta}}}=\cdots =\sum_{n=0}^{\infty}{\frac{\sinh \theta}{\sinh 2^{n+1}\theta}}
\\
&=2\sinh \theta \sum_{n=0}^{\infty}{\frac{1}{e^{2^{n+1}\theta}-e^{-2^{n+1}\theta}}}=2\sinh \theta \sum_{n=0}^{\infty}{\frac{e^{2^{n+1}\theta}}{e^{2^{n+2}\theta}-1}}
\\
&=2\sinh \theta \sum_{n=0}^{\infty}{\left( \frac{1}{e^{2^{n+1}\theta}-1}-\frac{1}{e^{2^{n+2}\theta}-1} \right)}=\frac{2\sinh \theta}{e^{2\theta}-1}
\\
&=\frac{e^{\theta}-e^{-\theta}}{e^{\theta}\left( e^{\theta}-e^{-\theta} \right)}=e^{-\theta}=\cosh \theta -\sinh \theta 
\\
&=\frac{y_0}{2}-\sqrt{\cosh ^2\theta -1}=\frac{y_0}{2}-\sqrt{\frac{y_{0}^{2}}{4}-1}.
\end{align*}
\end{proof}

\subsubsection{凑出可求通项的递推数列}

利用比值换元等方法,可以将原本不能直接求通项的递推数列转化成可三角换元或用高中方法求通项的递推数列.求出通项后,后续问题就很简单了.

\begin{example}
设\(a > b>0\)，定义\(a_0 = a\)，\(b_0 = b\)，\(a_{n + 1}=\frac{a_n + b_n}{2}\)，\(b_{n + 1}=\frac{2a_nb_n}{a_n + b_n}\)，求\(\lim_{n\rightarrow\infty}a_n\)，\(\lim_{n\rightarrow\infty}b_n\)。
\end{example}
\begin{remark}
   这是算数-调和平均数数列，与算术-几何平均不同，这个通项以及极限值都可以求出来.
\end{remark}\begin{note}
   \(x_{n + 1}=\frac{1}{2}\left(x_n+\frac{1}{x_n}\right)\)是一个经典的可求通项的递推数列(高中学过),处理方法必须掌握.即先求解其特征方程,然后用$x_{n+1}$分别减去两个特征根再作商,再将递推式代入这个分式,反复递推得到一个等比数列,进而得到$x_n$的通项.具体步骤见下述证明.
\end{note}
\begin{proof}
   由条件可得
\[
a_{n + 1}=\frac{a_n + b_n}{2},b_{n + 1}=\frac{2a_nb_n}{a_n + b_n}=\frac{a_nb_n}{a_{n + 1}}\Rightarrow a_{n + 1}b_{n + 1}=a_nb_n=\cdots =a_0b_0 = ab.
\]
因此 \(a_{n + 1}=\frac{1}{2}\left(a_n+\frac{ab}{a_n}\right)\)。令 \(a_n=\sqrt{ab}x_n,x_0=\sqrt{\frac{a}{b}}>1\)，则 \(x_{n + 1}=\frac{1}{2}\left(x_n+\frac{1}{x_n}\right),\forall n\in \mathbb{N}_+\)。从而
\begin{align*}
\frac{x_{n + 1}-1}{x_{n + 1}+1}=\frac{\frac{x_{n + 1}^2 - 1}{2x_{n + 1}}}{\frac{x_{n + 1}^2 + 1}{2x_{n + 1}}}
=\frac{(x_n - 1)^2}{(x_n + 1)^2}
=\cdots
=\left(\frac{x_0 - 1}{x_0 + 1}\right)^{2^{n + 1}}\Rightarrow \frac{x_n - 1}{x_n + 1}=C^{2^n},C=\frac{x_0 - 1}{x_0 + 1}\in(0,1).
\end{align*}
于是 \(x_n=\frac{1 + C^{2^n}}{1 - C^{2^n}}\)。再由 \(a_n=\sqrt{ab}x_n\) 可得
\[
a_n=\sqrt{ab}\frac{1 + C^{2^n}}{1 - C^{2^n}}\rightarrow\sqrt{ab},n\rightarrow\infty.
\]
\[
b_n=\frac{ab}{a_n}\rightarrow\sqrt{ab},n\rightarrow\infty.
\]
\end{proof}

\begin{example}\label{example-4.54112}
设\(a_{n + 1}=\frac{2a_nb_n}{a_n + b_n}\)，\(b_{n + 1}=\sqrt{a_{n + 1}b_n}\)，证明：\(a_n,b_n\)收敛到同一极限，并且在\(a_1 = 2\sqrt{3},b_1 = 3\)时，上述极限值为\(\pi\).
\end{example}
\begin{remark}
   这是几何 - 调和平均数列，通项也能求出来，自然求极限就没有任何问题.
\end{remark}
\begin{note}
   \hypertarget{比值换元的问题}{(1)}因为$a_n,b_n$的递推式都是齐次式,所以我们尝试比值换元,将其转化为可求通项的递推数列.实际上,我们利用的比值换元是$c_n=\frac{b_n}{a_n}$,但是为了避免讨论数列$a_n$能否取0的情况,我们就取$b_n=a_nc_n$.

   \hypertarget{三角换元的问题}{(2)}三角换元求通项的一些问题:由递推条件易证$a_n,b_n\geq 0$,其实当$a_n,b_n$中出现为零的项时,由递推条件易知$a_n,b_n$后面的所有项都为零,此时结论平凡.因此我们只需要考虑$a_n,b_n>0$的情况.此时直接设\(\cos x_1 = c_1=\frac{b_1}{a_1}\)似乎不太严谨.因为虽然$c_1>0$,但是$c_1$不一定在$(0,1)$内,所以我们需要对其进行分类讨论.
   
   当$c_1\in (0,1)$时,设\(\cos x_1 = c_1=\frac{b_1}{a_1}\),其中$x_1\in (0,\frac{\pi}{2})$;

   当$c_1>1$时,设\(\cosh x_1 = c_1=\frac{b_1}{a_1}\),其中$x_1\in (0,+\infty)$.

   实际上,我们直接设\(\cos x_1 = c_1=\frac{b_1}{a_1}\),只要将$x_1$看作一个复数,就可以避免分类讨论.因为由复变函数论可知,$\cos x$在复数域上的性质与极限等结论与在实数域上相同,而且由$c_1>0$可知,一定存在一个复数$x_1$,使得$\cos x_1=c_1$.所以这样做是严谨地.(考试的时候最好还是分类讨论书写)
\end{note}
\begin{proof}
   \hyperlink{比值换元的问题}{设\(b_n = a_nc_n\)}代入有
\begin{align}
a_{n + 1}&=\frac{2a_nb_n}{a_n + b_n}=\frac{2a_nc_n}{c_n + 1},a_{n + 1}c_{n + 1}=\sqrt{a_{n + 1}a_nc_n}\Rightarrow\frac{a_{n + 1}}{a_n}=\frac{c_n}{c_{n + 1}^2}=\frac{2c_n}{c_n + 1}\Rightarrow c_{n + 1}=\sqrt{\frac{c_n + 1}{2}}\label{asfasg}
\end{align}
\hyperlink{三角换元的问题}{设\(\cos x_1 = c_1=\frac{b_1}{a_1}\),其中$x_1\in \mathbb{C}$},则由\eqref{asfasg}式归纳可得$c_n=\cos \left( \frac{x_1}{2^{n-1}} \right)$.
代入回去求\(a_n,b_n\)有
\begin{align*}
&c_n=\frac{b_n}{a_n}=\cos\left(\frac{x_1}{2^{n - 1}}\right),b_{n + 1}=\sqrt{a_{n + 1}b_n}\Rightarrow b_{n + 1}^2=a_{n + 1}b_n=\frac{b_{n + 1}b_n}{c_{n + 1}}\Rightarrow\frac{b_{n + 1}}{b_n}=\frac{1}{\cos\left(\frac{x_1}{2^{n}}\right)}\\
&\Rightarrow \frac{b_{n + 1}}{b_1}=\frac{1}{\cos\left(\frac{x_1}{2}\right)\cos\left(\frac{x_1}{2^2}\right)\cdots\cos\left(\frac{x_1}{2^n}\right)}=\frac{2^n\sin\frac{x_1}{2^n}}{\sin x_1}\Rightarrow b_n = b_1\frac{2^{n - 1}\sin\frac{x_1}{2^{n - 1}}}{\sin x_1}\\
&\Rightarrow a_n=\frac{b_n}{c_n}=\frac{b_1\frac{2^{n - 1}\sin\frac{x_1}{2^{n - 1}}}{\sin x_1}}{\cos\frac{x_1}{2^{n - 1}}}=2^{n - 1}\frac{b_1}{\sin x_1}\tan\frac{x_1}{2^{n - 1}},\cos x_1 = c_1=\frac{b_1}{a_1}
\end{align*}
由此可见
\[
\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}b_n=\frac{b_1x_1}{\sin x_1}=\frac{b_1\arccos\frac{b_1}{a_1}}{\sqrt{1 - \frac{b_1^2}{a_1^2}}}=\frac{a_1b_1\arccos\frac{b_1}{a_1}}{\sqrt{a_1^2 - b_1^2}}
\]
所以收敛到同一极限
对于\(a_1 = 2\sqrt{3},b_1 = 3\)的情况有
\[
\cos x_1=\frac{3}{2\sqrt{3}}=\frac{\sqrt{3}}{2},x_1=\frac{\pi}{6},\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}b_n=\frac{b_1x_1}{\sin x_1}=\pi
\]
结论得证.
\end{proof}

\begin{example}
设\(a_n = 2^{n - 1}-3a_{n - 1},n\geq1\)，求\(a_0\)的所有可能值，使得\(a_n\)严格单调递增。
\end{example}
\begin{proof}
   直接裂项，求通项即可得到
\begin{align*}
   &\frac{a_{n+1}}{(-3)^{n+1}}=\frac{a_n}{(-3)^n}+\frac{2^n}{(-3)^{n+1}}\Rightarrow \frac{a_{n+1}}{(-3)^{n+1}}-\frac{a_n}{(-3)^n}=\frac{2^n}{(-3)^{n+1}}
   \\
   &\Rightarrow \frac{a_{n+1}}{(-3)^{n+1}}=\frac{a_0}{(-3)^0}-\frac{1}{3}\left( 1+\left( -\frac{2}{3} \right) +\cdots +\left( -\frac{2}{3} \right) ^n \right) =a_0-\frac{1}{3}\frac{1-\left( -\frac{2}{3} \right) ^{n+1}}{\frac{5}{3}}
   \\
   &\Rightarrow \frac{a_n}{(-3)^n}=a_0-\frac{1}{5}\left( 1-\left( -\frac{2}{3} \right) ^n \right) \Rightarrow a_n=\left( a_0-\frac{1}{5} \right) (-3)^n+\frac{1}{5}2^n.
\end{align*}
由此可见\(a_0 = \frac{1}{5}\)是唯一解.
\end{proof}

\begin{example}
设\(x_1 > 0,x_{n + 1}=1+\frac{1}{x_n}\)，求极限\(\lim_{n\rightarrow\infty}x_n\).
\end{example}
\begin{proof}
解方程\(x^2 - x - 1 = 0\Rightarrow\lambda_1=\frac{1 + \sqrt{5}}{2},\lambda_2=\frac{1 - \sqrt{5}}{2}\),于是
\begin{align*}
\frac{x_{n + 1}-\lambda_1}{x_{n + 1}-\lambda_2}&=\frac{1+\frac{1}{x_n}-\lambda_1}{1+\frac{1}{x_n}-\lambda_2}=\frac{(1 - \lambda_1)x_n + 1}{(1 - \lambda_2)x_n + 1}=\frac{\lambda_2x_n + 1}{\lambda_1x_n + 1}=\frac{\lambda_2}{\lambda_1}\frac{x_n+\frac{1}{\lambda_2}}{x_n+\frac{1}{\lambda_1}}=\frac{\lambda_2}{\lambda_1}\frac{x_n-\lambda_1}{x_n-\lambda_2}\\
&\Rightarrow\frac{x_{n + 1}-\lambda_1}{x_{n + 1}-\lambda_2}=\left(\frac{\lambda_2}{\lambda_1}\right)^n\frac{x_1-\lambda_1}{x_1-\lambda_2}\to 0,n\to \infty.
\end{align*}
故$\lim_{n\rightarrow\infty}x_n=\lambda_1=\frac{1 + \sqrt{5}}{2}.$
\end{proof}

\begin{example}
   设\(a_{n + 1}=\sqrt{a_n + 2}\)，求\(a_n\)的通项公式.
\end{example}
\begin{proof}
   设\(a_n = 2b_n\)则问题转化为已知$b_{n+1}=\sqrt{\frac{b_n+1}{2}}$,求$b_n$的通项公式.
   由\hyperref[example-4.54112]{例题\ref{example-4.54112}},立即得到\[a_n = 2\cos\frac{\theta_1}{2^{n - 1}},\cos\theta_1=\frac{1}{2}a_1.\]
\end{proof}


\subsubsection{直接凑出通项}

\begin{example}
   设\(a_1=\frac{1}{2},a_{n + 1}=2a_n^2 + 2a_n\)，求\(a_n\)的通项公式.
\end{example}
\begin{proof}
\begin{align*}
&a_{n + 1}=2a_n^2 + 2a_n = 2\left(a_n+\frac{1}{2}\right)^2-\frac{1}{2}\Rightarrow 2a_{n + 1}+1=(2a_n + 1)^2=\cdots=(2a_1 + 1)^{2^n}\\
&\Rightarrow a_n=\frac{(2a_1 + 1)^{2^{n - 1}}-1}{2}=\frac{2^{2^{n - 1}}-1}{2}.
\end{align*}
\end{proof}


\subsubsection{凑裂项}

凑裂项:根据已知的递推式,将需要求解的累乘或求和的通项凑成裂项的形式,使得其相邻两项相乘或相加可以抵消中间项,从而将累乘或求和号去掉.

\begin{example}
   设\(a_1 = 1,a_n = n(a_{n - 1}+1),x_n=\prod_{k = 1}^{n}\left(1+\frac{1}{a_k}\right)\)，求极限\(\lim_{n\rightarrow\infty}x_n\).
\end{example}
\begin{proof}
由条件可知$a_n+1=\frac{a_{n+1}}{n+1}$,从而
\begin{align*}
   x_n=\prod_{k=1}^n{\left( 1+\frac{1}{a_k} \right)}=\prod_{k=1}^n{\frac{a_k+1}{a_k}}=\prod_{k=1}^n{\frac{a_{k+1}}{(k+1)a_k}}=\frac{a_{n+1}}{a_1}\frac{1}{(n+1)!}=\frac{a_{n+1}}{(n+1)!}.
\end{align*}
再根据$a_n=n(a_{n-1}+1)$可得
\begin{align*}
   \frac{a_n}{n!}=\frac{a_{n-1}}{(n-1)!}+\frac{1}{(n-1)!}.
\end{align*}
故
\begin{align*}
   x_n=\frac{a_{n+1}}{(n+1)!}=\frac{a_n}{n!}+\frac{1}{n!}=\frac{a_{n-1}}{(n-1)!}+\frac{1}{(n-1)!}+\frac{1}{n!}=\cdots =\sum_{k=0}^n{\frac{1}{k!}\rightarrow e.}
\end{align*}
\end{proof}

\begin{example}
   设\(y_0>2,y_n=y_{n - 1}^{2}-2,n\in\mathbb{N}\),计算\(\prod_{n = 0}^{\infty}(1 - \frac{1}{y_n})\).  
\end{example}
\begin{note}
   关于累乘的问题,要注意累乘的通项能否凑成相邻两项相除的形式,从而就能直接累乘消去中间项,进而将累乘号去掉.
   
   本题是利用已知条件和平方差公式将累乘的通项能否凑成相邻两项相除的形式.
\end{note}
\begin{proof}
   一方面
   \[
   y_n + 1=y_{n - 1}^{2}-1=(y_{n - 1}-1)(y_{n - 1}+1)\Rightarrow y_{n - 1}-1=\frac{y_n + 1}{y_{n - 1}+1}\Rightarrow y_n - 1=\frac{y_{n + 1}+1}{y_n + 1}.
   \]
   另外一方面
   \[
   y_n - 2=y_{n - 1}^{2}-4=(y_{n - 1}-2)(y_{n - 1}+2)\Rightarrow y_n - 2=(y_{n - 1}-2)y_{n - 2}^{2}\Rightarrow y_n=\sqrt{\frac{y_{n + 2}-2}{y_{n + 1}-2}}.
   \]
   于是结合\(\lim_{m\rightarrow\infty}y_m = +\infty\)我们有
   \begin{align*}
   \prod_{n = 0}^{\infty}\left(1-\frac{1}{y_n}\right)&=\prod_{n=0}^{\infty}{\frac{y_n-1}{y_n}}=\prod_{n = 0}^{\infty}\left(\frac{y_{n + 1}+1}{y_n + 1}\cdot\sqrt{\frac{y_{n + 1}-2}{y_{n + 2}-2}}\right)
   =\lim_{m\rightarrow\infty}\prod_{n = 0}^{m}\left(\frac{y_{n + 1}+1}{y_n + 1}\cdot\sqrt{\frac{y_{n + 1}-2}{y_{n + 2}-2}}\right)\\
   &=\lim_{m\rightarrow\infty}\frac{y_{m + 1}+1}{y_0 + 1}\cdot\sqrt{\frac{y_1 - 2}{y_{m + 2}-2}}
   =\lim_{m\rightarrow\infty}\frac{y_{m + 1}+1}{\sqrt{y_{m + 1}^{2}-4}}\cdot\frac{\sqrt{y_0^{2}-4}}{y_0 + 1}
   =\frac{\sqrt{y_0^{2}-4}}{y_0 + 1}.
   \end{align*}
\end{proof}

\subsubsection{强求通项和强行裂项}

若数列\(\{ a_n \}_{n = 0}^{\infty}, \{ b_n \}_{n = 0}^{\infty}, \{ d_n \}_{n = 0}^{\infty}\)满足下列递推条件之一:
\begin{enumerate}
    \item \(a_n = d_na_{n - 1} + b_n, n = 1, 2, \cdots\);
    \item \(\lim_{n\rightarrow \infty}(a_n - d_na_{n - 1}) = A\).
\end{enumerate}
则我们都可以考虑对\(a_n\)进行强行裂项和强求通项,从而可以将\(a_n\)写成关于\(b_n, d_n\)或\(A, d_n\)的形式,进而将题目条件和要求进行转化.


\begin{proposition}[强求通项和强行裂项]\label{proposition:强求通项和强行裂项}
   \begin{enumerate}[(1)]
      \item 若数列\(\{ a_n \}_{n = 0}^{\infty}, \{ b_n \}_{n = 0}^{\infty}, \{ d_n \}_{n = 0}^{\infty}\)满足递推条件:
      \begin{align}\label{proposition4.8-0.1}
            a_n = d_na_{n - 1} + b_n, n = 1, 2, \cdots,  
      \end{align}
      则令\(c_n = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 0, 1, \cdots\),一定有
      \[
      a_n = \frac{1}{c_n}\sum_{k = 1}^n{c_kb_k} + a_0, n = 0, 1, \cdots.
      \]

      \item 若数列\(\{ a_n \}_{n = 0}^{\infty}, \{ d_n \}_{n = 0}^{\infty}\)满足递推条件:
      \begin{align}\label{proposition4.8-0.2}
       \lim_{n\rightarrow \infty}(a_n - d_na_{n - 1}) = A,  
      \end{align}
      则令\(c_n = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 0, 1, \cdots\),再令\(b_0 = 1, b_n = a_n - \frac{c_{n - 1}a_{n - 1}}{c_n}, n = 1, 2, \cdots\),一定有
      \[
      \lim_{n\rightarrow \infty}b_n = A,
      \]
      \[
      a_n = \frac{1}{c_n}\sum_{k = 1}^n{c_kb_k} + a_0, n = 0, 1, \cdots.
      \]
  \end{enumerate}
\end{proposition}
\begin{remark}
   此时\textbf{只能都对\(a_n\)进行强行裂项和强求通项},\(b_n\)和\(d_n\)都无法通过这种方法强行裂项和强求通项！
\end{remark}
\begin{note}
   也可以通过观察原数列$a_n$的递推条件直接得到需要构造的数列,从而将$a_n$强行裂项和强求通项.具体可见\hyperref[example:4.341111]{例题\ref{example:4.341111}解法
   一}.
   (1)的具体应用可见\hyperlink{递推条件是等式形式的待定数列法}{例题\ref{example:4.351111}笔记};
(2)的具体应用可见\hyperlink{递推条件是极限形式的待定数列法}{例题\ref{example:4.341111}笔记}.
\end{note}
\begin{proof}
(强行裂项和强求通项的具体步骤)
\begin{enumerate}[(1)]
    \item 若数列\(\{ a_n \}_{n = 0}^{\infty}, \{ b_n \}_{n = 0}^{\infty}, \{ d_n \}_{n = 0}^{\infty}\)满足递推条件\eqref{proposition4.8-0.1}式,则令\(c_0 = 1\),待定\(\{ c_n \}_{n = 0}^{\infty}\),由递推条件\eqref{proposition4.8-0.1}式可得
    \begin{align}\label{proposition4.8-1.1}
     c_na_n = c_nd_na_{n - 1} + c_nb_n, n = 1, 2, \cdots. 
    \end{align}
    我们希望\(c_nd_n = c_{n - 1}, n = 2, 3, \cdots\),即\(\frac{c_n}{c_{n - 1}} = \frac{1}{d_n}, n = 2, 3, \cdots\).从而\(c_n = c_0\prod_{k = 1}^n{\frac{c_k}{c_{k - 1}}} = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 1, 2, \cdots\),且该式对\(n = 0\)也成立.因此,令\(c_n = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 0, 1, \cdots\),则由\eqref{proposition4.8-1.1}式可知
    \[
    c_na_n = c_nd_na_{n - 1} + c_nb_n \Rightarrow c_na_n - c_{n - 1}a_{n - 1} = c_nb_n, n = 1, 2, \cdots.
    \]
    于是
    \begin{align*}
    a_n = \frac{1}{c_n}(c_na_n - c_0a_0 + c_0a_0)
    = \frac{1}{c_n}\left[ \sum_{k = 1}^n{(c_ka_k - c_{k - 1}a_{k - 1})} + c_0a_0 \right]
    = \frac{1}{c_n}\sum_{k = 1}^n{c_kb_k} + a_0, n = 0, 1, \cdots.
    \end{align*}
    这样就完成了对\(a_n\)的强行裂项和强求通项,并将\(a_n\)写成了关于\(b_n, d_n\)的形式.

    \item 若数列\(\{ a_n \}_{n = 0}^{\infty}, \{ d_n \}_{n = 0}^{\infty}\)满足递推条件\eqref{proposition4.8-0.2}式,则令\(c_0 = 1\),待定\(\{ c_n \}_{n = 0}^{\infty}\),由递推条件\eqref{proposition4.8-0.2}式可得
    \begin{align}\label{proposition4.8-1.2}
       \lim_{n\rightarrow \infty}(a_n - d_na_{n - 1}) = \lim_{n\rightarrow \infty}\frac{c_na_n - c_nd_na_{n - 1}}{c_n} = A. 
    \end{align}
    我们希望\(c_nd_n = c_{n - 1}, n = 2, 3, \cdots\),即\(\frac{c_n}{c_{n - 1}} = \frac{1}{d_n}, n = 2, 3, \cdots\).从而\(c_n = c_0\prod_{k = 1}^n{\frac{c_k}{c_{k - 1}}} = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 1, 2, \cdots\),且该式对\(n = 0\)也成立.因此,令\(c_n = \prod_{k = 1}^n{\frac{1}{d_k}}, n = 0, 1, \cdots\),则由\eqref{proposition4.8-1.2}式可知
    \begin{align}\label{proposition4.8-1.3}
      \lim_{n\rightarrow \infty}(a_n - d_na_{n - 1}) = \lim_{n\rightarrow \infty}\frac{c_na_n - c_nd_na_{n - 1}}{c_n} = \lim_{n\rightarrow \infty}\frac{c_na_n - c_{n - 1}a_{n - 1}}{c_n} = A.
    \end{align}
    于是令\(b_0 = 1\),待定\(\{ b_n \}_{n = 0}^{\infty}\),希望\(b_n\)满足\(c_nb_n = c_na_n - c_{n - 1}a_{n - 1}, n = 1, 2, \cdots\),即\(b_n = \frac{c_na_n - c_{n - 1}a_{n - 1}}{c_n} = a_n - \frac{c_{n - 1}a_{n - 1}}{c_n}, n = 1, 2, \cdots\).
    因此,令\(b_0 = 1, b_n = a_n - \frac{c_{n - 1}a_{n - 1}}{c_n}, n = 1, 2, \cdots\),则\(b_n\)满足
    \begin{align}\label{proposition4.8-1.4}
       c_nb_n = c_na_n - c_{n - 1}a_{n - 1}, n = 1, 2, \cdots.
    \end{align}
    并且由\eqref{proposition4.8-1.3}式可知
    \[
    \lim_{n\rightarrow \infty}b_n = \lim_{n\rightarrow \infty}\frac{c_na_n - c_{n - 1}a_{n - 1}}{c_n} = A.
    \]
    从而由\eqref{proposition4.8-1.4}式可得
    \begin{align*}
    a_n = \frac{1}{c_n}(c_na_n - c_0a_0 + c_0a_0)
    = \frac{1}{c_n}\left[ \sum_{k = 1}^n{(c_ka_k - c_{k - 1}a_{k - 1})} + c_0a_0 \right]
    = \frac{1}{c_n}\sum_{k = 1}^n{c_kb_k} + a_0, n = 0, 1, \cdots.
    \end{align*}
    这样就完成了对\(a_n\)的强行裂项和强求通项.
\end{enumerate}
\end{proof}



\begin{example}\label{example:4.341111}
设\(\{a_n\}_{n = 0}^{\infty}\)满足\(\lim_{n\rightarrow \infty} (a_n-\lambda a_{n-1})=a,|\lambda |<1,\text{计算}\lim_{n\rightarrow \infty} a_n\).
\end{example}
\begin{note}
   \hypertarget{递推条件是极限形式的待定数列法}{{\color{blue}解法二}构造数列$c_n,b_n$的思路}:
   待定数列$c_n$且$c_0=1$,由条件可得\(\lim_{n\rightarrow \infty}\frac{c_na_n - \lambda c_na_{n - 1}}{c_n}=a\).希望\(c_{n - 1}=\lambda c_n\),即\(\frac{c_n}{c_{n - 1}}=\frac{1}{\lambda}\),等价于\(c_n = c_0\prod_{k = 1}^n{\frac{c_k}{c_{k - 1}}}=\frac{1}{\lambda ^n}\).该式对\(n = 0\)也成立.于是令\(c_n=\frac{1}{\lambda ^n}\),则由条件可知
\[
a=\lim_{n\rightarrow \infty}\frac{c_na_n - \lambda c_na_{n - 1}}{c_n}=\lim_{n\rightarrow \infty}\frac{c_na_n - c_{n - 1}a_{n - 1}}{c_n}
\]
从而待定\(b_n\),希望\(b_n\)满足\(c_nb_n = c_na_n - c_{n - 1}a_{n - 1}\),即\(\frac{b_n}{\lambda ^n}=\frac{a_n}{\lambda ^n}-\frac{a_{n - 1}}{\lambda ^{n - 1}}=\frac{a_n - \lambda a_{n - 1}}{\lambda ^n}\).
于是令\(b_n = a_n - \lambda a_{n - 1}\),则由条件可知\(\lim_{n\rightarrow \infty}b_n=\lim_{n\rightarrow \infty}(a_n - \lambda a_{n - 1}) = a\),\(c_nb_n = c_na_n - c_{n - 1}a_{n-1}\).因此
\begin{align*}
   a_n=&\frac{1}{c_n}\left( c_na_n-c_0a_0+c_0a_0 \right) =\frac{1}{c_n}\left[ \sum_{k=1}^n{\left( c_ka_k-c_{k-1}a_{k-1} \right)}+c_0a_0 \right] 
   \\
   &=\frac{1}{c_n}\left( \sum_{k=1}^n{c_kb_k}+c_0a_0 \right) =\lambda ^n\sum_{k=1}^n{\frac{b_k}{\lambda ^k}}+a_0\lambda ^n.
\end{align*}
这样就完成了对\(a_n\)的强行裂项和强求通项.后续计算极限的方法与{\color{blue}解法一}相同.
\end{note}
\begin{solution}
{\color{blue}解法一(通过观察直接构造出裂项数列$b_n$):}
当\(\lambda = 0\)问题时显然的,当\(\lambda\neq0\),记\(b_n=a_n-\lambda a_{n - 1},n = 1,2,\cdots\),我们有
\[
\frac{b_n}{\lambda^n}=\frac{a_n-\lambda a_{n - 1}}{\lambda^n}=\frac{a_n}{\lambda^n}-\frac{a_{n - 1}}{\lambda^{n - 1}},n = 1,2,\cdots.
\]
上式对\(n = 1,2,\cdots\)求和得
\begin{align}\label{equation:4.341.1}
   a_n=\lambda^n\sum_{k = 1}^{n}\frac{b_k}{\lambda^k}+a_0\lambda^n,n = 1,2,\cdots.
\end{align}
由于\(|\lambda|<1\),我们知道\(\lim_{n\rightarrow\infty}a_0\lambda^n = 0\). 于是由Stolz定理,可知
当\(\lambda> 0\)时,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^n}}=\lim_{n\rightarrow\infty}\frac{\frac{b_{n + 1}}{\lambda^{n+1}}}{\frac{1}{\lambda^{n + 1}}-\frac{1}{\lambda^n}}=\lim_{n\rightarrow\infty}\frac{b_{n + 1}}{1 - \lambda}=\frac{a}{1 - \lambda}.
\]
当\(\lambda<0\)时(此时分母$\frac{1}{\lambda^n}$不再严格单调递增趋于$+\infty$,不满足Stolz定理条件.但是不难发现其奇偶子列严格单调递增趋于$+\infty$满足Stolz定理条件,因此需要分奇偶子列讨论),对于\eqref{equation:4.341.1}式的偶子列,由Stolz定理,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n + 2}\frac{b_k}{\lambda^k}-\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n+2}}-\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{\frac{b_{2n+2}}{\lambda^{2n+2}}+\frac{b_{2n+1}}{\lambda^{2n+1}}}{\frac{1}{\lambda^{2n+2}}-\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{b_{2n+2}+\lambda b_{2n+1}}{1 - \lambda^2}=\frac{a+\lambda a}{1 - \lambda^2}=\frac{a}{1 - \lambda}.
\]
对于\eqref{equation:4.341.1}式的奇子列,由Stolz定理,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n - 1}\frac{b_k}{\lambda^k}}{(\frac{1}{\lambda})^{2n - 1}}=\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n - 1}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}=\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}-\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\frac{b_{2n}}{\lambda^{2n}}}{\frac{1}{\lambda^{2n}}}\xlongequal{\text{因为偶子列的极限}}\frac{a}{\lambda(1 - \lambda)}-\frac{a}{\lambda}=\frac{a}{1 - \lambda}.
\]
因此无论如何我们都有\(\lim_{n\rightarrow\infty}a_n=\frac{a}{1 - \lambda}\).

{\color{blue}解法二(强求通项和强行裂项的标准解法):}
\hyperlink{递推条件是极限形式的待定数列法}{令\(c_n = \frac{1}{\lambda ^n}\),$n=0,1,\cdots$,\(b_n = a_n - \lambda a_{n - 1}\),$n=1,2,\cdots$},则由条件可知\(\lim_{n\rightarrow \infty}b_n=\lim_{n\rightarrow \infty}(a_n - \lambda a_{n - 1}) = a\),\(c_nb_n = c_na_n - c_{n - 1}a_{n-1}\).从而对$\forall n\in \mathbb{N} $,都有
\begin{align}
   a_n=&\frac{1}{c_n}\left( c_na_n-c_0a_0+c_0a_0 \right) =\frac{1}{c_n}\left[ \sum_{k=1}^n{\left( c_ka_k-c_{k-1}a_{k-1} \right)}+c_0a_0 \right] 
   \nonumber
   \\
   &=\frac{1}{c_n}\left( \sum_{k=1}^n{c_kb_k}+c_0a_0 \right) =\lambda ^n\sum_{k=1}^n{\frac{b_k}{\lambda ^k}}+a_0\lambda ^n.\label{equation:4.341.2}
\end{align}
由于\(|\lambda|<1\),我们知道\(\lim_{n\rightarrow\infty}a_0\lambda^n = 0\). 于是由Stolz定理,可知
当\(\lambda> 0\)时,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^n}}=\lim_{n\rightarrow\infty}\frac{\frac{b_{n + 1}}{\lambda^{n+1}}}{\frac{1}{\lambda^{n + 1}}-\frac{1}{\lambda^n}}=\lim_{n\rightarrow\infty}\frac{b_{n + 1}}{1 - \lambda}=\frac{a}{1 - \lambda}.
\]
当\(\lambda<0\)时(分母$\frac{1}{\lambda^n}$不再严格单调递增趋于$+\infty$,不满足Stolz定理条件.而我们发现其奇偶子列恰好严格单调递增趋于$+\infty$满足Stolz定理条件,因此需要分奇偶子列讨论),对于\eqref{equation:4.341.2}式的偶子列,由Stolz定理,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n + 2}\frac{b_k}{\lambda^k}-\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n+2}}-\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{\frac{b_{2n+2}}{\lambda^{2n+2}}+\frac{b_{2n+1}}{\lambda^{2n+1}}}{\frac{1}{\lambda^{2n+2}}-\frac{1}{\lambda^{2n}}}=\lim_{n\rightarrow\infty}\frac{b_{2n+2}+\lambda b_{2n+1}}{1 - \lambda^2}=\frac{a+\lambda a}{1 - \lambda^2}=\frac{a}{1 - \lambda}.
\]
对于\eqref{equation:4.341.2}式的奇子列,由Stolz定理,我们有
\[
\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n - 1}\frac{b_k}{\lambda^k}}{(\frac{1}{\lambda})^{2n - 1}}=\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n - 1}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}=\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\sum\limits_{k = 1}^{2n}\frac{b_k}{\lambda^k}}{\frac{1}{\lambda^{2n}}}-\frac{1}{\lambda}\lim_{n\rightarrow\infty}\frac{\frac{b_{2n}}{\lambda^{2n}}}{\frac{1}{\lambda^{2n}}}\xlongequal{\text{因为偶子列的极限}}\frac{a}{\lambda(1 - \lambda)}-\frac{a}{\lambda}=\frac{a}{1 - \lambda}.
\]
因此无论如何我们都有\(\lim_{n\rightarrow\infty}a_n=\frac{a}{1 - \lambda}\).
\end{solution}

\begin{example}\label{example:4.351111}
   设\(a_1 = 2,a_n=\frac{1+\frac{1}{n}}{2}a_{n - 1}+\frac{1}{n},n\geq2\),证明:\(\lim_{n\rightarrow\infty}na_n\)存在.
\end{example}
\begin{note}
   \hypertarget{递推条件是等式形式的待定数列法}{构造数列$c_n,b_n$的思路}:待定数列$c_n$且$c_1 = 1$,由条件可得$c_na_n = \frac{n + 1}{2n}c_{n}a_{n - 1}+\frac{c_n}{n}$,希望$c_n$满足\(\frac{n + 1}{2n}c_n = c_{n - 1},n = 2,3,\cdots\),即$\frac{c_n}{c_{n-1}}=\frac{n+1}{n}$,等价于\(c_n=\prod_{k = 2}^{n}\frac{2k}{k + 1}=\frac{(2n)!!}{(n + 1)!}\)且该式对\(n = 1\)也成立.于是令$c_n=\frac{(2n)!!}{(n + 1)!}$,则由条件可知
\begin{align*}
   c_na_n=\frac{n+1}{2n}c_{n-1}+\frac{c_n}{n}=c_{n-1}a_{n-1}+\frac{c_n}{n},n=2,3,\cdots .
\end{align*}
于是待定$b_n$,希望\(b_n\)满足\(c_nb_n = c_na_n - c_{n - 1}a_{n - 1}\),即$c_nb_n=\frac{1}{n}$.
从而令$b_n=\frac{1}{n}$,则\(c_nb_n = c_na_n - c_{n - 1}a_{n - 1}\).因此对$\forall m\in \mathbb{N}_+ $,都有
\begin{align*}
   a_m&=\frac{1}{c_m}\left( c_ma_m-c_1a_1+c_1a_1 \right) =\frac{1}{c_m}\left[ \sum_{n=1}^m{\left( c_na_n-c_{n-1}a_{n-1} \right)}+c_1a_1 \right] 
\\
&=\frac{1}{c_m}\left( \sum_{n=1}^m{c_nb_n}+c_1a_1 \right) =\frac{(m+1)!}{(2m)!!}\left( \sum_{n=1}^m{\frac{(2n)!!}{n(n+1)!}}+2 \right) .
\end{align*}
这样就完成了对\(a_n\)的强行裂项和强求通项.后续再利用Stolz定理计算极限即可.
\end{note}
\begin{proof}
   \hyperlink{递推条件是等式形式的待定数列法}{令$c_n=\frac{(2n)!!}{(n + 1)!}$,$b_n=\frac{1}{n}$,$n=1,2,\cdots$},则由条件可知\(c_nb_n = c_na_n - c_{n - 1}a_{n-1}\).从而对$\forall m\in \mathbb{N} $,都有
\[
c_ma_m - 2 = c_ma_m - c_1a_1=\sum_{n = 2}^{m}(c_na_n - c_{n - 1}a_{n - 1})=\sum_{n = 1}^{m}\frac{c_n}{n}=\sum_{n = 1}^{m}\frac{(2n)!!}{n(n + 1)!},
\]
从而
\[
a_m=\frac{1}{c_m}\left(2+\sum_{n = 1}^{m}\frac{(2n)!!}{n(n + 1)!}\right)=\frac{(m + 1)!}{(2m)!!}\left(2+\sum_{n = 1}^{m}\frac{(2n)!!}{n(n + 1)!}\right).
\]
再由Stolz定理可得
\begin{align*}
\lim_{m\rightarrow\infty}ma_m&=\lim_{m\rightarrow\infty}m\frac{(m + 1)!}{(2m)!!}\left(2+\sum_{n = 1}^{m}\frac{(2n)!!}{n(n + 1)!}\right)
=\lim_{m\rightarrow\infty}\frac{2+\sum\limits_{n = 1}^{m}\frac{(2n)!!}{n(n + 1)!}}{\frac{(2m)!!}{m(m + 1)!}}\\
&\xlongequal{\text{Stolz定理}}\lim_{m\rightarrow\infty}\frac{\frac{(2m + 2)!!}{(m + 1)(m + 2)!}}{\frac{(2m+2)!!}{(m + 1)(m + 2)!}-\frac{(2m)!!}{m(m + 1)!}}
=\lim_{m\rightarrow\infty}\frac{\frac{2m + 2}{m + 1}}{\frac{2m+2}{m + 1}-\frac{m + 2}{m}}=\frac{2}{2 - 1}=2.
\end{align*}
\end{proof}

\begin{example}
设\(\lim_{n\rightarrow\infty}b_n = b\)存在,令
\[
a_{n + 1}=b_n-\frac{na_n}{2n + 1},
\]
证明\(\lim_{n\rightarrow\infty}a_n\)存在.
\end{example}
\begin{note}
   \hypertarget{构造数列c_n的思路}{构造数列$c_n$的思路:}
   令\(c_1 = 1\),待定\(\{ c_n \}_{n = 1}^{+\infty}\),由条件可知\(c_{n + 1}a_{n + 1} = c_{n + 1}b_n - \frac{n}{2n + 1}c_{n + 1}a_n\).
希望\(-\frac{n}{2n + 1}c_{n + 1} = c_n\),则\(\frac{c_{n + 1}}{c_n} = -\frac{2n + 1}{n}\),从而
\[
c_n = \prod_{k = 1}^{n - 1}{\frac{c_{k + 1}}{c_k}} = \prod_{k = 1}^{n - 1}{\left( -\frac{2k + 1}{k} \right)} = (-1)^{n - 1}\frac{(2n - 1)!!}{(n - 1)!}
\]
该式对\(n = 1\)也成立.
因此令\(c_n = (-1)^{n - 1}\frac{(2n - 1)!!}{(n - 1)!}\),则由条件可知
\[
c_{n + 1}a_{n + 1} = c_{n + 1}b_n + c_na_n \Rightarrow c_{n + 1}a_{n + 1} - c_na_n = c_{n + 1}b_n
\]
从而
\[
a_n = \frac{1}{c_n}\left[ \sum_{k = 2}^n{(c_ka_k - c_{k - 1}a_{k - 1})} + c_1a_1 \right] = \frac{1}{c_n}\left[ \sum_{k = 2}^n{c_kb_{k - 1}} + c_1a_1 \right]
\]
这样就完成了对\(a_n\)的强行裂项和强求通项.
\end{note}
\begin{remark}
   \hypertarget{example4.44解法的思路分析}{计算$\underset{n\rightarrow \infty}{\lim}a_n$的思路分析:}
   如果此时我们将\eqref{example4.44-1.1}中的$\frac{\left( 2n+1 \right) !!}{n!}$看作分母,将$\left( -1 \right) ^n$放到分子上,那么由\hyperref[theorem:Wallis公式]{Wallis公式}可知分母严格单调递增趋于$+\infty$,此时$a_n$满足Stolz定理条件.但是使用一次Stolz定理后我们并不能直接得到结果,并且此时$(-1)^n$仍未消去.因此我们不采用这种处理方式.

   如果此时我们将\eqref{example4.44-1.1}中的$\frac{\left( -1 \right) ^n\left( 2n+1 \right) !!}{n!}$看作分母,则由于$\left( -1 \right) ^n$的振荡性,导致这个分母不再严格单调递增趋于$+\infty$,不满足Stolz定理条件.但是不难发现其奇偶子列严格单调递增趋于$+\infty$满足Stolz定理条件,因此我们可以分奇偶子列进行讨论.
\end{remark}
\begin{proof}
   \hyperlink{构造数列c_n的思路}{令\(c_n = (-1)^{n - 1}\frac{(2n - 1)!!}{(n - 1)!},n=1,2,\cdots\)},则由条件可知
   \[
   c_{n + 1}a_{n + 1}=c_{n + 1}b_n-\frac{n}{2n + 1}c_{n + 1}a_n=c_{n + 1}b_n + c_na_n, \quad \forall n\in \mathbb{N}_+.
   \]
   从而\(c_{n + 1}a_{n + 1}-c_na_n=c_{n + 1}b_n, \quad \forall n\in \mathbb{N}_+\).于是
   \begin{align}
      a_{n+1}&=\frac{1}{c_{n+1}}\left[ \sum_{k=1}^n{\left( c_{k+1}a_{k+1}-c_ka_k \right)}+c_1a_1 \right] =\frac{1}{c_{n+1}}\left[ \sum_{k=1}^n{c_{k+1}b_k}+c_1a_1 \right] 
      \nonumber
\\
      &=\frac{1}{c_{n+1}}\left[ \sum_{k=1}^n{c_{k+1}b_k}+a_1 \right] =\frac{\left( -1 \right) ^nn!}{\left( 2n+1 \right) !!}\left[ \sum_{k=1}^n{\left( -1 \right) ^k\frac{\left( 2k+1 \right) !!}{k!}b_k}+a_1 \right] ,n\in \mathbb{N} _+. \label{example4.44-1.1}
   \end{align}
   \hyperlink{example4.44解法的思路分析}{下面计算$\underset{n\rightarrow \infty}{\lim}a_n$.}

   由\hyperref[theorem:Wallis公式]{Wallis公式}可知
   \[
   \frac{(2n)!!}{(2n - 1)!!}\sim \sqrt{\pi n},  n\rightarrow \infty.
   \]
   从而我们有
   \begin{align}\label{example4.44-1.2}
    \frac{n!}{(2n + 1)!!}&=\frac{n!}{(2n + 1)(2n - 1)!!}
   =\frac{(2n)!!}{(2n + 1)2^n(2n - 1)!!}
   \sim \frac{\sqrt{\pi n}}{n2^{n + 1}}
   =\frac{\sqrt{\pi}}{2^{n + 1}\sqrt{n}},n\rightarrow \infty.  
   \end{align}
   于是由\eqref{example4.44-1.1}\eqref{example4.44-1.2}式以及Stolz定理和\(\lim_{n\rightarrow \infty} b_n = b\)可知,一方面,考虑\(\{ a_n \}\)的奇子列,我们有
   \begin{align}
      \lim_{n\rightarrow \infty} a_{2n+1}&=\lim_{n\rightarrow \infty} \frac{\left( -1 \right) ^{2n}\left( 2n \right) !}{\left( 4n+1 \right) !!}\left[ \sum\limits_{k=1}^{2n}{\left( -1 \right) ^k\frac{\left( 2k+1 \right) !!}{k!}b_k}+a_1 \right] =\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \sum\limits_{k=1}^n{\frac{\left( 4k+1 \right) !!}{\left( 2k \right) !}b_{2k}}-\sum\limits_{k=1}^n{\frac{\left( 4k-1 \right) !!}{\left( 2k-1 \right) !}b_{2k-1}}+a_1 \right]}{2^{2n+1}\sqrt{2n}}
      \nonumber
      \\
      &=\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \sum\limits_{k=1}^n{\frac{\left( 4k+1 \right) !!}{\left( 2k \right) !}b_{2k}}-\sum\limits_{k=1}^n{\frac{\left( 4k-1 \right) !!}{\left( 2k-1 \right) !}b_{2k-1}} \right]}{2^{2n+1}\sqrt{2n}}\xlongequal{\text{Stolz定理}}\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \frac{\left( 4n+1 \right) !!}{\left( 2n \right) !}b_{2n}-\frac{\left( 4n-1 \right) !!}{\left( 2n-1 \right) !}b_{2n-1} \right]}{2^{2n+1}\sqrt{2n}-2^{2n-1}\sqrt{2n-2}}
      \nonumber
      \\
      &=\frac{\sqrt{\pi}}{\sqrt{2}}\lim_{n\rightarrow \infty} \frac{\frac{\left( 4n-1 \right) !!}{\left( 2n-1 \right) !}\left( \frac{4n+1}{2n}b_{2n}-b_{2n-1} \right)}{2^{2n+1}\sqrt{n}-2^{2n-1}\sqrt{n-1}}=\frac{1}{\sqrt{2}}\lim_{n\rightarrow \infty} \frac{2^{2n}\sqrt{2n-1}\left( \frac{4n+1}{2n}b_{2n}-b_{2n-1} \right)}{2^{2n+1}\sqrt{n}-2^{2n-1}\sqrt{n-1}}
      \nonumber
      \\
      &=\frac{2}{\sqrt{2}}\lim_{n\rightarrow \infty} \frac{\sqrt{2n-1}\left( \frac{4n+1}{2n}b_{2n}-b_{2n-1} \right)}{4\sqrt{n}-\sqrt{n-1}}=\frac{2}{\sqrt{2}}\lim_{n\rightarrow \infty} \frac{\sqrt{2n-1}}{4\sqrt{n}-\sqrt{n-1}}\cdot \lim_{n\rightarrow \infty} \left( \frac{4n+1}{2n}b_{2n}-b_{2n-1} \right) 
      \nonumber
      \\
      &=\frac{2}{\sqrt{2}}\lim_{n\rightarrow \infty} \frac{\sqrt{2-\frac{1}{n}}}{4-\sqrt{1-\frac{1}{n}}}\cdot \left( 2b-b \right) =\frac{2}{\sqrt{2}}\cdot \frac{\sqrt{2}}{3}\cdot b=\frac{2}{3}b.\label{example4.44-1.3}
   \end{align}
   另一方面,考虑\(\{ a_n \}\)的偶子列,我们有
   \begin{align}
      \lim_{n\rightarrow \infty} a_{2n}&=\lim_{n\rightarrow \infty} \frac{\left( -1 \right) ^{2n-1}\left( 2n-1 \right) !}{\left( 4n-1 \right) !!}\left[ \sum\limits_{k=1}^{2n-1}{\left( -1 \right) ^k\frac{\left( 2k+1 \right) !!}{k!}b_k}+a_1 \right] =-\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \sum\limits_{k=1}^{n-1}{\frac{\left( 4k+1 \right) !!}{\left( 2k \right) !}b_{2k}}-\sum\limits_{k=1}^n{\frac{\left( 4k-1 \right) !!}{\left( 2k-1 \right) !}b_{2k-1}}+a_1 \right]}{2^{2n}\sqrt{2n-1}}
      \nonumber
      \\
      &=-\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \sum\limits_{k=1}^{n-1}{\frac{\left( 4k+1 \right) !!}{\left( 2k \right) !}b_{2k}}-\sum\limits_{k=1}^n{\frac{\left( 4k-1 \right) !!}{\left( 2k-1 \right) !}b_{2k-1}} \right]}{2^{2n}\sqrt{2n-1}}\xlongequal{\text{Stolz定理}}-\lim_{n\rightarrow \infty} \frac{\sqrt{\pi}\left[ \frac{\left( 4n-3 \right) !!}{\left( 2n-2 \right) !}b_{2n-2}-\frac{\left( 4n-1 \right) !!}{\left( 2n-1 \right) !}b_{2n-1} \right]}{2^{2n}\sqrt{2n-1}-2^{2n-2}\sqrt{2n-3}}
      \nonumber
      \\
      &=-\sqrt{\pi}\lim_{n\rightarrow \infty} \frac{\frac{\left( 4n-3 \right) !!}{\left( 2n-2 \right) !}\left( b_{2n-2}-\frac{4n-1}{2n-1}b_{2n-1} \right)}{2^{2n}\sqrt{2n-1}-2^{2n-2}\sqrt{2n-3}}=-\lim_{n\rightarrow \infty} \frac{2^{2n-1}\sqrt{2n-2}\left( b_{2n-2}-\frac{4n-1}{2n-1}b_{2n-1} \right)}{2^{2n}\sqrt{2n-1}-2^{2n-2}\sqrt{2n-3}}\nonumber
      \\
      &=-2\lim_{n\rightarrow \infty} \frac{\sqrt{2n-2}\left( b_{2n-2}-\frac{4n-1}{2n-1}b_{2n-1} \right)}{4\sqrt{2n-1}-\sqrt{2n-3}}=-2\lim_{n\rightarrow \infty} \frac{\sqrt{2n-2}}{4\sqrt{2n-1}-\sqrt{2n-3}}\cdot \lim_{n\rightarrow \infty} \left( b_{2n-2}-\frac{4n-1}{2n-1}b_{2n-1} \right) 
      \nonumber
      \\
      &=-2\lim_{n\rightarrow \infty} \frac{\sqrt{2-\frac{2}{n}}}{4\sqrt{2-\frac{1}{n}}-\sqrt{2-\frac{3}{n}}}=-2\cdot \frac{\sqrt{2}}{3\sqrt{2}}\cdot \left( -b \right) =\frac{2}{3}b.
      \label{example4.44-1.4}
   \end{align}
   故由\eqref{example4.44-1.3}\eqref{example4.44-1.4}式,再结合\hyperref[proposition:子列极限命题]{子列极限命题(b)}可知
   \[
   \lim_{n\rightarrow \infty} a_n=\lim_{n\rightarrow \infty} a_{2n}=\lim_{n\rightarrow \infty} a_{2n + 1}=\frac{2}{3}b.
   \]
\end{proof}

\begin{example}
   设\(a_n,b_n>0,a_1 = b_1 = 1,b_n=a_nb_{n - 1}-2,n\geq2\)且\(b_n\)有界,求\(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n}\frac{1}{a_1a_2\cdots a_k}\).
\end{example}
\begin{note}
   \hypertarget{example4.45构造数列的思路}{构造数列$c_n$的思路:}观察已知的数列递推条件: \(b_n = a_nb_{n - 1} - 2\),可知我们只能对\(b_n\)进行强行裂项和强求通项.于是令\(c_1 = 1\),待定\(\{ c_n \}_{n = 1}^{+\infty}\),则由条件可知\(c_nb_n = a_nc_nb_{n - 1} - 2c_n, n\geq 2\).
希望\(a_nc_n = c_{n - 1}\),则\(\frac{c_n}{c_{n - 1}} = \frac{1}{a_n}\),从而\(c_n = \prod_{k = 2}^n{\frac{1}{a_k}} = \prod_{k = 1}^n{\frac{1}{a_k}}\).该式对\(n = 1\)也成立.
因此,令\(c_n = \prod_{k = 1}^n{\frac{1}{a_k}}\),则由条件可知
\[
c_nb_n = a_nc_nb_{n - 1} - 2c_n = c_{n - 1}b_{n - 1} - 2c_n, n\geq 2.
\]
于是
\[
c_nb_n - c_{n - 1}b_{n - 1} = -2c_n, n\geq 2.
\]
故
\[
b_{n + 1} = \frac{1}{c_{n + 1}}\left[ \sum_{k = 1}^n{(c_{k + 1}b_{k + 1} - c_kb_k)} + c_1b_1 \right] = \frac{1}{c_n}\left( 1 - 2\sum_{k = 1}^n{c_k} \right).
\]
这样就完成了对\(b_n\)的强行裂项和强求通项,而我们发现\(\sum_{k = 1}^n{c_k} = \sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}}\)恰好就是题目要求的数列极限.
\end{note}
\begin{proof}
   \hyperlink{example4.45构造数列的思路}{令\(c_n = \prod_{k = 1}^n{\frac{1}{a_k}}\),则由条件可知\(c_n > 0\)},且
\[
c_nb_n = a_nc_nb_{n - 1} - 2c_n = c_{n - 1}b_{n - 1} - 2c_n, n\geq 2.
\]
于是
\[
c_nb_n - c_{n - 1}b_{n - 1} = -2c_n, n\geq 2.
\]
故
\[
b_{n + 1} = \frac{1}{c_{n + 1}}\left[ \sum_{k = 1}^n{(c_{k + 1}b_{k + 1} - c_kb_k)} + c_1b_1 \right] = \frac{1}{c_n}\left( 1 - 2\sum_{k = 1}^n{c_{k + 1}} \right). \forall n\in \mathbb{N}_+.
\]
由此可得
\begin{align}\label{example4.45-1.1}
  \sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}} = \sum_{k = 1}^n{c_k} = 1 + \sum_{k = 1}^n{c_{k + 1}} = 1 + \frac{1 - b_{n + 1}c_n}{2} = \frac{3}{2} - \frac{c_nb_{n + 1}}{2}, \forall n\in \mathbb{N}_+.  
\end{align}
由于\(a_n, b_n, c_n > 0\),再结合\eqref{example4.45-1.1}式,可知\(\sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}}\)单调递增且\(\sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}} = \frac{3}{2} - \frac{c_nb_{n + 1}}{2} \leq \frac{3}{2}\),因此\(\lim_{n\rightarrow \infty} \sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}}\)一定存在.故\(\lim_{n\rightarrow \infty} \frac{1}{a_1a_2\cdots a_n} = \lim_{n\rightarrow \infty} c_n = 0\).从而再结合\eqref{example4.45-1.1}式和\(b_n\)有界可得
\[
\lim_{n\rightarrow \infty} \sum_{k = 1}^n{\frac{1}{a_1a_2\cdots a_k}} = \lim_{n\rightarrow \infty} \left( \frac{3}{2} - \frac{c_nb_{n + 1}}{2} \right) = \frac{3}{2}.
\]
\end{proof}


\subsection{抽象递推数列问题}

递推数列问题中,\textbf{将原数列的等式或不等式条件转化为相邻两项的差或商的等式或不等式条件}的想法是非常常用的.

\begin{proposition}[数列收敛的级数与累乘形式]\label{proposition:数列收敛的级数与累乘形式}
\begin{enumerate}
   \item 数列$\left\{ a_n \right\} _{n=1}^{\infty}$收敛的充要条件是$\sum\limits_{n=1}^{\infty}{\left( a_{n+1}-a_n \right)}$收敛.

   \item 数列 \(\{ a_n \}_{n = 1}^{\infty}\) (\(a_n\neq 0\))收敛的充要条件是 \(\prod_{n = 1}^{\infty} \frac{a_{n + 1}}{a_n}\) 收敛.
\end{enumerate}
\end{proposition}
\begin{note}
   这个命题给我们证明数列极限的存在性提供了一种想法:
   我们可以将数列的收敛性转化为级数的收敛性,或者将数列的收敛性转化为累乘的收敛性.而累乘可以通过取对数的方式转化成级数的形式,这样就可以利用级数的相关理论来证明数列的收敛性.

   这种想法的\textbf{具体操作方式:}

   (i)先令数列相邻两项作差或作商,将数列的极限写成其相邻两项的差的级数或其相邻两项的商的累乘形式.(如果是累乘的形式,那么可以通过取对数的方式将其转化成级数的形式.)

   (ii)若能直接证明累乘或级数收敛,就直接证明即可.若不能,则再利用级数的相关理论来证明上述构造的级数的收敛性,从而得到数列的极限的存在性.
   此时,我们一般会考虑这个级数的通项,然后去找一个通项能够控制住所求级数通项的收敛级数(几何级数等),最后利用级数的比较判别法来证明级数收敛
\end{note}
\begin{proof}
\begin{enumerate}
   \item 必要性($\Rightarrow$)和充分性($\Leftarrow$)都可由$\underset{n\rightarrow \infty}{\lim}a_n=a_1+\underset{n\rightarrow \infty}{\lim}\sum_{k=1}^{n-1}{\left( a_{k+1}-a_k \right)}$直接得到.

   \item 必要性($\Rightarrow$)和充分性($\Leftarrow$)都可由$\underset{n\rightarrow \infty}{\lim}a_n=\underset{n\rightarrow \infty}{\lim}a_1\prod_{k=1}^{n-1}{\frac{a_{k+1}}{a_k}}$直接得到.
\end{enumerate}
\end{proof}


\subsubsection{单调有界原理的应用}

\begin{example}
   设\(a_n,b_n\geq0\)且\(a_{n + 1}<a_n + b_n\)，同时\(\sum_{n = 1}^{\infty}b_n\)收敛，证明：\(a_n\)也收敛.
\end{example}
\begin{remark}
   \hypertarget{example4.58不妨设的原因}{不妨设 \(m_k > n_k\) 的原因:}由假设 \(a_n\) 不收敛可知，存在 \(\delta > 0\)，对 \(\forall N > 0\)，都存在 \(m \in \mathbb{N}\)，使得 \(\vert a_m - A \vert \geqslant \delta\)。从而
\begin{align*}
&\text{取 }N = n_1 > 0\text{，则存在 }m_1 \in \mathbb{N}\text{，使得 }\vert a_{m_1} - A \vert \geqslant \delta.\\
&\text{取 }N = n_2 > 0\text{，则存在 }m_2 \in \mathbb{N}\text{，使得 }\vert a_{m_2} - A \vert \geqslant \delta.\\
&\cdots\cdots\\
&\text{取 }N = n_k > 0\text{，则存在 }m_k \in \mathbb{N}\text{，使得 }\vert a_{m_k} - A \vert \geqslant \delta.\\
&\cdots\cdots
\end{align*}
这样就得到了一个子列 \(\{ a_{m_k} \}\) 满足对 \(\forall n \in \mathbb{N}_+\)，都有 \(m_k > n_k\) 且 \(\vert a_{m_k} - A \vert \geqslant \delta\)。
\end{remark}
\begin{proof}
由 \(a_{n + 1} < a_n + b_n\) 可得
\begin{align}
   a_n = a_1 + \sum_{i = 1}^{n - 1} (a_{i + 1} - a_i) < a_1 + \sum_{i = 1}^{n - 1} b_i, \forall n \geqslant 2. \label{example4.58-1.1}
\end{align}
又 \(\sum_{n = 1}^{\infty} b_n\) 收敛，故对 \(\forall n \in \mathbb{N}\)，有 \(\sum_{i = 1}^n b_i\) 有界。再结合 \eqref{example4.58-1.1} 式可知，\(a_n\) 也有界。由聚点定理可知，存在一个收敛子列 \(\{ a_{n_k} \}\)，设 \(\lim_{k \to \infty} a_{n_k} = A < \infty\)。

（反证）假设 \(a_n\) 不收敛，则存在 \(\delta > 0\) 和一个子列 \(\{ a_{m_k} \}\)，使得
\begin{align*}
   \vert a_{m_k} - A \vert \geqslant \delta, \forall n \in \mathbb{N}_+. 
\end{align*}
\hyperlink{example4.58不妨设的原因}{不妨设 \(m_k > n_k, \forall n \in \mathbb{N}_+\)}。此时分两种情况讨论。

(i) 如果有无穷多个 \(k\)，使得 \(a_{m_k} \geqslant A + \delta\) 成立。再结合条件可得，对这些 \(k\)，都有
\begin{align}
a_{m_k} - a_{n_k} &= \sum_{i = n_k}^{m_k - 1} (a_{i + 1} - a_i) < \sum_{i = n_k}^{m_k - 1} b_i, \label{example4.58-1.3}\\
a_{m_k} - a_{n_k} &= (a_{m_k} - A) + (A - a_{n_k}) \geqslant \delta + (A - a_{n_k}). \label{example4.58-1.4}
\end{align}
又因为 \(\sum_{n = 1}^{\infty} b_n\) 收敛和 \(\lim_{k \to \infty} a_{n_k} = A\)，所以
\[
\lim_{k \to \infty} \sum_{i = n_k}^{m_k - 1} b_i = \lim_{k \to \infty} (A - a_{n_k}) = 0.
\]
于是对 \eqref{example4.58-1.3}\eqref{example4.58-1.4} 式两边同时令 \(k \to \infty\)，得到
\[
0 < \delta \leqslant \lim_{k \to \infty} (a_{m_k} - a_{n_k}) \leqslant \lim_{k \to \infty} \sum_{i = n_k}^{m_k - 1} b_i = 0.
\]
上述不等式矛盾。

(ii) 如果有无穷多个 \(k\)，使得 \(a_{m_k} \leqslant A - \delta\) 成立。取 \(\{ a_{n_k} \}\) 的一个子列 \(\{ a_{t_k} \}\)，使得 \(t_k > m_k, \forall n \in \mathbb{N}_+\)，则 \(\lim_{k \to \infty} a_{t_k} = \lim_{k \to \infty} a_{n_k} = A\)。
再结合条件可得，对这些 \(k\)，都有
\begin{align}
a_{t_k} - a_{m_k} &= \sum_{i = m_k}^{t_k - 1} (a_{i + 1} - a_i) < \sum_{i = m_k}^{t_k - 1} b_i, \label{example4.58-1.5}\\
a_{t_k} - a_{m_k} &= (a_{t_k} - A) + (A - a_{m_k}) \geqslant (a_{t_k} - A) + \delta. \label{example4.58-1.6}
\end{align}
又因为 \(\sum_{n = 1}^{\infty} b_n\) 收敛和 \(\lim_{k \to \infty} a_{t_k} = A\)，所以
\[
\lim_{k \to \infty} \sum_{i = m_k}^{t_k - 1} b_i = \lim_{k \to \infty} (a_{t_k} - A) = 0.
\]
于是对 \eqref{example4.58-1.5}\eqref{example4.58-1.6}式两边同时令 \(k \to \infty\)，得到
\[
0 < \delta \leqslant \lim_{k \to \infty} (a_{t_k} - a_{m_k}) \leqslant \lim_{k \to \infty} \sum_{i = m_k}^{t_k - 1} b_i = 0.
\]
上述不等式矛盾。结论得证。
\end{proof}

\begin{example}
   设\(a_{n + 1}=\ln\left(\frac{e^{a_n}-1}{a_n}\right)\)，\(a_1 = 1\)，证明：极限\(\lim_{n\rightarrow\infty}2^na_n\)存在。
\end{example}
\begin{note}
   本题证明的思路分析:

   注意到递推函数 \(f(x)=\ln\left(\frac{e^x - 1}{x}\right)\) 在 \((0, +\infty)\) 上单调递增，且 \(a_1 = 1>0\)。因此直接利用单调分析法归纳证明 \(\{ a_n \}\) 单调有界且 \(a_n\in(0, 1]\)。进而得到 \(\lim_{n \to \infty} a_n = 0\)。再利用命题 \(4.9\) 将 \(2^n a_n\) 转化为级数的形式。因为递推函数与 \(\ln\) 有关，所以我们考虑作差转换，即
   \[
   2^{n + 1} a_{n + 1} = \sum_{k = 1}^n (2^{k + 1} a_{k + 1} - 2^k a_k) = \sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right).
   \]
   因此我们只需证明级数 \(\sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right)\) 收敛即可。考虑其通项 \(2^{n + 1}\left(\ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n\right)\)。由于 \(\lim_{n \to \infty} a_n = 0\)，因此利用 Taylor 公式可得
   \begin{align*}
   \ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n &= \ln\frac{a_n+\frac{a_n^2}{2}+\frac{a_n^3}{6}+o(a_n^3)}{a_n} - \frac{1}{2} a_n
   = \ln\left(1 + \frac{a_n}{2}+\frac{a_n^2}{6}+o(a_n^2)\right) - \frac{1}{2} a_n\\
   &= \frac{a_n}{2}+\frac{a_n^2}{6}+o(a_n^2) - \left(\frac{a_n}{2}+\frac{a_n^2}{6}+o(a_n^2)\right)^2 + o(a_n^2) - \frac{1}{2} a_n
   = \frac{a_n^2}{24}, n \to \infty.
   \end{align*}
   故当 \(n\) 充分大时，我们有
   \[
   2^{n + 1}\left(\ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n\right) = \frac{1}{24} 2^{n + 1} a_n^2.
   \]
   于是我们只须证级数 \(\sum_{k = 1}^n \frac{1}{24} 2^{n + 1} a_n^2\) 收敛即可。因此我们需要找到一个收敛级数 \(\sum_{k = 1}^n c_n\)，使得 \(2^{n + 1} a_n^2\) 被这个收敛级数的通项 \(c_n\) 控制，即当 \(n\) 充分大时，有
   \[
   2^{n + 1} a_n^2 \leq c_n.
   \]
   又题目要证 \(\lim_{n \to \infty} 2^n a_n\) 存在，说明 \(\lim_{n \to \infty} 2^n a_n\) 一定存在，从而一定有
   \begin{align}
      a_n \sim \frac{c}{2^n}, n \to \infty, \label{example4.58note-1.1}
   \end{align}
   其中 \(c\) 为常数。虽然无法直接证明 \eqref{example4.58note-1.1} 式，但是 \eqref{example4.58note-1.1}式给我们提供了一种找 \(c_n\) 的想法。\eqref{example4.58note-1.1}式表明 \(a_n\) 与几何级数的通项近似，于是一定存在 \(\lambda \in (0, 1)\)，使得 \(a_n \approx \frac{c}{2^n} \leq c_0 \lambda ^n, n \to \infty\)。其中 \(c_0\) 为常数。从而
   \[
   2^{n + 1} a_n^2 \leq c_0^2 2^{n + 1} \lambda ^{2n} = c_1 (2\lambda ^2)^n, n \to \infty.
   \]
   故我们只需要保证 \(\sum_{n = 1}^{\infty} (2\lambda ^2)^n\) 收敛，就能由级数的比较判别法推出 \(\sum_{k = 1}^n \frac{1}{24} 2^{n + 1} a_n^2\) 收敛。因此我们待定 \(\lambda \in (0, 1)\)，使得 \(\sum_{n = 1}^{\infty} (2\lambda ^2)^n\) 恰好就是一个几何级数。于是 \(2\lambda ^2 < 1 \Rightarrow \lambda < \frac{\sqrt{2}}{2}\)。故我们只要找到一个恰当的 \(\lambda \in \left(0, \frac{\sqrt{2}}{2}\right)\)，使得
   \begin{align}
     a_n \leq c_0 \lambda ^n, n \to \infty. \label{example4.58note-0.1}
   \end{align}
   其中 \(c_0\) 为常数，即可。我们需要与已知的递推条件联系起来，因此考虑
   \begin{align}
   a_{n + 1} \leq c_0 \lambda ^{n + 1}, n \to \infty. \label{example4.58note-0.2}
   \end{align}
   又 \(a_n \in (0, 1]\)，显然将\eqref{example4.58note-0.1}与\eqref{example4.58note-0.2} 式作商得到
   \[
      a_n\leqslant c_0\lambda ^n,n\rightarrow \infty \Leftrightarrow \frac{a_{n+1}}{a_n}\le \lambda ,n\rightarrow \infty \Leftrightarrow \frac{f(a_n)}{a_n}\le \lambda ,n\rightarrow \infty 
   \]
   又 \(\lim_{n \to \infty} a_n = 0\)，故上式等价于
   \[
   \lim_{x \to 0^+} \frac{f(x)}{x} \leq \lambda \Leftrightarrow \lim_{x \to 0^+} \frac{\ln\left(\frac{e^x - 1}{x}\right)}{x} \leq \lambda 
   \]
   注意到 \(\lim_{x \to 0^+} \frac{\ln\left(\frac{e^x - 1}{x}\right)}{x} = \lim_{x \to 0^+} \frac{\frac{x}{2}+o(x)}{x} = \frac{1}{2}\)，所以任取 \(\lambda \in \left(\frac{1}{2}, \frac{\sqrt{2}}{2}\right)\) 即可。最后根据上述思路严谨地书写证明即可。
   
   （注：也可以利用 \(f(x)\) 的凸性去找 \(\lambda \in \left(\frac{1}{2}, \frac{\sqrt{2}}{2}\right)\)，见下述证明过程。 ）
\end{note}
\begin{proof}
令 \(f(x)=\ln\left(\frac{e^x - 1}{x}\right)\)，注意到对 \(\forall x > 0\)，有
\begin{align*}
& \quad f(x) < x \Leftrightarrow \ln\left(\frac{e^x - 1}{x}\right) < x \Leftrightarrow \frac{e^x - 1}{x} < e^x \Leftrightarrow \ln x > 1 - \frac{1}{x}\\
&\Leftrightarrow \ln\frac{1}{t} > 1 - t,\text{ 其中 }t = \frac{1}{x} > 0 \Leftrightarrow \ln t < t - 1,\text{ 其中 }t = \frac{1}{x} > 0.
\end{align*}
上式最后一个不等式显然成立。因此
\begin{align}
 f(x)=\ln\left(\frac{e^x - 1}{x}\right) < x,\forall x > 0. \label{1example4.59-1.1}  
\end{align}
由 \(e^x - 1 > x,\forall x \in \mathbb{R}\) 可知
\begin{align}
   f(x)=\ln\left(\frac{e^x - 1}{x}\right) > \ln 1 = 0,\forall x > 0. \label{1example4.59-1.2}
\end{align}
从而由 \eqref{1example4.59-1.1}\eqref{1example4.59-1.2} 式及 \(a_1 = 1\)，归纳可得 \(\forall n \in \mathbb{N}_+\)，都有
\[
a_{n + 1} = f(a_n) < a_n,\quad a_{n + 1} = f(a_n) > 0.
\]
故数列 \(\{ a_n \}\) 单调递减且有下界 \(0\)。于是 \(a_n \in (0, 1]\)，并且由单调有界原理可知 \(\lim_{n \to \infty} a_n = A \in [0, 1]\)。
对 \(a_{n + 1} = \ln\left(\frac{e^{a_n} - 1}{a_n}\right)\) 两边同时令 \(n \to \infty\)，得到
\[
A = \ln\left(\frac{e^A - 1}{A}\right) \Leftrightarrow Ae^A = e^A - 1 \Leftrightarrow (1 - A)e^A = 1.
\]
显然上述方程只有唯一解：\(A = 0\)。故 \(\lim_{n \to \infty} a_n = 0\)。下面证明 \(\lim_{n \to \infty} 2^n a_n\) 存在。
由 \(a_{n + 1} = \ln\left(\frac{e^{a_n} - 1}{a_n}\right)\) 可得，对 \(\forall n \in \mathbb{N}_+\)，都有
\[
2^{n + 1} a_{n + 1} - 2^n a_n = 2^{n + 1}\left[\ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n\right].
\]
从而
\[
2^{n + 1} a_{n + 1} = 2a_1 + \sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right) = 2 + \sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right),\forall n \in \mathbb{N}_+.
\]
故要证 \(\lim_{n \to \infty} 2^n a_n\) 存在，即证 \(\sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right)\) 收敛。
注意到
\begin{align*}
   \lim_{x\rightarrow 0} \frac{\ln \frac{e^x-1}{x}-\frac{1}{2}x}{x^2}&=\lim_{x\rightarrow 0} \frac{\ln \frac{x+\frac{x^2}{2}+\frac{x^3}{6}+o(x^3)}{x}-\frac{1}{2}x}{x^2}=\lim_{x\rightarrow 0} \frac{\ln \left( 1+\frac{x}{2}+\frac{x^2}{6}+o(x^2) \right) -\frac{1}{2}x}{x^2}
   \\
   &=\lim_{x\rightarrow 0} \frac{\frac{x}{2}+\frac{x^2}{6}+o(x^2)-\left( \frac{x}{2}+\frac{x^2}{6}+o(x^2) \right) ^2+o(x^2)-\frac{1}{2}x}{x^2}
   \\
   &=\lim_{x\rightarrow 0} \frac{\frac{x^2}{24}+o(x^2)}{x^2}=\frac{1}{24}<1,
\end{align*}
再结合 \(\lim_{n \to \infty} a_n = 0\) 可得，\(\lim_{n \to \infty} \frac{\ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n}{a_n^2} = \frac{1}{24} < 1\)。故存在 \(N \in \mathbb{N}_+\)，使得
\begin{align}
   \ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n < a_n^2,\forall n > N. \label{example4.59-3.1}
\end{align}
由 \(f(x)=\ln\left(\frac{e^x - 1}{x}\right)\) 可知，\(f'(x)=\frac{e^x}{e^x - 1} - \frac{1}{x}\)，\(f''(x)=\frac{1}{x^2} - \frac{e^x}{(e^x - 1)^2}\)。注意到对 \(\forall x \in (0, 1]\)，都有
\begin{align*}
& \quad \quad f''(x) > 0 \Leftrightarrow \frac{1}{x^2} > \frac{e^x}{(e^x - 1)^2}\\
&\Leftrightarrow \frac{1}{\ln^2 t} > \frac{t}{(t - 1)^2},\text{ 其中 }t = e^x > 1\\
&\Leftrightarrow \ln t < \frac{t - 1}{\sqrt{t}} = \sqrt{t} - \frac{1}{\sqrt{t}},\text{ 其中 }t = e^x > 1
\end{align*}
而上式最后一个不等式显然成立\hyperref[proposition:关于ln的常用不等式2]{(见关于ln的常用不等式\ref{proposition:关于ln的常用不等式2})}。故 \(f''(x) > 0,\forall x \in (0, 1]\)。故 \(f\) 在 \((0, 1]\) 上是下凸函数。从而由下凸函数的性质（切割线放缩）可得，\(\forall x \in (0, 1]\)，固定 \(x\)，对 \(\forall y \in (0, x)\)，都有
\begin{align}
   f'(y) x \leq f(x) \leq [f(1) - f(y)] x = [\ln(e - 1) - f(y)] x. \label{example4.59-2.1}
\end{align}
注意到
\begin{align*}
&\lim_{y \to 0^+} f(y) = \lim_{y \to 0^+} \ln\left(\frac{e^y - 1}{y}\right) = \ln\left(\lim_{y \to 0^+} \frac{e^y - 1}{y}\right) = \ln 1 = 0,\\
&\lim_{y \to 0^+} f'(y) = \lim_{y \to 0^+} \left(\frac{e^y}{e^y - 1} - \frac{1}{y}\right) = \lim_{y \to 0^+} \frac{e^y(y - 1) + 1}{y(e^y - 1)}\\
&= \lim_{y \to 0^+} \frac{(1 + y + \frac{1}{2} y^2 + o(y^2))(y - 1) + 1}{y^2} = \lim_{y \to 0^+} \frac{\frac{1}{2} y^2 + o(y^2)}{y^2} = \frac{1}{2}.
\end{align*}
于是令 \eqref{example4.59-2.1} 式 \(y \to 0^+\)，得到
\[
\frac{1}{2} x = \lim_{y \to 0^+} f'(y) x \leq f(x) \leq [\ln(e - 1) - \lim_{y \to 0^+} f(y)] x = x \ln(e - 1),\forall x \in (0, 1].
\]
又 \(a_n \in (0, 1]\)，故
\[
\frac{1}{2} a_n \leq a_{n + 1} = f(a_n) \leq \ln(e - 1) a_n,\forall n \in \mathbb{N}_+.
\]
从而
\begin{align}
  \frac{1}{2} \leq \frac{a_{n + 1}}{a_n} \leq \ln(e - 1) < \frac{\sqrt{2}}{2},\forall n \in \mathbb{N}_+. \label{example4.59-4.1} 
\end{align}
因此
\begin{align}
   a_n = a_1 \prod_{k = 1}^{n - 1} \frac{a_{k + 1}}{a_k} \leq [\ln(e - 1)]^{n - 1},\forall n \in \mathbb{N}_+. \label{example4.59-3.2}
\end{align}
于是结合 \eqref{example4.59-3.1}\eqref{example4.59-3.2} 式可得对 \(\forall n > N\)，我们有
\[
2^{n + 1}\left(\ln\left(\frac{e^{a_n} - 1}{a_n}\right) - \frac{1}{2} a_n\right) < 2^{n + 1} a_n^2 \leq 2^{n + 1}[\ln(e - 1)]^{2n - 2} = \frac{2}{\ln^2(e - 1)}[2\ln^2(e - 1)]^n.
\]
又由 \eqref{example4.59-4.1}式可知，\(2\ln^2(e - 1) < 2\cdot\left(\frac{\sqrt{2}}{2}\right)^2 = 1\)。故 \(\sum_{k = 1}^n \frac{2}{\ln^2(e - 1)}[2\ln^2(e - 1)]^k\) 收敛。从而由比较判别法知，\(\sum_{k = 1}^n 2^{k + 1}\left(\ln\left(\frac{e^{a_k} - 1}{a_k}\right) - \frac{1}{2} a_k\right)\) 也收敛。结论得证。
\end{proof}

\begin{example}
   设\(a_n=\left(\frac{(2n)!!}{(2n - 1)!!}\right)^2\frac{1}{2n + 1}\)，证明：数列\(a_n\)收敛到一个正数。
\end{example}
\begin{proof}
   由条件可得 \(\forall n\in \mathbb{N}_+\)，都有
\begin{align*}
   \frac{a_{n+1}}{a_n}=\frac{\left( \frac{(2n+2)!!}{(2n+1)!!} \right) ^2\frac{1}{2n+3}}{\left( \frac{(2n)!!}{(2n-1)!!} \right) ^2\frac{1}{2n+1}}=\frac{\left( 2n+2 \right) ^2}{\left( 2n+1 \right) ^2}\cdot \frac{2n+1}{2n+3}=\frac{\left( 2n+2 \right) ^2}{\left( 2n+1 \right) \left( 2n+3 \right)}=1+\frac{1}{\left( 2n+1 \right) \left( 2n+3 \right)}>1.
\end{align*}
从而 \(\forall n\in \mathbb{N}_+\)，都有
\begin{align}
   a_n=\prod_{k = 1}^{n - 1}\left[1+\frac{1}{(2k + 1)(2k + 3)}\right]=e^{\sum\limits_{k = 1}^{n - 1}\ln\left[1+\frac{1}{(2k + 1)(2k + 3)}\right]}. \label{example60-1.1}
\end{align}
注意到
\[
\ln\left[1+\frac{1}{(2n + 1)(2n + 3)}\right]\sim\frac{1}{(2n + 1)(2n + 3)},n\rightarrow\infty.
\]
而 \(\sum_{n = 1}^{\infty}\frac{1}{(2n + 1)(2n + 3)}\) 收敛，故 \(\lim_{n\rightarrow\infty}\sum_{k = 1}^{n - 1}\ln\left[1+\frac{1}{(2k + 1)(2k + 3)}\right]\) 存在。于是由 \eqref{example60-1.1}式可知
\[
\lim_{n\rightarrow\infty}a_n=\lim_{n\rightarrow\infty}e^{\sum\limits_{k = 1}^{n - 1}\ln\left[1+\frac{1}{(2k + 1)(2k + 3)}\right]}=e^{\lim\limits_{n\rightarrow\infty}\sum\limits_{k = 1}^{n - 1}\ln\left[1+\frac{1}{(2k + 1)(2k + 3)}\right]}
\]
也存在。
\end{proof}

\begin{example}[$\,\,$Herschfeld判别法]\label{example:Herschfeld判别法}
   设\(p > 1\)，令\(a_n=\sqrt[p]{b_1 + \sqrt[p]{b_2+\cdots+\sqrt[p]{b_n}}}\)，\(b_n>0\)，证明：数列\(a_n\)收敛等价于数列\(\frac{\ln b_n}{p^n}\)有界。
\end{example}
\begin{remark}
   这个很抽象的结果叫做Herschfeld判别法,但是证明起来只需要单调有界。
\end{remark}
\begin{proof}
   由条件可知 \(a_2 > a_1\)，假设 \(a_n > a_{n - 1}\)，则由 \(b_n > 0\) 可得
\[
a_{n + 1}=\sqrt[p]{b_1+\sqrt[p]{b_2+\cdots +\sqrt[p]{b_n+\sqrt[p]{b_{n + 1}}}}}>\sqrt[p]{b_1+\sqrt[p]{b_2+\cdots +\sqrt[p]{b_n}}}=a_n.
\]
由数学归纳法可知 \(\{ a_n \}\) 单调递增。

若 \(a_n\) 收敛，则由单调有界定理可知，\(a_n\) 有上界。即存在 \(M > 0\)，使得 \(a_n < M,\forall n\in \mathbb{N}_+\)。从而
\[
M > a_n=\sqrt[p]{b_1+\sqrt[p]{b_2+\cdots +\sqrt[p]{b_n}}}>\sqrt[p]{0+\sqrt[p]{0+\cdots +\sqrt[p]{b_n}}}=b_n^{\frac{1}{p^n}},\forall n\in \mathbb{N}_+.
\]
故
\[
\frac{\ln b_n}{p^n}=\ln b_n^{\frac{1}{p^n}}<\ln M,\forall n\in \mathbb{N}_+.
\]
即 \(\frac{\ln b_n}{p^n}\) 有界。

若 \(\frac{\ln b_n}{p^n}\) 有界，则存在 \(M_1 > 0\)，使得
\begin{align}
   \frac{\ln b_n}{p^n}<M_1,\forall n\in \mathbb{N}_+. \label{1example4.61-1.1}
\end{align}
记 \(C = e^{M_1}\)，则由 \eqref{1example4.61-1.1}式可得
\[
b_n<e^{M_1p^n}=C^{p^n},\forall n\in \mathbb{N}_+.
\]
从而
\begin{align}
   a_n=\sqrt[p]{b_1+\sqrt[p]{b_2+\cdots +\sqrt[p]{b_n}}}<\sqrt[p]{C^p+\sqrt[p]{C^{p^2}+\cdots +\sqrt[p]{C^{p^n}}}}=C\sqrt[p]{1+\sqrt[p]{1+\cdots +\sqrt[p]{1}}}. \label{1example4.61-2.1}
\end{align}
考虑数列 \(x_1 = 1,x_{n + 1}=\sqrt[p]{1 + x_n},\forall n\in \mathbb{N}_+\)。显然 \(x_n > 0\)，记 \(f(x)=\sqrt[p]{1 + x}\)，则
\[
f'(x)=\frac{1}{p}(1 + x)^{\frac{1}{p}-1}<\frac{1}{p}<1,\forall x > 0.
\]
而显然 \(f(x)=x\) 有唯一解 \(a > 1\)，从而由 Lagrange 中值定理可得 \(\forall n\in \mathbb{N}_+\)，存在 \(\xi_n\in(\min\{ x_n,a \},\max\{ x_n,a \})\)，使得
\[
|x_{n + 1}-a|=|f(x_n)-f(a)|=f'(\xi_n)|x_n - a|<\frac{1}{p}|x_n - a|.
\]
于是
\[
|x_{n + 1}-a|<\frac{1}{p}|x_n - a|<\frac{1}{p^2}|x_{n - 1}-a|<\cdots <\frac{1}{p^n}|x_1 - a|\rightarrow 0,n\rightarrow\infty.
\]
故 \(x_n\) 收敛到 \(a\)，因此 \(x_n\) 有界，即存在 \(K\)，使得 \(x_n < K,\forall n\in \mathbb{N}_+\)。于是结合 \eqref{1example4.61-2.1} 可得
\[
a_n=C\sqrt[p]{1+\sqrt[p]{1+\cdots +\sqrt[p]{1}}}=Cx_n<CK,\forall n\in \mathbb{N}_+.
\]
即 \(a_n\) 有界，又因为 \(\{ a_n \}\) 单调递增，所以由单调有界定理可知，\(a_n\) 收敛。
\end{proof}






\subsubsection{抽象递推数列关于不动点的问题}

\begin{lemma}[有界数列差分极限为0则其闭包一定是闭区间]\label{lemma:有界数列差分极限为0则其闭包一定是闭区间}
有界数列 \( x_n \) 如果满足$\lim_{n \to \infty} (x_{n+1} - x_n) = 0$,
则 \( x_n \) 的全体聚点构成一个闭区间(且这个闭区间的端点就是数列的上下极限).
\end{lemma}
\begin{note}
   先根据条件直观地画图分析,分析出大致的思路后,再考虑严谨地书写证明.
\end{note}
\begin{proof}
   当数列\(x_n\)收敛时，\(x_n\)的聚点集为单点集，结论显然成立。

   当数列\(x_n\)不收敛时，因为数列\(x_n\)有界，所以可设\(\limsup_{n\rightarrow \infty}x_n = L<\infty\),\(\liminf_{n\rightarrow \infty}x_n = l<L\)。假设\(\exists A\in (l,L)\)，使得\(A\)不是\(x_n\)的极限点。则\(\exists \delta \in \left( 0,\min \{ L - A,A - l \} \right)\)，使得区间\((A - \delta,A + \delta)\subseteq (l,L)\)中只包含了数列\(x_n\)中有限项。因此存在\(N_1\in \mathbb{N}\)，使得当\(n > N_1\)时，有\(\vert x_n - A\vert\geqslant \delta\)。即
   \begin{align}
      \text{当}n>N_1\text{时},\text{要么}x_n\geqslant A+\delta ,\text{要么}x_n\leqslant A-\delta .\label{lemma4.1-1.1}
   \end{align}
   由\(\lim_{n\rightarrow \infty}(x_{n + 1} - x_n) = 0\)可知，存在\(N_2\in \mathbb{N}\)，使得
   \begin{align}
      \vert x_{n + 1} - x_n\vert<\delta,\forall n > N_2. \label{lemma4.1-1.2}
   \end{align}
   取\(N = \max \{ N_1,N_2 \}\)。由\(\limsup_{n\rightarrow \infty}x_n = L\)和\(\liminf_{n\rightarrow \infty}x_n = l\)可知，对\(\forall \varepsilon \in \left( 0,\min \{ L - A - \delta,A - l - \delta,\frac{L - l}{2} \} \right)\)，存在子列\(\{ x_{n_k} \}\)，\(\{ x_{m_k} \}\)，使得对\(\forall k\in \mathbb{N}_+\cap (N,+\infty)\)，都有
   \[
   x_{m_k}<l + \varepsilon \leqslant A - \delta <A + \delta \leqslant L - \varepsilon <x_{n_k}.
   \]
   任取\(K\in \mathbb{N}_+\cap (N,+\infty)\)，则\(x_{m_K}<l + \varepsilon \leqslant A - \delta <A + \delta \leqslant L - \varepsilon <x_{n_K}\)。不妨设\(n_K>m_K\)，则\(n_K>m_K\geqslant K>N\)。现在考虑\(x_{m_K},x_{m_K + 1},\cdots,x_{n_K - 1},x_{n_K}\)这些项。将其中最后一个小于等于\(A - \delta\)的项记为\(x_s\)，显然\(n_K - 1\geqslant s\geqslant m_K\geqslant K>N\)，进而\(s + 1\in [m_K + 1,n_K]\)，于是\(x_{s + 1}>A - \delta\)。又因为\(s + 1\geqslant m_K + 1>K>N\)，所以结合\eqref{lemma4.1-1.1}可知，\(x_{s + 1}\geqslant A + \delta\)。因此\(\vert x_{s + 1} - x_s\vert\geqslant 2\delta\)。这与\eqref{lemma4.1-1.2}式矛盾! 因此\(x_n\)的全体聚点构成一个闭区间$[l,L]$.
\end{proof}

\begin{example}
设连续函数 \( f(x) : [0,1] \to [0,1], x_1 \in [0,1], x_{n+1} = f(x_n) \),证明:数列 \(\{x_n\}\) 收敛的充要条件是
\[
\lim_{n \to \infty} (x_{n+1} - x_n) = 0.
\]
\end{example}
\begin{note}
   先根据条件直观地画图分析,分析出大致的思路后,再考虑严谨地书写证明.
\end{note}
\begin{remark}
   $x_{n_k} \rightarrow A \Rightarrow x_{n_{k+1}} \rightarrow A$,$k \rightarrow \infty$。但是 $x_{n_k} \rightarrow A \nRightarrow x_{n_k + 1} \rightarrow A$,$k \rightarrow \infty$。
   \end{remark}
\begin{proof}
   {\heiti 必要性:}如果 \( x_{n} \) 收敛，则显然$\lim _{n \to \infty } ( x_{n+1}-x_{n})=0$.

   {\heiti 充分性:}假设数列$x_n$不收敛.设$\underset{n\rightarrow \infty}{\overline{\lim }}x_n=L,\underset{n\rightarrow \infty}{\underline{\lim }}x_n=l$,则由条件可知$l<L$且$\left[ l,L \right] \subseteq \left[ 0,1 \right]$.从而由\hyperref[lemma:有界数列差分极限为0则其闭包一定是闭区间]{引理\ref{lemma:有界数列差分极限为0则其闭包一定是闭区间}}可知,数列\(x_n\)的全体聚点构成一个闭区间$[l,L]$.于是\(\forall A\in [l,L]\)，则存在一个子列\(\{ x_{n_k} \}\)，使得\(\lim_{k\rightarrow \infty}x_{n_k}=A\)。由\(\lim_{n\rightarrow \infty}(x_{n + 1} - x_n) = 0\)可知，\(\lim_{k\rightarrow \infty}x_{n_k + 1}=\lim_{k\rightarrow \infty}x_{n_k}=A\)。根据\(x_{n + 1}=f(x_n)\)可得\(x_{n_k + 1}=f(x_{n_k})\)，令\(k\rightarrow \infty\)，再结合\(f\in C[0,1]\)可得
   \begin{align}
      A = f(A),\forall A\in [l,L]. \label{example5.58-1.1}
   \end{align}
   因此取\(A = \frac{l + L}{2}\)，这也是\(x_n\)的一个极限点，从而令\(\varepsilon_0=\frac{L - l}{2}\)存在\(N\in \mathbb{N}\)，使得
   \[
   l = A - \varepsilon_0<x_N<A + \varepsilon_0 = L.
   \]
   即\(x_N\in [l,L]\)。于是由\(x_{n + 1}=f(x_n)\)及\eqref{example5.58-1.1}式可得\(x_{N + 1}=f(x_N)=x_N\)。从而归纳可得\(x_n=x_N,\forall n\in \mathbb{N}_+\cap (N,+\infty)\)。显然此时\(x_n\)收敛到\(x_N\)，这与\(x_n\)不收敛矛盾! 故数列\(x_n\)收敛。 
\end{proof}



\begin{example}
对正整数\(n\)，方程\(\left(1 + \frac{1}{n}\right)^{n + t}=e\)的解记为\(t = t(n)\)，证明\(t(n)\)关于\(n\)递增并求极限\((t\to +\infty)\).
\end{example}
\begin{solution}
解方程得到
\begin{align*}
\left(1 + \frac{1}{n}\right)^{n + t}=e\Leftrightarrow(n + t)\ln\left(1 + \frac{1}{n}\right)=1\Leftrightarrow t=\frac{1}{\ln\left(1 + \frac{1}{n}\right)}-n.
\end{align*}
设$f(x)=\frac{1}{\ln\left(1 + \frac{1}{x}\right)}-x,x>0$,则
\begin{align*}
   f^\prime(x)=\frac{1}{\ln^{2}\left(1 + \frac{1}{x}\right)}\frac{1}{x^{2}+x}-1>0
\Leftrightarrow\ln^{2}\left(1 + \frac{1}{x}\right)<\frac{1}{x^{2}+x}\Leftrightarrow\ln\mathrm{(}1+t)<\frac{t}{\sqrt{1+t}},t=\frac{1}{x}\in \left( 0,1 \right) .
\end{align*}
最后的不等式由\hyperref[proposition:关于ln的常用不等式1]{关于ln的常用不等式}可知显然成立,于是$f(x)$单调递增,故$t(n)=f(n)$也单调递增.再来求极限
\[
   \lim_{n\rightarrow \infty} t\left( n \right) =\lim_{n\rightarrow \infty} \left( \frac{1}{\ln \left( 1+\frac{1}{n} \right)}-n \right) =\lim_{n\rightarrow \infty} \frac{1-n\ln \left( 1+\frac{1}{n} \right)}{\ln \left( 1+\frac{1}{n} \right)}=\lim_{x\rightarrow +\infty} \frac{1-x\ln \left( 1+\frac{1}{x} \right)}{\ln \left( 1+\frac{1}{x} \right)}=\lim_{x\rightarrow +\infty} \frac{1-x\ln \left( 1+\frac{1}{x} \right)}{\frac{1}{x}}=\frac{1}{2}.
\]
\end{solution}










\section{分部积分}

分析学里流传着一句话:“遇事不决分部积分”.

分部积分在渐近分析中的用法:
\begin{enumerate}[(1)]
   \item\label{分部积分在渐近分析中的用法(1)} 有时候分部积分不能计算出某一积分的具体值,但是我们可以利用分部积分去估计原积分(或原含参积分)的范围.并且我们可以通过不断分部积分来提高估计的精确程度.
   
   \item\label{分部积分在渐近分析中的用法(2)} 分部积分也可以转移被积函数的导数.
   
   \item\label{分部积分在渐近分析中的用法(3)} 分部积分可以改善阶.通过分部积分提高分母的次方从而增加收敛速度方便估计.并且可以通过反复分部积分得到更加精细的估计.
\end{enumerate}

\begin{example}
\begin{align*}
   f\left( x \right) =\int_x^{x+1}{\sin \left( t^2 \right) dt}.
\end{align*}
证明$\left| f\left( x \right) \right|\le \frac{1}{x},x>0$.
\end{example}
\begin{note}
证明的想法是利用\hyperref[分部积分在渐近分析中的用法(1)]{分部积分在渐近分析中的用法(1)}.
\end{note}
\begin{proof}
由分部积分可得,对$\forall x>0$,都有
\begin{align*}
&\left| f\left( x \right) \right|=\left| \int_x^{x+1}{\sin \left( t^2 \right) dt} \right|=\left| \int_{x^2}^{\left( x+1 \right) ^2}{\frac{\sin u}{2\sqrt{u}}du} \right|=\left| -\frac{1}{4}\int_{x^2}^{\left( x+1 \right) ^2}{u^{-\frac{3}{2}}\cos udu}-\frac{\cos u}{2\sqrt{u}}\Big|_{x^2}^{\left( x+1 \right) ^2} \right|
\\
&\leqslant \left| \frac{1}{4}\int_{x^2}^{\left( x+1 \right) ^2}{u^{-\frac{3}{2}}du} \right|+\left| \frac{\cos x}{2x}-\frac{\cos \left( x+1 \right)}{2\left( x+1 \right)} \right|=\frac{1}{2}\left| \frac{1}{x}-\frac{1}{x+1} \right|+\frac{1}{2}\left| \frac{\cos x}{x}-\frac{\cos \left( x+1 \right)}{\left( x+1 \right)} \right|
\\
&=\frac{1}{2x\left( x+1 \right)}+\frac{x\left[ \cos x-\cos \left( x+1 \right) \right] +\cos x}{2x\left( x+1 \right)}=\frac{1}{2x\left( x+1 \right)}+\frac{2\sin \frac{1}{2}x\sin \frac{2x+1}{2}+\cos x}{2x\left( x+1 \right)}
\\
&\le \frac{1}{2x\left( x+1 \right)}+\frac{x+1}{2x\left( x+1 \right)}=\frac{1}{2x\left( x+1 \right)}+\frac{1}{2x}\leqslant \frac{1}{x}.
   \end{align*}
\end{proof}

\begin{example}
   设$f\left( x \right) =\int_0^x{\sin \frac{1}{y}dy}$,求$f'\left( 0 \right) $.
\end{example}
\begin{note}
   证明的想法是利用\hyperref[分部积分在渐近分析中的用法(3)]{分部积分在渐近分析中的用法(3)}.
\end{note}
\begin{solution}
   注意到
\begin{align}
   f_{+}^{\prime}\left( 0 \right) =\underset{x\rightarrow 0^+}{\lim}\frac{\int_0^x{\sin \frac{1}{y}dy}}{x}=\underset{x\rightarrow 0^+}{\lim}\frac{\int_{+\infty}^{\frac{1}{x}}{\sin yd\frac{1}{y}}}{x}=\underset{x\rightarrow 0^+}{\lim}\frac{\int_{\frac{1}{x}}^{+\infty}{\frac{\sin y}{y^2}dy}}{x}\xlongequal{\text{令}t=\frac{1}{x}}\underset{t\rightarrow +\infty}{\lim}t\int_t^{+\infty}{\frac{\sin y}{y^2}dy},\left( 1.1 \right) \label{example4.48-1.1}
   \\
   f_{-}^{\prime}\left( 0 \right) =\underset{x\rightarrow 0^-}{\lim}\frac{\int_0^x{\sin \frac{1}{y}dy}}{x}=\underset{x\rightarrow 0^-}{\lim}\frac{\int_{+\infty}^{\frac{1}{x}}{\sin yd\frac{1}{y}}}{x}=\underset{x\rightarrow 0^-}{\lim}\frac{\int_{\frac{1}{x}}^{+\infty}{\frac{\sin y}{y^2}dy}}{x}\xlongequal{\text{令}t=\frac{1}{x}}\underset{t\rightarrow -\infty}{\lim}t\int_t^{-\infty}{\frac{\sin y}{y^2}dy}.\left( 1.2 \right) \label{example4.48-1.2}
\end{align}
由分部积分可得
\begin{align*}
\int_t^{+\infty}{\frac{\sin y}{y^2}dy}=-\int_t^{+\infty}{\frac{1}{y^2}d\cos y}
=\frac{\cos y}{y^2}\big|_{+\infty}^{t}+\int_t^{+\infty}{\cos yd\frac{1}{y^2}}
=\frac{\cos t}{t^2}-2\int_t^{+\infty}{\frac{\cos y}{y^3}dy}.
\end{align*}
故对\(\forall t>0\)，我们有
\begin{align*}
\left|\int_t^{+\infty}{\frac{\sin y}{y^2}dy}\right|=\left|\frac{\cos t}{t^2}-2\int_t^{+\infty}{\frac{\cos y}{y^3}dy}\right|
\leqslant \frac{1}{t^2}+2\int_t^{+\infty}{\frac{1}{y^3}dy}\
=\frac{2}{t^2}.
\end{align*}
即\(\int_t^{+\infty}{\frac{\sin y}{y^2}dy}=O\left(\frac{1}{t^2}\right), \forall t>0\)。再结合\eqref{example4.48-1.1}式可知
\[
f_{+}^{\prime}(0)=\lim_{t\rightarrow +\infty}t\int_t^{+\infty}{\frac{\sin y}{y^2}dy}=0.
\]
同理可得\(f_{-}^{\prime}(0)=\lim_{t\rightarrow -\infty}t\int_t^{-\infty}{\frac{\sin y}{y^2}dy}=0\)。故\(f^{\prime}(0)=f_{+}^{\prime}(0)=f_{-}^{\prime}(0)=0\)。
\end{solution}







\section{Laplace方法}

Laplace方法适用于估计形如$\int_a^b{\left[ f\left( x \right) \right] ^ng\left( x \right) dx},n\rightarrow \infty $的渐近展开式,其中$f,g\in C[a,b]$且$g$在[a,b]上有界;或者$\int_a^b{e^{f\left( x,y \right)}g(y)dy},x\rightarrow +\infty $的渐近展开式,其中$f,g\in C[a,b]$且$g$在[a,b]上有界.实际上,若要估计的是前者,我们可以将其转化为后者的形式如下:
\begin{align*}
   \int_a^b{\left[ f\left( x \right) \right] ^ng\left( x \right) dx}=\int_a^b{e^{n\ln f\left( x \right)}g\left( x \right) dx}.
\end{align*}
若参变量$n,x$在积分区间上,或者估计的不是$n,x\to +\infty$处的渐近展开式,而是其他点处($x\to x_0$)处的渐近展开式.我们都可以通过积分换元将其转化为标准形式$\int_a^b{e^{f\left( x,y \right)}g(y)dy},x\rightarrow +\infty $,其中$f,g\in C[a,b]$.

思路分析:
首先,由含参量积分的计算规律(若被积函数含有$e^{f(x)}$,则积分得到的结果中一定仍含有$e^{f(x)}$),我们可以大致估计积分$\int_a^b{e^{f\left( x,y \right)}g(y)dy},x\rightarrow +\infty $的结果是$C_1h_1\left( x \right) e^{f\left( x,b \right)}-C_2h_2\left( x \right) e^{f\left( x,b \right)}e^{f\left( x,a \right)} $,其中$C$为常数.因为指数函数的阶远大于一般初等函数的阶,这个结果的阶的主体部分就是$e^{f\left( x,b \right)}$和$e^{f\left( x,a \right)}$.而我们注意到到改变指数函数$e^{px+q}$的幂指数部分的常数$p$会对这个指数函数的阶$(x\to +\infty)$产生较大影响,而改变$q$不会影响这个指数函数的阶.比如,$e^{2x}$比$e^x$高阶$(x\to+\infty)$.由此我们可以发现$e^{f\left( x,b \right)}$和$e^{f\left( x,a \right)}$中的幂指数部分中$f(x,a),f(x,b)$中除常数项外的含$x$项的系数(暂时叫作指数系数)对这个函数的阶影响较大.然而这些系数都是由被积函数中的$f(x,y)$和积分区间决定的,但是在实际问题中$f(x,y)$的形式已经确定,因此这些系数仅仅由积分区间决定.于是当我们只计算某些不同点附近(充分小的邻域内)的含参量积分时,得到的这些系数一般不同,从而导致这些积分的阶不同.故我们可以断言这类问题的含参量积分在每一小段上的阶都是不同的.因此我们只要找到这些不同的阶中最大的阶(此时最大阶就是主体部分)就相当于估计出了积分在整个区间$[a,b]$上的阶.由定积分的几何意义,我们不难发现当参变量$x$固定时,并且当积分区间为某一点$y_0$附近时,只要被积函数的$e^{f(x,y)}$在$y_0$处(关于$y$)的取值越大,积分后得到的(值/充分小邻域内函数与x轴围成的面积)指数系数就会越大,从而在$y_0$附近的积分的阶也就越大.综上所述,当参变量$x$固定时,$f(x,y)$(关于$y$)的最大值点附近的积分就是原积分的主体部分,在其他区间上的积分全都是余项部分.

然后,我们将原积分按照上述的积分区间分段,划分为主体部分和余项部分.我们知道余项部分一定可以通过放缩、取上下极限等操作变成0(余项部分的放缩一般需要结合具体问题,并使用一些放缩技巧来实现.但是我们其实只要心里清楚余项部分一定能够通过放缩、取上下极限变成0即可),关键是估计主体部分的阶.我们注意到主体部分的积分区间都包含在某一点的邻域内,而一般估计在某个点附近的函数的阶,我们都会想到利用$Taylor$定理将其在这个点附近展开.因此我们利用$Taylor$定理将主体部分的被积函数的指数部分$f(x,y)$在最大值点附近(关于$y$)展开(注意:此时最多展开到$x^2$项,如果展开项的次数超过二次,那么后续要么就无法计算积分,要么计算就无法得到有效结果,比如最后积分、取极限得到$\infty+\infty$或$0\cdot \infty$等这一类无效的结果).
$Taylor$展开之后,我们只需要利用欧拉积分和定积分,直接计算得到结果即可.

事实上,原积分中的有界连续函数$g(x)$只会影响渐进展开式中的系数,对整体的阶并不造成影响.在实际估计中处理$g(x)$的方法:(i)在余项部分,直接将$g(x)$放缩成其在相应区间上的上界或下界即可.(ii)在主体部分,因为主体部分都包含在$f(x,y)$(关于$y$)的某些最大值点$y_i$的邻域内,所以结合$g(x)$的连续性,直接将$g(x)$用$g(y_i)$代替即可(将$g(x)$放缩成$g(y_i)\pm \varepsilon$即可).即相应的主体部分($y_i$点附近)乘以$g(x)$相应的函数值$g(y_i)$.具体例题见\hyperref[Laplace方法例题4]{例题\ref{Laplace方法例题4}}.也可以采取拟合法处理$g(x)$,具体例题见\hyperref[example4544166848]{例题\ref{example4544166848}}.

严谨的证明过程最好用上下极限和$\varepsilon-\delta$语言书写.具体严谨的证明书写见例题:\hyperref[Laplace方法例题1]{例题\ref{Laplace方法例题1}},\hyperref[Laplace方法例题2]{例题\ref{Laplace方法例题2}},\hyperref[Laplace方法例题3]{例题\ref{Laplace方法例题3}},\hyperref[Laplace方法例题4]{例题\ref{Laplace方法例题4}}.
\begin{note}
   $Laplace$方法的思路蕴含了一些常用的想法:\textbf{分段估计}、\textbf{Taylor定理估阶}.而严谨的证明书写也使用一些常用方法:\textbf{上下极限}、\textbf{$\varepsilon-\delta$语言}、\textbf{拟合法}.
\end{note}
\begin{remark}
   上述$Laplace$方法得到的渐近估计其实比较粗糙,想要得到更加精细的渐近估计需要用到更加深刻的想法和技巧(比如$Puiseux$级数展开(见清疏讲义)等).
\end{remark}


\begin{example}
设\(a_1,a_2,\cdots,a_m > 0,m \in \mathbb{N}\),则
\[
\lim_{n \to \infty} \sqrt[n]{a_1^n + a_2^n + \cdots + a_m^n} = \max_{1\leq j\leq m} a_j.
\]
\end{example} 
\begin{remark}
熟知,极限蕴含在\(a_1,a_2,\cdots,a_m\)的最大值中.
\end{remark}
\begin{proof}
显然
\begin{align}\label{equation:9.2131}
\max_{1\leq j\leq m} a_j = \lim_{n \to \infty} \sqrt[n]{\max_{1\leq j\leq m} a_j^n} \leq \lim_{n \to \infty} \sqrt[n]{a_1^n + a_2^n + \cdots + a_m^n} \leq \max_{1\leq j\leq m} a_j \cdot \lim_{n \to \infty} \sqrt[n]{m} = \max_{1\leq j\leq m} a_j,
\end{align}
从而我们证明了\eqref{equation:9.2131}.  
\end{proof}

\begin{example}\label{example-3.31}
设非负函数\(f \in C[a,b]\),则
   \[
   \lim_{n \to \infty} \sqrt[n]{\int_{a}^{b} f^n(x)dx} = \max_{x\in[a,b]} f(x).
   \]
\end{example}
\begin{remark}
熟知,极限蕴含在\(f\)的最大值中. 
\end{remark}
\begin{note}
这两个基本例子也暗示了离散和连续之间有时候存在某种类似的联系.
\end{note}
\begin{proof}
事实上记\(f(x_0) = \max_{x\in[a,b]} f(x), x_0 \in [a,b]\),不失一般性我们假设\(x_0 \in (a,b)\).那么对充分大的\(n \in \mathbb{N}\),我们由积分中值定理知道存在\(\theta_n \in (x_0 - \frac{1}{2n}, x_0 + \frac{1}{2n})\),使得
\begin{align}\label{equation:9.223423}
f(\theta_n) \sqrt[n]{\frac{1}{n}} = \sqrt[n]{\int_{x_0 - \frac{1}{2n}}^{x_0 + \frac{1}{2n}} f^n(x)dx} \leq \sqrt[n]{\int_{a}^{b} f^n(x)dx} \leq \sqrt[n]{\int_{a}^{b} f^n(x_0)dx} = f(x_0) \sqrt[n]{b - a}.   
\end{align}
两边取极限即得\eqref{equation:9.223423}.
\end{proof}

\begin{example}
设非负严格递增函数\(f \in C[a,b]\),由积分中值定理我们知道存在\(x_n \in [a,b]\),使得
\[
f^n(x_n) = \frac{1}{b - a} \int_{a}^{b} f^n(x)dx.
\]
计算\(\lim_{n \to \infty} x_n\).
\end{example}
\begin{proof}
由\hyperref[example-3.31]{(上一题)例题\ref{example-3.31}},我们知道
\[
\lim_{n \to \infty} f(x_n) = \lim_{n \to \infty} \sqrt[n]{\frac{1}{b - a}} \cdot \lim_{n \to \infty} \sqrt[n]{\int_{a}^{b} f^n(x)dx} = f(b).
\]
注意到\(\{x_n\}_{n = 1}^{\infty} \subset [a,b]\),我们知道对任何\(\lim_{k \to \infty} x_{n_k} = c \in [a,b]\),都有\(\lim_{k \to \infty} f(x_{n_k}) = f(c) = f(b)\).又由于$f$为严格递增函数,因此只能有\(c = b\),利用\hyperref[proposition:子列极限命题]{命题\ref{proposition:子列极限命题}的(a)(Heine归结原理)},我们知道\(\lim_{n \to \infty} x_n = b\).证毕!
\end{proof}

\begin{theorem}[Wallis公式]\label{theorem:Wallis公式}
\begin{align}\label{theorem:Wallis公式-equation}
   \frac{(2n)!!}{(2n - 1)!!}=\sqrt{\pi n}+\frac{\sqrt{\pi}}{8}\cdot\frac{1}{\sqrt{n}}+o\left(\frac{1}{\sqrt{n}}\right).
\end{align}
\end{theorem}
\begin{remark}
   我们只需要记住$\frac{(2n)!!}{(2n-1)!!}\sim \sqrt{\pi n},n\rightarrow +\infty$及其证明即可,更精细的渐近表达式一般用不到.
\end{remark}
\begin{note}
   \eqref{theorem:Wallis公式-equation}式等价于
\begin{align}\label{theorem4.6-0.0}
   \lim_{n\rightarrow\infty}\sqrt{n}\left[\frac{(2n)!!}{(2n - 1)!!}-\sqrt{\pi n}\right]=\frac{\sqrt{\pi}}{8}.
\end{align}
证明的想法是把\eqref{theorem4.6-0.0}式用积分表示并运用Laplace方法进行估计.
\end{note}
\begin{proof}
   我们只证明$\frac{(2n)!!}{(2n-1)!!}\sim \sqrt{\pi n},n\rightarrow +\infty$,更精细的渐近表达式一般不会被考察,故在此不给出证明.(更精细的渐近表达式的证明可见清疏讲义)

注意到经典积分公式
\begin{align}\label{theorem4.6-1.1}
   \int_{0}^{\frac{\pi}{2}}\sin^{2n}x dx=\frac{\pi}{2}\cdot\frac{(2n - 1)!!}{(2n)!!}.
\end{align}
利用Taylor公式的Peano余项,我们知道
\begin{align}\label{theorem4.6-9.19}
   \ln\sin^{2}x=-\left(x - \frac{\pi}{2}\right)^{2}+o\left[\left(x - \frac{\pi}{2}\right)^{2}\right],
\end{align}
即\(\lim_{x\rightarrow(\frac{\pi}{2})}\frac{\ln\sin^{2}x}{-(x - \frac{\pi}{2})^{2}}=-1\).于是利用\eqref{theorem4.6-9.19},对任何\(\varepsilon\in(0,1)\),我们知道存在\(\delta\in(0,1)\),使得对任何\(x\in[\frac{\pi}{2}-\delta,\frac{\pi}{2}]\),都有
\begin{align}\label{theorem4.6-9.20}
  -(1 + \varepsilon)\left(x - \frac{\pi}{2}\right)^{2}\leqslant\ln\sin^{2}x\leqslant-(1 - \varepsilon)\left(x - \frac{\pi}{2}\right)^{2}.
\end{align}
利用\eqref{theorem4.6-9.20}式,现在一方面,我们有
\begin{align*}
\int_{0}^{\frac{\pi}{2}}\sin^{2n}x dx&=\int_{0}^{\frac{\pi}{2}}e^{n\ln\sin^{2}x}dx
\leqslant\int_{0}^{\frac{\pi}{2}-\delta}e^{n\ln\sin^{2}(\frac{\pi}{2}-\delta)}dx+\int_{\frac{\pi}{2}-\delta}^{\frac{\pi}{2}}e^{-n(1 - \varepsilon)(x - \frac{\pi}{2})^{2}}dx\\
&=(\frac{\pi}{2}-\delta)\sin^{2n}(\frac{\pi}{2}-\delta)+\int_{0}^{\delta}e^{-n(1 - \varepsilon)y^{2}}dy\\
&=(\frac{\pi}{2}-\delta)\sin^{2n}(\frac{\pi}{2}-\delta)+\frac{1}{\sqrt{(1 - \varepsilon)n}}\int_{0}^{\delta\sqrt{(1 - \varepsilon)n}}e^{-z^{2}}dz\\
&\leqslant(\frac{\pi}{2}-\delta)\sin^{2n}(\frac{\pi}{2}-\delta)+\frac{1}{\sqrt{(1 - \varepsilon)n}}\int_{0}^{\infty}e^{-z^{2}}dz.
\end{align*}
另外一方面,我们有
\begin{align*}
\int_{0}^{\frac{\pi}{2}}\sin^{2n}x dx\geqslant\int_{\frac{\pi}{2}-\delta}^{\frac{\pi}{2}}e^{-n(1 + \varepsilon)(x - \frac{\pi}{2})^{2}}dx
=\int_{0}^{\delta}e^{-n(1 + \varepsilon)y^{2}}dy
=\frac{1}{\sqrt{n(1 + \varepsilon)}}\int_{0}^{\delta\sqrt{n(1 + \varepsilon)}}e^{-z^{2}}dz.
\end{align*}
因此我们有
\[
\frac{1}{\sqrt{1 + \varepsilon}}\int_{0}^{\infty}e^{-z^{2}}dz\leqslant\lim_{n\rightarrow\infty}\sqrt{n}\int_{0}^{\frac{\pi}{2}}\sin^{2n}x dx\leqslant\frac{1}{\sqrt{1 - \varepsilon}}\int_{0}^{\infty}e^{-z^{2}}dz,
\]
由\(\varepsilon\)任意性即可得
\[
\lim_{n\rightarrow\infty}\sqrt{n}\int_{0}^{\frac{\pi}{2}}\sin^{2n}x dx=\int_{0}^{\infty}e^{-z^{2}}dz=\frac{\sqrt{\pi}}{2}.
\]
再结合\eqref{theorem4.6-1.1}式可得
\begin{align*}
   \lim_{n\rightarrow \infty} \frac{\pi \sqrt{n}}{2}\frac{(2n-1)!!}{(2n)!!}=\frac{\sqrt{\pi}}{2}.
\end{align*}
即
\begin{align*}
   \lim_{n\rightarrow \infty} \sqrt{\pi n}\cdot \frac{(2n-1)!!}{(2n)!!}=1.
\end{align*}
故$\frac{(2n)!!}{(2n-1)!!}\sim \sqrt{\pi n},n\rightarrow +\infty $.
\end{proof}

\begin{example}\label{Laplace方法例题1}
   求\(\int_{0}^{\infty} \frac{1}{(2 + x^2)^n}dx, n \to \infty\)的等价无穷小.
\end{example}
\begin{solution}
   由\(Taylor\)定理可知,对\(\forall\varepsilon \in(0,1)\),存在\(\delta > 0\),使得当\(x\in [0,\delta]\)时,有
\[
\frac{x^2}{2}-\varepsilon x^2\leqslant\ln\left(1+\frac{x^2}{2}\right)\leqslant\frac{x^2}{2}+\varepsilon x^2.
\]
现在,一方面我们有
\begin{align*}
\int_0^{\infty}\frac{1}{(2 + x^2)^n}dx&=\frac{1}{2^n}\int_0^{\infty}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx=\frac{1}{2^n}\left(\int_0^{\delta}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx+\int_{\delta}^{\infty}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx\right)\\
&=\frac{1}{2^n}\left(\int_0^{\delta}e^{-n\ln\left(1+\frac{x^2}{2}\right)}dx+\int_{\delta}^{\infty}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx\right)\\
&\leqslant\frac{1}{2^n}\left(\int_0^{\delta}e^{-n\left(\frac{x^2}{2}-\varepsilon x^2\right)}dx+\int_{\delta}^{\infty}\frac{1}{1+\frac{x^2}{2}}\cdot\frac{1}{\left(1+\frac{\delta^2}{2}\right)^{n - 1}}dx\right)\\
&\xlongequal{\text{令}y = x\sqrt{n\left(\frac{1}{2}-\varepsilon\right)}}\frac{1}{2^n}\left(\frac{1}{\sqrt{n\left(\frac{1}{2}-\varepsilon\right)}}\int_0^{\delta\sqrt{n\left(\frac{1}{2}-\varepsilon\right)}}e^{-y^2}dy+\frac{\sqrt{2}}{\left(1+\frac{\delta^2}{2}\right)^{n - 1}}\left(\frac{\pi}{2}-\arctan\frac{\delta}{\sqrt{2}}\right)\right)\\
&\leqslant\frac{1}{2^n}\left(\frac{1}{\sqrt{n\left(\frac{1}{2}-\varepsilon\right)}}\int_0^{\infty}e^{-y^2}dy+\frac{\pi\sqrt{2}}{2\left(1+\frac{\delta^2}{2}\right)^{n - 1}}\right)=\frac{1}{2^n}\left(\frac{\sqrt{\pi}}{2\sqrt{n\left(\frac{1}{2}-\varepsilon\right)}}+\frac{\pi\sqrt{2}}{2\left(1+\frac{\delta^2}{2}\right)^{n - 1}}\right).
\end{align*}
于是
\[
\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\frac{\sqrt{\pi}}{2\sqrt{\left(\frac{1}{2}-\varepsilon\right)}}+\frac{\pi\sqrt{2n}}{2\left(1+\frac{\delta^2}{2}\right)^{n - 1}}.
\]
上式两边同时令\(n\rightarrow\infty\)并取上极限得到
\[
\varlimsup_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\left(\frac{\sqrt{\pi}}{2\sqrt{\left(\frac{1}{2}-\varepsilon\right)}}+\frac{\pi\sqrt{2n}}{2\left(1+\frac{\delta^2}{2}\right)^{n - 1}}\right)=\frac{\sqrt{\pi}}{2\sqrt{\left(\frac{1}{2}-\varepsilon\right)}}.
\]
再由\(\varepsilon\)的任意性可得$
\varlimsup_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\frac{\sqrt{\pi}}{2\sqrt{\frac{1}{2}}}=\sqrt{\frac{\pi}{2}}.$

另外一方面,我们有
\begin{align*}
\int_0^{\infty}\frac{1}{(2 + x^2)^n}dx&=\frac{1}{2^n}\int_0^{\infty}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx\geqslant\frac{1}{2^n}\int_0^{\delta}\frac{1}{\left(1+\frac{x^2}{2}\right)^n}dx\\
&=\frac{1}{2^n}\int_0^{\delta}e^{-n\ln\left(1+\frac{x^2}{2}\right)}dx\geqslant\frac{1}{2^n}\int_0^{\delta}e^{-n\left(\frac{x^2}{2}+\varepsilon x^2\right)}dx\\
&\xlongequal{\text{令}y = x\sqrt{n\left(\frac{1}{2}+\varepsilon\right)}}\frac{1}{2^n\sqrt{n\left(\frac{1}{2}+\varepsilon\right)}}\int_0^{\delta\sqrt{n\left(\frac{1}{2}+\varepsilon\right)}}e^{-y^2}dy.
\end{align*}
于是
\[
\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\geqslant\frac{1}{\sqrt{\left(\frac{1}{2}+\varepsilon\right)}}\int_0^{\delta\sqrt{n\left(\frac{1}{2}+\varepsilon\right)}}e^{-y^2}dy.
\]
上式两边同时令\(n\rightarrow\infty\)并取下极限得到
\[
\varliminf_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2}^n)dx\geqslant\varliminf_{n\rightarrow\infty}\frac{1}{\sqrt{\left(\frac{1}{2}+\varepsilon\right)}}\int_0^{\delta\sqrt{n\left(\frac{1}{2}+\varepsilon\right)}}e^{-y^2}dy=\varliminf_{n\rightarrow\infty}\frac{1}{\sqrt{\left(\frac{1}{2}+\varepsilon\right)}}\int_0^{\infty}e^{-y^2}dy=\frac{\sqrt{\pi}}{2\sqrt{\left(\frac{1}{2}+\varepsilon\right)}}.
\]
再由\(\varepsilon\)的任意性可得$\varliminf_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\geqslant\frac{\sqrt{\pi}}{2\sqrt{\frac{1}{2}}}=\sqrt{\frac{\pi}{2}}.$

因此,再结合\(\varliminf_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\),我们就有
\[
\sqrt{\frac{\pi}{2}}\leqslant\varliminf_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx\leqslant\sqrt{\frac{\pi}{2}}.
\]
故\(\lim_{n\rightarrow\infty}\int_0^{\infty}\frac{2^n\sqrt{n}}{(2 + x^2)^n}dx=\sqrt{\frac{\pi}{2}}\).即\(\int_0^{\infty}\frac{1}{(2 + x^2)^n}dx=\frac{\sqrt{\pi}}{2^n\sqrt{2n}}+o\left(\frac{1}{2^n\sqrt{n}}\right),n\rightarrow\infty\).
\end{solution}

\begin{example}\label{Laplace方法例题2}
   求\(\int_{0}^{x} e^{-y^2} dy, x \to +\infty\)的渐近估计(仅两项).
\end{example}
\begin{note}
   因为\(\lim_{x\rightarrow +\infty}\int_0^x{e^{-y^2}dy}=\frac{\sqrt{\pi}}{2}\),所以实际上只需要估计
   \begin{align*}
     \frac{\sqrt{\pi}}{2}-\int_0^x{e^{-y^2}dy}=\int_0^{\infty}{e^{-y^2}dy}-\int_0^x{e^{-y^2}dy}=\int_x^{\infty}{e^{-y^2}dy},x\rightarrow+\infty .
   \end{align*}
\end{note}
\begin{solution}
由\(Taylor\)定理可知,对\(\forall\varepsilon > 0\),存在\(\delta > 0\),使得当\(x\in[0,\delta]\)时,有
\[
2x-\varepsilon x\leqslant x^2 + 2x\leqslant 2x+\varepsilon x.
\]
现在,一方面我们有
\begin{align*}
\int_x^{\infty}{e^{-y^2}dy}&\xlongequal{\text{令}y = xu} x\int_1^{\infty}{e^{-(xu)^2}du}\xlongequal{\text{令}t = u - 1} x\int_0^{\infty}{e^{-(xt + x)^2}dt}\\
&=x\int_0^{\infty}{e^{-(xt)^2 - 2x^2t - x^2}dt}=xe^{-x^2}\int_0^{\infty}{e^{-x^2(t^2 + 2t)}dt}\\
&=xe^{-x^2}\left(\int_0^{\delta}{e^{-x^2(t^2 + 2t)}dt}+\int_{\delta}^{\infty}{e^{-x^2(t^2 + 2t)}dt}\right)\\
&\leqslant xe^{-x^2}\left(\int_0^{\delta}{e^{-x^2(2t+\varepsilon t)}dt}+\int_{\delta}^{\infty}{e^{-x^2(t + 2)}e^{-x^2\delta}dt}\right)\\
&=xe^{-x^2}\left(\frac{1 - e^{-(2+\varepsilon)x^2\delta}}{(2+\varepsilon)x^2}+\frac{e^{-2x^2(\delta + 1)}}{x^2}\right)\\
&=\frac{e^{-x^2}}{x}\left(\frac{1 - e^{-(2+\varepsilon)x^2\delta}}{2+\varepsilon}+e^{-2x^2(\delta + 1)}\right).
\end{align*}
于是就有
\begin{align*}
  xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\frac{1 - e^{-(2+\varepsilon)x^2\delta}}{2+\varepsilon}+e^{-2x^2(\delta + 1)} .
\end{align*}
上式两边同时令\(x\rightarrow+\infty\)并取上极限得到
\[
\varlimsup_{x\rightarrow+\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\varlimsup_{x\rightarrow+\infty}\left(\frac{1 - e^{-(2+\varepsilon)x^2\delta}}{2+\varepsilon}+e^{-2x^2(\delta + 1)}\right)=\frac{1}{2+\varepsilon}.
\]
再由\(\varepsilon\)的任意性可得\(\varlimsup_{x\rightarrow+\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\frac{1}{2}\).

另外一方面,我们有
\begin{align*}
\int_x^{\infty}{e^{-y^2}dy}&\xlongequal{\text{令}y = xu} x\int_1^{\infty}{e^{-(xu)^2}du}\xlongequal{\text{令}t = u - 1} x\int_0^{\infty}{e^{-(xt + x)^2}dt}\\
&=x\int_0^{\infty}{e^{-(xt)^2 - 2x^2t - x^2}dt}=xe^{-x^2}\int_0^{\infty}{e^{-x^2(t^2 + 2t)}dt}\\
&\geqslant xe^{-x^2}\int_0^{\delta}{e^{-x^2(t^2 + 2t)}dt}\geqslant xe^{-x^2}\int_0^{\delta}{e^{-x^2(2t-\varepsilon t)}dt}\\
&=xe^{-x^2}\cdot\frac{1 - e^{-(2-\varepsilon)x^2\delta}}{(2-\varepsilon)x^2}.
\end{align*}
于是就有\begin{align*}
   xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\geqslant\frac{1 - e^{-(2-\varepsilon)x^2\delta}}{(2-\varepsilon)x^2}.
\end{align*}
上式两边同时令\(x\rightarrow+\infty\)并取下极限得到
\[
\varliminf_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\geqslant\varliminf_{x\rightarrow +\infty}\frac{1 - e^{-(2-\varepsilon)x^2\delta}}{(2-\varepsilon)x^2}=\frac{1}{2-\varepsilon}.
\]
再由\(\varepsilon\)的任意性可得\(\varliminf_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\geqslant\frac{1}{2}\).

因此,再结合\(\varliminf_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\varlimsup_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\),我们就有
\[
\frac{1}{2}\leqslant\varliminf_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\varlimsup_{x\rightarrow+\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}\leqslant\frac{1}{2}.
\]
故\(\lim_{x\rightarrow +\infty}xe^{x^2}\int_x^{\infty}{e^{-y^2}dy}=\frac{1}{2}\),即\(\int_x^{\infty}{e^{-y^2}dy}=\frac{e^{-x^2}}{2x}+o\left(\frac{e^{-x^2}}{x}\right),x\rightarrow+\infty\).

因此\(\int_0^x{e^{-y^2}dy}=\frac{\sqrt{\pi}}{2}-\int_x^{\infty}{e^{-y^2}dy}=\frac{\sqrt{\pi}}{2}-\frac{e^{-x^2}}{2x}+o\left(\frac{e^{-x^2}}{x}\right),x\rightarrow+\infty\).
\end{solution}

\begin{example}\label{Laplace方法例题3}
计算$\lim_{n \to \infty} \int_{0}^{10n} \left(1 - \left|\sin \left(\frac{x}{n}\right)\right|\right)^n dx.$
\end{example}
\begin{solution}
   由\(Taylor\)定理可知,对\(\forall \varepsilon \in (0,1)\),存在\(\delta \in (0,\frac{\pi}{4})\),使得当\(x\in [0,\delta]\)时,有
\[
-t-\varepsilon t\leqslant\ln(1-\sin t)\leqslant -t+\varepsilon t.
\]
此时,我们有
\begin{align}
&\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\xlongequal{\text{令}x = nt} n\int_0^{10}{(1-\vert\sin t\vert)^n}dt=n\int_0^{10}{e^{n\ln(1-\vert\sin t\vert)}}dt
\nonumber
\\
&=n\int_0^{\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{\pi -\delta}^{\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{\pi +\delta}^{2\pi -\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt
\nonumber
\\
&\quad +n\int_{2\pi -\delta}^{2\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{2\pi +\delta}^{3\pi -\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{3\pi -\delta}^{3\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt
\nonumber
\\
&=n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt + n\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin t)}}dt + n\int_{\pi -\delta}^{\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{\pi +\delta}^{2\pi -\delta}{e^{n\ln(1+\sin t)}}dt
\nonumber
\\
&\quad +n\int_{2\pi -\delta}^{2\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt + n\int_{2\pi +\delta}^{3\pi -\delta}{e^{n\ln(1-\sin t)}}dt + n\int_{3\pi -\delta}^{3\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt.\label{equation:3.366}
\end{align}
由积分换元可得
\begin{gather*}
n\int_{\pi -\delta}^{\pi}{e^{n\ln(1-\sin t)}}dt\xlongequal{\text{令}u=\pi -t} -n\int_{\delta}^0{e^{n\ln(1-\sin(\pi -u))}}du=n\int_0^{\delta}{e^{n\ln(1-\sin u)}}du,\\
n\int_{\pi}^{\pi +\delta}{e^{n\ln(1+\sin t)}}dt\xlongequal{\text{令}u = t-\pi} n\int_0^{\delta}{e^{n\ln(1+\sin(\pi +u))}}du=n\int_0^{\delta}{e^{n\ln(1-\sin u)}}du,\\
n\int_{\pi +\delta}^{2\pi -\delta}{e^{n\ln(1+\sin t)}}dt\xlongequal{\text{令}u = t-\pi} \int_{\delta}^{\pi -\delta}{e^{n\ln(1+\sin(\pi +u))}}du=\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin u)}}du,\\
n\int_{2\pi +\delta}^{3\pi -\delta}{e^{n\ln(1-\sin t)}}dt\xlongequal{\text{令}u = t - 2\pi} \int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin(2\pi +u))}}du=\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin u)}}du.
\end{gather*}
从而
\[
n\int_{\pi -\delta}^{\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt=n\int_{\pi -\delta}^{\pi}{e^{n\ln(1-\sin t)}}dt + n\int_{\pi}^{\pi +\delta}{e^{n\ln(1-\sin t)}}dt = 2n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt.
\]
同理,\(n\int_{2\pi -\delta}^{2\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt = n\int_{3\pi -\delta}^{3\pi +\delta}{e^{n\ln(1-\vert\sin t\vert)}}dt = 2n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt\).
于是原积分\eqref{equation:3.366}式可化为
\[
\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx = 7n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt + 3\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin t)}}dt.
\]
进而,一方面我们有
\begin{align*}
\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx&=7n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt + 3\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin t)}}dt\\
&\leqslant 7n\int_0^{\delta}{e^{n(-t+\varepsilon t)}}dt + 3n\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin \delta)}}dt\\
&=7\cdot\frac{e^{(\varepsilon -1)n\delta}-1}{\varepsilon -1}+3ne^{n\ln(1-\sin \delta)}(\pi -2\delta).
\end{align*}
上式两边同时令\(n\rightarrow\infty\)并取上极限得到
\[
\varlimsup_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\left[7\cdot\frac{e^{(\varepsilon -1)n\delta}-1}{\varepsilon -1}+3ne^{n\ln(1-\sin \delta)}(\pi -2\delta)\right]=\frac{7}{1-\varepsilon}.
\]
再由\(\varepsilon\)的任意性可得\(\varlimsup_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\leqslant 7\).

另外一方面,我们有
\begin{align*}
\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx&=7n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt + 3\int_{\delta}^{\pi -\delta}{e^{n\ln(1-\sin t)}}dt\\
&\geqslant 7n\int_0^{\delta}{e^{n\ln(1-\sin t)}}dt\geqslant 7n\int_0^{\delta}{e^{n(-t-\varepsilon t)}}dt=7\cdot\frac{1 - e^{-(\varepsilon +1)n\delta}}{\varepsilon +1}
\end{align*}
上式两边同时令\(n\rightarrow\infty\)并取下极限得到
\[
\varliminf_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\geqslant\varliminf_{n\rightarrow\infty}7\cdot\frac{1 - e^{-(\varepsilon +1)n\delta}}{\varepsilon +1}=\frac{7}{\varepsilon +1}.
\]
再由\(\varepsilon\)的任意性可得\(\varliminf_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\geqslant\frac{7}{\varepsilon +1}\).

因此,再结合\(\varliminf_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\),我们就有
\[
7\leqslant\varliminf_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\leqslant\varlimsup_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx\leqslant 7.
\]
故\(\lim_{n\rightarrow\infty}\int_0^{10n}{(1-\vert\sin(\frac{x}{n})\vert)^n}dx = 7\).
\end{solution}

\begin{example}\label{Laplace方法例题4}
   计算$\lim_{n\rightarrow \infty} \frac{\int_0^1{\left( 1-x^2+x^3 \right) ^n\ln \left( x+2 \right) dx}}{\int_0^1{\left( 1-x^2+x^3 \right) ^ndx}}.$
\end{example}
\begin{note}
   我们首先可以求解出被积函数带$n$次幂部分的最大值点即$1-x^2+x^3$的最大值点为$x=0,1$.于是被积函数的阶一定集中在这两个最大值点附近.
\end{note}
\begin{remark}
注意由$\ln(1 - x^2 + x^3) = x - 1 + o(x - 1),  x\rightarrow 1$.
得到的是$\ln(1 - x^2 + x^3) = x - 1 + o(x - 1),  x\rightarrow 1$.而不是.
\end{remark}
\begin{proof}
由\(Taylor\)定理可知,
\begin{align*}
\ln(1 - x^2 + x^3) &= -x^2 + o(x^2),  x\rightarrow 0;\\
\ln(1 - x^2 + x^3) &= x - 1 + o(x - 1),  x\rightarrow 1.
\end{align*}
从而对\(\forall \varepsilon \in (0,\frac{1}{2})\),存在\(\delta_1 \in (0,\frac{1}{10})\),使得
\begin{align*}
-x^2 - \varepsilon x^2&\leqslant\ln(1 - x^2 + x^3)\leqslant -x^2 + \varepsilon x^2, \forall x\in (0,\delta_1);\\
x - 1 - \varepsilon(x - 1)&\leqslant\ln(1 - x^2 + x^3)\leqslant x - 1 + \varepsilon(x - 1), \forall x\in (1 - \delta_1,1).
\end{align*}
设\(f\in C[0,1]\),则由连续函数最大值、最小值定理可知,\(f\)在闭区间\([0,\frac{1}{2}]\)和$[\frac{1}{2},1]$上都存在最大值和最小值.设\(M_1 = \sup_{x\in [0,\frac{1}{2}]}f(x)\),\(M_2 = \sup_{x\in [\frac{1}{2},1]}f(x)\).又由连续性可知,对上述\(\varepsilon\),存在\(\delta_2>0\),使得
\begin{align*}
f(0) - \varepsilon&< f(x) < f(0) + \varepsilon, \forall x\in [0,\delta_2];\\
f(1) - \varepsilon&< f(x) < f(1) + \varepsilon, \forall x\in [1 - \delta_2,1].
\end{align*}
取\(\delta = \min\{\delta_1,\delta_2\}\),则一方面我们有
\begin{align*}
\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&=\int_0^{\delta}{(1 - x^2 + x^3)^nf(x)dx}+\int_{\delta}^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\\
&=\int_0^{\delta}{e^{n\ln(1 - x^2 + x^3)}f(x)dx}+\int_{\delta}^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\\
&\leqslant (f(0) + \varepsilon)\int_0^{\delta}{e^{n(-x^2 + \varepsilon x^2)}dx}+\int_{\delta}^{\frac{1}{2}}{M_1\left(\frac{7}{8}-\delta^2\right)^ndx}\\
&=\frac{f(0) + \varepsilon}{\sqrt{n(1 - \varepsilon)}}\int_0^{\delta\sqrt{n(1 - \varepsilon)}}{e^{-y^2}dy}+M_1\left(\frac{7}{8}-\delta^2\right)^n\left(\frac{1}{2}-\delta\right),
\end{align*}
又易知$1-x^2+x^3$在$[0,\frac{2}{3}]$上单调递减,在$(\frac{2}{3},1]$上单调递增.再结合$\delta<\frac{1}{10}$可知,$1-(\frac{1}{2})^2+(\frac{1}{2})^3<1-(\frac{1}{10})^2+(\frac{1}{10})^3<1-(1-\delta)^2+(1-\delta)^3$.从而当$x\in (\frac{1}{2},1-\delta)$时,我们就有$1-x^2+x^3<1-(1-\delta)^2+(1-\delta)^3<1$.进而可得
\begin{align*}
\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&=\int_{\frac{1}{2}}^{1 - \delta}{(1 - x^2 + x^3)^nf(x)dx}+\int_{1 - \delta}^1{(1 - x^2 + x^3)^nf(x)dx}\\
&=\int_{\frac{1}{2}}^{1 - \delta}{(1 - x^2 + x^3)^nf(x)dx}+\int_{1 - \delta}^1{e^{n\ln(1 - x^2 + x^3)}f(x)dx}\\
&\leqslant \int_{\frac{1}{2}}^{1 - \delta}{M_2\left(1-(1-\delta)^2+(1 - \delta)^3\right)^ndx}+(f(1) + \varepsilon)\int_{1 - \delta}^1{e^{n[x - 1 + \varepsilon(x - 1)]}dx}\\
&=M_2\left(1-(1-\delta)^2+(1 - \delta)^3\right)^n\left(\frac{1}{2}-\delta\right)+\frac{f(1) + \varepsilon}{n(1 + \varepsilon)}\left(1 - e^{-n\delta(1 + \varepsilon)}\right).
\end{align*}
于是就有
\begin{align*}
\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&\leqslant \frac{f(0) + \varepsilon}{\sqrt{1 - \varepsilon}}\int_0^{\delta\sqrt{n(1 - \varepsilon)}}{e^{-y^2}dy}+\sqrt{n} M_1\left(\frac{7}{8}-\delta^2\right)^n\left(\frac{1}{2}-\delta\right),\\
n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&\leqslant n M_2\left(\frac{3}{4}+(1 - \delta)^3\right)^n\left(\frac{1}{2}-\delta\right)+\frac{f(1) + \varepsilon}{1 + \varepsilon}\left(1 - e^{-n\delta(1 + \varepsilon)}\right).
\end{align*}
上式两边同时令\(n\rightarrow\infty\)并取上极限得到
\begin{gather*}
\varlimsup_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\leqslant \frac{f(0) + \varepsilon}{\sqrt{1 - \varepsilon}}\int_0^{\infty}{e^{-y^2}dy}=\frac{\sqrt{\pi}}{2\sqrt{1 - \varepsilon}}(f(0) + \varepsilon),\\
\varlimsup_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}\leqslant \frac{f(1) + \varepsilon}{1 + \varepsilon}.
\end{gather*}
再由\(\varepsilon\)的任意性可得\(\varlimsup_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\leqslant \frac{\sqrt{\pi}}{2}f(0)\),\(\varlimsup_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}\leqslant f(1)\).

另外一方面,我们有
\begin{align*}
\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \int_0^{\delta}{(1 - x^2 + x^3)^nf(x)dx}=\int_0^{\delta}{e^{n\ln(1 - x^2 + x^3)}f(x)dx}\\
&\geqslant (f(0) - \varepsilon)\int_0^{\delta}{e^{n(-x^2 - \varepsilon x^2)}dx}=\frac{f(0) - \varepsilon}{\sqrt{n(1 + \varepsilon)}}\int_0^{\delta\sqrt{n(1 + \varepsilon)}}{e^{-y^2}dy},
\end{align*}
\begin{align*}
\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \int_{1 - \delta}^1{(1 - x^2 + x^3)^nf(x)dx}=\int_{1 - \delta}^1{e^{n\ln(1 - x^2 + x^3)}f(x)dx}\\
&\geqslant (f(1) - \varepsilon)\int_{1 - \delta}^1{e^{n[x - 1 - \varepsilon(x - 1)]}dx}=\frac{f(1) - \varepsilon}{n(1 + \varepsilon)}\left(1 - e^{-n\delta(1 - \varepsilon)}\right).
\end{align*}
于是就有
\begin{align*}
\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \frac{f(0) - \varepsilon}{\sqrt{1 + \varepsilon}}\int_0^{\delta\sqrt{n(1 + \varepsilon)}}{e^{-y^2}dy},\\
n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \frac{f(1) - \varepsilon}{1 + \varepsilon}\left(1 - e^{-n\delta(1 - \varepsilon)}\right).
\end{align*}
上式两边同时令\(n\rightarrow\infty\)并取下极限得到
\begin{align*}
\varliminf_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \frac{f(0) - \varepsilon}{\sqrt{1 + \varepsilon}}\int_0^{\infty}{e^{-y^2}dy}=\frac{\sqrt{\pi}}{2\sqrt{1 + \varepsilon}}(f(0) - \varepsilon),\\
\varliminf_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&\geqslant \frac{f(1) - \varepsilon}{1 + \varepsilon}.
\end{align*}
再由\(\varepsilon\)的任意性可得\(\varliminf_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\geqslant \frac{\sqrt{\pi}}{2}f(0)\),\(\varliminf_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}\geqslant f(1)\).

因此,我们就有
\begin{align*}
\frac{\sqrt{\pi}}{2}f(0)&\leqslant \varliminf_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\leqslant \varlimsup_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}\leqslant \frac{\sqrt{\pi}}{2}f(0),\\
f(1)&\leqslant \varliminf_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}\leqslant \varlimsup_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}\leqslant f(1).
\end{align*}
故\(\lim_{n\rightarrow\infty}\sqrt{n}\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}=\frac{\sqrt{\pi}}{2}f(0)\),\(\lim_{n\rightarrow\infty}n\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}=f(1)\).从而
\begin{align*}
\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}&=\frac{f(0)\sqrt{\pi}}{2\sqrt{n}}+o\left(\frac{1}{\sqrt{n}}\right),  n\rightarrow\infty;\\
\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}&=\frac{f(1)}{n}+o\left(\frac{1}{n}\right),  n\rightarrow\infty.
\end{align*}
故\(\int_0^1{(1 - x^2 + x^3)^nf(x)dx}=\int_0^{\frac{1}{2}}{(1 - x^2 + x^3)^nf(x)dx}+\int_{\frac{1}{2}}^1{(1 - x^2 + x^3)^nf(x)dx}=\frac{f(0)\sqrt{\pi}}{2\sqrt{n}}+\frac{f(1)}{n}+o\left(\frac{1}{n}\right),  n\rightarrow\infty\).
从而当\(f\equiv 1\)时,上式等价于\(\int_0^1{(1 - x^2 + x^3)^ndx}=\frac{\sqrt{\pi}}{2\sqrt{n}}+\frac{1}{n}+o\left(\frac{1}{n}\right),  n\rightarrow\infty\);当\(f(x) = \ln(x + 2)\)时,上式等价于\(\int_0^1{(1 - x^2 + x^3)^n\ln(x + 2)dx}=\frac{\sqrt{\pi}\ln 2}{2\sqrt{n}}+\frac{\ln 3}{n}+o\left(\frac{1}{n}\right),  n\rightarrow\infty\).于是
\[
\lim_{n\rightarrow\infty}\frac{\int_0^1{(1 - x^2 + x^3)^n\ln(x + 2)dx}}{\int_0^1{(1 - x^2 + x^3)^ndx}}=\lim_{n\rightarrow\infty}\frac{\frac{\sqrt{\pi}\ln 2}{2\sqrt{n}}+\frac{\ln 3}{n}+o\left(\frac{1}{n}\right)}{\frac{\sqrt{\pi}}{2\sqrt{n}}+\frac{1}{n}+o\left(\frac{1}{n}\right)}=\ln 2.
\]
\end{proof}

\begin{example}\label{example4544166848}
   设\(f\in R[0,1]\)且\(f\)在\(x = 1\)连续,证明
\[
\lim_{n \to \infty} n\int_{0}^{1} f(x)x^n dx = f(1).
\]
\end{example}
\begin{note}
   这种运用Laplace方法估阶的题目,如果要求解/证明的是极限值,而不是估计函数或数列的阶,那么也可以用拟合法进行书写.
\end{note}
\begin{proof}
由于\(f\in R[0,1]\),因此存在\(M > 0\),使得\(\vert f(x)\vert\leqslant M\),\(\forall x\in [0,1]\).
于是对\(\forall n\in\mathbb{N}_+\),\(\forall\delta\in(0,1)\),有
\begin{align*}
&\left\vert n\int_0^1 f(x)x^n dx - n\int_0^1 f(1)x^n dx\right\vert=\left\vert n\int_0^1 [f(x) - f(1)]x^n dx\right\vert\\
&\leqslant n\int_0^1 \vert [f(x) - f(1)]x^n\vert dx
=n\int_0^{\delta} \vert f(x) - f(1)\vert x^n dx + n\int_{\delta}^1 \vert f(x) - f(1)\vert x^n dx\\
&\leqslant n\int_0^{\delta} \vert M + f(1)\vert\delta^n dx + n\sup_{x\in[\delta,1]}\vert f(x) - f(1)\vert\int_{\delta}^1 x^n dx\\
&\leqslant n\vert M + f(1)\vert\delta^{n + 1} + n\sup_{x\in[\delta,1]}\vert f(x) - f(1)\vert\int_0^1 x^n dx\\
&=n\vert M + f(1)\vert\delta^{n + 1} + \frac{n}{n + 1}\sup_{x\in[\delta,1]}\vert f(x) - f(1)\vert.
\end{align*}
上式两边同时令\(n\rightarrow\infty\),并取上极限可得
\[
\varlimsup_{n\rightarrow\infty}\left\vert n\int_0^1 f(x)x^n dx - n\int_0^1 f(1)x^n dx\right\vert\leqslant\sup_{x\in[\delta,1]}\vert f(x) - f(1)\vert, \quad\forall\delta\in(0,1).
\]
再根据\(\delta\)的任意性,令\(\delta\rightarrow 1^-\)可得
\[
\varlimsup_{n\rightarrow\infty}\left\vert n\int_0^1 f(x)x^n dx - n\int_0^1 f(1)x^n dx\right\vert\leqslant\lim_{\delta\rightarrow 1^-}\sup_{x\in[\delta,1]}\vert f(x) - f(1)\vert=\varlimsup_{\delta\rightarrow 1^-}\vert f(x) - f(1)\vert.
\]
又因为\(f\)在\(x = 1\)处连续,所以\(\varlimsup_{\delta\rightarrow 1^-}\vert f(x) - f(1)\vert = 0\).故
\[
0\leqslant\varliminf_{n\rightarrow\infty}\left\vert n\int_0^1 f(x)x^n dx - n\int_0^1 f(1)x^n dx\right\vert\leqslant\varlimsup_{n\rightarrow\infty}\left\vert n\int_0^1 f(x)x^n dx - n\int_0^1 f(1)x^n dx\right\vert\leqslant 0.
\]
因此$\lim_{n\rightarrow\infty}n\int_0^1 f(x)x^n dx=\lim_{n\rightarrow\infty}n\int_0^1 f(1)x^n dx = f(1)\lim_{n\rightarrow\infty}\frac{n}{n + 1}=f(1)$.
\end{proof}

\begin{example}[$\,\,$Possion核]\label{example:Possion核}
   设\(f\in R[0,1]\)且\(f\)在\(x = 0\)连续,证明
\[
\lim_{t\rightarrow 0^+} \int_0^1{\frac{t}{x^2+t^2}f(x)dx}=\frac{\pi}{2}f(0).
\]
\end{example}
\begin{proof}
   因为\(f\in R[0,1]\),所以存在\(M > 0\),使得\(\vert f(x)\vert\leqslant M\),\(\forall x\in [0,1]\).于是对\(\forall\delta\in(0,1)\),固定\(\delta\),再对\(\forall t > 0\),我们有
\begin{align*}
&\left|\int_0^1\frac{t}{x^2 + t^2}f(x)dx - \int_0^1\frac{t}{x^2 + t^2}f(0)dx\right| \leqslant \int_0^1\frac{t}{x^2 + t^2}\vert f(x) - f(0)\vert dx\\
&= \int_0^{\delta}\frac{t}{x^2 + t^2}\vert f(x) - f(0)\vert dx + \int_{\delta}^1\frac{t}{x^2 + t^2}\vert f(x) - f(0)\vert dx\\
&\leqslant \sup_{x\in[0,\delta]}\vert f(x) - f(0)\vert\int_0^{\delta}\frac{t}{x^2 + t^2}dx + \int_0^1\frac{t}{\delta^2 + t^2}\vert M + f(0)\vert dx\\
&= \sup_{x\in[0,\delta]}\vert f(x) - f(0)\vert\left.\arctan\frac{x}{t}\right|_{0}^{\delta} + \frac{t}{\delta^2 + t^2}\vert M + f(0)\vert\\
&= \sup_{x\in[0,\delta]}\vert f(x) - f(0)\vert\cdot\arctan\frac{\delta}{t} + \frac{t}{\delta^2 + t^2}\vert M + f(0)\vert.
\end{align*}
上式两边同时令\(t\rightarrow 0^+\)并取上极限,可得
\[
{\varlimsup_{t\rightarrow 0^+}}\left|\int_0^1\frac{t}{x^2 + t^2}f(x)dx - \int_0^1\frac{t}{x^2 + t^2}f(0)dx\right| \leqslant \frac{\pi}{2}\sup_{x\in[0,\delta]}\vert f(x) - f(0)\vert, \forall\delta\in(0,1).
\]
再根据\(\delta\)的任意性,令\(\delta\rightarrow 0^+\)可得
\[
{\varlimsup_{t\rightarrow 0^+}}\left|\int_0^1\frac{t}{x^2 + t^2}f(x)dx - \int_0^1\frac{t}{x^2 + t^2}f(0)dx\right| \leqslant \frac{\pi}{2}\lim_{\delta\rightarrow 0^+}\sup_{x\in[0,\delta]}\vert f(x) - f(0)\vert = \frac{\pi}{2}{\varlimsup_{x\rightarrow 0^+}}\vert f(x) - f(0)\vert.
\]
又由于\(f\)在\(x = 0\)处连续,从而\({\varlimsup_{x\rightarrow 0^+}}\vert f(x) - f(0)\vert = 0\).故
\[
0\leqslant \underset{t\rightarrow 0^+}{{\varliminf }}\left| \int_0^1{\frac{t}{x^2+t^2}f(x)dx}-\int_0^1{\frac{t}{x^2+t^2}f(0)dx} \right|\leqslant {\varlimsup_{t\rightarrow 0^+} }\left| \int_0^1{\frac{t}{x^2+t^2}f(x)dx}-\int_0^1{\frac{t}{x^2+t^2}f(0)dx} \right|\leqslant 0.
\]
因此\(\lim_{t\rightarrow 0^+}\int_0^1\frac{t}{x^2 + t^2}f(x)dx = \lim_{t\rightarrow 0^+}\int_0^1\frac{t}{x^2 + t^2}f(0)dx = f(0)\lim_{t\rightarrow 0^+}\arctan\frac{1}{t} = \frac{\pi}{2}f(0)\).
\end{proof}

\begin{example}[$\,\,$Fejer核]\label{example:Fejer核}
设\(f\)在\(x = 0\)连续且在\([-\frac{1}{2},\frac{1}{2}]\)可积,则
\[
   \lim_{N\rightarrow +\infty} \int_{-\frac{1}{2}}^{\frac{1}{2}}{\frac{1}{N}\frac{\sin ^2\left( \pi Nx \right)}{\sin ^2\left( \pi x \right)}f\left( x \right) dx}=f\left( 0 \right).
\]
\end{example}
\begin{proof}
因为\(f\in R\left[-\frac{1}{2},\frac{1}{2}\right]\),所以存在\(M > 0\),使得\(\vert f(x)\vert\leqslant M\),\(\forall x\in\left[-\frac{1}{2},\frac{1}{2}\right]\).又因为\(\sin x\sim x\),\(x\rightarrow 0\),所以对\(\forall\varepsilon\in(0,1)\),存在\(\delta_0 > 0\),使得当\(\vert x\vert\leqslant\delta_0\)时,有\(\sin x\geqslant(1 - \varepsilon)x\).于是对\(\forall\delta\in\min\left\{\frac{1}{2},\delta_0\right\}\),我们有
\begin{align*}
&\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right|
\leqslant\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}\vert f(x) - f(0)\vert dx\\
&=\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}\vert f(x) - f(0)\vert dx + \int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}\vert f(x) - f(0)\vert dx\\
&\leqslant\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}dx + \int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{1}{N}\frac{1}{\sin^2(\pi\delta)}\vert M + f(0)\vert dx\\
&\leqslant\frac{\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert}{1 - \varepsilon}\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{(\pi x)^2}dx + \frac{1}{N}\int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{\vert M + f(0)\vert}{\sin^2(\pi\delta)}dx\\
&\xlongequal{\text{令}y = Nx}\frac{\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert}{1 - \varepsilon}\int_{\vert y\vert\leqslant N\delta}\frac{\sin^2(\pi y)}{(\pi y)^2}dy + \frac{1}{N}\int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{\vert M + f(0)\vert}{\sin^2(\pi\delta)}dx\\
&=\frac{\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert}{1 - \varepsilon}\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy + \frac{1}{N}\int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{\vert M + f(0)\vert}{\sin^2(\pi\delta)}dx.
\end{align*}
上式两边同时令\(N\rightarrow +\infty\)并取上极限,得到
\[
{\varlimsup_{N\rightarrow +\infty}}\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right|\leqslant\frac{\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert}{1 - \varepsilon}\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy.
\]
又由\(Dirichlet\)判别法,可知\(\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy\)收敛.从而根据\(\delta\)的任意性,上式两边同时令\(\delta\rightarrow 0^+\),再结合\(f\)在\(x = 0\)处连续,可得
\begin{align*}
&{\varlimsup_{N\rightarrow +\infty}}\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right|\\
&\leqslant\lim_{\delta\rightarrow 0^+}\frac{\sup_{\vert x\vert\leqslant\delta}\vert f(x) - f(0)\vert}{1 - \varepsilon}\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy\\
&=\frac{\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy}{1 - \varepsilon}\lim_{x\rightarrow 0^+}\vert f(x) - f(0)\vert = 0.
\end{align*}
从而
\[
0\leqslant{\varliminf_{N\rightarrow +\infty}}\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right|\leqslant{\varlimsup_{N\rightarrow +\infty}}\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right|\leqslant 0.
\]
故\(\lim_{N\rightarrow +\infty}\left|\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}[f(x) - f(0)]dx\right| = 0\).即\(\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(x)dx=\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx\).而一方面,我们有
\begin{align*}
&\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx
\geqslant\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{(\pi x)^2}f(0)dx\\
&\xlongequal{\text{令}y = Nx}\lim_{N\rightarrow +\infty}\int_{-\frac{N}{2}}^{\frac{N}{2}}\frac{\sin^2(\pi y)}{(\pi y)^2}f(0)dy
=\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}f(0)dy = f(0).
\end{align*}
另一方面,对\(\forall\varepsilon\in(0,1)\)我们有
\begin{align*}
&\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx
=\lim_{N\rightarrow +\infty}\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx+\lim_{N\rightarrow +\infty}\int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx\\
&\leqslant f(0)\lim_{N\rightarrow +\infty}\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}dx+\lim_{N\rightarrow +\infty}\int_{\delta\leqslant\vert x\vert\leqslant\frac{1}{2}}\frac{1}{N}\frac{1}{\sin^2(\pi\delta)}f(0)dx
\leqslant\frac{f(0)}{1 - \varepsilon}\lim_{N\rightarrow +\infty}\int_{\vert x\vert\leqslant\delta}\frac{1}{N}\frac{\sin^2(\pi Nx)}{(\pi x)^2}dx\\
&\xlongequal{\text{令}y = Nx}\frac{f(0)}{1 - \varepsilon}\lim_{N\rightarrow +\infty}\int_{\vert y\vert\leqslant N\delta}\frac{\sin^2(\pi y)}{(\pi y)^2}dy
=\frac{f(0)}{1 - \varepsilon}\int_{-\infty}^{+\infty}\frac{\sin^2(\pi y)}{(\pi y)^2}dy=\frac{f(0)}{1 - \varepsilon}.
\end{align*}
再根据\(\varepsilon\)的任意性,可知
\[
\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx\leqslant f(0).
\]
因此,由夹逼准则,可知\(\lim_{N\rightarrow +\infty}\int_{-\frac{1}{2}}^{\frac{1}{2}}\frac{1}{N}\frac{\sin^2(\pi Nx)}{\sin^2(\pi x)}f(0)dx = f(0).
\) 
\end{proof}

\begin{example}
   设\(\varphi_n(x)=\frac{n}{\sqrt{\pi}}e^{-n^2x^2},n = 1,2,\cdots\),\(f\)是\(\mathbb{R}\)上的有界实值连续函数,证明:
\[
\lim_{n \to \infty} \int_{-\infty}^{\infty} f(y)\varphi_n(x - y) dy = f(x).
\]
\end{example}
\begin{proof}
由条件可知,存在\(M > 0\),使得\(\vert f(x)\vert\leqslant M\),\(\forall x\in\mathbb{R}\).于是对\(\forall x\in\mathbb{R}\),固定\(x\),再对\(\forall\delta > 0\),我们有
\begin{align*}
&{\varlimsup_{n\rightarrow\infty}}\left|\int_{-\infty}^{\infty}\vert f(y) - f(x)\vert\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy\right|
\leqslant{\varlimsup_{n\rightarrow\infty}}\int_{-\infty}^{\infty}\vert f(y) - f(x)\vert\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy\\
&\leqslant{\varlimsup_{n\rightarrow\infty}}\int_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy + {\varlimsup_{n\rightarrow\infty}}\int_{\vert x - y\vert\geqslant\delta}\vert f(y) - f(x)\vert\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy\\
&\leqslant\sup_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert{\varlimsup_{n\rightarrow\infty}}\int_{\vert x - y\vert\leqslant\delta}\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy + {\varlimsup_{n\rightarrow\infty}}\int_{\vert x - y\vert\geqslant\delta}2M\frac{n}{\sqrt{\pi}}e^{-n^2\delta^2}dy\\
&\xlongequal{\text{令}z = n(x - y)}\sup_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert{\varlimsup_{n\rightarrow\infty}}\int_{\vert z\vert\leqslant n\delta}\frac{1}{\sqrt{\pi}}e^{-z^2}dz\\
&=\sup_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert\int_{-\infty}^{+\infty}\frac{1}{\sqrt{\pi}}e^{-z^2}dz
=\sup_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert.
\end{align*}
令\(\delta\rightarrow 0^+\),再结合\(f\)在\(\forall x\in\mathbb{R}\)上连续,可得
\[
{\varlimsup_{n\rightarrow\infty}}\left|\int_{-\infty}^{\infty}\vert f(y) - f(x)\vert\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy\right|\leqslant\lim_{\delta\rightarrow 0^+}\sup_{\vert x - y\vert\leqslant\delta}\vert f(y) - f(x)\vert=\lim_{y\rightarrow x}\vert f(y) - f(x)\vert = 0.
\]
故
\begin{align*}
&\lim_{n\rightarrow\infty}\int_{-\infty}^{\infty}f(y)\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy
=\lim_{n\rightarrow\infty}\int_{-\infty}^{\infty}f(x)\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy\\
&=f(x)\lim_{n\rightarrow\infty}\int_{-\infty}^{\infty}\frac{n}{\sqrt{\pi}}e^{-n^2(x - y)^2}dy
\xlongequal{\text{令}z = n(x - y)}f(x)\lim_{n\rightarrow\infty}\int_{\vert z\vert\leqslant n\delta}\frac{1}{\sqrt{\pi}}e^{-z^2}dz\\
&=f(x)\int_{-\infty}^{+\infty}\frac{1}{\sqrt{\pi}}e^{-z^2}dz
=f(x).
\end{align*}
\end{proof}


\section{Riemann引理}

\begin{lemma}[Riemann引理]\label{lemma:Riemann引理}
设\(E\subset\mathbb{R}\)是区间且\(f\)在\(E\)上绝对可积. \(g\)是定义在\(\mathbb{R}\)的周期\(T > 0\)函数,且在任何有界闭区间上Riemann可积,则我们有
\begin{align}\label{equation:4.1-1.1}
   \lim_{x\rightarrow +\infty}\int_{E}f(y)g(xy)dy=\frac{1}{T}\int_{E}f(y)dy\int_{0}^{T}g(y)dy.
\end{align}
\end{lemma}
\begin{remark}
   \(f\)在\(E\)上绝对可积包含$f$为反常积分的情况.

   考试中,\hyperref[lemma:Riemann引理]{Riemann引理}不能直接使用,需要我们根据具体问题给出证明.具体可见\hyperref[example:4.611315]{例题\ref{example:4.611315}}.
\end{remark}
\begin{note}
\begin{enumerate}[(1)]
   \item\label{example-note:不妨设的原因(1)} 不妨设 \(E = \mathbb{R}\) 的原因:若 (1.1) 式在 \(E = \mathbb{R}\) 时已得证明,则当 \(E\subseteq \mathbb{R}\) 时,令 \(\widetilde{f}(y) = f(y)\cdot \mathcal{X}_E\),\(y\in \mathbb{R}\),则由 \(f(y)\) 在 \(E\) 上绝对可积,可得 \(\widetilde{f}(y)\) 在 \(\mathbb{R}\) 上也绝对可积.从而由假设可知
   \[
   \lim_{x\rightarrow +\infty} \int_{\mathbb{R}}{\widetilde{f}(y)g(xy)dy}=\frac{1}{T}\int_{\mathbb{R}}{\widetilde{f}(y)dy\int_0^T{g(y)dy}}.
   \]
   于是
   \begin{align*}
   \lim_{x\rightarrow +\infty} \int_E{f(y)g(xy)dy}=\lim_{x\rightarrow +\infty} \int_{\mathbb{R}}{\widetilde{f}(y)g(xy)dy}
   =\frac{1}{T}\int_{\mathbb{R}}{\widetilde{f}(y)dy\int_0^T{g(y)dy}}
   =\frac{1}{T}\int_E{f(y)dy\int_0^T{g(y)dy}}
   \end{align*}
   故可以不妨设 \(E = \mathbb{R}\).
   
   \item\label{example-note:不妨设的原因(2)} 不妨设 \(\sup_{\mathbb{R}}|g| > 0\) 的原因:若 \(\sup_{\mathbb{R}}|g| = 0\),则 \(g(x)\equiv 0\),此时结论显然成立.因此我们只需要考虑当 \(\sup_{\mathbb{R}}|g| > 0\) 时的情况.
   
   \item\label{example-note:不妨设的原因(3)} 不妨设 \(T = 1\) 的原因:若 \eqref{equation:4.1-1.1} 式在 \(T = 1\) 时已得证明,则当 \(T\neq 1\) 时,有
   \begin{align}\label{equation:4.1-1.2} 
      \frac{1}{T}\int_E{f(y)dy\int_0^T{g(y)dy}}\xlongequal{\text{令}y = Tx}\int_E{f(y)dy\int_0^1{g(Tx)dx}}=\int_E{f(y)dy\int_0^1{g(Ty)dy}}.
   \end{align}
   由于 \(g(y)\) 是 \(\mathbb{R}\) 上周期为 \(T\neq 1\) 的函数,因此 \(g(Ty)\) 就是 \(\mathbb{R}\) 上周期为 \(1\) 的函数.从而由假设可知
   \begin{align}\label{equation:4.1-1.3} 
   \lim_{x\rightarrow +\infty} \int_E{f(y)g(Txy)dy}=\int_E{f(y)dy\int_0^1{g(Ty)dy}}.
   \end{align}
   又由\eqref{equation:4.1-1.2} 式及 \(T > 0\) 可得
   \begin{align*}
   \int_E{f(y)dy\int_0^1{g(Ty)dy}}&=\frac{1}{T}\int_E{f(y)dy\int_0^T{g(y)dy}}\\
   \lim_{x\rightarrow +\infty} \int_E{f(y)g(Txy)dy}&\xlongequal{\text{令}t = Tx}\lim_{t\rightarrow +\infty} \int_E{f(y)g(ty)dy}=\lim_{x\rightarrow +\infty} \int_E{f(y)g(xy)dy}
   \end{align*}
   再结合\eqref{equation:4.1-1.3}式可得 \(\lim_{x\rightarrow +\infty} \int_E{f(y)g(xy)dy}=\frac{1}{T}\int_E{f(y)dy\int_0^T{g(y)dy}}\).故可以不妨设 \(T = 1\).
   
   \item\label{example-note:不妨设的原因(4)} 不妨设 \(\int_0^1{g(y)dy} = 0\) 的原因:若 \eqref{equation:4.1-1.1} 式在 \(\int_0^1{g(y)dy} = 0\) 时已得证明,则当 \(\int_0^1{g(y)dy}\neq 0\) 时,
   令 \(G(y) = g(y) - \int_0^1{g(t)dt}\),则 \(G(y)\) 是 \(\mathbb{R}\) 上周期为 \(1\) 的函数,并且 \(\int_0^1{G(y)dy} = 0\).于是由假设可知
   \begin{align*}
   &\,\,\,\,\,\,\,\, \lim_{x\rightarrow +\infty} \int_E{f(y)G(xy)dy}=\int_E{f(y)dy\int_0^1{G(y)dy}}\\
   &\Leftrightarrow \lim_{x\rightarrow +\infty} \int_E{f(y)\left[ g(xy) - \int_0^1{g(t)dt} \right] dy}=\int_E{f(y)dy\int_0^1{\left[ g(y) - \int_0^1{g(t)dt} \right] dy}}\\
   &\Leftrightarrow \lim_{x\rightarrow +\infty} \left(\int_E{f(y)g(xy)dy}-\int_E{f(y)\int_0^1{g(t)dt}dy}\right)=\int_E{f(y)dy\int_0^1{g(y)dy}}-\int_E{f(y)dy}\int_0^1{g(t)dt}=0\\
   &\Leftrightarrow \lim_{x\rightarrow +\infty} \int_E{f(y)g(xy)dy}=\int_E{f(y)\int_0^1{g(t)dt}dy}
   \end{align*}
   再结合\hyperref[example-note:不妨设的原因(3)]{\ref{example-note:不妨设的原因(2)}}可知,此时原结论成立.故可以不妨设 \(\int_0^1{g(y)dy} = 0\).
\end{enumerate}
\end{note}
\begin{proof}
\hyperref[example-note:不妨设的原因(1)]{不妨设 \(E = \mathbb{R}\)},\hyperref[example-note:不妨设的原因(2)]{\(\sup_{\mathbb{R}}|g| > 0\)},\hyperref[example-note:不妨设的原因(3)]{\(T = 1\)},\hyperref[example-note:不妨设的原因(4)]{再不妨设 \(\int_0^1{g(y)dy} = 0\)}.因此只需证 \(\lim_{x\rightarrow +\infty} \int_{\mathbb{R}}{f(y)g(xy)dy} = 0\).由 \(g\) 的周期为 \(1\) 及 \(\int_0^1{g(y)dy} = 0\) 可得,对 \(\forall n\in \mathbb{N}\),都有
\begin{align*}
&\int_{-n}^0{g(t)dt}\xlongequal{\text{令}x = t + n}\int_0^n{g(x - n)dx}\xlongequal{g\text{的周期为}1}\int_0^n{g(x)dx}=\int_0^n{g(t)dt}\\
&=\sum_{k = 0}^{n - 1}{\int_k^{k + 1}{g(t)dt}}\xlongequal{\text{令}y = t - k}\sum_{k = 0}^{n - 1}{\int_0^1{g(y + k)dy}}\xlongequal{g\text{的周期为}1}\sum_{k = 0}^{n - 1}{\int_0^1{g(y)dy}}\\
&=(n - 1)\cdot 0 = 0.
\end{align*}
从而对 \(\forall \beta > \alpha > 0\),我们有
\begin{align*}
\left|\int_{\alpha}^{\beta}{g(t)dt}\right|&=\left|\int_0^{\beta}{g(t)dt}-\int_0^{\alpha}{g(t)dt}\right|
=\left|\int_{-[ \beta ]}^{\beta - [\beta ]}{g(t + [\beta ])dt}-\int_{-[ \alpha ]}^{\alpha - [\alpha ]}{g(t + [\alpha ])dt}\right|\\
&=\left|\int_{-[ \beta ]}^{\beta - [\beta ]}{g(t)dt}-\int_{-[ \alpha ]}^{\alpha - [\alpha ]}{g(t)dt}\right|
=\left|\int_0^{\beta - [\beta ]}{g(t)dt}-\int_0^{\alpha - [\alpha ]}{g(t)dt}\right|\\
&=\left|\int_{\alpha - [\alpha ]}^{\beta - [\beta ]}{g(t)dt}\right|\leqslant \sup_{\mathbb{R}}|g|.
\end{align*}
故
\begin{align}\label{equation:4.1-2.1} 
  \left|\int_{\alpha}^{\beta}{g(xy)dy}\right|\xlongequal{\text{令}t = xy}\frac{1}{x}\left|\int_{x\alpha}^{x\beta}{g(t)dt}\right|\leqslant \frac{\sup\limits_{\mathbb{R}}|g|}{x}, \quad \forall x > 0, \forall \beta > \alpha > 0.  
\end{align}
因为 \(f\) 在 \(\mathbb{R}\) 上绝对可积,所以由 Cauchy 收敛准则可知,对 \(\forall \varepsilon > 0\),存在 \(N\in \mathbb{N}\),使得
\begin{align}\label{equation:4.1-2.2} 
   \left|\int_{|y| > N}{f(y)dy}\right| < \frac{\varepsilon}{3\sup\limits_{\mathbb{R}}|g|}. 
\end{align}
由于 \(f\) 在 \(\mathbb{R}\) 上绝对可积,从而 \(f\) 在 \(\mathbb{R}\) 上也 Riemann 可积,因此由可积的充要条件可知,存在划分
\[
-N = t_0 < t_1 < t_2 < \cdots<t_n = N,
\]
使得
\begin{align}\label{equation:4.1-2.3} 
\sum_{i = 1}^n{\left(\sup_{[t_{i - 1},t_i]}f - \inf_{[t_{i - 1},t_i]}f\right)(t_i - t_{i - 1})}\leqslant \frac{\varepsilon}{3\sup\limits_{\mathbb{R}}|g|}.
\end{align}
于是当 \(x > \frac{3\sum\limits_{j = 1}^n{|\inf\limits_{[t_{j - 1},t_j]}f|\cdot}\sup\limits_{\mathbb{R}}|g|}{\varepsilon}\) 时,结合\eqref{equation:4.1-2.1}\eqref{equation:4.1-2.2}\eqref{equation:4.1-2.3}可得
\begin{align*}
\left|\int_{-\infty}^{+\infty}{f(y)g(xy)dy}\right|&\leqslant \left|\int_{-N}^N{f(y)g(xy)dy}\right|+\left|\int_{|y| > N}{f(y)g(xy)dy}\right|
\overset{\eqref{equation:4.1-2.2}}{\leqslant}\left|\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{f(y)g(xy)dy}}\right|+\frac{\varepsilon}{3\sup\limits_{\mathbb{R}}|g|}\cdot \sup\limits_{\mathbb{R}}|g|\\
&\leqslant \sum_{j = 1}^n{\left|\int_{t_{j - 1}}^{t_j}{[f(y) - \inf_{[t_{j - 1},t_j]}f]g(xy)dy}\right|}+\sum_{j = 1}^n{\left|\int_{t_{j - 1}}^{t_j}{\inf_{[t_{j - 1},t_j]}f\cdot g(xy)dy}\right|}+\frac{\varepsilon}{3}\\
&\overset{\eqref{equation:4.1-2.1}}{\leqslant}\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{[f(y) - \inf_{[t_{j - 1},t_j]}f]dy}}\cdot \sup\limits_{\mathbb{R}}|g|+\frac{\sup\limits_{\mathbb{R}}|g|}{x}\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{|\inf_{[t_{j - 1},t_j]}f|dy}}+\frac{\varepsilon}{3}\\
&\leqslant \sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{(\sup\limits_{[t_{i - 1},t_i]}f - \inf_{[t_{j - 1},t_j]}f)dy}}\cdot \sup\limits_{\mathbb{R}}|g|+\frac{\sup\limits_{\mathbb{R}}|g|}{x}\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{|\inf_{[t_{j - 1},t_j]}f|dy}}+\frac{\varepsilon}{3}\\
&=\sum_{j = 1}^n{(\sup\limits_{[t_{i - 1},t_i]}f - \inf_{[t_{j - 1},t_j]}f)(t_j - t_{j - 1})}\cdot \sup\limits_{\mathbb{R}}|g|+\frac{\sup\limits_{\mathbb{R}}|g|}{x}\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{|\inf_{[t_{j - 1},t_j]}f|dy}}+\frac{\varepsilon}{3}\\
&\overset{\eqref{equation:4.1-2.3}}{<}\frac{\varepsilon}{3\sup\limits_{\mathbb{R}}|g|}\cdot \sup\limits_{\mathbb{R}}|g|+\frac{\sup\limits_{\mathbb{R}}|g|}{x}\sum_{j = 1}^n{\int_{t_{j - 1}}^{t_j}{|\inf_{[t_{j - 1},t_j]}f|dy}}+\frac{\varepsilon}{3}\\
&\overset{x\text{充分大}}{<}\frac{\varepsilon}{3}+\frac{\varepsilon}{3}+\frac{\varepsilon}{3}=\varepsilon
\end{align*}
因此 \(\lim_{x\rightarrow +\infty} \int_{\mathbb{R}}{f(y)g(xy)dy} = 0\).结论得证.
\end{proof}

\begin{example}\label{example:4.611315}
   设\(f\in R[0,2\pi]\),不直接使用\hyperref[lemma:Riemann引理]{Riemann引理}计算
   \[
   \lim_{n\rightarrow\infty}\int_{0}^{2\pi}f(x)|\sin(nx)|dx.
   \]
\end{example}
\begin{proof}
   对\(\forall n\in \mathbb{N}_+\),固定\(n\).将\([0, 2\pi]\)等分成\(2n\)段,记这个划分为
   \[
   T:0 = t_0 < t_1 < \cdots < t_{2n} = 2\pi,
   \]
   其中\(t_i = \frac{i\pi}{n}, i = 0, 1, \cdots, n\).此时我们有
   \begin{align}\label{example4.61-1.1}
   \int_{t_{i - 1}}^{t_i}{|\sin(nx)|\mathrm{d}x}=\int_{\frac{(i - 1)\pi}{n}}^{\frac{i\pi}{n}}{|\sin(nx)|\mathrm{d}x}=\frac{1}{n}\int_{(i - 1)\pi}^{i\pi}{|\sin x|\mathrm{d}x}=\frac{2}{n}. 
   \end{align}
   由\(f\in R[0, 2\pi]\)可知,\(f\)在\([0, 2\pi]\)上有界也内闭有界.从而利用\eqref{example4.61-1.1}式可知,对\(\forall n\in \mathbb{N}_+\),一方面,我们有
   \begin{align}
      \int_0^{2\pi}{f\left( x \right) \left| \sin \left( nx \right) \right|\mathrm{d}x}&=\sum_{i=1}^{2n}{\int_{t_{i-1}}^{t_i}{f\left( x \right) \left| \sin \left( nx \right) \right|\mathrm{d}x}}\leqslant \sum_{i=1}^{2n}{\int_{t_{i-1}}^{t_i}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{sup}}f\cdot \left| \sin \left( nx \right) \right|\mathrm{d}x}}\xlongequal{\eqref{example4.61-1.1} \text{式}}\frac{2}{n}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{sup}}f}
\nonumber
\\
      &=\frac{2}{n}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{sup}}f}=\frac{2}{\pi}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{sup}}f\cdot \frac{\pi}{n}}=\frac{2}{\pi}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{sup}}f\cdot \left( t_i-t_{i-1} \right)}.  \label{example4.61-1.2}
   \end{align}
   另一方面,我们有
   \begin{align}
      \int_0^{2\pi}{f\left( x \right) \left| \sin \left( nx \right) \right|\mathrm{d}x}&=\sum_{i=1}^{2n}{\int_{t_{i-1}}^{t_i}{f\left( x \right) \left| \sin \left( nx \right) \right|\mathrm{d}x}}\geqslant \sum_{i=1}^{2n}{\int_{t_{i-1}}^{t_i}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{inf}}f\cdot \left| \sin \left( nx \right) \right|\mathrm{d}x}}\xlongequal{\eqref{example4.61-1.1}\text{式}}\frac{2}{n}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{inf}}f}
\nonumber
\\
      &=\frac{2}{\pi}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{inf}}f\cdot \frac{\pi}{n}}=\frac{2}{\pi}\sum_{i=1}^{2n}{\underset{\left[ t_{i-1},t_i \right]}{\mathrm{inf}}f\cdot \left( t_i-t_{i-1} \right)}.\label{example4.61-1.3}
   \end{align}
   由\(f\in R[0, 2\pi]\)和Riemann可积的充要条件可知
   \[
   \int_0^{2\pi}{f(x)\mathrm{d}x}=\lim_{n\rightarrow \infty}\sum_{i = 1}^{2n}{\sup_{[t_{i - 1}, t_i]}f\cdot(t_i - t_{i - 1})}=\lim_{n\rightarrow \infty}\sum_{i = 1}^{2n}{\inf_{[t_{i - 1}, t_i]}f\cdot(t_i - t_{i - 1})}.
   \]
   于是对\eqref{example4.61-1.2}\eqref{example4.61-1.3}式两边同时令\(n\rightarrow \infty\),得到
   \[
   \lim_{n\rightarrow \infty}\int_0^{2\pi}{f(x)|\sin(nx)|\mathrm{d}x}=\frac{2}{\pi}\int_0^{2\pi}{f(x)\mathrm{d}x}.
   \]
\end{proof}

\begin{example}
设\(f\)是\(\mathbb{R}\)上周期\(2\pi\)函数且在\([-\pi,\pi]\)上Riemann可积,设
\[
S_n(x)=\frac{1}{\pi}\int_{-\pi}^{\pi}\frac{f(x + t)}{2\sin\frac{t}{2}}\sin\left(\frac{2n + 1}{2}t\right)\mathrm{d}t,n = 1,2,\cdots.
\]
若\(x_0\in(-\pi,\pi)\)是\(f\)在\([-\pi,\pi]\)唯一间断点且存在下述极限
\[
A=\lim_{x\rightarrow x_0^{+}}f(x),B=\lim_{x\rightarrow x_0^{-}}f(x),\lim_{x\rightarrow x_0^{+}}\frac{f(x)-A}{x - x_0},\lim_{x\rightarrow x_0^{-}}\frac{f(x)-B}{x - x_0}.
\]
证明:
\[
\lim\limits_{n\rightarrow\infty}S_n(x_0)=\frac{\lim\limits_{x\rightarrow x_0^{+}}f(x)+\lim\limits_{x\rightarrow x_0^{-}}f(x)}{2}.
\]
\end{example}
\begin{note}
\begin{enumerate}[(1)]
   \item 计算 \(I_1=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\) 的思路:由于 \(\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\) 在 \([0, \pi]\) 上只可能有奇点 \(t = 0\),因此 \(\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\) 在 \([0, \pi]\) 上不一定绝对可积.从而不能直接利用Riemann引理.于是我们需要将 \(\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\) 转化为在 \([0, \pi]\) 上无奇点的函数(排除 \(t = 0\) 这个奇点,即证明 \(t = 0\) 不再是奇点),只要被积函数在积分区间上无奇点且Riemann可积,就一定绝对可积.进而满足Riemann引理的条件,再利用Riemann引理就能求解出 \(I_1\).具体处理方式见下述证明.

   计算 \(I_2=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\) 的思路同理,也是要排除 \(t = 0\) 这个可能的奇点,再利用Riemann引理进行求解.具体计算方式见下述证明.
   
   \item 计算 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\) 的思路:
   注意由于 \(\frac{1}{2\sin \frac{t}{2}}\) 在 \([0, \pi]\) 上有一个奇点 \(t = 0\),并且对 \(\forall t\in (0, \pi]\),都有
   \[
   \left| \frac{1}{2\sin \frac{t}{2}} \right|\geqslant \left| \frac{1}{2\cdot \frac{2}{\pi}\cdot \frac{t}{2}} \right|=\frac{\pi}{2t}>0.
   \]
   而 \(\int_0^{\pi}{\frac{\pi}{2t}\mathrm{d}t}\) 是发散的,故 \(\int_0^{\pi}{\left| \frac{1}{2\sin \frac{t}{2}} \right|\mathrm{d}t}\) 也发散.因此 \(\frac{1}{2\sin \frac{t}{2}}\) 在 \([0, \pi]\) 上一定不是绝对可积的,从而不能利用Riemann引理计算 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\).真正能计算 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\) 的方法有多种,下述证明利用的是\hyperref[强行替换(拟合法)和凑定积分]{强行替换/拟合法}.
\end{enumerate}
\end{note}
\begin{proof}
注意到
\begin{align}
S_n(x_0)&=\frac{1}{\pi}\int_{-\pi}^{\pi}{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}
\nonumber
\\
&=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\frac{1}{\pi}\int_{-\pi}^0{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}
\nonumber
\\
&\xlongequal{\text{令}y = -t}\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\label{example4.59-1.0}
\end{align}
记 \(I_1=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\),\(I_2=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t)}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\),则由\eqref{example4.59-1.0}式可得
\begin{align}\label{example4.59-1.1}
   \lim_{n\rightarrow \infty} S_n(x_0)=\lim_{n\rightarrow \infty} (I_1 + I_2).
\end{align}
于是
\begin{align}
   I_1&=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\frac{A}{\pi}\int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t},\label{example4.59-1.2}
   \\
I_2&=\frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\frac{B}{\pi}\int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}.\label{example4.59-1.2-0}
\end{align}
由条件可知 \(\lim_{t\rightarrow 0^+} \frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}=\lim_{t\rightarrow 0^+} \frac{f(x_0 + t) - A}{t}=\lim_{x\rightarrow x_{0}^{+}} \frac{f(x) - A}{x - x_0}\) 存在,\(\lim_{t\rightarrow 0^-} \frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}=\lim_{t\rightarrow 0^-} \frac{f(x_0 - t) - B}{t}=\lim_{x\rightarrow x_{0}^{-}} \frac{f(x) - B}{x - x_0}\) 存在,因此 \(\frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}\),\(\frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}\) 在 \([0, \pi]\) 都没有奇点且Riemann可积,从而 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\),\(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\) 都满足Riemann引理的条件.于是由Riemann引理可得
\begin{align}\label{example4.59-1.3}
   \lim_{n\rightarrow \infty} \frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}=0, \quad \lim_{n\rightarrow \infty} \frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}=0.
\end{align}
下面计算 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}\).
\begin{align}\label{example4.59-1.4}
   \left| \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}-\int_0^{\pi}{\frac{1}{t}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t} \right|=\left| \int_0^{\pi}{\frac{t - 2\sin \frac{t}{2}}{2t\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t} \right|.
\end{align}
而 \(\lim_{t\rightarrow 0} \frac{t - 2\sin \frac{t}{2}}{2t\sin \frac{t}{2}}=\lim_{t\rightarrow 0} \frac{t - 2\sin \frac{t}{2}}{t^2}\xlongequal{\mathrm{L}'\mathrm{Hospital}'\mathrm{rules}}\lim_{t\rightarrow 0} \frac{1 - \cos \frac{t}{2}}{2t}=0\),因此 \(\frac{t - 2\sin \frac{t}{2}}{2t\sin \frac{t}{2}}\) 在 \([0, \pi]\) 上无奇点且Riemann可积,从而由Riemann引理可知 \(\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{t - 2\sin \frac{t}{2}}{2t\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}=0\).于是再结合 \eqref{example4.59-1.4} 式可得
\begin{align}\label{example4.59-1.5}
\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}&=\lim_{n\rightarrow \infty} \int_0^{\pi}{\frac{1}{t}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}
=\lim_{n\rightarrow \infty} \int_0^{\frac{2n + 1}{2}\pi}{\frac{\sin t}{t}\mathrm{d}t}
=\int_0^{+\infty}{\frac{\sin t}{t}\mathrm{d}t}=\frac{\pi}{2}.
\end{align}
因此,由 \eqref{example4.59-1.2}\eqref{example4.59-1.2-0}\eqref{example4.59-1.3}\eqref{example4.59-1.5}式可得
\begin{align*}
\lim_{n\rightarrow \infty} I_1&=\lim_{n\rightarrow \infty} \frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 + t) - A}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\lim_{n\rightarrow \infty} \frac{A}{\pi}\int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}
=0 + \frac{A}{\pi}\cdot \frac{\pi}{2}
=\frac{A}{2},
\end{align*}

\begin{align*}
\lim_{n\rightarrow \infty} I_2&=\lim_{n\rightarrow \infty} \frac{1}{\pi}\int_0^{\pi}{\frac{f(x_0 - t) - B}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}+\lim_{n\rightarrow \infty} \frac{B}{\pi}\int_0^{\pi}{\frac{1}{2\sin \frac{t}{2}}\sin \left( \frac{2n + 1}{2}t \right) \mathrm{d}t}
=0 + \frac{B}{\pi}\cdot \frac{\pi}{2}
=\frac{B}{2}.
\end{align*}
再结合 \eqref{example4.59-1.1}式可得
\begin{align*}
\lim_{n\rightarrow \infty} S_n(x_0)=\lim_{n\rightarrow \infty} (I_1 + I_2)
=\lim_{n\rightarrow \infty} I_1 + \lim_{n\rightarrow \infty} I_2
=\frac{A + B}{2}.
\end{align*}
\end{proof}

\begin{example}
   设\(f\in C^{1}[0,\frac{\pi}{2}],f(0)=0\),计算
\[
\lim_{n\rightarrow\infty}\frac{1}{\ln n}\int_{0}^{\frac{\pi}{2}}\frac{\sin^{2}(nx)}{\sin^{2}x}f(x)dx.
\]
\end{example}
\begin{remark}
   由于\(x = 0\)可能是\(\frac{f(x)}{\sin^2x}\)在\(\left[0, \frac{\pi}{2}\right]\)上的奇点,因此我们需要将其转化为在\(\left[0, \frac{\pi}{2}\right]\)上不含奇点的函数,才能利用\hyperref[lemma:Riemann引理]{Riemann引理}进行计算.
\end{remark}
\begin{proof}
注意到
\begin{align}\label{example4.62-1.1}
  \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f(x)}{\sin^2x}\sin^2(nx)\mathrm{d}x}=\frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}+\frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}. 
\end{align}
先计算\(\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}\).
由\(f\in C^1\left[0, \frac{\pi}{2}\right]\)可知,\(f\in D^2\left[0, \frac{\pi}{2}\right]\).从而由L'Hospital法则可知
\[
\lim_{x\rightarrow 0^+} \frac{f(x) - f^\prime(0)x}{\sin^2x}=\lim_{x\rightarrow 0^+} \frac{f^\prime(x) - f^\prime(0)}{2\sin x\cos x}=\frac{1}{2}\lim_{x\rightarrow 0^+} \frac{f^\prime(x) - f^\prime(0)}{x}=\frac{f^{\prime\prime}(0)}{2}.
\]
于是\(\frac{f(x) - f^\prime(0)x}{\sin^2x}\)在\(\left[0, \frac{\pi}{2}\right]\)上无奇点且Riemann可积,从而绝对可积.故由\hyperref[lemma:Riemann引理]{Riemann引理}可得
\begin{align}
\lim_{n\rightarrow \infty} \int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}&=\lim_{n\rightarrow \infty} \frac{1}{\pi}\int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\mathrm{d}x}\int_0^{\pi}{\sin^2x\mathrm{d}x}
\nonumber
\\
&=\lim_{n\rightarrow \infty} \frac{1}{2}\int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\mathrm{d}x}<\infty. \label{example4.62-1.2}
\end{align}
利用\eqref{example4.62-1.2}式可得
\begin{align}\label{example4.62-1.3}
  \lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}=\lim_{n\rightarrow \infty} \frac{1}{\ln n}\cdot \lim_{n\rightarrow \infty} \int_0^{\frac{\pi}{2}}{\frac{f(x) - f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}=0.  
\end{align}
下面计算\(\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}\).
对\(\forall n\in \mathbb{N}_+\),我们有
\begin{align}\label{example4.62-1.4}
   \left|\frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}-\frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)}{x}\sin^2(nx)\mathrm{d}x}\right|=\left|\frac{f^\prime(0)}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\cdot \sin^2(nx)\mathrm{d}x}\right|.
\end{align}
又\(\lim_{x\rightarrow 0^+} \frac{x^2 - \sin^2x}{x\sin^2x}=\lim_{x\rightarrow 0^+} \frac{x^2 - \left(x - \frac{x^3}{6} + o(x^3)\right)^2}{x^3}=\lim_{x\rightarrow 0^+} \frac{-\frac{x^3}{3} + o(x^3)}{x^3}=-\frac{1}{3}\),故\(\frac{x^2 - \sin^2x}{x\sin^2x}\)在\(\left[0, \frac{\pi}{2}\right]\)上无奇点且Riemann可积,从而绝对可积.
于是由\hyperref[lemma:Riemann引理]{Riemann引理}可得
\begin{align}\label{example4.62-1.5}
   \lim_{n\rightarrow \infty} f^\prime(0) \int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\cdot \sin^2(nx)\mathrm{d}x}=\frac{1}{\pi}\int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\mathrm{d}x}\int_0^{\pi}{\sin^2x\mathrm{d}x}=\frac{1}{2}\int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\mathrm{d}x}<\infty. 
\end{align}
利用\eqref{example4.62-1.5}式可得
\begin{align}\label{example4.62-1.6}
 \lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\cdot \sin^2(nx)\mathrm{d}x}=\lim_{n\rightarrow \infty} \frac{1}{\ln n}\cdot \lim_{n\rightarrow \infty} \int_0^{\frac{\pi}{2}}{\frac{x^2 - \sin^2x}{x\sin^2x}\cdot \sin^2(nx)\mathrm{d}x}=0.  
\end{align}
因此,对\eqref{example4.62-1.4}式两边同时令\(n\rightarrow \infty\),利用\eqref{example4.62-1.6}式可得
\begin{align}\label{example4.62-1.7}
\begin{aligned}
   &\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)x}{\sin^2x}\sin^2(nx)\mathrm{d}x}=\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f^\prime(0)}{x}\sin^2(nx)\mathrm{d}x}\\
&=\lim_{n\rightarrow \infty} \frac{f^\prime(0)}{\ln n}\int_0^{\frac{n\pi}{2}}{\frac{\sin^2x}{x}\mathrm{d}x}
=\lim_{n\rightarrow \infty} \frac{f^\prime(0) \int_0^{\frac{n\pi}{2}}{\frac{\sin^2x}{x}\mathrm{d}x}}{\ln \frac{n\pi}{2} - \ln \frac{\pi}{2}}.
\end{aligned}
\end{align}
而由\hyperref[theorem:函数Stolz定理]{函数Stolz定理}可知
\begin{align}\label{example4.62-1.8}
   \lim_{x\rightarrow \infty} \frac{f^\prime(0) \int_0^x{\frac{\sin^2t}{t}\mathrm{d}t}}{\ln x - \ln \frac{\pi}{2}}=f^\prime(0) \lim_{n\rightarrow \infty} \frac{\int_x^{x + \pi}{\frac{\sin^2t}{t}\mathrm{d}t}}{\ln (x + \pi) - \ln x}=\frac{f^\prime(0)}{\pi}\lim_{n\rightarrow \infty} x\int_x^{x + \pi}{\frac{\sin^2t}{t}\mathrm{d}t}.
\end{align}
由\href{https://mp.weixin.qq.com/s/VseYa0fe0SnELonK0k4puw}{积分中值定理}可知,对\(\forall x > 0\),存在\(\theta_x\in [x, x + \pi]\),使得
\[
\int_x^{x + \pi}{\frac{\sin^2t}{t}\mathrm{d}t}=\frac{1}{\theta_x}\int_x^{x + \pi}{\sin^2t\mathrm{d}t}=\frac{1}{\theta_x}\int_0^{\pi}{\sin^2t\mathrm{d}t}=\frac{\pi}{2\theta_x}.
\]
又由\(\theta_x\in [x, x + \pi]\)可知,\(\theta_x\sim x, x\rightarrow +\infty\).从而\eqref{example4.62-1.8}式可化为
\[
\lim_{x\rightarrow \infty} \frac{f^\prime(0) \int_0^x{\frac{\sin^2t}{t}\mathrm{d}t}}{\ln x - \ln \frac{\pi}{2}}=\frac{f^\prime(0)}{\pi}\lim_{n\rightarrow \infty} x\int_x^{x + \pi}{\frac{\sin^2t}{t}\mathrm{d}t}=\frac{f^\prime(0)}{\pi}\lim_{n\rightarrow \infty} \frac{\pi x}{2\theta_x}=\frac{f^\prime(0)}{2}.
\]
于是由Heine归结原则可得
\begin{align}\label{example4.62-1.9}
  \lim_{n\rightarrow \infty} \frac{f^\prime(0) \int_0^{\frac{n\pi}{2}}{\frac{\sin^2x}{x}\mathrm{d}x}}{\ln \frac{n\pi}{2} - \ln \frac{\pi}{2}}=\lim_{x\rightarrow \infty} \frac{f^\prime(0) \int_0^x{\frac{\sin^2t}{t}\mathrm{d}t}}{\ln x - \ln \frac{\pi}{2}}=\frac{f^\prime(0)}{2}. 
\end{align}
利用\eqref{example4.62-1.3}\eqref{example4.62-1.9}式,对\eqref{example4.62-1.1}式两边同时令$n\to \infty$,可得
\begin{align*}
   \lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f\left( x \right)}{\sin ^2x}\sin ^2\left( nx \right) \mathrm{d}x}=\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f\left( x \right) -f'\left( 0 \right) x}{\sin ^2x}\sin ^2\left( nx \right) \mathrm{d}x}+\lim_{n\rightarrow \infty} \frac{1}{\ln n}\int_0^{\frac{\pi}{2}}{\frac{f'\left( 0 \right) x}{\sin ^2x}\sin ^2\left( nx \right) \mathrm{d}x}=\frac{f'\left( 0 \right)}{2}.
\end{align*}
\end{proof}


\chapter{函数性态分析}

\section{基本性态分析模型}

\begin{proposition}[多个函数取最值或者中间值]\label{proposition:多个函数取最值或者中间值}
设\(f,g,h\)是定义域上的连续函数，则
\((a)\)：\(\max\{f,g\}, \min\{f,g\}\)是定义域上的连续函数.
\((b)\)：\(\text{mid}\{f,g,h\}\)是定义域上的连续函数.
\end{proposition}
\begin{remark}
   这里\(\text{mid}\{f,g,h\}\)表示取中间值函数，显然这个命题可以推广到多个函数的情况.
\end{remark}
\begin{proof}
   只需要注意到
\begin{align*}
\max\{f,g\}&=\frac{f + g+\vert f - g\vert}{2},\\
\min\{f,g\}&=\frac{f + g-\vert f - g\vert}{2},\\
\text{mid}\{f,g,h\}&=f + g + h-\max\{f,g,h\}-\min\{f,g,h\}.
\end{align*}
\end{proof}

\begin{proposition}\label{proposition:连续函数无零点则一定恒大于零或恒小于零}
   若\(f\)是区间\(I\)上处处不为零的连续函数,则\(f\)在区间\(I\)上要么恒大于零,要么恒小于零.
\end{proposition}
\begin{proof}
   用反证法,若存在$x_1,x_2\in I$,使得$f(x_1)=f(x_2)=0$,则由零点存在定理可知,存在$\xi \in (\min{x_1,x_2},\max{x_1,x_2})$,使得$f(\xi)=0$矛盾.
\end{proof}

\begin{proposition}[导数有正增长率则函数爆炸]\label{proposition:导数有正增长率则函数爆炸}
   设\(f\)在\([a,+\infty)\)可微且\(\lim_{x\rightarrow +\infty}f'(x)=c > 0\)，证明
\[\lim_{x\rightarrow +\infty}f(x)=+\infty.\]
\end{proposition}
\begin{note}
   类似的还有趋于\(-\infty\)或者非极限形式的结果，读者应该准确理解含义并使得各种情况都能复现，我们引用本结论时未必就是本结论本身，而是其蕴含的思想.
\end{note}
\begin{proof}
   因为\(\lim_{x\rightarrow +\infty}f'(x)=c > 0\)，所以存在\(X > a\)，使得\(f'(x)>\frac{c}{2},\forall x\geqslant X\)。于是由Lagrange中值定理得到,对$\forall x\geqslant X$,存在$\theta \in (X,x)$,使得
\[f(x)=f(X)+f'(\theta)(x - X)\geqslant f(X)+\frac{c}{2}(x - X),\forall x\geqslant X.\]
让\(x\rightarrow +\infty\)就得到
\[\lim_{x\rightarrow +\infty}f(x)=+\infty.\]
\end{proof}

\begin{proposition}[函数不爆破则各阶导数必然有趋于 0 的子列]\label{proposition:函数不爆破则各阶导数必然有趋于 0 的子列}
   设\(k\in\mathbb{N},a\in\mathbb{R}\)且\(f\in D^{k}[a,+\infty)\)，若\(\lim_{x\rightarrow +\infty}|f(x)|\neq +\infty\)，那么存在趋于正无穷的\(\{x_n\}_{n = 1}^{\infty}\subset [a,+\infty)\)使得
\[
\lim_{n\rightarrow\infty}f^{(k)}(x_n)=0.
\]
\end{proposition}
\begin{note}
\begin{enumerate}[(1)]
   \item \hypertarget{proposition5.4由假设得到这个结论的原因}{存在\(X > 0\)使得\(f^{(k)}\)在\((X,+\infty)\)要么恒正，要么恒负的原因:}否则，对\(\forall X>0\)，存在\(x_1,x_2\in (X,+\infty)\)，使得\(f^{(k)}(x_1)>0\)，\(f^{(k)}(x_2)<0\)。从而由导数的介值性可知，存在\(\xi_X\in (x_1,x_2)\)，使得\(f^{(k)}(\xi_X) = 0\)。
   于是
   \begin{align*}
   &\text{令}X = 1\text{，则存在}y_1>1\text{，使得}f^{(k)}(y_1)=0;\\
   &\text{令}X=\max\{2,y_1\}\text{，则存在}y_2>\max\{2,y_1\}\text{，使得}f^{(k)}(y_2)=0;\\
   &\cdots\cdots\\
   &\text{令}X=\max\{n,y_{n - 1}\}\text{，则存在}y_n>\max\{n,y_{n - 1}\}\text{，使得}f^{(k)}(y_n)=0;\\
   &\cdots\cdots
   \end{align*}
   这样得到一个数列\(\{y_n\}_{n = 1}^{\infty}\)满足
   \[
   \lim_{n\rightarrow \infty}y_n=+\infty\text{且}f^{(k)}(y_n)=0,\forall n\in \mathbb{N}_+.
   \]
   这与假设矛盾!

   \item \hypertarget{m的存在性}{存在$m>0$,使得$f^{(k)}(x)\geqslant m>0,\forall x\geqslant X$的原因:}假设对\(\forall m>0\)，有\(m > f^{(k)}(x) > 0\)，\(\forall x\geqslant X\)。再令\(m\rightarrow 0^+\)，则由夹逼准则可得\(f^{(k)}(x) = 0\)，\(\forall x\geqslant X\)。这与假设矛盾!
   (也可以用下极限证明)
\end{enumerate}
\end{note}
\begin{proof}
   注意到若不存在\(\{x_n\}_{n = 1}^{\infty}\)使得\(\lim_{n\rightarrow\infty}f^{(k)}(x_n)=0\)成立那么将\hyperlink{proposition5.4由假设得到这个结论的原因}{存在\(X > 0\)使得\(f^{(k)}\)在\((X,+\infty)\)要么恒正，要么恒负(见笔记(1)).}如果找不到子列使得\(\lim_{n\rightarrow\infty}f^{(k)}(x_n)=0\)成立，那么不妨设存在\(X> 0\)使得
   \begin{align*}
      f^{(k)}(x)>0,\forall x\geqslant X.
   \end{align*}
从而\hyperlink{m的存在性}{一定存在$m>0$(见笔记(2))},使得
\begin{align}\label{proposition5.4-12.5}
   f^{(k)}(x)\geqslant m>0,\forall x\geqslant X.
\end{align}
则由Taylor中值定理,我们知道对每个\(x > X\)，运用\eqref{proposition5.4-12.5}，都有
\[f(x)=\sum_{j = 0}^{k - 1}\frac{f^{(j)}(X)}{j!}(x - X)^j+\frac{f^{(k)}(\theta)}{k!}(x - X)^k\geqslant\sum_{j = 0}^{k - 1}\frac{f^{(j)}(X)}{j!}(x - X)^j+\frac{m}{k!}(x - X)^k,\]
于是\(\lim_{x\rightarrow +\infty}f(x)=+\infty\)，这就是一个矛盾！因此我们证明了必有子列使得\(\lim_{n\rightarrow\infty}f^{(k)}(x_n)=0\)成立.
\end{proof}

\begin{theorem}[严格单调和导数的关系]\label{theorem:严格单调和导数的关系}
\begin{enumerate}
\item 设\(f\in C[a,b]\cap D(a,b)\)且\(f\)递增，则\(f\)在\([a,b]\)严格递增的充要条件是对任何\([x_1,x_2]\subset [a,b]\)都存在\(c\in(x_1,x_2)\)使得\(f'(c)>0\)。
   
\item 设\(f\in C[a,b]\cap D(a,b)\)且\(f\)递减，则\(f\)在\([a,b]\)严格递减的充要条件是对任何\([x_1,x_2]\subset [a,b]\)都存在\(c\in(x_1,x_2)\)使得\(f'(c)<0\)。
\end{enumerate}
\end{theorem}
\begin{proof}
若\(f\)在\([a,b]\)严格递增，则对任何\([x_1,x_2]\subset [a,b]\),由Lagrange中值定理可知,存在\(c\in(x_1,x_2)\),使得
   \[
   \frac{f(x_2)-f(x_1)}{x_2 - x_1}=f'(c)>0.
   \]
   反之对任何\([x_1,x_2]\subset [a,b]\)都存在\(c\in(x_1,x_2)\)使得\(f'(c)>0\)。
   任取\([s,t]\subset [a,b]\)，现在有\(c\in(s,t)\)使得\(f'(c)>0\)，则根据$f'\left( c \right) =\underset{h\rightarrow 0}{\lim}\frac{f\left( c+h \right) -f\left( c \right)}{h}=\underset{h\rightarrow 0}{\lim}\frac{f\left( c \right) -f\left( c-h \right)}{h}>0$,再结合$f$递增,可知存在充分小的\(h > 0\)使得
   \[
   f(s)\leqslant f(c - h)<f(c)<f(c + h)\leqslant f(t),
   \]
   这就证明了\(f\)严格递增。严格递减是类似的，我们完成了证明。
\end{proof}

\begin{theorem}[导数极限定理]\label{theorem:导数极限定理}
   设\(f\in C[a,b]\cap D^{1}(a,b]\)且\(\lim_{x\rightarrow a^{+}}f'(x)=c\)存在，证明\(f\)在\(a\)右可导且\(f_{+}'(a)=c\)。
\end{theorem}
\begin{remark}
   本结果当然也可对应写出左可导的版本以及可导的版本.
\end{remark}
\begin{note}
本结果告诉我们可在\(f\)连续的时候用\(f'\)的左右极限存在性来推\(f\)可导性.
\end{note}
\begin{proof}
   运用Lagrange中值定理，我们知道
\[\lim_{x\rightarrow a^{+}}\frac{f(x)-f(a)}{x - a}=\lim_{x\rightarrow a^{+}}f'(\theta(x))=c,\]
其中
\(\theta(x)\in(a,x),\lim_{x\rightarrow a^{+}}\theta(x)=a.\)
这就完成了这个定理的证明.
\end{proof}

\begin{example}[\,\,经典光滑函数]\label{example:经典光滑函数}
考虑
\[
f(x)=
\begin{cases}
e^{-\frac{1}{x^2}}, &|x|>0 \\
0, &|x| = 0
\end{cases}
\]
则\(f\in C^{\infty}(\mathbb{R})\)且\(f^{(n)}(0)=0,\forall n\in\mathbb{N}\)。
\end{example}
\begin{proof}
我们归纳证明，首先\(f\in C^{0}(\mathbb{R}) = C(\mathbb{R})\)，假定\(f\in C^{k}(\mathbb{R}),k\in\mathbb{N}\)。注意到存在多项式\(p_{k + 1}\in\mathbb{R}[x]\)，使得
\[
f^{(k + 1)}(x)=p_{k + 1}\left(\frac{1}{x}\right)e^{-\frac{1}{x^2}},\forall x\neq0.
\]
于是
\[
\lim_{x\rightarrow0}f^{(k + 1)}(x)=\lim_{x\rightarrow0}p_{k + 1}\left(\frac{1}{x}\right)e^{-\frac{1}{x^2}}=\lim_{x\rightarrow\infty}p_{k + 1}(x)e^{-x^2}=0,
\]
运用\hyperref[theorem:导数极限定理]{导数极限定理},我们知道\(f^{(k + 1)}(0)=0\)。由数学归纳法我们知道\(f^{(n)}(0)=0,\forall n\in\mathbb{N}\)，这就完成了证明。
\end{proof}

\begin{theorem}[连续函数中间值定理]\label{theorem:连续函数中间值定理}
设\(p_1,p_2,\cdots,p_n\geqslant0\)且\(\sum_{j = 1}^{n}p_j = 1\)。则对有介值性函数\(f:[a,b]\to\mathbb{R}\)和\(a\leqslant x_1\leqslant x_2\leqslant\cdots\leqslant x_n\leqslant b\)，必然存在\(\theta\in[x_1,x_n]\)，使得
\begin{align*}
   f(\theta)=\sum_{j = 1}^{n}p_jf(x_j).
\end{align*}
\end{theorem}
\begin{note}
   中间值可以通过介值定理取到是非常符合直观的。特别的当\(p_1 = p_2=\cdots=p_n=\frac{1}{n}\)，就是所谓的平均值定理
\[
f(\theta)=\frac{1}{n}\sum_{j = 1}^{n}f(x_j).
\]
\end{note}
\begin{proof}
   设
\[
M=\max_{1\leqslant i\leqslant n}f(x_i),m=\min_{1\leqslant i\leqslant n}f(x_i).
\]
于是
\[
m = m\sum_{j = 1}^{n}p_j\leqslant\sum_{j = 1}^{n}p_jf(x_j)\leqslant M\sum_{j = 1}^{n}p_j = M.
\]
因此由\(f\)的介值性知：必然存在\(\theta\in[x_1,x_n]\)，使得$f(\theta)=\sum_{j = 1}^{n}p_jf(x_j)$成立。
\end{proof}

\begin{proposition}[连续单射等价严格单调]\label{proposition:连续单射等价严格单调}
设\(f\)是区间\(I\)上的连续函数，证明\(f\)在\(I\)上严格单调的充要条件是\(f\)是单射。
\end{proposition}
\begin{proof}
必要性是显然的,只证充分性.如若不然,不妨考虑\(f(x_3)<f(x_1)<f(x_2),x_1<x_2<x_3\)(其他情况要么类似,要么平凡)，于是由连续函数介值定理知存在\(\theta\in[x_2,x_3]\)使得\(f(\theta)=f(x_1)\)，这就和\(f\)在\(I\)上单射矛盾！故\(f\)严格单调.
\end{proof}

\begin{example}
证明不存在\(\mathbb{R}\)上的连续函数\(f\)满足方程
\[
f(f(x)) = e^{-x}.
\]
\end{example}
\begin{note}
   注意积累二次复合的常用处理手法,即运用\hyperref[proposition:连续单射等价严格单调]{命题\ref{proposition:连续单射等价严格单调}}.
\end{note}
\begin{proof}
假设存在满足条件的函数$f$.设\(f(x)=f(y)\)，则
\[
e^{-x}=f(f(x)) = f(f(y)) = e^{-y}.
\]
由\(e^{-x}\)的严格单调性我们知\(x = y\)，于是\(f\)是单射。由\hyperref[proposition:连续单射等价严格单调]{命题\ref{proposition:连续单射等价严格单调}}知\(f\)严格单调。又递增和递增复合递增，递减和递减复合也递增，我们知道\(f(f(x)) = e^{-x}\)递增，这和\(e^{-x}\)严格递减矛盾！故这样的\(f\)不存在。
\end{proof}

\begin{example}
   求\(k\in\mathbb{R}\)的范围，使得存在\(f\in C(\mathbb{R})\)使得\(f(f(x)) = kx^{9}\)。
\end{example}
\begin{note}
   \hypertarget{取这个函数的原因}{\textbf{取$\boldsymbol{f}\mathbf{(}\boldsymbol{x}\mathbf{)}=\sqrt[\mathbf{4}]{\boldsymbol{k}}\boldsymbol{x}^{\mathbf{3}}$的原因:}}当\(k\geqslant0\)时,我们可待定\(f(x)=cx^{3}\)，需要\(c^{4}x^{9}=kx^{9}\),从而可取\(c = \sqrt[4]{k}\).
\end{note}
\begin{proof}
   当$k<0$时,假设存在满足条件的函数$f$.设\(f(x)=f(y)\)，则
   \[
      kx^{9}=f(f(x)) = f(f(y)) = ky^{9}.
   \]
   由\(kx^{9}\)的严格单调性我们知\(x = y\)，于是\(f\)是单射。由\hyperref[proposition:连续单射等价严格单调]{命题\ref{proposition:连续单射等价严格单调}}知\(f\)严格单调。又递增和递增复合递增，递减和递减复合也递增，我们知道\(f(f(x)) = kx^{9}\)递增，这和\(kx^{9}\)严格递减矛盾！故这样的\(f\)不存在。
   
   当\(k\geqslant0\)时,\hyperlink{取这个函数的原因}{取$f(x)=\sqrt[4]{k}x^3$},此时$f(x)$满足条件.
\end{proof}

\begin{proposition}[\([a,b]\)到\([a,b]\)的连续函数必有不动点]\label{proposition:[a,b]到[a,b]的连续函数必有不动点}
设\(f:[a,b]\to[a,b]\)是连续函数，证明\(f\)在\([a,b]\)上有不动点。
\end{proposition}
\begin{note}
 注意\([a,b]\to[a,b]\)表示\(f\)是从\([a,b]\to[a,b]\)的映射，右端的\([a,b]\)是像集而不是值域，\(f\)可能取不到整个\([a,b]\)。
\end{note}
\begin{proof}
   考虑\(g(x)=f(x)-x\in C[a,b]\)，注意到\(g(a)\geqslant0,g(b)\leqslant0\)，由连续函数的零点定理知道\(f\)在\([a,b]\)上有不动点。
\end{proof}

\begin{proposition}[没有极值点则严格单调]\label{proposition:没有极值点则严格单调}
设\(f\in C[a,b]\)且\(f\)在\((a,b)\)没有极值点，证明\(f\)在\([a,b]\)严格单调。
\end{proposition}
\begin{proof}
   因为闭区间上连续函数必然取得最值，且在\((a,b)\)的最值点必然是极值点，因此由假设我们不妨设\(f\)在\([a,b]\)端点取得最值。不失一般性假设
\[
f(a)=\min_{x\in[a,b]}f(x),f(b)=\max_{x\in[a,b]}f(x).
\]
此时若在\([a,b]\)上\(f\)严格单调,则只能是严格单调递增.
若在\([a,b]\)上\(f\)不严格递增，则存在\(x_2>x_1\)，使得\(f(x_2)\leqslant f(x_1)\)。

若\(x_1>a\)，在\([a,x_2]\)上我们注意到\(f(x_1)\geqslant\max\{f(a),f(x_2)\}\)，又由$f$的连续性可知,$f$一定能在$[a,x_2]$上取到最大值.于是\(f\)只能在\((a,x_2)\)达到最大值,从而$f$在\((a,x_2)\)存在极大值点,这和\(f\)在\((a,b)\)没有极值点矛盾！

若\(x_1 = a,x_2 < b\)，则注意到\(f(x_2)\leqslant\min\{f(a),f(b)\}\)，同样的\(f\)在\((a,b)\)取得极小值而矛盾。

若\(x_1 = a,x_2 = b\)，则\(f\)恒为常数而矛盾！这就完成了证明。
\end{proof}

\begin{proposition}[函数值相同的点导数值相同就一定单调]\label{proposition:函数值相同的点导数值相同就一定单调}
设\(f\in D(a,b)\)满足\(f(x_1)=f(x_2),x_1,x_2\in(a,b)\)，必有\(f'(x_1)=f'(x_2)\)，证明\(f\)在\((a,b)\)是单调函数。
\end{proposition}
\begin{note}
   \hypertarget{令
sigma=max{x in[c,xi]:f(x)=f(d)}的原因
}{\textbf{令
\(
   \boldsymbol{\sigma }=\mathbf{max}\left\{ \boldsymbol{x}\in \left[ \boldsymbol{c},\boldsymbol{\xi } \right] :\boldsymbol{f}\left( \boldsymbol{x} \right) =\boldsymbol{f}\left( \boldsymbol{d} \right) \right\}    
\)的原因:}}设$E=\{x\in[c,\xi]:f(x)=f(d)\}$.实际上,这里取$\sigma=\sup\{x\in[c,\xi]:f(x)=f(d)\}$也可以,效果类似.
\begin{enumerate}[(1)]
   \item \textbf{$\boldsymbol{\sigma }$的存在性证明:}由$f$的介值性知,存在$\eta\in (c,\xi)$,使得
\begin{align*}
   f(\xi)\leq f(\eta)=f(d)\leq f(c).
\end{align*}
从而$\eta \in E=\{x\in[c,\xi]:f(x)=f(d)\}$,故$E$非空.又由$E$的定义,显然$E$有界,故由确界存在定理可知,$E$存在上确界.于是令$\sigma=\sup\{x\in[c,\xi]:f(x)=f(d)\}\leq \in[c,\xi]$.下证$\sigma=\sup\{x\in[c,\xi]:f(x)=f(d)\}=\max\{x\in[c,\xi]:f(x)=f(d)\}$,即$\sigma\in E=\{x\in[c,\xi]:f(x)=f(d)\}$.

由上确界的性质可知,存在$\{x_n\}_{n=1}^\infty$满足$x_n \in E$且$\underset{n\rightarrow \infty}{\lim}x_n=\sigma $.从而$f(x_n)=f(d)$.于是由$f$的连续性可得
\begin{align*}
   \underset{n\rightarrow \infty}{\lim}f\left( x_n \right) =f\left( \underset{n\rightarrow \infty}{\lim}x_n \right) =f\left( \sigma \right) =f\left( d \right) .
\end{align*}
故$\sigma \in E$.这样就完成了证明.

   \item \textbf{取$\boldsymbol{\sigma }=\mathbf{max}\left\{ \boldsymbol{x}\in \left[ \boldsymbol{c},\boldsymbol{\xi } \right] :\boldsymbol{f}\left( \boldsymbol{x} \right) =\boldsymbol{f}\left( \boldsymbol{d} \right) \right\} $的原因:}当\(f(c)\geqslant f(d)\)时,$E=\{x\in[c,\xi]:f(x)=f(d)\}$中的其他点$a\in E$,可能有$f'\left( a \right) >0$,也可能有$f'\left( a \right) \leqslant 0$.而$\sigma$一定只满足$f'\left( \sigma \right) \leqslant 0$.
\end{enumerate}
\end{note}
\begin{proof}
若\(f\)不在\((a,b)\)是单调，则不妨设\(a < c < d < b\)，使得\(f'(c)<0<f'(d)\)。

由\(f'(d)=\lim_{x\rightarrow d^{-}}\frac{f(x)-f(d)}{x - d}>0\)知在\(d\)的左邻域内，\(f(x)<f(d)\)。由\(f'(c)=\lim_{x\rightarrow c^{+}}\frac{f(x)-f(c)}{x - c}<0\)知\(f\)在\(c\)的右邻域内有\(f(x)<f(c)\),于是$f(c),f(d)$不是$f$在$[c,d]$上的最小值,又由$f\in C[c,d]$可知$f$在$[c,d]$上一定存在最小值.故可以设\(f\)在\([c,d]\)最小值点为\(\xi\in(c,d)\)。

当\(f(c)\geqslant f(d)\)时,\hyperlink{令
sigma=max{x in[c,xi]:f(x)=f(d)}的原因
}{令
\[
\sigma=\max\{x\in[c,\xi]:f(x)=f(d)\}.
\]}
注意到\(\sigma<\xi\)。显然\(f'(\sigma)\leqslant0\)，因为如果\(f'(\sigma)>0\)会导致在\(\sigma\)右邻域内有大于\(f(d)\)的点，由介值定理可以找到\(\xi>\sigma'>\sigma\)，使得\(f(\sigma')=f(d)\)而和\(\sigma\)是最大值矛盾！而函数值相同的点导数值也相同，因此\(f'(\sigma)=f'(d)>0\)，这与\(f'(\sigma)\leqslant0\)矛盾！

当\(f(c)\leqslant f(d)\)时类似可得矛盾！我们完成了证明。
\end{proof}

\begin{proposition}[一个经典初等不等式]\label{proposition:一个经典初等不等式}
设\(a,b\geqslant0\)，证明：
\begin{align}\label{equation-12.777}
   \begin{cases}
a^p + b^p\leqslant(a + b)^p\leqslant2^{p - 1}(a^p + b^p),& p\geqslant1,p\leqslant0\\
a^p + b^p\geqslant(a + b)^p\geqslant2^{p - 1}(a^p + b^p),& 0 < p < 1
\end{cases}
\end{align}
\end{proposition}
\begin{note}
不等式左右是奇次对称的，我们可以设\(t = \frac{a}{b}\in[0,1]\)，于是\eqref{equation-12.777}两边同时除以$b^p$得
\[
\begin{cases}
t^p + 1\leqslant(t + 1)^p\leqslant2^{p - 1}(t^p + 1),& p\geqslant1,p\leqslant0\\
t^p + 1\geqslant(t + 1)^p\geqslant2^{p - 1}(t^p + 1),& 0 < p < 1
\end{cases}.
\]
\end{note}
\begin{proof}
考虑\(f(t)\triangleq\frac{(t + 1)^p}{1 + t^p},t\in[0,1]\)，我们有
\[
f'(t)=p(t + 1)^{p - 1}\frac{1 - t^{p - 1}}{(1 + t^p)^2}
\begin{cases}
\geqslant0,& p\geqslant1,p\leqslant0\\
<0,& 0 < p < 1
\end{cases}
\]
于是
\[
\begin{cases}
2^{p - 1}=f(1)\geqslant f(t)\geqslant f(0)=1,& p\geqslant1,p\leqslant0\\
2^{p - 1}=f(1)\leqslant f(t)\leqslant f(0)=1,& 0 < p < 1
\end{cases}
\]
这就完成了证明.
\end{proof}










\section{一致连续}

\begin{theorem}[Cantor定理]\label{theorem:Cantor定理}
   \(f\in C(a,b)\) 一致连续的充要条件是 \(\lim_{x\rightarrow a^{+}}f(x)\)，\(\lim_{x\rightarrow b^{-}}f(x)\) 存在.
\end{theorem}
\begin{remark}
   这个定理对$f\in C(a,b]$和$f\in C[a,b)$也成立.
\end{remark}

\begin{corollary}\label{corollary:闭区间上的连续函数一定一致连续.}
  若$f\in C[a,b]$,则$f$在$[a,b]$上一致连续.
\end{corollary}

\begin{proposition}\label{proposition一致连续的充分不必要条件}
   设\(f\in C[0,+\infty)\)且\(\lim_{x\rightarrow +\infty}f(x)\)存在。证明:\(f\)在\([0,+\infty)\)一致连续。
\end{proposition}
\begin{remark}
   这个命题反过来并不成立,反例:$f(x)=\sqrt{x}$.因此这个条件只是函数一致连续的充分不必要条件.
\end{remark}
\begin{proof}
   \(\forall \varepsilon > 0\)，由Cauchy收敛准则可知，存在\(A > 0\)，对\(\forall x_1, x_2 \geqslant A\)，有
\begin{align}
  \left| f(x_2) - f(x_1) \right| < \varepsilon.  \label{equation5.1-1.1}
\end{align}
由Cantor定理可知，\(f\)在\([0, A + 1]\)上一致连续。故存在\(\delta \in (0, 1)\)，使得\(\forall x_1, x_2 \in [0, A + 1]\)且\(\left| x_2 - x_1 \right| \leqslant \delta\)，有
\begin{align}
   \left| f(x_2) - f(x_1) \right| < \varepsilon.\label{equation5.1-1.2}
\end{align}
现在对\(\forall \left| x_1 - x_2 \right| \leqslant \delta < 1\)，必然有\(x_1, x_2 \in [0, A + 1]\)或\(x_1, x_2 \in [A, +\infty)\)，从而由\eqref{equation5.1-1.1}\eqref{equation5.1-1.2}式可知，此时一定有
\[
\left| f(x_2) - f(x_1) \right| < \varepsilon.
\]
故\(f\)在\([0, +\infty)\)上一致连续。
\end{proof}

\begin{proposition}\label{proposition:连续函数在无穷远处与一致连续极限相同则一定也一致连续}
   设\(f\)在\([0,+\infty)\)一致连续且\(g\in C[0,+\infty)\)满足
\[
\lim_{x\rightarrow +\infty}[f(x)-g(x)] = 0.
\]
证明:\(g\)在\([0,+\infty)\)一致连续。
\end{proposition}
\begin{proof}
   \(\forall \varepsilon > 0\)，由\(f\)一致连续可知，存在\(\delta \in (0, 1)\)，使得对\(\forall x, y \in [0, +\infty)\)且\(\vert x - y \vert \leq \delta\)，有
\begin{align}\label{proposition-equation5.2-1.1}
  \vert f(x) - f(y) \vert < \frac{\varepsilon}{3}. 
\end{align}
由\(\lim_{x \to +\infty}[f(x) - g(x)] = 0\)可知，存在\(A > 0\)，使得对\(\forall x \geq A\)，有
\begin{align}\label{proposition-equation5.2-1.2}
  \vert f(x) - g(x) \vert < \frac{\varepsilon}{3}.  
\end{align}
由Cantor定理可知，\(g\)在\([0, A + 1]\)上一致连续。故存在\(\eta \in (0, 1)\)，使得对\(\forall x, y \in [0, A + 1]\)且\(\vert x - y \vert \leq \eta\)，有
\begin{align}\label{proposition-equation5.2-1.3}
  \vert g(x) - g(y) \vert < \frac{\varepsilon}{3}. 
\end{align}
故对\(\forall x, y \geq 0\)且\(\vert x - y \vert \leq \eta\)，要么都落在\([0, A + 1]\)，要么都落在\([A, +\infty)\)。
\begin{enumerate}[(i)]
    \item 若\(x, y \in [0, A + 1]\)，则由\eqref{proposition-equation5.2-1.3}式可得\(\vert g(x) - g(y) \vert < \frac{\varepsilon}{3}\);
    \item 若\(x, y \in [A, +\infty)\)，则由\eqref{proposition-equation5.2-1.1}\eqref{proposition-equation5.2-1.2}式可得
\[
\vert g(x) - g(y) \vert \leq \vert g(x) - f(x) \vert + \vert f(x) - f(y) \vert + \vert f(y) - g(y) \vert < \frac{\varepsilon}{3} + \frac{\varepsilon}{3} + \frac{\varepsilon}{3} = \varepsilon.
\]
\end{enumerate}
故\(g\)在\([0, +\infty)\)上一致连续。
\end{proof}


\begin{theorem}\label{theorem:一致连续的充要条件1}
\(f\) 在区间 \(I\) 一致连续的充要条件是对任何 \(\{x_n'\}_{n = 1}^{\infty}\)，\(\{x_n''\}_{n = 1}^{\infty}\subset I\) 且 \(\lim_{n\rightarrow\infty}(x_n'' - x_n') = 0\) 都有 \(\lim_{n\rightarrow\infty}(f(x_n'') - f(x_n'))=0\).
\end{theorem}


\begin{proposition}\label{proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系}
   设 \(f\) 定义在区间 \(I\) 的函数. 证明 \(f\) 在区间 \(I\) 一致连续的充要条件是对任何 \(\varepsilon>0\)，存在 \(M > 0\)，使得对任何 \(x_1,x_2\in I\)，都有
   \[|f(x_2)-f(x_1)|\leq M|x_1 - x_2|+\varepsilon. \]
\end{proposition}
\begin{remark}
   这个命题相当重要!但是考试中不能直接使用,需要证明.
\end{remark}
\begin{proof}
   {\heiti 充分性:} 由条件可知，\(\forall \varepsilon >0\)，\(\exists M>0\)，取\(\delta =\frac{\varepsilon}{M}\)，则当\(\vert x_2 - x_1\vert\leqslant \delta\)且$x_1,x_2\in I$时，有
\begin{align*}
\vert f(x_1) - f(x_2)\vert \leqslant M\vert x_1 - x_2\vert+\varepsilon
\leqslant M\cdot\frac{\varepsilon}{M}+\varepsilon
= 2\varepsilon.
\end{align*}
故\(f\)在\(I\)上一致连续. 

{\heiti 必要性:}由\(f\)在\(I\)上一致连续可知，\(\forall \varepsilon >0\)，存在\(\delta >0\)，使得对\(\forall x_1,x_2\in I\)且\(\vert x_1 - x_2\vert\leqslant \delta\)，有
\begin{align}
   \vert f(x_1) - f(x_2)\vert<\varepsilon. \label{proposition5.1-1.1}
\end{align}
因此任取\(x,y\in I\)，{\large \ding{192}}当\(\vert x - y\vert\leqslant \delta\)时，由\eqref{proposition5.1-1.1}式可知
\(
\vert f(x) - f(y)\vert<\varepsilon \leqslant M\vert x - y\vert+\varepsilon.
\)
由\(x,y\)的任意性可知结论成立.

{\large \ding{193}}当\(\vert x - y\vert>\delta\)时，\((\mathrm{i})\)当\(\vert f(x) - f(y)\vert\leqslant \varepsilon\)时，此时结论显然成立；

\((\mathrm{ii})\)当\(\vert f(x) - f(y)\vert>\varepsilon\)时，不妨设\(y > x\)，\(f(y) > f(x)\)(其它情况类似),
\hyperlink{k,t的存在性}{令\(f(y) - f(x) = kt\)，其中\(k\in \mathbb{N}\),\(t\in (\varepsilon,2\varepsilon]\).}由介值定理可知，存在\(x = x_0<x_1<\cdots <x_k = y\)，使得
\[
f(x) \leqslant f(x_j) = f(x) + jt\leqslant f(x) + kt = f(y), j = 0,1,2,\cdots,k.
\]
于是
\[
f(x_j) - f(x_{j - 1}) = t>\varepsilon, j = 1,2,\cdots,k.
\]
此时由\eqref{proposition5.1-1.1}式可知\(x_j - x_{j - 1}>\delta\)，\(j = 1,2,\cdots,k\)。从而我们有
\begin{align}
 y - x=\sum_{j = 1}^k{(x_j - x_{j - 1})}>k\delta \Rightarrow k<\frac{y - x}{\delta}. \label{proposition5.1-1.2}  
\end{align}
取\(M = \frac{2\varepsilon}{\delta}>0\)，于是结合\eqref{proposition5.1-1.2}式及\(t\in (\varepsilon,2\varepsilon]\)就有
\[
\vert f(y) - f(x)\vert=kt\leqslant \frac{t}{\delta}\vert y - x\vert\leqslant \frac{2\varepsilon}{\delta}\vert y - x\vert=M\vert y - x\vert.
\]
再由\(x,y\)的任意性可知结论成立.
\end{proof}
\begin{remark}
   \hypertarget{k,t的存在性}{这里\(k,t\)的存在性可以如此得到:}考虑\((\varepsilon,+\infty)=\bigcup_{k\in \mathbb{N}}{(k\varepsilon,2k\varepsilon]}\)即可，又因为\((k + 1)\varepsilon\leqslant 2k\varepsilon\)，所以相邻的\((k\varepsilon,2k\varepsilon]\)一定相交。
于是一定存在\(k\in \mathbb{N}\)，使得\(f(y) - f(x)\in (k\varepsilon,2k\varepsilon]\)，从而\(\frac{f(y) - f(x)}{k}\in (\varepsilon,2\varepsilon]\)。故取\(t = \frac{f(y) - f(x)}{k}\in (\varepsilon,2\varepsilon]\)。此时就有\(f(y) - f(x) = kt\)。 
\end{remark}

\begin{corollary}[一致连续函数被线性函数控制]\label{corollary:一致连续函数被线性函数控制}
若\(f\)在\(\mathbb{R}\)一致连续且\(f(0)=0\)，证明存在\(M>0\)使得
\[
|f(x)|\leqslant1 + M|x|,\forall x\in\mathbb{R}.
\]
\end{corollary}
\begin{note}
   读者应该积累大概的感觉：一致连续函数的增长速度不超过线性函数，这能帮助我们快速排除一些非一致连续函数。
\end{note}
\begin{proof}
   取\hyperref[proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系]{命题\ref{proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系}}中的$\varepsilon=1,x_1=x\in \mathbb{R},x_2=0$,则一定存在$M>0$,使得\(
|f(x)|\leqslant1 + M|x|,\forall x\in\mathbb{R}\).
\end{proof}

\begin{corollary}\label{corollary:一致连续函数被线性函数控制1}
   若\(f\)在$I$上一致连续,则存在\(M,c>0\)使得
\[
|f(x)|\leqslant c + M|x|,\forall x\in I.
\]
\end{corollary}

\begin{corollary}[一致连续函数的阶的提升]\label{corollary:一致连续函数的阶的提升}
若\(f\)在\([1,+\infty)\)一致连续，证明存在\(M > 0\)使得
\[
\left|\frac{f(x)}{x}\right|\leqslant M,\forall x\geqslant1.
\]
\end{corollary}
\begin{proof}
   取\hyperref[proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系]{命题\ref{proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系}}中的$\varepsilon=1,x_1=x\geqslant 1,x_2=1$,则一定存在$C>0$,使得
   \begin{align*}
     |f(x)-f\left( 1 \right) |\leqslant C|x-1|+1,\forall x\geqslant 1.
   \end{align*}
   于是
   \begin{align*}
      \left| \frac{f\left( x \right)}{x} \right|\leqslant \left| \frac{f\left( x \right) -f\left( 1 \right)}{x} \right|+\frac{\left| f\left( 1 \right) \right|}{x}\leqslant \frac{C\left| x-1 \right|+1}{x}+\left| f\left( 1 \right) \right|,\forall x\geqslant 1.
   \end{align*}
   上式两边同时令$x\to +\infty$,得到
   \begin{align*}
      \underset{x\rightarrow +\infty}{\overline{\lim }}\left| \frac{f\left( x \right)}{x} \right|\leqslant C.
   \end{align*}
   由上极限的定义可知,存在$X>1$,使得$\underset{x\geqslant X}{\mathrm{sup}}\left| \frac{f\left( x \right)}{x} \right|\leqslant C$.从而我们有
   \begin{align}\label{equation-586165}
      \left| \frac{f\left( x \right)}{x} \right|\leqslant C,\forall x>X.
   \end{align}
   又因为$f$在$[1,+\infty)$上一致连续,所以由Cantor定理可知$f$在$[1,X]$上连续,从而$f$在$[1,X]$上有界,即存在$C'>0$,使得
   \begin{align}\label{equation-586164}
      \left| \frac{f\left( x \right)}{x} \right|\leqslant C',\forall x\in [1,X].
   \end{align}
   于是取$M=\max\{C,C'\}$,则由\eqref{equation-586165}\eqref{equation-586164}式可知
   \begin{align*}
      \left|\frac{f(x)}{x}\right|\leqslant M,\forall x\geqslant1.
   \end{align*}
\end{proof}

\begin{proposition}\label{proposition:一致连续的充要条件-分式形式}
   证明区间\(I\)上的函数\(f\)一致连续的充要条件是对任何\(\varepsilon > 0\)，存在\(\ell > 0\)，使得当\(x_1\neq x_2\in I\)，就有：
\[
\left|\frac{f(x_2)-f(x_1)}{x_2 - x_1}\right|>\ell\Rightarrow|f(x_2)-f(x_1)|<\varepsilon.
\]
\end{proposition}
\begin{proof}
   {\heiti 必要性:}由\hyperref[proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系]{命题\ref{proposition:一致连续的充要条件-一致连续与Lipschitz连续的关系}}可知,
$\forall \varepsilon>0,\exists M > 0$,使得
\[
|f(x)-f(y)|\leq M|x - y|+\varepsilon,\forall x,y\in I.
\]
取\(\ell=\frac{\varepsilon}{\delta}+M\)，任取\(x_1\neq x_2\in I\)，当\(\left|\frac{f(x_2)-f(x_1)}{x_2 - x_1}\right|>\ell\)时，我们有
\[
\ell<\left|\frac{f(x_2)-f(x_1)}{x_2 - x_1}\right|\leq\frac{M|x_2 - x_1|}{|x_2 - x_1|}+\frac{\varepsilon}{|x_2 - x_1|}=M+\frac{\varepsilon}{|x_2 - x_1|}.
\]
从而
\begin{align}
 |x_2 - x_1|<\frac{\varepsilon}{\ell - M}=\delta.  \label{proposition5.2-1.1}
\end{align}
又由\(f\)在\(I\)上一致连续可知
\begin{align}
  |f(x') - f(x'')|<\varepsilon,\forall x',x''\in I\text{且}|x' - x''|<\delta. \label{proposition5.2-1.2} 
\end{align}
因此结合\eqref{proposition5.2-1.1}\eqref{proposition5.2-1.2}式可得\(|f(x_2)-f(x_1)|<\varepsilon\)。故必要性得证.

   {\heiti 充分性:}已知对\(\forall \varepsilon >0\)，存在\(\ell >0\)，使得\(\forall x_1\neq x_2\in I\)，有
   \begin{align}
     \left|\frac{f(x_2) - f(x_1)}{x_2 - x_1}\right|>\ell\Rightarrow|f(x_2) - f(x_1)|<\varepsilon. \label{proposition-5.2-1.1}
   \end{align}
   取\(\delta \in \left(0,\frac{\varepsilon}{\ell}\right)\)，若\(|f(x_2) - f(x_1)|\geqslant \varepsilon\)但\(|x_2 - x_1|\leqslant \delta\)，则我们有
   \[
   \left|\frac{f(x_2) - f(x_1)}{x_2 - x_1}\right|\geqslant \frac{\varepsilon}{\delta}>\ell.
   \]
   而由\eqref{proposition-5.2-1.1}式可得，此时\(|f(x_2) - f(x_1)|<\varepsilon\)。矛盾! 故\(f\)在\(I\)上一致连续。 
\end{proof}

\begin{proposition}[一致连续函数的拼接]\label{proposition:一致连续函数的拼接}
设\(f\in C[0,+\infty)\)，若存在\(\delta>0\)使得\(f\)在\([\delta,+\infty)\)一致连续，则\(f\)在\([0,+\infty)\)一致连续。
\end{proposition}
\begin{note}
   证明的想法比结论本身重要，在和本命题叙述形式不同的时候需要快速准确判断出来\(f\)在\([0,+\infty)\)一致连续.
\end{note}
\begin{proof}
   \(\forall \varepsilon >0\)，由Cantor定理可知，\(f\)在\([0,\delta + 1]\)上一致连续。故存在\(\eta \in (0,1)\)，使得\(\forall x,y\in [0,\delta + 1]\)且\(\vert x - y\vert\leqslant \eta\)，都有
\begin{align}
   \vert f(x) - f(y)\vert<\varepsilon.\label{proposition5.3-1.1}
\end{align}
由\(f\)在\([\delta, +\infty)\)上一致连续可知，对\(\forall x,y\in [\delta, +\infty)\)且\(\vert x - y\vert\leqslant \eta\)，都有
\begin{align}
  \vert f(x) - f(y)\vert<\varepsilon. \quad \label{proposition5.3-1.2} 
\end{align}
现在对\(\forall x,y\in [0, +\infty)\)，都有\(\vert x - y\vert\leqslant \eta\)。
\begin{enumerate}[(i)]
    \item 若\(x,y\in [0,\delta + 1]\)或\([\delta, +\infty)\)，则由\eqref{proposition5.3-1.1}\eqref{proposition5.3-1.2}式可直接得到\(\vert f(x) - f(y)\vert<\varepsilon\);

    \item 若\(x\in [0,\delta + 1]\)，\(y\in [\delta, +\infty)\)，则\(\vert x - y\vert\geqslant 1>\eta\)，这是不可能的。
\end{enumerate}
故原命题得证。
\end{proof}

\begin{example}
   设\(f\)在\([1,+\infty)\)一致连续。证明:\(\frac{f(x)}{x}\)也在\([1,+\infty)\)一致连续。
\end{example}
\begin{proof}
   由\(f\)在\([1, +\infty)\)上一致连续可知，\(\forall \varepsilon > 0\)，存在\(\delta > 0\)，使得对\(\forall x, y \geqslant 1\)且\(\vert x - y \vert \leqslant \delta\)，有
   \begin{align}\label{example5.1-1.1}
     \vert f(x) - f(y) \vert < \frac{\varepsilon}{2}. 
   \end{align}
   由\hyperref[corollary:一致连续函数的阶的提升]{推论\ref{corollary:一致连续函数的阶的提升}}可知,$\left| \frac{f\left( x \right)}{x} \right|$有界.故可设$M\triangleq \underset{x\geqslant 1}{\mathrm{sup}}\left| \frac{f\left( x \right)}{x} \right|<+\infty$.取\(\delta' = \min \left\{ \delta, \frac{\varepsilon}{2M} \right\}\)，则对\(\forall x, y \geqslant 1\)且\(\vert x - y \vert \leqslant \delta'\)，由\eqref{example5.1-1.1}式可得
   \begin{align*}
      \left| \frac{f\left( x \right)}{x}-\frac{f\left( y \right)}{y} \right|&=\frac{\left| yf\left( x \right) -xf\left( y \right) \right|}{xy}\leqslant \frac{\left| yf\left( x \right) -yf\left( y \right) \right|+\left| y-x \right|\left| f\left( y \right) \right|}{xy}
      \\
      &=\frac{\left| f\left( x \right) -f\left( y \right) \right|}{x}+\frac{\left| y-x \right|}{xy}\left| f\left( y \right) \right|\leqslant \left| f\left( x \right) -f\left( y \right) \right|+M\left| y-x \right|
      \\
      &<\frac{\varepsilon}{2}+M\cdot \frac{\varepsilon}{2M}=\varepsilon .
   \end{align*}
   故\(\frac{f(x)}{x}\)也在\([1,+\infty)\)一致连续.
\end{proof}

\begin{proposition}[函数爆炸一定不一致连续]\label{proposition:函数爆炸一定不一致连续}
   设\(f\)在\([a,+\infty)\)可微且\(\lim_{x\rightarrow +\infty}f^{\prime}(x)= +\infty\)，证明:\(f\)在\([a,+\infty)\)不一致连续.
\end{proposition}
\begin{proof}
   {\color{blue}证法一:}假设$f$在$\left[ a,+\infty \right) $上一致连续,则由\hyperref[corollary:一致连续函数被线性函数控制1]{推论\ref{corollary:一致连续函数被线性函数控制1}}可知,存在$c,d>0$,使得
   \begin{align}
      \left| f\left( x \right) \right|\leqslant c\left| x \right|+d,\forall x\in \left[ a,+\infty \right) .\label{example5.2-1..1}
   \end{align}
   从而
   \begin{align}\label{example5.2-1..2}
      \underset{x\rightarrow +\infty}{\underline{\lim }}\left| \frac{f\left( x \right)}{x} \right|\leqslant \underset{x\rightarrow +\infty}{\overline{\lim }}\left| \frac{f\left( x \right)}{x} \right|<+\infty .
   \end{align}
   由\hyperref[theorem:上下极限L'Hospital法则]{上下极限L'Hospital法则}可得
   \begin{align*}
      \underset{x\rightarrow +\infty}{\underline{\lim }}\frac{f\left( x \right)}{x}\geqslant \underset{x\rightarrow +\infty}{\underline{\lim }}f\prime\left( x \right) =+\infty .
   \end{align*}
这与\eqref{example5.2-1..2}式矛盾.故\(f\)在\([a,+\infty)\)不一致连续.

{\color{blue}证法二:}假设$f$在$\left[ a,+\infty \right) $上一致连续,则由\hyperref[corollary:一致连续函数被线性函数控制1]{推论\ref{corollary:一致连续函数被线性函数控制1}}可知,存在$c,d>0$,使得
\begin{align}
   \left| f\left( x \right) \right|\leqslant c\left| x \right|+d,\forall x\in \left[ a,+\infty \right) .\label{example5.2-0..1}
\end{align}
由\(\lim_{x\rightarrow +\infty}f^\prime(x) = +\infty\)可知，存在\(X > 0\)，使得对\(\forall x\geqslant X\)，有
\[
f^\prime(x) \geqslant c + 1 \Leftrightarrow f^\prime(x) - c + 1 \geqslant 0.
\]
从而\(f(x) - (c + 1)x\)在\([X, +\infty)\)上单调递增，于是就有
\[
f(x) - (c + 1)x \geqslant f(X) - (c + 1)X \triangleq D, \forall x\geqslant X.
\]
故\(f(x) \geqslant (c + 1)x + D, \forall x\geqslant X\)。再结合\eqref{example5.2-0..1}式可得
\[
(c + 1)x + D \leqslant f(x) \leqslant cx + d, \forall x\geqslant X > 0.
\]
即\(x \leqslant d - D, \forall x\geqslant X > 0\)。令\(x\rightarrow +\infty\)，则
\[
+\infty = \lim_{x\rightarrow +\infty}x \leqslant d - D.
\]
矛盾。故\(f\)在\([a,+\infty)\)不一致连续.
\end{proof}


\begin{example}
   判断下述函数的一致连续性：
\begin{enumerate}[(1)]
    \item \( f(x) = \ln x, \quad x \in (0, 1]; \)
    
    \item \( f(x) = e^x \cos \frac{1}{x}, \quad x \in (0, 1]; \)
    
    \item \( f(x) = \frac{\sin x}{x}, \quad x \in (0, +\infty); \)
    
    \item \( f(x) = \sin^2 x, \quad x \in \mathbb{R}; \)
    
    \item \( f(x) = e^x, \quad x \in \mathbb{R}; \)
    
    \item \( f(x) = \sin x^2, \quad x \in [0, +\infty); \)
    
    \item \( f(x) = \sin (x \sin x), \quad x \in [0, +\infty); \)
    
    \item \( f(x) = x \cos x, \quad x \in [0, +\infty); \)
    
    \item 设 \( a > 0, \quad f(x) = \frac{x+2}{x+1} \sin \frac{1}{x}, \quad x \in (0, a) \) 和 \( x \in (a, +\infty); \)
\end{enumerate}
\end{example}
\begin{note}
   关于三角函数找数列的问题,一般$\sin,\cos$函数就多凑一个$2n\pi$或$2n\pi+\frac{\pi}{2}$.
\end{note}
\begin{remark}
   \hypertarget{找这两个数列的方法}{\textbf{\ref{example5.5(6)}中找这两个数列$\boldsymbol{x}_{\boldsymbol{n}}^{\prime}=\sqrt{\mathbf{2}\boldsymbol{n\pi }},\boldsymbol{x}_{\boldsymbol{n}}^{\prime\prime}=\sqrt{\mathbf{2}\boldsymbol{n\pi }}+\frac{\mathbf{1}}{\sqrt{\boldsymbol{n}}}$的方式:}}待定 $c_n$，令 $x_{n}^{\prime} = \sqrt{2n\pi}$，$x_{n}^{\prime\prime} = \sqrt{2n\pi} + c_n$，我们希望
   \[
   \lim_{n \rightarrow \infty} \left( x_{n}^{\prime\prime} - x_{n}^{\prime} \right) = \lim_{n \rightarrow \infty} c_n = 0,
   \]
   并且
   \[
   \lim_{n \rightarrow \infty} \left[ f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) \right] = \lim_{n \rightarrow \infty} \sin \left( 2n\pi + c_{n}^{2} + 2c_n \sqrt{2n\pi} \right) = \lim_{n \rightarrow \infty} \sin \left( c_{n}^{2} + 2c_n \sqrt{2n\pi} \right) \ne 0.
   \]
   再结合 $\lim_{n \rightarrow \infty} c_n = 0$ 可得
   \[
   \lim_{n \rightarrow \infty} \sin \left( c_{n}^{2} + 2c_n \sqrt{2n\pi} \right) = \lim_{n \rightarrow \infty} \left( \sin c_{n}^{2} \cos 2c_n \sqrt{2n\pi} + \cos c_{n}^{2} \sin 2c_n \sqrt{2n\pi} \right) = \lim_{n \rightarrow \infty} \sin 2c_n \sqrt{2n\pi}.
   \]
   故我们希望 $\lim_{n \rightarrow \infty} c_n = 0$ 且 $\lim_{n \rightarrow \infty} \sin 2c_n \sqrt{2n\pi} \ne 0$。从而令 $c_n = \frac{1}{\sqrt{n}}$ 即可.

   (7)(8)找数列的方式与(6)类似.
\end{remark}
\begin{solution}
\begin{enumerate}[(1)]
   \item 不一致连续.由$\underset{x\rightarrow 0^+}{\lim}\ln x=+\infty $及\hyperref[theorem:Cantor定理]{Cantor定理}可得.

   \item 不一致连续.由$\underset{x\rightarrow 0^+}{\lim}e^x\cos \frac{1}{x}$不存在及\hyperref[theorem:Cantor定理]{Cantor定理}可得.

   \item 一致连续.由 $\lim_{x \rightarrow 0^+} f(1)$ 存在(连续性),$\lim_{x \rightarrow 0^+} \frac{\sin x}{x} = 1$ 及 \hyperref[theorem:Cantor定理]{Cantor定理}可知，$f$ 在 $(0, 1]$ 上一致连续。又因为 $\lim_{x \rightarrow +\infty} \frac{\sin x}{x} = 0$，所以由\hyperref[proposition一致连续的充分不必要条件]{命题\ref{proposition一致连续的充分不必要条件}}可知，$f$ 在 $[1, +\infty)$ 上一致连续。再根据\hyperref[proposition:一致连续函数的拼接]{一致连续函数的拼接}可知，$f$ 在 $(0, +\infty)$ 上一致连续.

   \item 一致连续.由$(\sin^2 x)'=2\sin x \cos x\leq 2$及由Lagrange中值定理,易知$f(x)$是Lipschitz连续的,从而一致连续.

   \item 不一致连续.由$\underset{x\rightarrow +\infty}{\lim}e^x=+\infty $及\hyperref[proposition:函数爆炸一定不一致连续]{命题\ref{proposition:函数爆炸一定不一致连续}}可得.

   \item\label{example5.5(6)} 不一致连续.\hyperlink{找这两个数列的方法}{令 $x_{n}^{\prime} = \sqrt{2n\pi}$,$x_{n}^{\prime\prime} = \sqrt{2n\pi} + \frac{1}{\sqrt{n}}$}，则
   \(
   \lim_{n \rightarrow \infty} \left( x_{n}^{\prime} - x_{n}^{\prime\prime} \right) = 0.
   \)
   但是
   \begin{align*}
      \lim_{n \rightarrow \infty} \left( f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) \right) &= \lim_{n \rightarrow \infty} \sin \left( 2n\pi + \frac{1}{n} + 2\sqrt{2\pi} \right) = \lim_{n \rightarrow \infty} \sin \left( \frac{1}{n} + 2\sqrt{2\pi} \right)
      \\
      &= \lim_{n \rightarrow \infty} \left[ \sin 2\sqrt{2\pi} \cos \frac{1}{n} + \cos 2\sqrt{2\pi} \sin \frac{1}{n} \right] = \sin 2\sqrt{2\pi} \ne 0.
   \end{align*}
   故根据\hyperref[theorem:一致连续的充要条件1]{定理\ref{theorem:一致连续的充要条件1}}可知$f$不一致连续.

   \item 不一致连续.\hyperlink{找这两个数列的方法}{令 $x_{n}^{\prime} = 2n\pi$，$x_{n}^{\prime\prime} = 2n\pi + \frac{\pi}{2n}$}，则
   \[
   \lim_{n \rightarrow \infty} \left( x_{n}^{\prime} - x_{n}^{\prime\prime} \right) = 0.
   \]
   但是
   \begin{align*}
      \underset{n\rightarrow \infty}{\lim}\left( f\left( x_{n}^{''} \right) -f\left( x_{n}^{\prime} \right) \right) &=\underset{n\rightarrow \infty}{\lim}\sin \left[ \left( 2n\pi +\frac{\pi}{2n} \right) \sin \left( 2n\pi +\frac{\pi}{2n} \right) \right] =\underset{n\rightarrow \infty}{\lim}\sin \left[ \left( 2n\pi +\frac{\pi}{2n} \right) \sin \frac{\pi}{2n} \right] 
      \\
      &=\underset{n\rightarrow \infty}{\lim}\sin \left[ \left( 2n\pi +\frac{\pi}{2n} \right) \sin \frac{\pi}{2n} \right] =\underset{n\rightarrow \infty}{\lim}\sin \left[ \left( 2n\pi +\frac{\pi}{2n} \right) \left( \frac{\pi}{2n}+o\left( \frac{1}{n} \right) \right) \right] 
      \\
      &=\underset{n\rightarrow \infty}{\lim}\sin \left[ \pi ^2+o\left( \frac{1}{n^2} \right) \right] =\underset{n\rightarrow \infty}{\lim}\left[ \sin \pi ^2x\cos o\left( \frac{1}{n^2} \right) +\cos \pi ^2\sin o\left( \frac{1}{n^2} \right) \right] 
      \\
      &=\sin \pi ^2\ne 0.
   \end{align*}
   故根据\hyperref[theorem:一致连续的充要条件1]{定理\ref{theorem:一致连续的充要条件1}}可知$f$不一致连续.

   \item 不一致连续.\hyperlink{找这两个数列的方法}{令 $x_{n}^{\prime} = 2n\pi + \frac{\pi}{2}$，$x_{n}^{\prime\prime} = 2n\pi + \frac{\pi}{2} + \frac{1}{n}$}，则
   \[
   \lim_{n \rightarrow \infty} \left( x_{n}^{\prime} - x_{n}^{\prime\prime} \right) = 0.
   \]
   但是
   \begin{align*}
   \lim_{n \rightarrow \infty} \left( f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) \right) = \lim_{n \rightarrow \infty} \left( 2n\pi + \frac{\pi}{2} + \frac{1}{n} \right) \cos \left( 2n\pi + \frac{\pi}{2} + \frac{1}{n} \right) 
   = -\lim_{n \rightarrow \infty} \left( 2n\pi + \frac{\pi}{2} + \frac{1}{n} \right) \sin \frac{1}{n} 
   = -2\pi.
   \end{align*}
   故根据\hyperref[theorem:一致连续的充要条件1]{定理\ref{theorem:一致连续的充要条件1}}可知$f$不一致连续.

   \item 在$(0,a)$上不一致连续,在$(a,+\infty)$上一致连续.由$\lim_{x \rightarrow 0^+} \frac{x + 2}{x + 1} \sin \frac{1}{x}$不存在,$\lim_{x \rightarrow +\infty} \frac{x + 2}{x + 1} \sin \frac{1}{x} = 0$及\hyperref[theorem:Cantor定理]{Cantor定理}可得.
\end{enumerate}
\end{solution}

\begin{proposition}[一个重要不等式]\label{proposition:一个重要不等式1}
   对 \(\alpha \in (0,1)\), 证明
\[
|x^\alpha - y^\alpha| \leq |x - y|^\alpha, \, \forall x, y \in [0, +\infty).
\]
\end{proposition}
\begin{proof}
   不妨设 $y \geqslant x \geqslant 0$，则只须证 $y^{\alpha} - x^{\alpha} \leqslant \left( y - x \right)^{\alpha}$。则只须证 $\left( \frac{y}{x} \right)^{\alpha} - 1 \leqslant \left( \frac{y}{x} - 1 \right)^{\alpha}$。故只须证
\[
t^{\alpha} - 1 \leqslant \left( t - 1 \right)^{\alpha}, \forall t \geqslant 1.
\]
令 $g\left( t \right) = t^{\alpha} - 1 - \left( t - 1 \right)^{\alpha}$，则
\(
g'\left( t \right) = \alpha t^{\alpha - 1} - \alpha \left( t - 1 \right)^{\alpha - 1} \leqslant 0.
\)
从而 $g\left( t \right) \leqslant g\left( 1 \right) = 0$，$\forall t \geqslant 1$。故
\(
t^{\alpha} - 1 \leqslant \left( t - 1 \right)^{\alpha},\forall t \geqslant 1.
\)
\end{proof}

\begin{example}
   证明：\( f(x) = x^{\alpha} \ln x \) 在 \( (0, +\infty) \) 一致连续的充要条件是 \( \alpha \in (0,1) \)。
\end{example}
\begin{proof}
   当 $\alpha \geqslant 1$ 时，$f$ 不被线性函数控制，故由\hyperref[corollary:一致连续函数被线性函数控制1]{一致连续函数被线性函数控制}可知 $f$ 不一致连续。

当 $\alpha \leqslant 0$ 时，$\lim_{x \rightarrow 0^+} f\left( x \right)$ 不存在，由\hyperref[theorem:Cantor定理]{Cantor定理}可知，$f$ 在 $\left( 0,2 \right)$ 上不一致连续。故此时 $f$ 在 $\left( 0,+\infty \right)$ 上不一致连续。

当 $\alpha \in \left( 0,1 \right)$ 时，有
\(
f'\left( x \right) = x^{\alpha - 1} \left( \alpha \ln x - 1 \right).
\)
因此
\(
\lim_{x \rightarrow +\infty} f'\left( x \right) = 0,
\)
于是 $f'\left( x \right)$ 在 $\left[ 2,+\infty \right)$ 上有界，从而由Lagrange中值定理易得 $f$ 在 $\left[ 1,+\infty \right)$ 上 Lipschitz 连续，故 $f$ 在 $\left[ 2,+\infty \right)$ 上一致连续。此时，注意到
\(
\lim_{x \rightarrow 0^+} f\left( x \right) = 0,
\)
故由\hyperref[theorem:Cantor定理]{Cantor定理}可知，$f$ 在 $\left( 0,2 \right]$ 上一致连续。于是由\hyperref[proposition:一致连续函数的拼接]{一致连续的拼接}可得，$f$ 在 $\left( 0,+\infty \right)$ 上一致连续.
\end{proof}

\begin{example}
   设 \( f(x) = \begin{cases} 
      x^\alpha \cos \frac{1}{x}, & x > 0 \\ 
      0, & x = 0 
      \end{cases} \)。求 \(\alpha\) 的范围使得 \(f\) 在 \([0, +\infty)\) 一致连续。
\end{example}
\begin{note}
   \hypertarget{找两个数列的方式123}{\textbf{找这两个数列$\boldsymbol{x}_{\boldsymbol{n}}^{\prime}=\mathbf{2}\boldsymbol{n\pi },\boldsymbol{x}_{\boldsymbol{n}}^{\prime\prime}=\mathbf{2}\boldsymbol{n\pi }+\boldsymbol{n}^{\mathbf{1}-\boldsymbol{\alpha }}$的方法:}}
   当 $\alpha > 1$ 时，待定 $c_n$，令 $x_{n}^{\prime} = 2n\pi$，$x_{n}^{\prime\prime} = 2n\pi + c_n$。我们希望
   \(
   \lim_{n \rightarrow \infty} \left( x_{n}^{\prime\prime} - x_{n}^{\prime} \right) = \lim_{n \rightarrow \infty} c_n = 0,
   \)
   并且
   \(
   \lim_{n \rightarrow \infty} \left[ f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) \right] \ne 0.
   \)
   注意到
   \begin{align*}
   f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) &= \left( 2n\pi + c_n \right)^{\alpha} \cos \frac{1}{2n\pi + c_n} - \left( 2n\pi \right)^{\alpha} \cos \frac{1}{2n\pi} \\
   &= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{c_n}{2n\pi} \right)^{\alpha} \cos \frac{1}{2n\pi + c_n} - \left( 2n\pi \right)^{\alpha} \cos \frac{1}{2n\pi} \\
   &= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{c_n}{2n\pi} \right)^{\alpha} \left[ 1 + O\left( \frac{1}{\left( 2n\pi + c_n \right)^2} \right) \right] - \left( 2n\pi \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
   &= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{c_n}{2n\pi} \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] - \left( 2n\pi \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
   &= \left( 2n\pi \right)^{\alpha} \left[ \left( 1 + \frac{c_n}{2n\pi} \right)^{\alpha} - 1 \right] \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
   &= \left( 2n\pi \right)^{\alpha} \left[ \frac{\alpha c_n}{2n\pi} + O\left( \frac{c_n}{n^2} \right) \right] \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
   &= \left( 2n\pi \right)^{\alpha} \left[ \frac{\alpha c_n}{2n\pi} + O\left( \frac{c_n}{n^2} \right) \right], \quad n \rightarrow \infty.
   \end{align*}
   于是取 $c_n = n^{1 - \alpha}$，则 $\lim_{n \rightarrow \infty} c_n = 0$，并且由上式可得
   \begin{align*}
   f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) &= \left( 2n\pi \right)^{\alpha} \left[ \frac{\alpha n^{-\alpha}}{2\pi} + O\left( n^{-\alpha - 1} \right) \right] \\
   &= \alpha \left( 2\pi \right)^{\alpha - 1} + O\left( \frac{1}{n} \right) \rightarrow \alpha \left( 2\pi \right)^{\alpha - 1} \ne 0, \quad n \rightarrow \infty.
   \end{align*}
   故我们可取 $x_{n}^{\prime} = 2n\pi$，$x_{n}^{\prime\prime} = 2n\pi + n^{1 - \alpha}$。
\end{note}
\begin{proof}
当 $\alpha \leqslant 0$ 时，$\lim_{x \rightarrow 0^+} f\left( x \right)$ 不存在，由\hyperref[theorem:Cantor定理]{Cantor定理}可知，$f$ 在 $\left( 0,1 \right)$ 上不一致连续。故此时 $f$ 在 $\left( 0,+\infty \right)$ 上不一致连续。

当$\alpha \in (0,1]$时,由条件可知，对 $\forall x \geqslant 1$，都有
\[
\left| f'\left( x \right) \right| = \left| \left( x^{\alpha} \cos \frac{1}{x} \right)' \right| = \left| \alpha x^{\alpha - 1} \cos \frac{1}{x} - x^{\alpha - 2} \sin \frac{1}{x} \right| \leqslant \left| \alpha x^{\alpha - 1} \cos \frac{1}{x} \right| + \left| x^{\alpha - 2} \sin \frac{1}{x} \right| \leqslant \alpha + 1.
\]
因此 $f'\left( x \right)$ 在 $\left[ 1, +\infty \right)$ 上有界。从而由Lagrange中值定理易得 $f$ 在 $\left[ 1,+\infty \right)$ 上 Lipschitz 连续，故 $f$ 在 $\left[ 1,+\infty \right)$ 上一致连续。此时，注意到
\(
\lim_{x \rightarrow 0^+} f\left( x \right) = 0,
\)
故由\hyperref[theorem:Cantor定理]{Cantor定理}可知，$f$ 在 $\left( 0,1 \right]$ 上一致连续。于是由\hyperref[proposition:一致连续函数的拼接]{一致连续的拼接}可得，$f$ 在 $\left( 0,+\infty \right)$ 上一致连续.

当 $\alpha > 1$ 时,\hyperlink{找两个数列的方式123}{令 $x_{n}^{\prime} = 2n\pi$，$x_{n}^{\prime\prime} = 2n\pi + n^{1 - \alpha}$}，则
\[
\lim_{n \rightarrow \infty} \left( x_{n}^{\prime\prime} - x_{n}^{\prime} \right) = \lim_{n \rightarrow \infty} n^{1 - \alpha} = 0.
\]
此时我们有
\begin{align*}
f\left( x_{n}^{\prime\prime} \right) - f\left( x_{n}^{\prime} \right) &= \left( 2n\pi + n^{1 - \alpha} \right)^{\alpha} \cos \frac{1}{2n\pi + n^{1 - \alpha}} - \left( 2n\pi \right)^{\alpha} \cos \frac{1}{2n\pi} \\
&= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{n^{-\alpha}}{2\pi} \right)^{\alpha} \cos \frac{1}{2n\pi + n^{1 - \alpha}} - \left( 2n\pi \right)^{\alpha} \cos \frac{1}{2n\pi} \\
&= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{n^{-\alpha}}{2\pi} \right)^{\alpha} \left[ 1 + O\left( \frac{1}{\left( 2n\pi + n^{1 - \alpha} \right)^2} \right) \right] - \left( 2n\pi \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
&= \left( 2n\pi \right)^{\alpha} \left( 1 + \frac{n^{-\alpha}}{2\pi} \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] - \left( 2n\pi \right)^{\alpha} \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
&= \left( 2n\pi \right)^{\alpha} \left[ \left( 1 + \frac{n^{-\alpha}}{2\pi} \right)^{\alpha} - 1 \right] \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
&= \left( 2n\pi \right)^{\alpha} \left[ \frac{\alpha n^{-\alpha}}{2\pi} + O\left( n^{-\alpha - 1} \right) \right] \left[ 1 + O\left( \frac{1}{n^2} \right) \right] \\
&= \left( 2n\pi \right)^{\alpha} \left[ \frac{\alpha n^{-\alpha}}{2\pi} + O\left( n^{-\alpha - 1} \right) \right] \\
&= \alpha \left( 2\pi \right)^{\alpha - 1} + O\left( \frac{1}{n} \right) \rightarrow \alpha \left( 2\pi \right)^{\alpha - 1} \ne 0, \quad n \rightarrow \infty.
\end{align*}
故根据\hyperref[theorem:一致连续的充要条件1]{定理\ref{theorem:一致连续的充要条件1}}可知 $f$ 在 $\left[ 0, +\infty \right)$ 上不一致连续。
\end{proof}
   
\begin{example}
   设 \( f_n : (0, +\infty) \to \mathbb{R}, n = 1, 2, \cdots \) 是一致连续函数且 \( f_n \rightarrow f \)，证明：\( f \) 在 \( (0, +\infty) \) 一致连续。
\end{example}
\begin{proof}
   $\forall \varepsilon > 0$，$\exists N \in \mathbb{N}$，使得当 $n \geqslant N$ 时，有
\begin{align}
   \left| f_n\left( x \right) - f\left( x \right) \right| < \varepsilon, \quad \forall x \in \left( 0, +\infty \right). \label{example5.8-1.1}
\end{align}
由 $f_N$ 一致连续，可知 $\exists \delta > 0$，使得 $\forall x, y \in \left( 0, +\infty \right)$ 且 $\left| x - y \right| \leqslant \delta$，有
\begin{align}
   \left| f_N\left( x \right) - f_N\left( y \right) \right| < \varepsilon. \label{example5.8-1.2}
\end{align}
于是对 $\forall x, y \in \left( 0, +\infty \right)$ 且 $\left| x - y \right| \leqslant \delta$ ，结合 \eqref{example5.8-1.1} 和 \eqref{example5.8-1.2} 式，我们有
\[
\left| f\left( x \right) - f\left( y \right) \right| \leqslant \left| f\left( x \right) - f_N\left( x \right) \right| + \left| f_N\left( x \right) - f_N\left( y \right) \right| + \left| f_N\left( y \right) - f\left( y \right) \right| < 3\varepsilon.
\]
故\( f \) 在 \( (0, +\infty) \) 一致连续。
\end{proof}

\begin{example}
设 \( f \) 在 \([0,+\infty)\) 一致连续且对任何 \( x \geq 0 \) 都有 \(\lim_{n \to \infty} f(x+n) = 0\)，证明 \(\lim_{x \to +\infty} f(x) = 0\)。并说明如果去掉一致连续则结论不对。
\end{example}
\begin{note}
   证明的想法即把点拉回到 \([0,1]\) 并用一致连续来解决。反例可积累
   \[
   f(x) = \frac{x \sin (\pi x)}{1 + x^2 \sin^2 (\pi x)}.
   \]
   \textbf{核心想法:分段放缩、取整平移、一致连续.}
\end{note}
\begin{proof}
   由 $f$ 在 $\left[ 0, +\infty \right)$ 上一致连续可知，$\forall \varepsilon > 0$，$\exists \delta > 0$，使得当 $x, y \in \left[ 0, +\infty \right)$ 且 $\left| x - y \right| \leqslant \delta$ 时，有
\begin{align}
\left| f\left( x \right) - f\left( y \right) \right| < \varepsilon. \label{example5.9-1.1}
\end{align}
把 $\left[ 0,1 \right]$ 做 $N$ 等分，其中 $N = \frac{1}{\delta}$。由 $\lim_{n \rightarrow \infty} f\left( \frac{i}{N} + n \right) = 0$，$i = 0, 1, \cdots, N$ 可知，存在 $N' \in \mathbb{N}$，使得 $\forall n \geqslant N'$，有
\begin{align}
  \left| f\left( \frac{i}{N} + n \right) \right| < \varepsilon, \quad i = 0, 1, \cdots, N. \label{example5.9-1.2} 
\end{align}
从而对 $\forall x \geqslant 1 + N'$，一定存在 $i \in \left\{ 0, 1, \cdots, N - 1 \right\}$，$n \in \mathbb{N} \cap \left[ N', +\infty \right)$，使得 $x \in \left[ \frac{i}{N} + n, \frac{i + 1}{N} + n \right]$。注意到此时
\[
\left| x - \left( \frac{i}{N} + n \right) \right| \leqslant \left| \left( \frac{i + 1}{N} + n \right) - \left( \frac{i}{N} + n \right) \right| = \frac{1}{N} = \delta.
\]
于是结合 \eqref{example5.9-1.1} 和 \eqref{example5.9-1.2} 式我们就有
\[
\left| f\left( x \right) \right| \leqslant \left| f\left( x \right) - f\left( \frac{i}{N} + n \right) \right| + \left| f\left( \frac{i}{N} + n \right) \right| < 2\varepsilon.
\]
故\(\lim_{x \to +\infty} f(x) = 0\).
\end{proof}









\chapter{不等式}

\section{基本初等不等式}

\begin{proposition}[关于ln的常用不等式]\label{proposition:关于ln的常用不等式}
\begin{enumerate}[(1)]
   \item\label{proposition:关于ln的常用不等式1} $\ln \left( 1+x \right) <\frac{x}{\sqrt{1+x}},x>0.$

   \item \label{proposition:关于ln的常用不等式2} $\ln x<\sqrt{x}-\frac{1}{\sqrt{x}},x>0.$

   \item \label{proposition:关于ln的常用不等式3}
\end{enumerate}
\end{proposition}
\begin{proof}
\begin{enumerate}[(1)]
   \item 令\(f(x)=\ln(1 + x)-\frac{x}{\sqrt{1 + x}}\)，\(x\geqslant 0\)，则
   \begin{align*}
      f'\left( x \right) =\frac{2\sqrt{1+x}-x-2}{2\left( 1+x \right) ^{\frac{3}{2}}}=-\frac{1+x-2\sqrt{1+x}+1}{2\left( 1+x \right) ^{\frac{3}{2}}}=-\frac{\left( \sqrt{1+x}-1 \right) ^2}{2\left( 1+x \right) ^{\frac{3}{2}}}<0,\forall x>0.
   \end{align*}
   故\(f\)在\((0,+\infty)\)上严格单调递减，又\(f\in C[0,+\infty)\)，因此\(f\)在\([0,+\infty)\)上也严格单调递减。从而
   \[
   f(x)\leqslant f(0)=0,\forall x>0.
   \]
   即\(\ln(1 + x)<\frac{x}{\sqrt{1 + x}},x>0\).

   \item 

   \item 
\end{enumerate}
\end{proof}




\section{重要不等式}

\begin{theorem}[Cauchy不等式]\label{theorem:Cauchy不等式}
   对任何$n\in \mathbb{N} ,\left( a_1,a_2,\cdots ,a_n \right) ,\left( b_1,b_2,\cdots ,b_n \right) \in \mathbb{R} ^n,$有
   \begin{align}\label{equation:Cauchy不等式}
      \sum\limits_{i=1}^n{a_{i}^{2}\cdot}\sum\limits_{i=1}^n{b_{i}^{2}}\geqslant \left( \sum\limits_{i=1}^n{a_ib_i} \right) ^2.
   \end{align}
   且等号成立条件为$\left( a_1,a_2,\cdots ,a_n \right) ,\left( b_1,b_2,\cdots ,b_n \right)$线性相关.
\end{theorem}
\begin{proof}
   (i) 当\(b_i\)全为零时,\eqref{equation:Cauchy不等式}式左右两边均为零,结论显然成立.

(ii) 当\(b_i\)不全为零时,注意到\(\left(\sum\limits_{i = 1}^{n}(a_i + tb_i)\right)^2 \geqslant 0\),\(\forall t \in \mathbb{R}\).等价于

\[
t^2\sum\limits_{i = 1}^{n}b_{i}^{2} + 2t\sum\limits_{i = 1}^{n}a_ib_i + \sum\limits_{i = 1}^{n}a_{i}^{2} \geqslant 0,  \forall t \in \mathbb{R}.
\]

根据一元二次方程根的存在性定理,可知\(\Delta = \left(\sum\limits_{i = 1}^{n}a_ib_i\right)^2 - \sum\limits_{i = 1}^{n}a_{i}^{2} \cdot \sum\limits_{i = 1}^{n}b_{i}^{2} \leqslant 0\).

从而\(\sum\limits_{i = 1}^{n}a_{i}^{2} \cdot \sum\limits_{i = 1}^{n}b_{i}^{2} \geqslant \left(\sum\limits_{i = 1}^{n}a_ib_i\right)^2\).
下证\eqref{equation:Cauchy不等式}式等号成立的充要条件.

若\eqref{equation:Cauchy不等式}式等号成立,则

(i) 当\(b_i\)全为零时,因为零向量与任意向量均线性相关,所以此时\((a_1,a_2,\cdots,a_n)\),\((b_1,b_2,\cdots,b_n)\)线性相关.

(ii) 当\(b_i\)不全为零时,此时我们有\(\Delta = \left(\sum\limits_{i = 1}^{n}a_ib_i\right)^2 - \sum\limits_{i = 1}^{n}a_{i}^{2} \cdot \sum\limits_{i = 1}^{n}b_{i}^{2} = 0\).根据一元二次方程根的存在性定理,可知存在\(t_0 \in \mathbb{R}\),使得

\[
\left(\sum\limits_{i = 1}^{n}(a_i + tb_i)\right)^2 = t_{0}^{2}\sum\limits_{i = 1}^{n}b_{i}^{2} + 2t_0\sum\limits_{i = 1}^{n}a_ib_i + \sum\limits_{i = 1}^{n}a_{i}^{2} = 0.
\]

于是\(a_i + t_0b_i = 0\),\(i = 1,2,\cdots,n\).即\((a_1,a_2,\cdots,a_n)\),\((b_1,b_2,\cdots,b_n)\)线性相关.

反之,若\((a_1,a_2,\cdots,a_n)\),\((b_1,b_2,\cdots,b_n)\)线性相关,则存在不全为零的\(\lambda,\mu \in \mathbb{R}\),使得

\[
\lambda a_i + \mu b_i = 0,  i = 1,2,\cdots,n.
\]

不妨设\(\lambda \neq 0\),则\(a_i = -\frac{\mu}{\lambda}b_i\),\(i = 1,2,\cdots,n\).从而当\(t = \frac{\mu}{\lambda}\)时,\(\left(\sum\limits_{i = 1}^{n}(a_i + tb_i)\right)^2 = 0\).

即一元二次方程\(\left(\sum\limits_{i = 1}^{n}(a_i + tb_i)\right)^2 = t_{0}^{2}\sum\limits_{i = 1}^{n}b_{i}^{2} + 2t_0\sum\limits_{i = 1}^{n}a_ib_i + \sum\limits_{i = 1}^{n}a_{i}^{2} = 0\)有实根\(\frac{\mu}{\lambda}\).

因此\(\Delta = \left(\sum\limits_{i = 1}^{n}a_ib_i\right)^2 - \sum\limits_{i = 1}^{n}a_{i}^{2} \cdot \sum\limits_{i = 1}^{n}b_{i}^{2} = 0\).即\eqref{equation:Cauchy不等式}式等号成立.
\end{proof}

\begin{example}
   证明:\begin{align*}
      \sum\limits_{i=1}^n{\frac{1}{x_i}}\geqslant \frac{n^2}{\sum\limits_{i=1}^n{x_i}},\forall n\in \mathbb{N} ,x_1,x_2,\cdots ,x_n>0.
   \end{align*}
\end{example}
\begin{proof}
   对\(\forall n \in \mathbb{N}\),\(x_1,x_2,\cdots,x_n > 0\),由\hyperref[theorem:Cauchy不等式]{Cauchy不等式}可得

\[
\sum\limits_{i = 1}^{n}\frac{1}{x_i} \cdot \sum\limits_{i = 1}^{n}x_i = \sum\limits_{i = 1}^{n}\left(\frac{1}{\sqrt{x_i}}\right)^2 \cdot \sum\limits_{i = 1}^{n}\left(\sqrt{x_i}\right)^2 \geqslant \left(\sum\limits_{i = 1}^{n}\sqrt{x_i} \cdot \frac{1}{\sqrt{x_i}}\right)^2 = n^2.
\]

故\(\sum\limits_{i = 1}^{n}\frac{1}{x_i} \geqslant \frac{n^2}{\sum\limits_{i = 1}^{n}x_i}\),\(\forall n \in \mathbb{N}\),\(x_1,x_2,\cdots,x_n > 0\). 
\end{proof}

\begin{example}
   求函数$y=\sqrt{x+27}+\sqrt{13-x}+\sqrt{x}$在定义域内的最大值和最小值.
\end{example}
\begin{note}
   首先我们猜测定义域的端点处可能存在最值,然后我们通过简单的放缩就能得到$y(0)$就是最小值.再利用\hyperref[theorem:Cauchy不等式]{Cauchy不等式}我们可以得到函数的最大值.构造Cauchy不等式的思路是:利用待定系数法构造相应的Cauchy不等式.具体步骤如下:

   设\(A,B,C > 0\),则由\(Cauchy\)不等式可得

\[
\left(\frac{1}{\sqrt{A}}\sqrt{Ax + 27A} + \frac{1}{\sqrt{B}}\sqrt{13B - Bx} + \frac{1}{\sqrt{C}}\sqrt{Cx}\right)^2 \leqslant \left(\frac{1}{A} + \frac{1}{B} + \frac{1}{C}\right)[(A + C - B)x + 27A + 13B]
\]

并且当且仅当\(\sqrt{A} \cdot \sqrt{Ax + 27A} = \sqrt{B} \cdot \sqrt{13B - Bx} = \sqrt{C} \cdot \sqrt{Cx}\)时,等号成立.

令\(A + C - B = 0\)(因为要求解\(y\)的最大值,我们需要将\(y\)放大成一个不含\(x\)的常数),从而与上式联立得到方程组

\[
\begin{cases}
\sqrt{A} \cdot \sqrt{Ax + 27A} = \sqrt{B} \cdot \sqrt{13B - Bx} = \sqrt{C} \cdot \sqrt{Cx}\\
A + C - B = 0
\end{cases}
\]

解得:\(A = 1\),\(B = 3\),\(C = 2\),\(x = 9\).

从而得到我们需要构造的\(Cauchy\)不等式为

\[
\left(\sqrt{x + 27} + \frac{1}{\sqrt{3}}\sqrt{39 - 3x} + \frac{1}{\sqrt{2}}\sqrt{2x}\right)^2 \leqslant \left(1 + \frac{1}{3} + \frac{1}{2}\right)(x + 27 + 39 - 3x + 2x)
\]

并且当且仅当\(\sqrt{x + 27} = \sqrt{3} \cdot \sqrt{39 - 3x} = \sqrt{2} \cdot \sqrt{2x}\),即\(x = 9\)时,等号成立. 
\end{note}
\begin{solution}
由题可知,函数\(y\)的定义域就是:\(0 \leqslant x \leqslant 13\).而
\begin{align*}
   &y(x) = \sqrt{x + 27} + \sqrt{[\sqrt{13 - x} + \sqrt{x}]^2}
   \\
   &= \sqrt{x + 27} + \sqrt{13 + 2\sqrt{x(13 - x)}}
   \\
   &\geqslant \sqrt{27} + \sqrt{13} = 3\sqrt{3} + \sqrt{13} = y(0)
\end{align*}
于是\(y\)的最小值为\(3\sqrt{3} + \sqrt{13}\).
由\(Cauchy\)不等式可得
\begin{align*}
y^2(x) &= (\sqrt{x + 27} + \sqrt{13 - x} + \sqrt{x})^2\\
&= (\sqrt{x + 27} + \frac{1}{\sqrt{3}}\sqrt{39 - 3x} + \frac{1}{\sqrt{2}}\sqrt{2x})^2\\
&\leqslant (1 + \frac{1}{3} + \frac{1}{2})(x + 27 + 39 - 3x + 2x)\\
&= 121 = y^2(9)
\end{align*}
即\(y(x) \leqslant y(9) = 11\).并且当且仅当\(\sqrt{x + 27} = \sqrt{3} \cdot \sqrt{39 - 3x} = \sqrt{2} \cdot \sqrt{2x}\),即\(x = 9\)时,等号成立.故\(y\)的最大值为\(11\). 
\end{solution}

\begin{theorem}[均值不等式]\label{theorem:均值不等式}
   设$a_1,a_2,\cdots,a_n>0$,则下述函数是连续递增函数
   \begin{align}
      f\left( r \right) =\begin{cases}
         \left( \frac{a_{1}^{r}+a_{2}^{r}+\cdots +a_{n}^{r}}{n} \right) ^{\frac{1}{r}},r\ne 0\\
         \sqrt[n]{a_1a_2\cdots a_n},\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,r=0\\
      \end{cases}.
   \end{align}
   其中若$r_1\ne r_2$,则$f(r_1)=f(r_2)$的充要条件是$a_1=a_2=\cdots=a_n$.
\end{theorem}
\begin{note}
   均值不等式最重要的特例是下面的\hyperref[theorem:均值不等式常用形式]{均值不等式常用形式}.
\end{note}
\begin{theorem}[均值不等式常用形式]\label{theorem:均值不等式常用形式}
   设$a_1,a_2,\cdots,a_n>0$,则
   \begin{align*}
      \frac{n}{\frac{1}{a_1}+\frac{1}{a_2}+\cdots +\frac{1}{a_n}}\leqslant \sqrt[n]{a_1a_2\cdots a_n}\le \frac{a_1+a_2+\cdots +a_n}{n}\leqslant \sqrt{\frac{a_{1}^{2}+a_{2}^{2}+\cdots +a_{n}^{2}}{n}}.
   \end{align*}
\end{theorem}

\begin{example}
   设$f(x)=4x(x-1)^2,x\in(0,1)$,求$f$的最大值.
\end{example}
\begin{solution}
   由\hyperref[theorem:均值不等式常用形式]{均值不等式常用形式}可得
   \begin{align*}
      &f\left( x \right) =4x\left( x-1 \right) ^2=2\cdot 2x\left( 1-x \right) \left( 1-x \right) 
\\
&= 2\cdot \left[ \sqrt[3]{2x\left( 1-x \right) \left( 1-x \right)} \right] ^3
\\
&\leqslant 2\cdot \left[ \frac{2x+1-x+1-x}{3} \right] ^3
\\
&=2\cdot \left( \frac{2}{3} \right) ^3=\frac{16}{27}
   \end{align*}
   并且当且仅当$2x=1-x$,即$x=\frac{1}{3}$时等号成立.
\end{solution}

\begin{theorem}[Bernoulli不等式]\label{theorem:Bernoulli不等式}
   设$x_1,x_2,\cdots,x_n\geq -1$且两两同号,则
   \begin{align*}
      \left( 1+x_1 \right) \left( 1+x_2 \right) \cdots \left( 1+x_n \right) \geqslant 1+x_1+x_2+\cdots +x_n.
   \end{align*}
\end{theorem}
\begin{proof}
   当$n=1$时,我们有$1+x_1\geq 1+x_1$,结论显然成立.

   假设当$n=k$时,结论成立.则当$n=k+1$时,由归纳假设可得
   \begin{align*}
      &\left( 1+x_1 \right) \left( 1+x_2 \right) \cdots \left( 1+x_{k+1} \right) \geqslant \left( 1+x_1+x_2+\cdots +x_k \right) \left( 1+x_{k+1} \right) 
\\
&=1+x_1+x_2+\cdots +x_k+x_{k+1}+x_1x_{k+1}+x_2x_{k+1}+\cdots +x_kx_{k+1}
\\
&\geqslant 1+x_1+x_2+\cdots +x_k+x_{k+1}
   \end{align*}
   故由数学归纳法可知,结论成立.
\end{proof}

\begin{theorem}[Bernoulli不等式特殊形式]\label{theorem:Bernoulli不等式特殊形式}
   设$x\geq-1$,则
   \begin{align*}
      (1+x)^n\geqslant1+nx.
   \end{align*}
\end{theorem}

\begin{theorem}[Jesen不等式]\label{theorem:Jesen不等式}
设\(\lambda_i \geq 0\),\(i = 1,2,\cdots,n\),\(\sum\limits_{i = 1}^{n} \lambda_i = 1\),则对下凸函数\(f\),有
\[
f\left(\sum\limits_{i = 1}^{n} \lambda_i x_i\right) \leq \sum\limits_{i = 1}^{n} \lambda_i f(x_i).
\]

对上凸函数\(f\),有
\[
f\left(\sum\limits_{i = 1}^{n} \lambda_i x_i\right) \geq \sum\limits_{i = 1}^{n} \lambda_i f(x_i).
\]
\end{theorem}

\begin{theorem}[Young不等式]\label{theorem:Young不等式}
   对任何$a,b\geq0,\frac{1}{p}+\frac{1}{q}=1,p>1$有
   \begin{align*}
      ab\leqslant \frac{a^p}{p}+\frac{b^q}{q}.
   \end{align*}
\end{theorem}
\begin{note}
   若$\frac{1}{p}+\frac{1}{q}=1$,则我们称$p$与$q$\textbf{共轭}.\label{实数之间的共轭}
\end{note}
\begin{proof}
   (i)当$a,b$至少有一个为零时,结论显然成立.

   (ii)当$a,b$均不为零时,我们有
   \begin{gather*}
      ab\leqslant \frac{a^p}{p}+\frac{b^q}{q}
\\
\Leftrightarrow \ln a+\ln b\leqslant \ln \left( \frac{a^p}{p}+\frac{b^q}{q} \right) 
\\
\Leftrightarrow \frac{1}{p}\ln a^p+\frac{1}{q}\ln b^q\leqslant \ln \left( \frac{a^p}{p}+\frac{b^q}{q} \right) 
   \end{gather*}
   由\hyperref[theorem:Jesen不等式]{Jesen不等式}和$f\left( x \right) =\ln x$函数的上凸性可知,上述不等式成立.故原结论也成立.   
\end{proof}

\begin{theorem}[Hold不等式]\label{theorem:Hold不等式}
设$\frac{1}{p}+\frac{1}{q}=1,p>1,a_1,a_2,\cdots,a_n\geq0,b_1,b_2,\cdots,b_n\geq0$,则有
\begin{align*}
   \sum\limits_{k=1}^n{a_kb_k}\le \sqrt[p]{\sum\limits_{k=1}^n{a_{k}^{p}}}\cdot \sqrt[q]{\sum\limits_{k=1}^n{b_{k}^{q}}}.
\end{align*}
\end{theorem}
\begin{proof}
   (i)当$a_1,a_2,\cdots,a_n$全为零时,结论显然成立.

   (ii)当$a_1,a_2,\cdots,a_n$不全为零时,令
   \begin{align*}
      a_{k}^{\prime}=\frac{a_k}{\sqrt[p]{\sum\limits_{k=1}^n{a_{k}^{p}}}},b_{k}^{\prime}=\frac{b_k}{\sqrt[q]{\sum\limits_{k=1}^n{b_{k}^{q}}}},k=1,2,\cdots,n.
   \end{align*}
从而只需证明$\sum\limits_{k=1}^n{a_{k}^{\prime}b_{k}^{\prime}}\leqslant 1$.由\hyperref[theorem:Young不等式]{Young不等式}可得
\begin{align*}
   \sum\limits_{k=1}^n{a_{k}^{\prime}b_{k}^{\prime}}\leqslant &\sum\limits_{k=1}^n{\left[ \frac{\left( a_{k}^{\prime} \right) ^p}{p}+\frac{\left( b_{k}^{\prime} \right) ^q}{q} \right]}=\sum\limits_{k=1}^n{\left( \frac{a_{k}^{p}}{p\sum\limits_{k=1}^n{a_{k}^{p}}}+\frac{b_{k}^{p}}{q\sum\limits_{k=1}^n{b_{k}^{q}}} \right)}
\\
&=\frac{\sum\limits_{k=1}^n{a_{k}^{p}}}{p\sum\limits_{k=1}^n{a_{k}^{p}}}+\frac{\sum\limits_{k=1}^n{b_{k}^{p}}}{q\sum\limits_{k=1}^n{b_{k}^{q}}}=\frac{1}{p}+\frac{1}{q}=1.
\end{align*}
故原结论成立.
\end{proof}

\begin{theorem}[排序和不等式]\label{theorem:排序和不等式}
设\(\{a_1,a_2,\cdots,a_n\} \subset \mathbb{R}\),\(\{b_1,b_2,\cdots,b_n\} \subset \mathbb{R}\)满足
\[
a_1 \leq a_2 \leq \cdots \leq a_n, b_1 \leq b_2 \leq \cdots \leq b_n.
\]

\(\{c_1,c_2,\cdots,c_n\}\)是\(\{b_1,b_2,\cdots,b_n\}\)的一个排列,则有
\[
\sum\limits_{i = 1}^{n} a_i b_{n + 1 - i} \leq \sum\limits_{i = 1}^{n} a_i c_i \leq \sum\limits_{i = 1}^{n} a_i b_i,
\]

且等号成立的充要条件是\(a_i = a_j\),\(1 \leq i < j \leq n\)或者\(b_i = b_j\),\(1 \leq i < j \leq n\).
\end{theorem}
\begin{note}
   简单记为倒序和\(\leq\)乱序和\(\leq\)同序和.
\end{note}

\begin{theorem}[Chebeshev不等式]\label{theorem:Chebeshev不等式}
   设\(\{a_1,a_2,\cdots,a_n\} \subset \mathbb{R}\),\(\{b_1,b_2,\cdots,b_n\} \subset \mathbb{R}\)满足
\[
a_1 \leq a_2 \leq \cdots \leq a_n, b_1 \leq b_2 \leq \cdots \leq b_n.
\]

\(\{c_1,c_2,\cdots,c_n\}\)是\(\{b_1,b_2,\cdots,b_n\}\)的一个排列,则有
\[
   \sum\limits_{i = 1}^{n} a_i b_{n + 1 - i} \leq \frac{1}{n} \sum\limits_{i = 1}^{n} a_i \sum\limits_{i = 1}^{n} b_i \leq \sum\limits_{i = 1}^{n} a_i b_i.
\]

且等号成立的充要条件是\(a_i = a_j\),\(1 \leq i < j \leq n\)或者\(b_i = b_j\),\(1 \leq i < j \leq n\).
\end{theorem}

\begin{theorem}[\hypertarget{Chebeshev不等式积分形式}{Chebeshev不等式积分形式}]\label{Chebeshev不等式积分形式}
   设 \( p \in R[a,b] \) 且非负,\( f,g \) 在 \([a,b]\) 上是单调函数,则
\begin{align*}
\left( \int_{a}^{b} p(x) f(x) \,dx \right) \left( \int_{a}^{b} p(x) g(x) \,dx \right) \leq \left( \int_{a}^{b} p(x) \,dx \right) \left( \int_{a}^{b} p(x) f(x) g(x) \,dx \right), & f,g\text{单调性相同} \\
\\
\left( \int_{a}^{b} p(x) f(x) \,dx \right) \left( \int_{a}^{b} p(x) g(x) \,dx \right) \geq \left( \int_{a}^{b} p(x) \,dx \right) \left( \int_{a}^{b} p(x) f(x) g(x) \,dx \right), & f,g\text{单调性相反}
\nonumber
\end{align*}
\end{theorem}
\begin{proof}
   \begin{align*}
      & \left( \int_{a}^{b} p(x) f(x) dx \right) \left( \int_{a}^{b} p(x) g(x) dx \right) - \left( \int_{a}^{b} p(x) dx \right) \left( \int_{a}^{b} p(x) f(x) g(x) dx \right) \\
      & = \left( \int_{a}^{b} p(x) f(x) dx \right) \left( \int_{a}^{b} p(y) g(y) dy \right) - \left( \int_{a}^{b} p(x) dx \right) \left( \int_{a}^{b} p(y) f(y) g(y) dy \right) \\
      & = \iint_{[a,b]^2} p(x) p(y) g(y) [f(x) - f(y)] dx dy \\
      & \xlongequal{对称性} \iint_{[a,b]^2} p(y) p(x) g(x) [f(y) - f(x)] dx dy \\
      & = \frac{1}{2} \iint_{[a,b]^2} p(x) p(y) [g(y) - g(x)] [f(x) - f(y)] dx dy,
      \nonumber
   \end{align*}
\end{proof}


\chapter{积分}

\section{积分常用结论}

\begin{theorem}[基本结论]\label{theorem:积分与求和基本结论}
   \begin{gather*}
      \sum\limits_{n=1}^m{\int_a^b{f_n\left( x \right) dx=}}\int_a^b{\sum\limits_{n=1}^m{f_n\left( x \right) dx}}.
\\
\sum\limits_{n=1}^m{\int_{a_{n-1}}^{a_n}{f\left( x \right) dx=}}\int_{a_0}^{a_{\boldsymbol{m}}}{f\left( x \right) dx},\sum\limits_{n=1}^m{\int_{a_n}^{a_{n-1}}{f\left( x \right) dx}}=\int_{a_m}^{a_0}{f\left( x \right) dx}.
   \end{gather*}
\end{theorem}
\begin{proof}
   由定积分的性质易证.
\end{proof}

\begin{proposition}\label{proposition:反常积分与其子列极限存在命题}
   若\(f\in R[a, +\infty)\),\(\lim_{n\rightarrow +\infty}\int_a^n|f(x)|dx\)存在且\({\varlimsup_{x\rightarrow +\infty}}|f(x)| = 0\),则\(\int_a^{\infty}f(x)dx\)一定存在.
\end{proposition}
\begin{note}
   若已知$\int_a^{\infty}f(x)dx$存在,则由Heine归结原则可知\(\lim_{n\rightarrow +\infty}\int_a^n f(x)dx\)一定存在.但是反过来,\(\lim_{n\rightarrow +\infty}\int_a^n f(x)dx\)只是$\int_a^{\infty}f(x)dx$的一个子列极限,故$\int_a^{\infty}f(x)dx$不一定存在.还需要额外的条件才能使得$\int_a^{\infty}f(x)dx$存在.
\end{note}
\begin{proof}
   对\(\forall x\geqslant a\),一定存在\(n\in\mathbb{N}\),使得\(n\leqslant x < n + 1\).从而可得
\begin{align}\label{4.481.3}
  \int_a^x f(x)dx=\int_a^n f(x)dx+\int_n^x f(x)dx. 
\end{align}
并且
\begin{align}\label{4.481.2}
   \int_n^x f(x)dx\leqslant\int_n^x\left|f(x)\right|dx\leqslant\int_n^{n + 1}\left|f(x)\right|dx\leqslant\sup_{y\geqslant n}\left|f(y)\right|.
\end{align}
对\eqref{4.481.2}式两边同时令\(x\rightarrow +\infty\),则\(n\rightarrow +\infty\).进而可得
\[
\lim_{x\rightarrow +\infty}\int_n^x f(x)dx\leqslant\lim_{n\rightarrow +\infty}\sup_{y\geqslant n}\left|f(y)\right|={\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|.
\]
由于此时\(\lim_{x\rightarrow +\infty}f(x)=0\),因此\({\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|=\lim_{x\rightarrow +\infty}\left|f(x)\right|=\lim_{x\rightarrow +\infty}f(x)=0\).从而
\[
\lim_{x\rightarrow +\infty}\int_n^x f(x)dx\leqslant{\varlimsup_{x\rightarrow +\infty}}\left|f(x)\right|=0.
\]
故\(\lim_{x\rightarrow +\infty}\int_n^x f(x)dx = 0\).于是再对\eqref{4.481.3}式两边同时令\(x\rightarrow +\infty\),则\(n\rightarrow +\infty\).从而可得
\[
\int_a^{\infty}f(x)dx=\lim_{x\rightarrow +\infty}\int_a^x f(x)dx=\lim_{n\rightarrow +\infty}\int_a^n f(x)dx+\lim_{x\rightarrow +\infty}\int_n^x f(x)dx=\lim_{n\rightarrow +\infty}\int_a^n f(x)dx.
\]
又因为此时\(\lim_{n\rightarrow +\infty}\int_a^n f(x)dx\)存在,所以\(\int_a^{\infty}f(x)dx\)也存在.
\end{proof}

\begin{theorem}
设\(f(x)\)在\([a,b]\)上可积,则\(\vert f(x)\vert\)在\([a,b]\)上也可积(即绝对可积),且成立
\[
\left|\int_{a}^{b}f(x)dx\right|\leq\int_{a}^{b}\vert f(x)\vert dx.
\]
\end{theorem}

\section{积分性态分析}

\begin{example}
   已知$f(x)\in C[a,b]$,且
\begin{align*}
   \int_a^b{f\left( x \right) dx}=\int_a^b{xf\left( x \right) dx}=0.
\end{align*}
证明:$f(x)$在$(a,b)$上至少2个零点.
\end{example}
\begin{proof}
设\(F_1(x)=\int_a^x f(t)dt\),则\(F_1(a)=F_1(b)=0\).再设\(F_2(x)=\int_a^x F_1(t)dt=\int_a^x\left[\int_a^t f(s)ds\right]dt\),则\(F_2(a)=0\),\(F_{2}^{\prime}(x)=F_1(x)\),\(F_{2}^{''}(x)=F_{1}^{\prime}(x)=f(x)\).由条件可知
\begin{align*}
0=\int_a^b xf(x)dx
=\int_a^b xF_{1}^{\prime}(x)dx
=\int_a^b xdF_1(x)
=xF_1(x)\Big|_{a}^{b}-\int_a^b F_1(x)dx
=-F_2(b).
\end{align*}
于是由\(Rolle\)中值定理可知,存在\(\xi\in(a,b)\),使得\(F_{2}^{\prime}(\xi)=F_1(\xi)=0\).从而再由\(Rolle\)中值定理可知,存在\(\eta_1\in(a,\xi)\),\(\eta_2\in(\xi,b)\),使得\(F_{1}^{\prime}(\eta_1)=F_{1}^{\prime}(\eta_2)=0\).即\(f(\eta_1)=f(\eta_2)=0\).
\end{proof}

\begin{example}\label{example245574}
   已知$f(x)\in C[a,b]$,且
   \begin{align*}
      \int_a^b{x^kf\left( x \right) dx}=0, k=0,1,2,\cdots ,n .
   \end{align*}
   证明:$f(x)$在$(a,b)$上至少n+1个零点.
\end{example}
\begin{note}
   利用分部积分转换导数的技巧.
\end{note}
\begin{proof}
令\(F(x)=\int_a^x\int_a^{x_n}\cdots\int_a^{x_3}\left[\int_a^{x_2}f(x_1)dx_1\right]dx_2\cdots dx_n\).则\(F(a)=F^\prime(a)=\cdots=F^{(n)}(a)=0\),\(F^{(n + 1)}(x)=f(x)\).由已知条件,再反复分部积分,可得当\(1\leqslant k\leqslant n\)且\(k\in\mathbb{N}\)时,有
\begin{align*}
   &0=\int_a^b{f\left( x \right) dx}=\int_a^b{F^{\left( n+1 \right)}\left( x \right) dx}=F^{\left( n \right)}\left( x \right) \Big|_{a}^{b}=F^{\left( n \right)}\left( b \right) ,
   \\
   &0=\int_a^b{xf\left( x \right) dx}=\int_a^b{xF^{\left( n+1 \right)}\left( x \right) dx}=\int_a^b{xdF^{\left( n \right)}\left( x \right)}=xF^{\left( n \right)}\left( x \right) \Big| _{a}^{b}-\int_a^b{F^{\left( n \right)}\left( x \right) dx}=-F^{\left( n-1 \right)}\left( b \right) ,
   \\
   &\cdots \cdots 
   \\
   &0=\int_a^b{x^nf\left( x \right) dx}=\int_a^b{x^nF^{\left( n+1 \right)}\left( x \right) dx}=\int_a^b{x^ndF^{\left( n \right)}\left( x \right)}=x^nF^{\left( n \right)}\left( x \right) \Big| _{a}^{b}-n\int_a^b{x^{n-1}F^{\left( n \right)}\left( x \right) dx}
   \\
   &=-n\int_a^b{x^{n-1}F^{\left( n \right)}\left( x \right) dx}=\cdots =\left( -1 \right) ^nn!\int_a^b{F\prime\left( x \right) dx}=\left( -1 \right) ^nn!F\left( b \right) .
\end{align*}
从而\(F(b)=F^\prime(b)=\cdots=F^{(n)}(b)=0\).于是由\(Rolle\)中值定理可知,存在\(\xi_1^1\in(a,b)\),使得\(F^\prime(\xi_1^1)=0\).再利用\(Rolle\)中值定理可知存在\(\xi_1^2,\xi_2^2\in(a,b)\),使得\(F^{\prime\prime}(\xi_1^2)=F^{\prime\prime}(\xi_2^2)=0\).
反复利用\(Rolle\)中值定理可得,存在\(\xi_1^{n + 1},\xi_2^{n + 1},\cdots,\xi_{n + 1}^{n + 1}\in(a,b)\),使得\(F^{(n + 1)}(\xi_1^{n + 1})=F^{(n + 1)}(\xi_2^{n + 1})=\cdots=F^{(n + 1)}(\xi_{n + 1}^{n + 1})=0\).即\(f(\xi_1^{n + 1})=f(\xi_2^{n + 1})=\cdots=f(\xi_{n + 1}^{n + 1})=0\).
\end{proof}

\begin{example}
   已知$f(x)\in D^2[0,1]$,且
   \begin{align*}
      \int_0^1{f\left( x \right) dx}=\frac{1}{6},\int_0^1{xf\left( x \right) dx}=0,\int_0^1{x^2f\left( x \right) dx}=\frac{1}{60}.
   \end{align*}
证明:存在$\xi \in (0,1)$,使得$f''(\xi)=16$.
\end{example}
\begin{note}
构造$g(x)=f(x)-(8x^2 - 9x + 2)$的原因:受到\hyperref[example245574]{上一题}的启发,我们希望找到一个$g(x)=f(x)-p(x)$,使得
\begin{align*}
   \int_0^1 x^k g(x)dx =\int_0^1 x^k [f(x)-p(x)]dx = 0, \quad k = 0,1,2.
\end{align*}
成立.即
\begin{align*}
   \int_0^1{x^kf(x)dx}=\int_0^1{x^kp(x)dx},\quad k=0,1,2.
\end{align*}
待定$p(x)=ax^2+bx+c$,则代入上述公式,再结合已知条件可得
\begin{gather*}
   \frac{1}{6}=\int_0^1{p(x)dx}=\int_0^1{\left( ax^2+bx+c \right) dx}=\frac{a}{3}+\frac{b}{2}+c,
\\
0=\int_0^1{xp(x)dx}=\int_0^1{\left( ax^3+bx^2+cx \right) dx}=\frac{a}{4}+\frac{b}{3}+\frac{c}{2},
\\
\frac{1}{60}=\int_0^1{x^2p(x)dx}=\int_0^1{\left( ax^4+bx^3+cx^2 \right) dx}=\frac{a}{5}+\frac{b}{4}+\frac{c}{3}.
\end{gather*}
解得:$a=8,b=-9,c=2$.于是就得到\(g(x)=f(x)-(8x^2 - 9x + 2)\).
\end{note}
\begin{proof}
   令\(g(x)=f(x)-(8x^2 - 9x + 2)\),则由条件可得
\[
\int_0^1 x^k g(x)dx = 0, \quad k = 0,1,2.
\]
再令\(G(x)=\int_0^x\left[\int_0^t\left(\int_0^s g(y)dy\right)ds\right]dt\),则\(G(0)=G^\prime(0)=G^{\prime\prime}(0)=0\),\(G^{\prime\prime\prime}(x)=g(x)\).利用分部积分可得
\begin{align*}
   &0=\int_0^1{g\left( x \right) dx}=\int_0^1{G'''\left( x \right) dx}=G''\left( 1 \right) ,
   \\
   &0=\int_0^1{xg\left( x \right) dx}=\int_0^1{xG'''\left( x \right) dx}=\int_0^1{xdG''\left( x \right)}=xG''\left( x \right) \Big |_{0}^{1}-\int_0^1{G''\left( x \right) dx}=-G'\left( 1 \right) ,
   \\
   &0=\int_0^1{x^2g\left( x \right) dx}=\int_0^1{x^2G'''\left( x \right) dx}=\int_0^1{x^2dG''\left( x \right)}=x^2G''\left( x \right) \Big |_{0}^{1}-2\int_0^1{xG''\left( x \right) dx}
   \\
   &=-2\int_0^1{xdG'\left( x \right)}=2\int_0^1{G'\left( x \right) dx}-2xG'\left( x \right) \Big |_{0}^{1}=2G\left( 1 \right) .
\end{align*}
从而\(G(1)=G^\prime(1)=G^{\prime\prime}(1)=0\).于是由\(Rolle\)中值定理可知,存在\(\xi_1^1\in(0,1)\),使得\(G^\prime(\xi_1^1)=0\).
再利用\(Rolle\)中值定理可知,存在\(\xi_1^2,\xi_2^2\in(0,1)\),使得\(G^{\prime\prime}(\xi_1^2)=G^{\prime\prime}(\xi_2^2)=0\).
反复利用\(Rolle\)中值定理可得,存在\(\xi_1^3,\xi_2^3,\xi_3^3\in(0,1)\),使得\(G^{\prime\prime\prime}(\xi_1^3)=G^{\prime\prime\prime}(\xi_2^3)=G^{\prime\prime\prime}(\xi_3^3)=0\).即\(g(\xi_1^3)=g(\xi_2^3)=g(\xi_3^3)=0\).
再反复利用\(Rolle\)中值定理可得,存在\(\xi\in(0,1)\),使得\(g^{\prime\prime}(\xi)=0\).即\(f^{\prime\prime}(\xi)=16\).
\end{proof}

















\chapter{小技巧}

\section{长除法}

\begin{example}[利用多项式除法计算Taylor级数和Laurent级数]

已知$\sin x=x-\frac{1}{6}x^3+\frac{1}{120}x^5+\cdots$,$\cos x=1-\frac{1}{2}x^2+\frac{1}{24}x^4-\cdots$.

1.求$\tan x$.
\quad \quad
2.求$\frac{1}{\sin^2 x}$.
\end{example}
\begin{note}
   实际问题中需要多展开几项,展开得越多,得到的结果也越多.
\end{note}
\begin{solution}
   1.根据多项式除法可得
\begin{align*}
\begin{tblr}{colspec = {crcrcrcrcr},
colsep = 3pt,
 vline{2} = {2}{}
   }
&  x& + & \frac{1}{3}x^3 & +& \frac{2}{15}x^5   & + &\cdots &  &  \\
\cline{2-10}
1-\frac{1}{2}x^2+\frac{1}{24}x^4+\cdots   & x & - & \frac{1}{6}x^3 & + & \frac{1}{120}x^5  & - & \cdots  &  &  \\
& x & - & \frac{1}{2}x^3 & + & \frac{1}{24}x^5 &  +  &\cdots  &  &  \\
\cline{2-10}
&  & - & \frac{1}{3}x^2 & - & \frac{1}{30}x^5 &  +  &\cdots &  &  \\
&  & - & \frac{1}{3}x^2 & - & \frac{1}{12}x^5 &   +&\cdots  &  &  \\
\cline{3-10}
&  &  &  &  & \frac{2}{15}x^5 &  +& \cdots &  &  \\
&  &  &  &  & \frac{2}{15}x^5 & + & \cdots  &  &  \\
\cline{5-10}
&  &  &  &  & 0 & + & \cdots &  &  \\
\end{tblr}
\end{align*}
因此$\tan x=\frac{\sin x}{\cos x}=x+\frac{1}{3}x^3+\frac{2}{15}x^5+\cdots\,\,.$
\\
\\
2.根据多项式乘法可得
\begin{align*}
   \sin ^2x=\left( x-\frac{1}{6}x^3+\frac{1}{120}x^5+\cdots \right) \left( x-\frac{1}{6}x^3+\frac{1}{120}x^5+\cdots \right) =x^2-\frac{1}{3}x^4+\cdots 
\end{align*}
再根据多项式除法可得
\begin{align*}
\begin{tblr}{colspec = {crcrcrcrcr},
colsep = 3pt,
 vline{2} = {2}{}
   }
&  \frac{1}{x^2}& - & \frac{1}{3} & + & \cdots  &  & &  &  \\
\cline{2-10}
x^2-\frac{1}{3}x^4+\cdots & 1 &  &  &  &   &  &   &  &  \\
& 1 & - & \frac{1}{3}x^2 & + & \cdots &  &  &  &  \\
\cline{2-10}
&   &  & \frac{1}{3}x^2 & + & \cdots &  &  &  &  \\
&   &  & \frac{1}{3}x^2 & + & \cdots &  &  &  &  \\
\cline{3-10}
&  &  &   0&  +& \cdots & & &  &  \\
\end{tblr}
\end{align*}
因此$\frac{1}{\sin ^2x}=\frac{1}{x^2}-\frac{1}{3}+\cdots\,\,.$
\end{solution}

\section{将多项式分式分解为其部分因式的和}

\begin{example}
1. 分解\(a > 0\),\(\frac{1}{(1 + x^2)(1 + ax)}\).

2. 分解\(\frac{1}{(1 + x^2)(1 + x)^2}\).

3. 分解\(\frac{1}{(1 + x^2)^2(1 + x)}\).

4. 分解\(\frac{1}{(1 + x^2)^2(1 + x)^2}\).
\end{example}
\begin{solution}\label{将多项式分式分解为其部分因式的和常用方法}
1.根据代数学知识我们可以设
\begin{align}\label{equation:little tech eq1}
\frac{1}{\left( 1+x^2 \right) \left( 1+ax \right)}=\frac{Ax+B}{1+x^2}+\frac{C}{1+ax}.  
\end{align}
其中$A,B,C$均为常数.

{\color{blue}解法一(待定系数法):}

将\eqref{equation:little tech eq1}式右边通分得到
\begin{align*}
\frac{Ax+B}{1+x^2}+\frac{C}{1+ax}=\frac{\left( Ax+B \right) \left( 1+ax \right) +C\left( 1+x^2 \right)}{\left( 1+x^2 \right) \left( 1+ax \right)}=\frac{\left( Aa+C \right) x^2+\left( A+Ba \right) x+B+C}{\left( 1+x^2 \right) \left( 1+ax \right)}.
\end{align*}
比较上式左右两边分子各项系数可得
\begin{align*}
\begin{cases}
Aa+C=0\\
A+Ba=0\\
B+C=1\\
\end{cases}
\end{align*}
解得:$A=-\frac{a}{1+a^2},B=\frac{1}{1+a^2},C=\frac{a^2}{1+a^2}$.

于是原式可分解为
\begin{align*}
   \frac{1}{\left( 1+x^2 \right) \left( 1+ax \right)}=\frac{-\frac{a}{1+a^2}x+\frac{1}{1+a^2}}{1+x^2}+\frac{\frac{a^2}{1+a^2}}{1+ax}.
\end{align*}
{\color{blue}解法二(留数法):}

\eqref{equation:little tech eq1}式两边同时乘$1+ax$,得到$\frac{1}{1+x^2}=\frac{Ax+B}{1+x^2}\cdot \left( 1+ax \right) +C$.再令$x\to-\frac{1}{a}$,得$C=\frac{1}{1+\frac{1}{a^2}}=\frac{a^2}{1+a^2}$.

\eqref{equation:little tech eq1}式两边同时乘$1+x^2$,得到
$\frac{1}{1+ax}=Ax+B+\frac{C}{1+ax}\cdot \left( 1+x^2 \right)$.再分别令$x\to \pm i$,可得
\begin{align*}
   \begin{cases}
      A\mathrm{i}+B=\frac{1}{1+a\mathrm{i}}\\
      -A\mathrm{i}+B=\frac{1}{1-a\mathrm{i}}\\
   \end{cases}
\end{align*}
解得:$A=-\frac{a}{1+a^2},B=\frac{1}{1+a^2}$.

于是原式可分解为
\begin{align*}
   \frac{1}{\left( 1+x^2 \right) \left( 1+ax \right)}=\frac{-\frac{a}{1+a^2}x+\frac{1}{1+a^2}}{1+x^2}+\frac{\frac{a^2}{1+a^2}}{1+ax}.
\end{align*}
{\color{blue}解法三(留数法+待定系数法):}

\eqref{equation:little tech eq1}式两边同时乘$1+ax$,得到$\frac{1}{1+x^2}=\frac{Ax+B}{1+x^2}\cdot \left( 1+ax \right) +C$.再令$x\to-\frac{1}{a}$,得$C=\frac{1}{1+\frac{1}{a^2}}=\frac{a^2}{1+a^2}$.

容易直接观察出\eqref{equation:little tech eq1}式右边通分后分子的最高次项系数为$Aa+C$,常数项为$B+C$.并将其与\eqref{equation:little tech eq1}式左边的分子对比,可以得到
\begin{align*}
   \begin{cases}
      Aa+C=0\\
      B+C=1\\
   \end{cases}
\end{align*}
解得:$A=-\frac{a}{1+a^2},B=\frac{1}{1+a^2}$.

于是原式可分解为
\begin{align*}
   \frac{1}{\left( 1+x^2 \right) \left( 1+ax \right)}=\frac{-\frac{a}{1+a^2}x+\frac{1}{1+a^2}}{1+x^2}+\frac{\frac{a^2}{1+a^2}}{1+ax}.
\end{align*}

2.根据代数学知识我们可以设
\begin{align}\label{equation:little tech eq2}
   \frac{1}{\left( 1+x^2 \right) \left( 1+x \right) ^2}=\frac{Ax+B}{1+x^2}+\frac{C}{1+x}+\frac{D}{\left( 1+x \right) ^2}.  
\end{align}
其中$A,B,C,D$均为常数.

\eqref{equation:little tech eq2}式两边同时乘$(1+x)^2$,得到
\begin{align}\label{eq1.1}
   \frac{1}{1+x^2}=\frac{Ax+B}{1+x^2}\cdot \left( 1+x \right) ^2+C\left( 1+x \right)+D.
\end{align}
再令$x\to-1$,可得$D=\frac{1}{2}$.对\eqref{eq1.1}式两边同时求导得到
\begin{align*}
   \left.\frac{-2x}{\left( 1+x^2 \right) ^2}\right|_{x\rightarrow -1}^{}=\left.\left[ \frac{Ax+B}{1+x^2}\cdot \left( 1+x \right) ^2 \right] ^{\prime}\right|_{x\rightarrow -1}+C=C.
\end{align*}
从而$C=\frac{1}{2}$.
令\eqref{equation:little tech eq2}中的$x=0$,得到$1=B+C+D$,将$C=D=\frac{1}{2}$代入解得:$B=0$.再令\eqref{equation:little tech eq2}中的$x=1$,得到$\frac{1}{8}=\frac{A+B}{2}+\frac{C}{2}+\frac{D}{4}$,将$C=D=\frac{1}{2},B=0$代入解得:$A=-\frac{1}{2}$.

于是原式可分解为
\begin{align*}
   \frac{1}{\left( 1+x^2 \right) \left( 1+x \right) ^2}=\frac{-x}{2\left( 1+x^2 \right)}+\frac{1}{2+2x}+\frac{1}{2\left( 1+x \right) ^2}.
\end{align*}


\end{solution}

\begin{example}
   分解$\frac{1}{1+x^4}$.
\end{example}
\begin{solution}
   首先我们注意到
   \begin{align*}
      \frac{1}{1+x^4}=\frac{1}{\left( 1+x^2 \right) -2x^2}=\frac{1}{\left( x^2-\sqrt{2}x+1 \right) \left( x^2+\sqrt{2}x+1 \right)}.
   \end{align*}
   然后根据代数学知识我们可以设
   \begin{align}\label{equation:little tech eq3}
      \frac{1}{1+x^4}=\frac{1}{\left( x^2-\sqrt{2}x+1 \right) \left( x^2+\sqrt{2}x+1 \right)}=\frac{Ax+B}{x^2-\sqrt{2}x+1}+\frac{Cx+D}{x^2+\sqrt{2}x+1}.  
   \end{align}
   其中$A,B,C,D$均为常数.
   将上式右边通分可得
   \begin{align*}
      \frac{1}{\left( x^2-\sqrt{2}x+1 \right) \left( x^2+\sqrt{2}x+1 \right)}=\frac{\left( Ax+B \right) \left( x^2+\sqrt{2}x+1 \right) +\left( Cx+D \right) \left( x^2-\sqrt{2}x+1 \right)}{\left( x^2-\sqrt{2}x+1 \right) \left( x^2+\sqrt{2}x+1 \right)}.
   \end{align*}
   比较上式左右两边分子各项系数可得
   \begin{align*}
      \begin{cases}
         B+D=1\\
         A+\sqrt{2}B+C-\sqrt{2}D=0\\
         A\sqrt{2}+B-C\sqrt{2}+D=0\\
         A+C=0\\
      \end{cases}
   \end{align*}
   解得:$A=-\frac{\sqrt{2}}{4},B=\frac{1}{2},C=\frac{\sqrt{2}}{4},D=\frac{1}{2}$.
   
   于是原式可分解为
\begin{align*}
   \frac{1}{1+x^4}=\frac{-\frac{\sqrt{2}}{4}x+\frac{1}{2}}{x^2-\sqrt{2}x+1}+\frac{\frac{\sqrt{2}}{4}x+\frac{1}{2}}{x^2+\sqrt{2}x+1}.
\end{align*}
\end{solution}

\begin{example}
   分解$\frac{x^4}{(1+x)(1+x^2)}$.
\end{example}
\begin{solution}
   先利用多项式除法用$x^4$除以$(1+x)(1+x^2)$得到$x^4=\left( x-1 \right) \left( 1+x \right) \left( 1+x^2 \right) +1$.从而
   \begin{align*}
      \frac{x^4}{\left( 1+x \right) \left( 1+x^2 \right)}=\frac{\left( x-1 \right) \left( 1+x \right) \left( 1+x^2 \right) +1}{\left( 1+x \right) \left( 1+x^2 \right)}=x-1+\frac{1}{\left( 1+x \right) \left( 1+x^2 \right)}.
   \end{align*}
然后再利用多项式分式的分解方法(\hyperref[将多项式分式分解为其部分因式的和常用方法]{待定系数法和留数法})将$\frac{1}{\left( 1+x \right) \left( 1+x^2 \right)}$分解为部分因式的和.最后我们可将原式分解为
\begin{align*}
   \frac{x^4}{\left( 1+x \right) \left( 1+x^2 \right)}=x-1+\frac{1}{2+2x}+\frac{-x+1}{2+2x^2}.
\end{align*}
\end{solution}






\end{document}

